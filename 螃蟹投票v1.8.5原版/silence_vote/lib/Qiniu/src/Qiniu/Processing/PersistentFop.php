<?php
 namespace Qiniu\Processing; use Qiniu\Config; use Qiniu\Http\Client; use Qiniu\Http\Error; use Qiniu\Processing\Operation; final class PersistentFop { private $auth; private $config; public function __construct($auth, $config = null) { goto tuUX4; i_94u: if ($config == null) { goto BEh7u; } goto BKiJg; dBpxD: $this->config = new Config(); goto Nx7q4; BKiJg: $this->config = $config; goto e1zg3; tuUX4: $this->auth = $auth; goto i_94u; TQa0t: BEh7u: goto dBpxD; Nx7q4: jgBn9: goto fI7f0; e1zg3: goto jgBn9; goto TQa0t; fI7f0: } public function execute($bucket, $key, $fops, $pipeline = null, $notify_url = null, $force = false) { goto m00EJ; EeZB6: $params = array("\142\165\143\153\145\x74" => $bucket, "\x6b\145\171" => $key, "\146\157\x70\x73" => $fops); goto N82ZE; GhZHI: if (!($this->config->useHTTPS === true)) { goto EjeKv; } goto iEYet; Uc17_: $headers["\x43\157\x6e\x74\x65\156\x74\x2d\124\x79\x70\x65"] = "\x61\x70\x70\154\x69\x63\141\164\151\157\156\x2f\170\x2d\167\167\167\x2d\x66\157\162\155\55\x75\162\x6c\145\156\143\157\144\145\x64"; goto a0c4i; LFebR: $params["\146\x6f\162\x63\145"] = 1; goto SD9wh; nDxup: if (!$force) { goto X8bZJ; } goto LFebR; Kq4jz: EjeKv: goto Vpd_x; m00EJ: if (!is_array($fops)) { goto P2qyj; } goto pG7sG; XeLFY: W_ida: goto JIDEn; SD9wh: X8bZJ: goto h0yCb; sv5y0: P2qyj: goto EeZB6; FeS1B: if ($response->ok()) { goto W_ida; } goto upzot; JIDEn: $r = $response->json(); goto FYZRR; iEYet: $scheme = "\x68\164\164\160\163\72\x2f\x2f"; goto Kq4jz; h0yCb: $data = http_build_query($params); goto EcB6i; oP_ze: return array($id, null); goto t3vNo; EcB6i: $scheme = "\150\164\x74\x70\72\57\x2f"; goto GhZHI; udQay: $headers = $this->auth->authorization($url, $data, "\141\x70\x70\x6c\151\x63\x61\164\151\157\156\x2f\x78\55\167\x77\167\55\146\157\x72\155\55\165\162\x6c\145\x6e\x63\x6f\x64\x65\144"); goto Uc17_; HetAI: \Qiniu\setWithoutEmpty($params, "\156\157\164\x69\x66\171\x55\122\114", $notify_url); goto nDxup; a0c4i: $response = Client::post($url, $data, $headers); goto FeS1B; upzot: return array(null, new Error($url, $response)); goto XeLFY; pG7sG: $fops = implode("\x3b", $fops); goto sv5y0; N82ZE: \Qiniu\setWithoutEmpty($params, "\160\x69\160\x65\154\151\x6e\x65", $pipeline); goto HetAI; FYZRR: $id = $r["\160\145\x72\163\x69\x73\164\145\156\x74\111\x64"]; goto oP_ze; Vpd_x: $url = $scheme . Config::API_HOST . "\57\160\146\x6f\x70\57"; goto udQay; t3vNo: } public function status($id) { goto Gi17D; NEY3S: if (!($this->config->useHTTPS === true)) { goto HNJLo; } goto jlBH0; Gi17D: $scheme = "\150\x74\x74\x70\72\57\x2f"; goto NEY3S; RwLKf: $url = $scheme . Config::API_HOST . "\x2f\163\164\141\164\x75\x73\57\x67\145\x74\57\160\x72\x65\146\x6f\x70\77\151\x64\75{$id}"; goto gReND; isFwk: if ($response->ok()) { goto ffKun; } goto J10r5; jlBH0: $scheme = "\x68\164\x74\160\163\72\57\x2f"; goto WHI1z; WHI1z: HNJLo: goto RwLKf; gReND: $response = Client::get($url); goto isFwk; nqIzO: return array($response->json(), null); goto wQHcF; J10r5: return array(null, new Error($url, $response)); goto Yue_0; Yue_0: ffKun: goto nqIzO; wQHcF: } }