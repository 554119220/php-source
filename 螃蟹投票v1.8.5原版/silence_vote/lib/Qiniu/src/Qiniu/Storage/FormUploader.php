<?php
 namespace Qiniu\Storage; use Qiniu\Http\Client; use Qiniu\Http\Error; final class FormUploader { public static function put($upToken, $key, $data, $config, $params, $mime, $fname) { goto jKCn2; TFCWU: if (!$params) { goto ZOd7N; } goto dh2v9; dh2v9: foreach ($params as $k => $v) { $fields[$k] = $v; j6AJs: } goto XnNlE; jNazO: if (!($err != null)) { goto WmviB; } goto OS3Au; XnNlE: CGddc: goto GcM65; qgGXO: keiK7: goto LZYHT; OS3Au: return array(null, $err); goto K3u8e; GcM65: ZOd7N: goto ew6_s; zxeX3: $upHost = $config->getUpHost($accessKey, $bucket); goto w9nbe; c8EdB: return array(null, new Error($upHost, $response)); goto RfjRJ; w9nbe: $response = Client::multipartPost($upHost, $fields, "\146\151\x6c\x65", $fname, $data, $mime); goto rcCmd; Ndy07: if ($key === null) { goto qOlqR; } goto ooFlZ; RfjRJ: dLPMT: goto nWflM; jKCn2: $fields = array("\164\157\x6b\145\156" => $upToken); goto Ndy07; w3QeO: $fname = "\x6e\165\154\154\153\145\171"; goto qgGXO; K3u8e: WmviB: goto zxeX3; ooFlZ: $fields["\x6b\x65\171"] = $key; goto Uls3m; LZYHT: $fields["\x63\162\143\x33\x32"] = \Qiniu\crc32_data($data); goto TFCWU; Uls3m: goto keiK7; goto DB5X4; rcCmd: if ($response->ok()) { goto dLPMT; } goto c8EdB; DB5X4: qOlqR: goto w3QeO; ew6_s: list($accessKey, $bucket, $err) = \Qiniu\explodeUpToken($upToken); goto jNazO; nWflM: return array($response->json(), null); goto Dq4fs; Dq4fs: } public static function putFile($upToken, $key, $filePath, $config, $params, $mime) { goto MIenO; bCNnq: sxxfa: goto QY3PN; MIenO: $fields = array("\164\157\153\x65\x6e" => $upToken, "\x66\x69\154\145" => self::createFile($filePath, $mime)); goto G3HXz; aCLvw: if (!$params) { goto iTfl0; } goto GwCdt; F9Wrv: $fields["\153\x65\171"] = $key; goto vN4q7; ACOE3: $headers = array("\x43\157\x6e\x74\145\156\164\x2d\x54\x79\160\x65" => "\155\x75\154\164\x69\x70\141\162\164\x2f\146\x6f\x72\x6d\x2d\144\141\164\141"); goto g3n0f; oVs20: iTfl0: goto wKY61; kVnlt: if ($response->ok()) { goto ZCe2n; } goto XZwtg; XZwtg: return array(null, new Error($upHost, $response)); goto lJWcI; euzQI: return array(null, $err); goto bCNnq; Zcvlx: Yl6Km: goto oVs20; wKY61: $fields["\x6b\145\x79"] = $key; goto ACOE3; vN4q7: bki2P: goto EX6QJ; lJWcI: ZCe2n: goto h575T; PkbYN: $response = Client::post($upHost, $fields, $headers); goto kVnlt; GwCdt: foreach ($params as $k => $v) { $fields[$k] = $v; YFPif: } goto Zcvlx; h575T: return array($response->json(), null); goto JzQ_m; QY3PN: $upHost = $config->getUpHost($accessKey, $bucket); goto PkbYN; EX6QJ: $fields["\x63\x72\143\x33\x32"] = \Qiniu\crc32_file($filePath); goto aCLvw; g3n0f: list($accessKey, $bucket, $err) = \Qiniu\explodeUpToken($upToken); goto iQtjl; G3HXz: if (!($key !== null)) { goto bki2P; } goto F9Wrv; iQtjl: if (!($err != null)) { goto sxxfa; } goto euzQI; JzQ_m: } private static function createFile($filename, $mime) { goto U0qbL; NSqcF: if (empty($mime)) { goto Gsi7p; } goto PIkBg; neHWJ: $value = "\x40{$filename}"; goto NSqcF; PIkBg: $value .= "\73\164\x79\x70\145\x3d" . $mime; goto cGbSw; siBrD: return $value; goto SlUiR; cGbSw: Gsi7p: goto siBrD; U18b7: LFvmv: goto neHWJ; U0qbL: if (!function_exists("\x63\165\x72\154\x5f\x66\151\x6c\145\x5f\x63\x72\145\141\x74\145")) { goto LFvmv; } goto KL2Cf; KL2Cf: return curl_file_create($filename, $mime); goto U18b7; SlUiR: } }