<?php
 goto CHud3; t58k6: $giftdata = array("\162\x69\x64" => $rid, "\x74\151\x64" => $id, "\x75\x6e\151\x61\143\151\144" => $_W["\165\156\151\141\x63\151\144"], "\157\x61\165\x74\x68\137\x6f\160\145\x6e\151\144" => $userinfo["\157\x61\165\x74\150\x5f\x6f\x70\145\156\151\x64"], "\157\160\x65\156\x69\144" => $userinfo["\x6f\160\x65\156\151\x64"], "\141\166\141\x74\x61\162" => $userinfo["\141\x76\141\x74\x61\x72"], "\156\151\143\x6b\x6e\141\x6d\x65" => $userinfo["\156\151\143\153\x6e\141\155\x65"], "\165\163\145\x72\137\151\x70" => $_W["\x63\x6c\151\145\156\x74\151\160"], "\x67\x69\x66\x74\x69\143\x6f\156" => $gift["\147\x69\146\x74\x69\x63\157\x6e"], "\x67\x69\x66\164\143\157\x75\x6e\x74" => $count, "\147\x69\146\x74\x74\x69\164\154\x65" => $gift["\x67\151\x66\x74\164\151\x74\x6c\145"], "\147\151\x66\x74\166\x6f\164\145" => $gift["\147\x69\146\x74\166\157\164\x65"] * $count, "\x66\145\145" => $params["\x66\x65\x65"], "\x70\164\x69\x64" => $tid, "\x69\163\160\x61\x79" => 0, "\x73\x74\x61\x74\165\x73" => 0, "\143\x72\145\x61\164\x65\x74\x69\x6d\145" => time()); goto xuzvS; OX8cN: DKDWF: goto a8RbS; uCkgU: goto GTqBB; goto gk20k; gavNZ: if (!(!empty($paylog) && $paylog["\163\164\141\x74\165\163"] != "\60")) { goto v3yQ1; } goto ElS5A; Buffj: die(json_encode(array("\145\162\x72\157\162" => "\x31", "\155\163\x67" => "\346\x9c\200\xe5\244\x9a\350\277\230\xe8\x83\xbd\351\x80\x81" . $diamondsy . "\xe5\x85\x83\xe7\244\xbc\347\x89\xa9\357\xbc\x8c\xe4\277\xae\346\224\271\345\x90\216\xe5\x86\215\351\x80\201\xef\274\x81"))); goto AE1El; gk20k: ufe8F: goto B5QUx; dhZeE: goto mvAfy; goto GruAc; aS3iz: GBYe5: goto nDLwr; q1mGg: $wechat_payment = $setting["\160\141\x79\155\x65\156\x74"]["\x77\x65\143\150\x61\x74"]; goto iY_1i; FGJFB: IU9s4: goto trEUd; WIqqZ: message(error(1, $wechat_payment_params), '', "\141\152\141\x78", false); goto rJQ9i; iY_1i: $account = pdo_get("\141\143\143\x6f\x75\x6e\x74\137\167\x65\143\x68\x61\x74\x73", array("\141\143\x69\144" => $wechat_payment["\x61\143\143\x6f\165\156\164"]), array("\x6b\145\x79", "\163\145\x63\162\x65\x74")); goto RpRCZ; PJXsH: die(json_encode(array("\x65\x72\x72\157\x72" => "\61", "\x6d\x73\x67" => "\345\xb7\262\347\273\x93\346\x9d\x9f\346\212\225\xe7\xa5\xa8\357\xbc\201"))); goto Qu2R2; YnUyw: $params_b = array("\x74\151\x64" => $paylog["\164\151\144"], "\x66\x65\x65" => $paylog["\x63\x61\x72\x64\137\x66\x65\145"], "\165\163\145\162" => $paylog["\x6f\x70\x65\156\x69\144"], "\x74\x69\x74\x6c\x65" => urldecode($paylog["\x74\x69\164\x6c\x65"]), "\x75\x6e\x69\x6f\156\164\151\x64" => $paylog["\165\x6e\x69\x6f\156\x74\151\144"]); goto eQjkX; rYjr2: $condition .= "\40\101\x4e\104\x20\163\164\x61\x74\165\163\75\61\40"; goto cIo3T; rJRU7: bMckN: goto WxTYx; FXOzT: $voteuser = pdo_fetch("\x53\x45\114\105\103\124\x20\x2a\40\x46\x52\117\x4d\x20" . tablename($this->tablevoteuser) . "\40\x57\110\x45\x52\105\40\162\x69\x64\x20\x3d\x20\72\162\x69\144\x20\x41\116\x44\x20\x20\x69\144\x20\75\x20\x3a\x69\144\x20", array("\x3a\x72\x69\144" => $rid, "\72\151\144" => $id)); goto d9V2a; RpRCZ: $wechat_payment["\141\x70\160\x69\144"] = $account["\x6b\145\x79"]; goto nqTWb; FUwgA: if (intval($wechat_payment["\x73\167\x69\164\143\x68"]) == 2 || intval($wechat_payment["\x73\167\151\164\x63\150"]) == 3) { goto ufe8F; } goto I2_DZ; hmARU: $paylog = pdo_get("\x63\157\x72\145\x5f\x70\141\171\154\x6f\x67", array("\x75\x6e\x69\x61\x63\151\144" => $_W["\165\x6e\x69\x61\x63\x69\144"], "\155\x6f\144\165\154\145" => $getparams["\x6d\157\x64\x75\x6c\x65"], "\x74\151\x64" => $getparams["\x74\151\144"])); goto UnnPq; fM7Y2: goto XwOTy; goto MUoeT; yGZAI: if (!($reply["\x76\157\164\145\145\x6e\x64\x74\x69\155\145"] < time())) { goto iu16U; } goto PJXsH; Gw_zk: if (!($reply["\x73\164\141\x72\x74\x74\x69\155\x65"] > time())) { goto xxA16; } goto rJ52B; KHI73: die(json_encode(array("\145\x72\162\157\x72" => "\x31", "\155\x73\147" => "\346\xb4\273\xe5\x8a\xa8\xe5\xb7\xb2\xe7\273\x8f\347\273\x93\346\x9d\237"))); goto GeO_u; th7Qx: die(json_encode(array("\x65\x72\x72\x6f\162" => "\x31", "\x6d\x73\x67" => "\xe6\227\xa0\346\263\225\350\x8e\xb7\xe5\x8f\x96\117\120\116\105\x49\104\357\274\214\xe8\xaf\267\346\x9f\xa5\xe7\234\213\xe6\x98\xaf\xe5\x90\246\xe5\x80\237\xe6\x9d\x83\xe6\210\226\xe9\x85\x8d\xe7\xbd\256\xe5\xa5\275\xe5\x85\254\xe4\274\x97\345\x8f\267\357\274\x81\x28\x30\61\x30\61\51"))); goto OX8cN; gQ2It: mvAfy: goto tXG0t; h4WsW: exit(json_encode(array("\x65\162\162\x6f\162" => "\x31", "\x6d\163\x67" => "\346\262\xa1\346\x9c\x89\350\xaf\245\347\xbc\x96\xe5\217\267\347\224\xa8\xe6\210\267\357\274\214\350\257\xb7\346\243\x80\xe6\237\245\345\x90\216\xe5\206\215\xe8\276\223\345\x85\245\357\274\x81"))); goto TfMx5; BwoyA: exit(json_encode(array("\145\x72\162\x6f\x72" => "\61", "\x6d\163\x67" => "\xe9\x80\x89\xe6\x89\x8b\344\277\241\346\x81\257\xe8\277\x98\xe5\234\250\345\256\241\xe6\xa0\270\xe4\270\255"))); goto rAB_G; gObe0: if (!($voteuser["\x6c\x6f\143\153\164\x69\x6d\x65"] > time())) { goto l9Pql; } goto lgez5; gwVwt: $_W["\165\x6e\151\x61\x63\x69\144"] = $paylog["\x75\x6e\x69\141\143\151\144"]; goto XVqMO; fOV1q: $params = array("\x74\151\x64" => $tid, "\157\x72\144\145\x72\163\x6e" => $tid, "\164\151\164\154\145" => "\346\x8a\x95\347\245\250\351\200\x81\347\xa4\274\xe4\xbb\230\346\xac\276", "\146\x65\x65" => sprintf("\x25\x2e\62\146", $gift["\147\x69\x66\164\160\162\151\x63\x65"] * $count), "\x75\163\145\x72" => $_W["\155\x65\155\142\x65\x72"]["\165\x69\144"], "\x6d\157\144\x75\154\145" => $this->module["\x6e\x61\x6d\145"]); goto t58k6; WxTYx: $gift = $giftdata[$_GPC["\147\x69\146\164\x69\x64"]]; goto xU3_6; ROgML: is_weixin(); goto PyRHc; CHud3: define("\111\116\x5f\115\117\102\111\114\x45", true); goto eMmM0; rxy99: die(json_encode(array("\x65\162\162\x6f\x72" => "\x31", "\155\x73\x67" => "\xe6\234\200\345\xa4\x9a\xe8\x83\xbd\xe9\200\201" . $reply["\145\x76\x65\x72\171\157\x6e\x65\144\x69\x61\155\157\156\144"] . "\345\x85\x83\xe7\xa4\xbc\xe7\211\251\357\274\x8c\347\xbb\231\345\205\266\344\273\x96\xe4\xba\xba\347\x82\xb9\xe6\x9c\272\344\xbc\x9a\xe5\x90\247\xef\xbc\x81"))); goto fM7Y2; Vz2gx: j3x2Q: goto Gw_zk; a8RbS: $reply = pdo_fetch("\x53\105\x4c\x45\x43\x54\40\x72\151\144\x2c\x74\151\x74\154\145\x2c\x73\x68\x61\162\145\x74\x69\x74\x6c\145\x2c\x73\x68\x61\x72\145\x69\155\147\54\x73\150\x61\162\x65\x64\x65\163\x63\54\143\157\x6e\146\151\147\54\x67\151\146\x74\x64\141\164\x61\x2c\x73\164\141\162\x74\x74\x69\x6d\145\54\x65\156\x64\164\151\x6d\x65\54\x61\x70\x73\164\141\162\164\x74\x69\x6d\145\x2c\x61\160\145\x6e\x64\x74\x69\x6d\x65\x2c\166\x6f\164\145\x73\x74\x61\x72\164\164\151\x6d\x65\54\166\157\164\145\145\x6e\x64\164\x69\x6d\145\x2c\163\164\141\164\165\x73\x20\x20\x46\122\117\x4d\40" . tablename($this->tablereply) . "\x20\x57\110\105\x52\x45\40\162\151\x64\40\x3d\x20\72\162\151\144\40", array("\x3a\x72\x69\x64" => $rid)); goto WnQgR; ElS5A: die(json_encode(array("\x65\162\162\x6f\x72" => "\x31", "\155\x73\x67" => "\xe8\277\x99\344\xb8\252\350\256\xa2\xe5\x8d\x95\xe5\xb7\262\347\273\x8f\346\224\257\344\273\230\xe6\x88\220\345\x8a\x9f\54\x20\344\xb8\215\xe9\x9c\x80\350\xa6\201\xe9\x87\x8d\345\xa4\x8d\xe6\x94\xaf\xe4\273\x98\56"))); goto KC4Nn; MJVA1: die(json_encode(array("\145\x72\162\157\x72" => "\61", "\x6d\163\x67" => "\xe6\264\273\345\x8a\xa8\345\267\xb2\xe7\xa6\201\xe7\224\250"))); goto aS3iz; jYnsK: $id = intval($_GPC["\x69\144"]); goto cbZLu; eQjkX: $wechat_payment["\157\160\145\x6e\x69\x64"] = $_SESSION["\x6f\141\x75\164\x68\x5f\157\160\x65\x6e\151\144"]; goto FUwgA; qRH83: pdo_update("\143\157\x72\145\x5f\160\141\171\x6c\x6f\147", array("\157\160\145\156\x69\x64" => $_W["\157\x70\x65\x6e\151\x64"], "\x74\141\x67" => iserializer(array("\141\x63\151\x64" => $_W["\141\143\x69\144"], "\x75\151\144" => $_W["\x6d\x65\x6d\142\145\x72"]["\165\x69\144"]))), array("\160\x6c\x69\x64" => $paylog["\160\x6c\x69\144"])); goto gwVwt; CNs5U: if (!($gift["\x67\x69\x66\x74\x70\x72\x69\x63\145"] * $count > $diamondsy && !empty($reply["\x65\x76\x65\x72\x79\157\156\x65\x64\151\x61\155\157\x6e\144"]))) { goto gyHJD; } goto NnNbo; NnNbo: if ($diamondsy > 0) { goto pEQEV; } goto rxy99; NRCbp: $oauth_openid = $userinfo["\157\x61\x75\164\x68\137\157\160\145\x6e\x69\x64"]; goto aCGzJ; I2_DZ: unset($wechat_payment["\x73\x75\x62\x5f\x6d\x63\x68\x5f\x69\144"]); goto Tbe0X; B5QUx: $wechat_payment_params = wechat_proxy_build($params_b, $wechat_payment); goto fFjgI; pQdzA: if (!empty($voteuser)) { goto iziJR; } goto h4WsW; dmsSL: die(json_encode(array("\145\x72\162\x6f\162" => "\x31", "\x6d\x73\147" => "\xe5\217\202\346\225\260\351\x94\x99\xe8\xaf\257"))); goto Vz2gx; qNk6U: xxA16: goto ZMvSe; Wv_gr: $paylog["\x70\154\151\x64"] = pdo_insertid(); goto q1qKs; QG2Rr: $paylog["\164\151\x74\x6c\145"] = $getparams["\x74\x69\164\x6c\145"]; goto fyC2r; nqTWb: $wechat_payment["\163\x65\x63\x72\x65\164"] = $account["\163\145\143\x72\x65\164"]; goto YnUyw; eMmM0: global $_W, $_GPC; goto ROgML; QyGtB: if (!(!empty($paylog) && empty($paylog["\165\156\x69\x6f\x6e\164\x69\144"]))) { goto z6pnk; } goto rWEtY; cIo3T: TJvYO: goto kkGam; D5NYx: if (is_error($wechat_payment_params)) { goto en2P2; } goto JajmE; fFjgI: GTqBB: goto D5NYx; fyC2r: load()->model("\160\141\x79\155\145\156\164"); goto qRH83; Vord9: $getparams = array("\x6d\145\164\x68\x6f\144" => "\167\145\x63\x68\141\x74", "\164\151\144" => $tid, "\x74\x69\x74\154\x65" => "\xe6\224\257\344\273\230" . $params["\146\145\145"] . "\345\205\x83", "\146\145\145" => $params["\146\x65\145"], "\x6d\x6f\x64\165\154\145" => "\163\151\x6c\145\x6e\143\x65\x5f\166\x6f\x74\x65"); goto IPeEL; PyRHc: $rid = intval($_GPC["\162\151\144"]); goto jYnsK; V9mn0: gyHJD: goto c9690; JajmE: message(error(0, $wechat_payment_params), '', "\x61\x6a\x61\x78", false); goto nTrZZ; Qu2R2: iu16U: goto dhZeE; cbZLu: $ty = $_GPC["\x74\x79"]; goto EQyS8; nTrZZ: goto OQIYP; goto sCdHs; UnnPq: if (!empty($paylog)) { goto b7k2H; } goto szUbh; kkGam: $jointotal = pdo_fetchcolumn("\123\x45\114\105\103\x54\40\x43\117\x55\116\124\50\151\144\x29\x20\x46\122\117\x4d\40" . tablename($this->tablevoteuser) . "\40\x57\x48\105\x52\x45\40\x20\40\x72\151\144\40\x3d\40\x3a\x72\151\144\x20\40" . $condition, array("\x3a\162\151\144" => $rid)); goto ERnSA; xuzvS: if (!pdo_insert($this->tablegift, $giftdata)) { goto AO7k_; } goto Vord9; d9V2a: if (!empty($voteuser["\163\164\x61\x74\x75\x73"])) { goto pkM5n; } goto BwoyA; lgez5: exit(json_encode(array("\145\162\x72\x6f\162" => "\61", "\155\163\147" => "\350\xaf\245\xe7\224\xa8\xe6\x88\267\xe6\x8a\225\xe7\xa5\250\350\242\253\351\224\x81\345\xae\x9a\x2c\346\x81\242\xe5\xa4\215\xe6\227\xb6\351\x97\264\357\xbc\232\x3c\142\x72\76" . date("\x59\x2d\155\x2d\144\x20\110\72\151\72\163", $voteuser["\154\157\x63\x6b\164\151\155\x65"])))); goto Vx6YQ; ERnSA: if (!($reply["\x6d\151\x6e\156\165\155\x70\145\157\160\154\x65"] > $jointotal)) { goto A0XgL; } goto Bw_zb; MUoeT: pEQEV: goto Buffj; HKYGH: if (!empty($reply["\x73\x74\x61\164\165\x73"])) { goto GBYe5; } goto MJVA1; rAB_G: pkM5n: goto pQdzA; o1_U9: $condition = ''; goto Ox8Rd; zgAna: if (!empty($reply["\x73\164\x61\x74\x75\x73"])) { goto IU9s4; } goto S0vye; GOaZR: $moduleid = empty($moduleid) ? "\x30\60\60\60\60\x30" : sprintf("\45\x30\x36\144", $moduleid); goto JTOP8; QG4JW: $userinfo = $this->oauthuser; goto NRCbp; C1TXH: pdo_insert("\143\x6f\x72\145\x5f\x70\x61\171\x6c\x6f\147", $paylog); goto Wv_gr; GccIn: A0XgL: goto rJRU7; GeO_u: CeJw2: goto HKYGH; szUbh: $paylog = array("\x75\x6e\x69\141\x63\x69\x64" => $_W["\165\156\151\x61\x63\151\144"], "\141\143\151\144" => $_W["\141\143\x69\144"], "\x6f\160\145\156\x69\x64" => $userinfo["\x6f\141\x75\x74\150\137\157\160\145\156\x69\144"], "\155\157\x64\165\x6c\x65" => $getparams["\155\x6f\x64\x75\x6c\x65"], "\164\x69\144" => $getparams["\164\151\144"], "\165\156\151\157\x6e\164\151\x64" => $uniontid, "\146\x65\145" => $getparams["\146\145\x65"], "\x63\x61\x72\144\x5f\x66\x65\x65" => $getparams["\146\145\145"], "\x73\x74\x61\164\165\163" => "\x30", "\151\163\137\x75\x73\x65\143\x61\162\x64" => "\60"); goto C1TXH; tBKYs: unset($reply["\143\157\156\x66\151\147"]); goto zgAna; rJ52B: die(json_encode(array("\145\x72\x72\157\162" => "\x31", "\x6d\163\x67" => "\xe6\264\xbb\345\212\250\xe8\277\230\346\xb2\241\xe6\234\x89\xe5\274\200\xe5\xa7\x8b"))); goto qNk6U; L2cwm: $count = empty($count) ? 1 : $count; goto QG4JW; tXG0t: $giftdata = @unserialize($reply["\x67\x69\146\164\144\x61\164\x61"]); goto FXOzT; XVqMO: $_W["\x6f\x70\145\156\151\x64"] = $paylog["\x6f\160\x65\156\151\x64"]; goto KI1WR; KC4Nn: v3yQ1: goto QyGtB; JTOP8: $uniontid = date("\x59\155\144\110\151\x73") . $moduleid . random(8, 1); goto hmARU; rJQ9i: OQIYP: goto wpQFu; c9690: $tid = date("\131\x6d\144\x48\151") . random(12, 1); goto fOV1q; Tbe0X: $wechat_payment_params = wechat_build($params_b, $wechat_payment); goto uCkgU; TfMx5: iziJR: goto gObe0; Bw_zb: die(json_encode(array("\x65\162\162\157\x72" => "\61", "\x6d\163\147" => "\346\264\xbb\345\212\250\350\xbf\230\346\234\xaa\xe5\274\x80\345\247\x8b\xef\xbc\214\xe6\262\xa1\346\x9c\211\xe8\xbe\xbe\345\x88\260\346\x9c\200\345\xb0\x8f\xe5\x8f\202\350\xb5\233\xe4\272\272\xe6\225\xb0\xef\xbc\201"))); goto GccIn; IPeEL: $moduleid = pdo_getcolumn("\155\157\x64\x75\154\145\163", array("\x6e\141\155\x65" => $getparams["\155\157\144\x75\154\x65"]), "\x6d\x69\144"); goto GOaZR; KI1WR: $setting = uni_setting($_W["\165\156\151\x61\143\151\x64"], array("\x70\x61\171\x6d\x65\156\x74")); goto q1mGg; iMuXm: if (empty($reply["\x6d\x69\156\156\165\155\160\145\x6f\160\154\145"])) { goto bMckN; } goto o1_U9; S0vye: die(json_encode(array("\x65\162\x72\x6f\x72" => "\x31", "\155\163\x67" => "\xe6\264\xbb\345\212\250\xe5\xb7\262\xe7\246\201\347\x94\250"))); goto FGJFB; Ox8Rd: if (!($reply["\151\163\143\x68\145\x63\153\x65\x64"] == 1)) { goto TJvYO; } goto rYjr2; q1qKs: b7k2H: goto gavNZ; AE1El: XwOTy: goto V9mn0; nDLwr: if ($reply["\166\x6f\164\145\x73\x74\x61\x72\164\x74\x69\x6d\145"] > time()) { goto JtvMb; } goto yGZAI; GruAc: JtvMb: goto PNwOd; EQyS8: $count = intval($_GPC["\143\x6f\165\x6e\164"]); goto L2cwm; Vx6YQ: l9Pql: goto iMuXm; rWEtY: pdo_update("\x63\x6f\162\x65\137\160\x61\x79\154\157\147", array("\x75\x6e\151\157\156\164\x69\144" => $uniontid), array("\x70\154\x69\144" => $paylog["\160\154\x69\x64"])); goto cAwyi; PNwOd: die(json_encode(array("\x65\162\162\x6f\x72" => "\61", "\x6d\163\147" => "\xe6\234\252\345\274\200\xe5\247\213\xe6\x8a\225\347\xa5\xa8\357\xbc\x81"))); goto gQ2It; trEUd: if (!empty($reply)) { goto j3x2Q; } goto dmsSL; xU3_6: $diamondsy = $reply["\145\166\x65\162\171\x6f\x6e\145\x64\151\x61\x6d\157\x6e\144"] - $voteuser["\x67\x69\x66\164\x63\157\165\156\164"]; goto CNs5U; cAwyi: z6pnk: goto QG2Rr; ZMvSe: if (!($reply["\145\156\144\164\151\x6d\x65"] < time())) { goto CeJw2; } goto KHI73; sCdHs: en2P2: goto WIqqZ; aCGzJ: if (!empty($oauth_openid)) { goto DKDWF; } goto th7Qx; WnQgR: $reply = @array_merge($reply, unserialize($reply["\x63\157\156\x66\x69\x67"])); goto tBKYs; wpQFu: AO7k_: