<?php
 goto sNnuj; BorL3: if (!file_exists(ATTACHMENT_ROOT . $poster . "\161\x72\56\x70\156\147")) { goto zxI0n; } goto oV0WD; CNgXB: Bd2hH: goto tET0j; x4w2T: UiLgM: goto gaEpC; UDwdd: $prefix = substr(md5($this->module["\x63\x6f\x6e\x66\151\x67"]["\x74\151\143\153\x65\x74"]), 0, 5); goto ovxkI; j783j: Uz_mL: goto R82P8; Jkazj: if ($reply["\141\160\163\x74\x61\162\164\x74\151\x6d\x65"] > time()) { goto BTc02; } goto heS_m; dJIJU: $id = @$voteuser["\151\x64"]; goto lvf99; U_7Lt: $posterData = json_decode($reply["\142\151\154\x6c\x5f\144\x61\164\141"], true); goto j9ykU; vSAdG: $posterBgImage = tomedia($reply["\142\151\x6c\154\137\x62\x67"]); goto U_7Lt; sH4ce: BTc02: goto tkFzq; oUSLi: vote_message("\347\xb3\273\347\273\x9f\xe6\217\x90\xe7\244\xba", "\345\x8f\x82\xe6\x95\xb0\351\224\231\xe8\257\xaf\xef\274\x81", $this->createMobileUrl("\151\156\x64\x65\x78", array("\162\x69\144" => $rid)), "\x65\162\x72\x6f\162"); goto x4w2T; aybp2: imagefill($background, 0, 0, $color); goto ONXJp; d7NdS: vote_message("\xe7\263\273\347\xbb\x9f\xe6\217\220\347\xa4\xba", "\xe6\x9c\252\xe5\274\x80\345\220\257\xe6\265\267\346\212\xa5\xe5\x8a\x9f\xe8\203\275\357\274\x8c\350\xaf\xb7\347\256\241\347\220\x86\345\x91\x98\xe8\207\xb3\345\x90\x8e\345\x8f\xb0\347\xbc\226\xe8\xbe\x91\346\264\273\345\x8a\250\xe5\xbc\x80\345\220\xaf\357\274\201", $this->createMobileUrl("\151\156\x64\145\x78", array("\x72\151\144" => $rid)), "\x65\162\x72\157\162"); goto CNgXB; YH5z8: $retgd = extension_loaded("\147\144"); goto a8BZG; DMgUP: xSrYf: goto ObAUv; uMi0Y: $myvoteid = $voteuser["\151\x64"]; goto g6uvK; Bblu4: $color = imagecolorallocate($background, 202, 201, 201); goto aybp2; MDTcQ: $aptime = 2; goto DMgUP; vlzax: $avatar = tomedia(@$voteuser["\141\x76\141\164\141\162"]); goto vSAdG; oV0WD: zxI0n: goto nPIs5; eraeX: d_2B4: goto j783j; tkFzq: $aptime = 1; goto ur0bQ; lZ1zY: $id = $_GPC["\x69\x64"]; goto SJ0rL; wdsAS: if (!empty($voteuser)) { goto UiLgM; } goto oUSLi; nPIs5: goto Uz_mL; goto eraeX; cU3yg: ImageDestroy($background); goto BorL3; Un4Xr: if ($prefix) { goto CMcuI; } goto UDwdd; jpqsb: SXwQ0: goto q04eg; gaEpC: $posterimg = "\57\151\x6d\141\x67\x65\163\x2f" . $_W["\x75\x6e\x69\141\143\x69\144"] . "\57\163\151\154\x65\x6e\143\145\137\166\157\x74\x65\57" . $rid . "\x2f"; goto Jha37; tET0j: unset($reply["\143\157\x6e\146\x69\x67"]); goto x3zX2; ovxkI: CMcuI: goto tFPSR; fVHtr: $voteuser = pdo_fetch("\x53\105\x4c\105\x43\124\x20\52\x20\x46\x52\x4f\x4d\x20" . tablename($this->tablevoteuser) . "\x20\x57\x48\105\122\x45\x20\165\156\x69\x61\x63\x69\144\x20\x3d\x20\72\x75\x6e\151\141\143\x69\144\x20\x41\116\x44\x20\151\x64\x3d\x3a\x69\x64\x20\x41\x4e\104\x20\x72\x69\144\75\x3a\162\x69\x64\40", array("\72\165\156\x69\x61\x63\151\x64" => $_W["\165\x6e\151\x61\143\x69\144"], "\72\151\x64" => $id, "\72\x72\151\x64" => $rid)); goto QxNda; sNnuj: defined("\111\x4e\x5f\111\x41") or exit("\101\143\143\145\163\x73\x20\104\145\x6e\151\145\144"); goto YH5z8; dLp4Y: load()->func("\x66\151\x6c\145"); goto wl7Wp; ExyBY: $reply["\163\164\171\154\x65"] = @unserialize($reply["\163\164\x79\154\145"]); goto rELET; JNn7m: exit; goto mgUuP; icjUQ: VTuou: goto aF4K_; a8BZG: if (!empty($retgd)) { goto VrpiD; } goto VYKBP; QxNda: if (empty($voteuser)) { goto TAdKZ; } goto uMi0Y; ur0bQ: goto xSrYf; goto b3VoT; ObAUv: if (!empty($reply["\x69\x73\x70\157\163\x74\x65\x72"])) { goto Bd2hH; } goto d7NdS; WKi8c: foreach ($posterData as $data) { goto sEN5i; vBCvU: imagejpeg($background, ATTACHMENT_ROOT . $poster); goto JGkQS; DaKDo: XnYtj: goto J7WtG; wrqxP: if (!($data["\164\171\160\145"] != "\x6e\x61\x6d\145" && $data["\x74\x79\x70\145"] != "\156\x75\155\x62\145\x72")) { goto zMZI0; } goto P1s5c; P1s5c: $resource = $this->get_resource($pic_path); goto Ahb3L; sEN5i: switch ($data["\164\171\x70\x65"]) { case "\x62\x61\147": $pic_path = $posterBgImage; goto A1HLt; case "\x69\x6d\147": $pic_path = $img; goto A1HLt; case "\141\x76\141\x74\141\x72": $pic_path = $avatar; goto A1HLt; case "\x6e\141\155\145": case "\156\x75\x6d\x62\x65\x72": goto AKpPD; YNZoJ: $color = m("\143\x6f\x6d\x6d\157\156")->hex2rgb($data["\143\x6f\x6c\157\162"]); goto fG6T2; FhbIr: $name = mb_convert_encoding($text, "\x68\164\155\154\55\x65\x6e\164\151\x74\x69\145\163", "\125\124\x46\x2d\70"); goto EQENU; S0VFx: goto A1HLt; goto NHZ5u; r2yCI: $dst = imagecreatefromstring(file_get_contents($background_num)); goto YNZoJ; RHTEi: $text = $nickname; goto aS4Wt; PwfBw: $background_num = ATTACHMENT_ROOT . $poster; goto r2yCI; OVySA: Nv0sT: goto uTfp9; S0nrv: $font = MODULE_ROOT . "\x2f\154\151\142\x2f\x66\157\x6e\x74\57\x66\x6f\156\x74\x2e\x74\x74\146"; goto FhbIr; uTfp9: $text = $voteuser["\x6e\x6f\151\x64"]; goto RZUt0; RZUt0: lk6wI: goto PwfBw; fG6T2: $black = ImageColorAllocate($dst, $color["\x72"], $color["\147"], $color["\142"]); goto S0nrv; zsps1: $a = imagejpeg($dst, ATTACHMENT_ROOT . $poster); goto S0VFx; aS4Wt: goto lk6wI; goto OVySA; AKpPD: if ($data["\164\x79\x70\x65"] == "\x6e\x75\155\142\x65\162") { goto Nv0sT; } goto RHTEi; EQENU: imagettftext($dst, $data["\163\x69\172\x65"] * 1.5, 0, $data["\154\x65\x66\164"] * 2, $data["\x74\x6f\160"] * 2 + $data["\x73\151\x7a\145"] * 2, $black, $font, $name); goto zsps1; NHZ5u: case "\161\162": goto K3MtX; Vpck7: JDFEp: goto m6iZ5; P_EHq: Qs5aQ: goto UVqx2; TyQk2: if ($_W["\141\x63\143\157\165\156\x74"]["\154\145\166\145\154"] == 4) { goto r7Hih; } goto TbBMz; A_YNQ: $kankan = $pic_path; goto P8eYX; OCG27: $scene_id = $acid . "\60\60" . $rid . "\x30\x30" . $id; goto NwpuL; RlxjM: QRcode::png($qrurl, $QR_path, QR_ECLEVEL_L, 5, 3, true); goto R5mkS; JokCH: $barcode["\x61\x63\164\151\157\156\x5f\151\156\146\x6f"]["\163\143\145\156\145"]["\163\x63\145\x6e\145\137\x69\144"] = $scene_id; goto PWZGy; V2Kzf: $acid = intval($_W["\141\143\x69\x64"]); goto oO8Hz; mdELG: $qrurl = $result["\165\162\154"]; goto Vpck7; R5mkS: $pic_path = tomedia($poster . "\x71\x72\x2e\160\x6e\147"); goto A_YNQ; dON2Z: oiy7n: goto u0WmB; P8eYX: goto A1HLt; goto DJiIw; oWLLL: goto u7EzD; goto o3bJH; En4Jr: goto JDFEp; goto P_EHq; d1Pub: $qrurl = $_W["\163\x69\x74\x65\x72\157\x6f\x74"] . "\141\160\x70\57" . $this->createMobileUrl("\x76\x69\x65\167", array("\x72\x69\x64" => $rid, "\x69\144" => $voteuser["\x69\x64"])); goto RlxjM; NwpuL: $qrcode = pdo_fetch("\x53\105\114\105\x43\124\x20\165\162\154\40\106\x52\117\115\x20" . tablename("\161\162\143\x6f\x64\145") . "\40\127\110\x45\x52\105\40\141\x63\151\x64\40\75\x20\72\141\143\151\x64\40\x41\x4e\x44\40\x71\x72\x63\151\x64\75\72\x71\162\143\151\x64\40\x41\x4e\x44\x20\155\x6f\144\x65\154\40\75\x20\x27\x31\47\40\x41\116\104\x20\164\x79\x70\145\x20\x3d\40\47\x73\143\145\x6e\x65\x27\x20\x4f\122\x44\x45\x52\x20\x42\x59\40\x71\162\143\x69\144\40\104\x45\123\x43\40\114\111\x4d\x49\124\x20\61", array("\72\141\x63\x69\144" => $acid, "\x3a\161\162\143\151\144" => $scene_id)); goto yqTHE; En3Zv: $barcode["\141\x63\164\151\157\156\x5f\156\141\155\145"] = "\x51\122\137\123\x43\x45\116\x45"; goto coJ5v; K3MtX: require_once IA_ROOT . "\57\x66\x72\x61\155\x65\x77\x6f\x72\x6b\x2f\154\151\x62\x72\141\x72\171\x2f\x71\x72\143\x6f\x64\x65\57\x70\150\160\x71\162\x63\157\144\x65\x2e\x70\x68\x70"; goto Bg5mt; o3bJH: r7Hih: goto yhihC; u0WmB: $qrurl = $qrcode["\165\x72\154"]; goto THLAa; ISaxX: if (!is_error($result)) { goto Qs5aQ; } goto mfEqG; sH91v: u7EzD: goto d1Pub; mfEqG: $qrurl = $_W["\x73\151\164\x65\162\157\157\x74"] . "\141\160\x70\x2f" . $this->createMobileUrl("\x76\151\x65\167", array("\162\151\144" => $rid, "\x69\144" => $voteuser["\x69\144"])); goto En4Jr; Bg5mt: $QR_path = ATTACHMENT_ROOT . $poster . "\x71\162\56\160\x6e\x67"; goto TyQk2; THLAa: tDw3Y: goto sH91v; yhihC: $barcode = array("\145\x78\x70\x69\162\x65\137\163\145\x63\x6f\156\144\x73" => '', "\141\143\164\x69\157\x6e\137\156\141\x6d\x65" => '', "\x61\x63\164\151\x6f\x6e\137\151\156\x66\x6f" => array("\x73\x63\145\156\x65" => array())); goto V2Kzf; yqTHE: if (!empty($qrcode)) { goto oiy7n; } goto JokCH; TbBMz: $qrurl = $_W["\x73\x69\x74\x65\162\157\x6f\164"] . "\x61\x70\160\x2f" . $this->createMobileUrl("\166\x69\x65\167", array("\x72\151\144" => $rid, "\151\144" => $voteuser["\151\x64"])); goto oWLLL; PWZGy: $barcode["\145\x78\x70\x69\162\x65\x5f\x73\145\143\x6f\156\144\163"] = 2592000; goto En3Zv; oO8Hz: $uniacccount = WeAccount::create($acid); goto OCG27; UVqx2: $insert = array("\165\156\151\x61\143\151\144" => $_W["\165\x6e\x69\141\143\151\x64"], "\x61\x63\x69\144" => $acid, "\161\162\x63\151\144" => $barcode["\x61\143\x74\151\x6f\x6e\137\x69\156\146\157"]["\163\143\x65\x6e\x65"]["\163\143\145\156\x65\137\151\x64"], "\163\143\x65\x6e\145\137\163\164\162" => $barcode["\x61\143\164\x69\157\x6e\x5f\x69\x6e\x66\157"]["\163\x63\145\156\145"]["\x73\143\145\x6e\x65\x5f\163\164\x72"], "\x6b\x65\171\x77\157\x72\144" => $reply["\160\157\163\164\x65\162\x6b\x65\171"] . $voteuser["\x6e\157\x69\144"], "\156\141\155\145" => "\346\212\x95\xe7\245\250\346\xb5\267\346\212\245" . $reply["\151\x64"] . $nickname . $id, "\155\x6f\x64\145\154" => 1, "\164\x69\x63\153\145\x74" => $result["\164\151\x63\x6b\x65\164"], "\165\x72\x6c" => $result["\165\x72\154"], "\145\x78\160\x69\x72\x65" => $result["\145\x78\160\151\x72\x65\137\163\x65\143\x6f\x6e\x64\x73"], "\x63\x72\x65\x61\164\x65\x74\151\x6d\x65" => TIMESTAMP, "\163\164\141\x74\165\x73" => "\x31", "\x74\171\160\145" => "\163\x63\x65\x6e\145"); goto JaSbf; m6iZ5: goto tDw3Y; goto dON2Z; coJ5v: $result = $uniacccount->barCodeCreateDisposable($barcode); goto ISaxX; JaSbf: pdo_insert("\x71\x72\x63\157\144\145", $insert); goto mdELG; DJiIw: } goto sWrdV; sWrdV: AqjK0: goto qYvg8; Ahb3L: imagecopyresized($background, $resource, $data["\x6c\x65\x66\x74"] * 2, $data["\x74\x6f\x70"] * 2, 0, 0, $data["\167\151\x64\x74\x68"] * 2, $data["\x68\x65\151\147\x68\164"] * 2, imagesx($resource), imagesy($resource)); goto vBCvU; rK0TB: zMZI0: goto DaKDo; JGkQS: ImageDestroy($resource); goto rK0TB; qYvg8: A1HLt: goto wrqxP; J7WtG: } goto ThL_8; VYKBP: echo "\xe6\262\xa1\346\234\211\345\220\257\xe7\x94\xa8\x47\x44\54\40\xe6\x97\240\346\263\x95\xe7\224\x9f\346\210\x90\xe6\265\267\xe6\x8a\xa5\357\274\214\350\257\xb7\xe9\x85\x8d\xe7\275\xae\x70\x68\160\347\216\xaf\xe5\242\203\346\224\xaf\xe6\x8c\201\107\104\xe6\213\223\345\261\225\345\206\215\xe8\257\x95\343\200\x82"; goto JNn7m; heS_m: if ($reply["\x61\160\145\156\144\164\151\x6d\145"] < time()) { goto mS22k; } goto S46bo; D6y7G: if ($reply["\x68\164\155\x6c\155\x6f\x64\145"] == 0) { goto SXwQ0; } goto o0eoB; j9ykU: $pigfilearray = getimagesize($posterBgImage); goto SYtQq; R82P8: $_W["\160\141\x67\145"]["\163\151\164\145\156\x61\x6d\x65"] = "\xe4\270\252\344\xba\272\xe6\xb5\267\346\212\xa5"; goto D6y7G; Jha37: $posterimgname = $voteuser["\x63\162\145\x61\x74\x65\164\151\x6d\x65"] . "\x5f" . $voteuser["\151\144"] . "\x2e\152\160\147"; goto zstkT; mgUuP: VrpiD: goto kPWDg; rELET: $reply = array_merge($reply, unserialize($reply["\143\157\x6e\x66\x69\x67"])); goto Jkazj; w5LSa: if (file_exists(ATTACHMENT_ROOT . $poster)) { goto d_2B4; } goto dLp4Y; q04eg: include $this->template(m("\164\160\x6c")->style("\x70\157\163\x74\145\x72", $reply["\x73\164\171\154\x65"]["\x74\145\155\160\154\141\164\145"])); goto afa_K; DXWAG: $img = tomedia(@$voteuser["\151\x6d\147\61"]); goto vlzax; zstkT: $poster = $posterimg . $posterimgname; goto w5LSa; o0eoB: $prefix = $this->get_tplprefix($reply["\150\164\x6d\154\x6d\157\144\145"]); goto Un4Xr; ONXJp: imageColorTransparent($background, $color); goto WKi8c; g6uvK: TAdKZ: goto wdsAS; kPWDg: global $_W, $_GPC; goto vFqOL; tFPSR: $filepath = MODULE_ROOT . "\57\164\145\155\x70\154\141\164\145\57\x6d\157\x62\151\x6c\x65\x2f\155\x6f\144\145{$reply["\x68\164\x6d\154\155\x6f\144\145"]}\x2f{$prefix}\137\160\x6f\163\x74\145\162\56\150\x74\x6d\x6c"; goto Jwr3J; lvf99: $photo = tomedia(@$voteuser["\x61\166\141\x74\x61\x72"]); goto gXG66; SYtQq: $posterData = array_merge(array("\60" => array("\x6c\145\146\164" => "\60\160\x78", "\x74\x6f\x70" => "\60\160\x78", "\164\x79\160\145" => "\142\141\147", "\x77\x69\144\164\x68" => $pigfilearray[0] / 2 . "\x70\x78", "\x68\145\151\x67\x68\x74" => $pigfilearray[1] / 2 . "\160\x78")), $posterData); goto nykI3; vFqOL: $rid = $_GPC["\162\x69\x64"]; goto lZ1zY; b3VoT: mS22k: goto MDTcQ; x3zX2: $userinfo = m("\x75\x73\x65\162")->Get_checkoauth(); goto fVHtr; SJ0rL: $reply = pdo_fetch("\x53\105\x4c\105\103\x54\x20\x69\144\54\143\x6f\x6e\146\151\147\x2c\163\164\x79\154\145\x2c\142\x69\x6c\x6c\137\x64\141\164\x61\x2c\145\156\144\x74\x69\x6d\x65\54\163\164\x61\x74\x75\163\54\x68\164\155\x6c\x6d\157\x64\145\40\x46\122\117\x4d\x20" . tablename($this->tablereply) . "\40\x57\x48\105\122\x45\x20\162\151\144\x20\x3d\40\x3a\162\x69\x64\40", array("\72\x72\151\144" => $rid)); goto ExyBY; ThL_8: EApPQ: goto cU3yg; afa_K: o4jMQ: goto wCn24; S46bo: goto xSrYf; goto sH4ce; nykI3: $background = imagecreatetruecolor($pigfilearray[0], $pigfilearray[1]); goto Bblu4; Jwr3J: if (is_file($filepath)) { goto VTuou; } goto QKxGA; ogGzy: goto o4jMQ; goto jpqsb; gXG66: $nickname = @$voteuser["\156\151\x63\x6b\x6e\x61\x6d\145"]; goto DXWAG; wl7Wp: is_dir(ATTACHMENT_ROOT . $posterimg) or mkdirs(ATTACHMENT_ROOT . $posterimg); goto dJIJU; aF4K_: include $this->template(m("\x74\x70\154")->style($prefix . "\137" . "\x70\x6f\x73\164\x65\162", "\x6d\157\144\x65" . $reply["\150\x74\x6d\x6c\x6d\157\144\145"])); goto ogGzy; QKxGA: vote_message("\xe7\xb3\273\347\273\237\346\x8f\x90\347\xa4\272", "\xe9\x80\211\xe7\x94\250\xe7\232\204\xe6\xa8\241\346\235\277\344\270\xbb\xe9\xa2\230{$reply["\x68\x74\x6d\x6c\155\157\x64\145"]}\346\x96\x87\xe4\xbb\xb6\344\270\215\xe5\255\x98\xe5\234\xa8\40\350\xaf\xb7\350\x81\x94\347\xb3\273\xe5\xae\xa2\xe6\234\x8d\xef\xbc\201", referer(), "\145\162\162\x6f\x72"); goto icjUQ; wCn24: exit;