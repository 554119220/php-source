<?php
 goto a_ZQS; f4QC0: exit("\x41\x63\143\x65\x73\163\40\104\145\156\x69\145\x64"); goto UxE23; a_ZQS: if (defined("\x49\116\137\111\101")) { goto s3IGe; } goto f4QC0; UxE23: s3IGe: goto HadLX; HadLX: class Silence_Poster { public function __construct() { global $_W; } public function createPoster($fans, $posterConfig) { goto UdtAf; xycUP: vNyMg: goto a_lOi; ZO6tw: $posterImage = new Imagick(ATTACHMENT_ROOT . $posterBgImage); goto Sie5O; lcGMx: $posterImageScale = $posterImageWidth / $posterDesignImageWidth; goto dWEc3; acHni: require_once MODULE_ROOT . "\x2f\x6c\x69\x62\x2f\x71\162\143\x6f\144\145\57\160\x68\x70\161\x72\143\x6f\144\x65\x2e\x70\150\x70"; goto AuaDR; DbqNh: h_9hM: goto dHt3o; bpHMQ: $posterFilePath = "\172\x70\x5f\152\x69\x66\145\156\x2f\x70\x6f\163\x74\x65\x72\x2f" . $_W["\165\x6e\151\141\143\x69\x64"] . "\57" . $uid . "\56\152\x70\x67"; goto ZBxTo; ZuUid: $uid = $fans["\x75\x69\144"]; goto ivz8W; jBat4: $posterImage->setImageCompressionQuality(90); goto hbXPO; DGDWQ: q4l8m: goto bpHMQ; AuaDR: load()->func("\x66\151\x6c\145"); goto r7dOt; LlRaY: $posterImageWidth = $posterImageSize["\x77\151\144\x74\150"]; goto mvkbU; dHt3o: $posterData = $posterConfig["\144\x61\164\x61"]; goto Faiw0; vqv5N: $posterFilePathStatus = mkdirs(dirname($posterFileFullPath)); goto N_Wks; igXA6: $posterFilePathStatus = file_exists(dirname($posterFileFullPath)); goto Rox3d; fG0Ey: $posterImage->writeImage($posterFileFullPath); goto xcCoV; ivz8W: $posterBgImage = tomedia($posterConfig["\x69\155\147"]); goto BUtvV; Q5Cwk: if ($posterFilePathStatus) { goto dmlZj; } goto UA0cQ; ZBxTo: $posterFileFullPath = ATTACHMENT_ROOT . $posterFilePath; goto igXA6; UA0cQ: return null; goto n5EZI; UdtAf: global $_W; goto ZuUid; n5EZI: dmlZj: goto aNCe6; BUtvV: if (!empty($posterBgImage)) { goto h_9hM; } goto uMhoB; a_lOi: return null; goto dJij9; r7dOt: load()->func("\x63\x6f\155\155\165\x6e\x69\x63\x61\x74\151\157\x6e"); goto vnWhb; aNCe6: $posterImage->setImageFormat("\x4a\x50\105\x47"); goto PovzC; N_Wks: IjYTL: goto Q5Cwk; Faiw0: if (!extension_loaded("\151\155\x61\147\151\x63\x6b")) { goto vNyMg; } goto ZO6tw; xcCoV: return $posterFileFullPath; goto xycUP; Sie5O: $posterImageSize = $posterImage->getImageGeometry(); goto LlRaY; Rox3d: if ($posterFilePathStatus) { goto IjYTL; } goto vqv5N; dWEc3: if (empty($posterData)) { goto q4l8m; } goto acHni; JCueC: N0ncQ: goto DGDWQ; vnWhb: foreach ($posterData as $data) { goto oeNWj; Cel77: tMYZx: goto mceDS; mceDS: l30gp: goto Lxxj2; oeNWj: switch ($data["\x74\x79\160\x65"]) { case "\141\166\141\164\141\162": goto tDyHr; zfmqh: if (!(!is_error($resp) && intval($resp["\x63\x6f\144\145"]) == 200)) { goto P6Evv; } goto R4hLr; kCFqW: $avatarFilePathStatus = file_exists(dirname($avatarFilePath)); goto UJbzc; R4hLr: if (!file_put_contents($avatarFilePath, $resp["\143\157\156\x74\x65\x6e\164"])) { goto SNQwm; } goto f3Zui; QDBfO: $posterImage->compositeImage($avatarImage, Imagick::COMPOSITE_OVER, substr($data["\x6c\145\x66\164"], 0, -2) * $posterImageScale, substr($data["\164\x6f\160"], 0, -2) * $posterImageScale); goto bkux9; X9s5a: c6TZs: goto xVeW2; xVeW2: if (!$avatarFilePathStatus) { goto cZbCy; } goto rBlje; AkUqx: cZbCy: goto bM9KN; Oq_uA: $avatarFilePathStatus = mkdirs(dirname($avatarFilePath)); goto X9s5a; bM9KN: QV_XZ: goto XLefU; tDyHr: if (empty($fans["\x61\x76\141\x74\x61\162"])) { goto QV_XZ; } goto XRHoB; UJbzc: if ($avatarFilePathStatus) { goto c6TZs; } goto Oq_uA; XLefU: goto tMYZx; goto hWQqD; rBlje: $resp = ihttp_get($fans["\x61\166\x61\x74\x61\162"]); goto zfmqh; f3Zui: $avatarImage = new Imagick($avatarFilePath); goto peaYC; XRHoB: $avatarFilePath = ATTACHMENT_ROOT . "\172\x70\137\152\151\146\145\156\x2f\141\x76\x61\164\141\x72\x2f" . $_W["\165\x6e\151\141\143\151\x64"] . "\57" . $uid . "\x2e\152\x70\147"; goto kCFqW; mt6c0: P6Evv: goto AkUqx; bkux9: SNQwm: goto mt6c0; peaYC: $avatarImage->thumbnailImage(substr($data["\167\x69\x64\164\150"], 0, -2) * $posterImageScale, substr($data["\150\x65\x69\x67\150\164"], 0, -2) * $posterImageScale, true, true); goto QDBfO; hWQqD: case "\156\141\155\145": goto JmJeQ; zWX9a: $draw->setFillColor(new ImagickPixel($data["\143\157\154\x6f\x72"])); goto vApfp; vApfp: $posterImage->annotateImage($draw, intval(substr($data["\154\145\146\164"], 0, -2)) * $posterImageScale, intval(substr($data["\164\x6f\x70"], 0, -2)) * $posterImageScale, 0, $fans["\x6e\x69\x63\153\x6e\x61\155\145"]); goto PXBuc; x0bvr: $draw->setFont(MODULE_ROOT . "\x2f\x6c\151\142\57\146\157\156\164\x2f\155\x73\171\150\56\x74\x74\x66"); goto ohNUo; Q53k0: goto tMYZx; goto j06Gd; PXBuc: RRFy0: goto Q53k0; ohNUo: $draw->setFontSize(intval(substr($data["\163\x69\x7a\x65"], 0, -2)) * $posterImageScale); goto zWX9a; JmJeQ: if (empty($fans["\156\151\x63\153\x6e\x61\x6d\145"])) { goto RRFy0; } goto MNypk; MNypk: $draw = new ImagickDraw(); goto x0bvr; j06Gd: case "\161\162": goto it8pu; dlIe6: if (!($qrCodeFilePathStatus && file_put_contents($qrCodeFilePath, $qrCodeData))) { goto ZzCod; } goto kKlwz; FPtse: goto tMYZx; goto E3G2V; kKlwz: $qrCodeImage = new Imagick($qrCodeFilePath); goto wxOXG; kRgEy: ZzCod: goto Kdkp2; Kdkp2: eH9Td: goto FPtse; prZuy: wXo1v: goto dlIe6; YF45D: $qrCodeFilePathStatus = file_exists(dirname($qrCodeFilePath)); goto a8QxF; belWs: if (empty($qrCodeData)) { goto eH9Td; } goto BmmsE; N7ewR: $qrCodeFilePathStatus = mkdirs(dirname($qrCodeFilePath)); goto prZuy; eHou6: $posterImage->compositeImage($qrCodeImage, Imagick::COMPOSITE_OVER, substr($data["\154\145\146\164"], 0, -2) * $posterImageScale, substr($data["\x74\157\x70"], 0, -2) * $posterImageScale); goto kRgEy; wxOXG: $qrCodeImage->thumbnailImage(substr($data["\x77\151\x64\x74\150"], 0, -2) * $posterImageScale, substr($data["\150\145\151\x67\150\x74"], 0, -2) * $posterImageScale, true, true); goto eHou6; a8QxF: if ($qrCodeFilePathStatus) { goto wXo1v; } goto N7ewR; E3G2V: eRPsf: goto VUQzL; it8pu: if (!($_W["\x61\x63\143\157\165\156\164"]["\x6c\x65\x76\x65\x6c"] == 4)) { goto eRPsf; } goto dyrQs; BmmsE: $qrCodeFilePath = ATTACHMENT_ROOT . "\x7a\160\137\152\x69\x66\x65\156\x2f\161\x72\143\x6f\144\145\x2f" . $_W["\x75\156\151\141\x63\x69\144"] . "\57" . $uid . "\x2e\160\x6e\147"; goto YF45D; dyrQs: $qrCodeData = $this->createQRCode($uid); goto belWs; VUQzL: } goto esxL3; esxL3: bZ3Ke: goto Cel77; Lxxj2: } goto JCueC; mvkbU: $posterDesignImageWidth = 320; goto lcGMx; PovzC: $posterImage->setImageCompression(\Imagick::COMPRESSION_JPEG); goto jBat4; hbXPO: $posterImage->stripImage(); goto fG0Ey; uMhoB: return null; goto DbqNh; dJij9: } }