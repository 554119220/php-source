<!--yzmdwsc_sun/pages/carts/carts.wxml-->
<import src="../template/nav/nav.wxml"/>
 <template is="tabBar" data="{{tab:tab,current_url:current_url}}"/>
<view class="container">
  <view>

    <view class="empty" bindtap='empty'>
      <image src="../../../style/images/dete.png" class="delIcon"/>
      <text>清空</text>
    </view>
    <view class="session">
      <view class="goodsList">
        <view wx:for="{{shopcar}}" wx:key="" class="goodsItem">
          <view class="checkBtn">
            <view>
              <label class="checkbox">
                <checkbox checked="{{item.check}}" wx:if="{{item.no_stock==1}}" disabled='true' bindtap='bindCheckbox' class="my-check {{item.check?'':'nocheck'}}" data-index="{{index}}" data-crid='{{item.id}}'/>
                <checkbox checked="{{item.check}}" wx:if="{{item.no_stock!=1}}" bindtap='bindCheckbox' class="my-check {{item.check?'':'nocheck'}}" data-index="{{index}}" data-crid='{{item.id}}'/>
              </label>
            </view>
            <view class="goodsLft">
              <image src="{{url}}{{item.pic}}" class="goodsImg" />
            </view>
          
          </view>

          <view class="goodsRight">
            <view class="goodsName">
              <view>{{item.gname}}</view>
             <!-- <view wx:if="{{item.combine!=','}}">{{item.combine}}</view>-->

<view class="specConn">
<text wx:if="{{item.combine!=','}}">{{item.combine}}</text> 
<text wx:if="{{item.no_stock==1}}" class="noStock">库存不足</text> 
</view>

            </view>
            <view class="goodsDet">
              <view class="goodsPrice">￥{{item.unit_price}}</view>
              <view class="opear">
                <view class="reduce" catchtap="reduce" data-id="{{item.id}}" data-index="{{index}}" wx:if="{{item.num>0}}">
                  <image src="../../../style/images/icon18.png" />
                </view>
                <view class="goodsNum"  wx:if="{{item.num>0}}">
                  <input type="text" value="{{item.num}}"   disabled='disabled'  />
                </view>
                <view class="reduce add" bindtap="add" data-id="{{item.id}}" data-index="{{index}}" >
                  <image src="../../../style/images/add1.png" />
                </view>
              </view>
            </view>
          </view>
        </view> 
      </view>
    </view>
    <view class="balance">
      <view class="balBot">
        <view class="balLeft">
          <view>
            <label class="checkbox"  data-checked="{{!checked}}" bindtap='checkAll'>
              <checkbox value="{{item.name}}" checked="{{checked}}"/>
              <text wx:if="{{!checked}}">全选</text>
              <text wx:if="{{checked}}">全不选</text>
            </label>
          </view>



          <view class="total">
            <view class="totalLeft">总计</view>
            <view class="totalRight">
              <view class="totalPrice">￥{{totalPrice}}</view>
              <view>
                支持到店自取
              </view>
            </view>
          </view>
        </view>
        <view class="submit">
          <button bindtap='toCforder' data-crid="{{cartid}}" data-cid='1'>结算</button>
        </view>
      </view>
    </view>

  </view>
</view>