<?php
 goto z15GW; DmdQZ: $qrcode = pdo_fetch("\123\105\114\x45\103\124\x20\x69\x64\54\x75\x6e\x69\x61\143\151\x64\54\165\x75\151\x64\x2c\163\164\x61\164\x75\163\x2c\x73\143\141\156\137\x6e\165\x6d\x2c\156\x75\155\x2c\x6e\x75\155\x5f\144\141\171\54\x73\143\141\156\137\x6e\x75\155\137\x64\x61\171\54\x6e\x75\155\137\144\141\x79\137\165\x73\x65\162\x2c\x6e\165\155\x5f\x75\163\x65\x72\x2c\x6a\x75\155\x70\137\164\171\160\145\54\x6c\x61\163\164\137\x72\x69\x64\x20\106\x52\117\115\40" . tablename("\143\x72\x61\144\x5f\161\162\x63\157\144\145\x5f\162\145\144\x5f\163\165\x70\x65\x72\x71\x72\143\157\144\145") . "\x20\x57\110\105\122\105\40\165\x75\151\x64\40\x3d\40\x3a\x75\165\151\144", array("\72\165\165\151\x64" => $uuid)); goto g8azC; UAZgo: $data["\x69\x70"] = $_W["\143\154\x69\145\156\x74\151\x70"]; goto WNqGJ; LzFH2: $nickname = $userinfo["\156\x69\143\x6b\156\141\x6d\x65"]; goto huZ7h; aR5lH: B_R2l: goto fsejW; toLlF: if (!$cfg["\x6a\x75\155\160\x5f\x75\x72\x6c"]) { goto Hq3II; } goto VTmmj; pA8N6: $this->show_error("\346\x82\xa8\xe4\xbb\x8a\xe6\227\245\350\xb6\205\350\277\207\xe6\234\200\xe5\244\247\346\xac\241\346\225\260", "\145\x72\x72\157\162", $jump_url_error); goto qtBkv; huZ7h: $headimg = $userinfo["\141\x76\x61\164\x61\x72"]; goto DdWJ8; wFrk7: $openid = $userinfo["\157\160\x65\x6e\151\144"] ? $userinfo["\157\160\145\156\x69\144"] : $_SESSION["\x6f\x61\165\x74\x68\137\x6f\160\145\156\x69\x64"]; goto krK68; TCkOi: if (!empty($qrcode["\x6a\165\x6d\x70\x5f\x74\x79\x70\x65"])) { goto Tx_fN; } goto zbVON; eZRcX: if (!($from_user && $from_user != $openid)) { goto k1E4_; } goto yf7_Z; JRWHA: Kuwf9: goto Ya6DE; mqutz: fH_1F: goto oSGRt; q_HJB: $subscribe_time = time(); goto dB6h7; FEpus: HTfrp: goto spIST; Paf3p: Hq3II: goto EW6K2; jAJCC: if (!(empty($rule) || empty($rule["\141\x69\144"]) && empty($rule["\x75\x72\154"]))) { goto fH_1F; } goto P8ZXe; BedAE: exit; goto ecrMg; tglcD: if (!($qrcode["\156\165\x6d\137\144\x61\171"] && $qrcode["\163\x63\x61\156\x5f\156\165\155\137\144\141\x79"] >= $qrcode["\x6e\x75\x6d\137\144\141\x79"])) { goto iVotj; } goto oP04t; hw6S1: $data["\x75\x72\x6c"] = $rule["\141\x69\x64"] ? $_W["\x73\151\x74\x65\162\x6f\157\x74"] . "\141\x70\x70\57\x69\x6e\x64\145\170\56\x70\150\x70\x3f\151\x3d" . $qrcode["\x75\156\x69\141\143\151\x64"] . "\46\x63\x3d\145\x6e\164\162\171\46\x6d\75\x63\x72\x61\x64\x5f\x71\162\x63\157\144\x65\x5f\162\x65\x64\x26\144\157\x3d\151\156\144\x65\x78\x26\141\151\144\x3d" . $rule["\141\x69\x64"] : $rule["\x75\x72\154"]; goto ERckz; WLzly: goto glz1O; goto qG_8x; cgdg3: if (!($qrcode["\156\165\155"] && $qrcode["\x73\143\x61\x6e\x5f\x6e\165\155"] >= $qrcode["\x6e\165\155"])) { goto ceR7g; } goto lGsyV; g8azC: if (!(empty($qrcode) || $qrcode["\x73\164\x61\164\165\163"])) { goto pjWdn; } goto SKf_D; DdWJ8: $subscribe = $userinfo["\x66\157\x6c\154\x6f\x77"]; goto GwSV7; CKCi8: $data["\x73\165\x62\x73\x63\x72\x69\x62\145"] = $subscribe; goto hw6S1; n4XfR: $this->show_error("\xe8\xaf\xb7\345\x85\210\345\205\263\xe6\xb3\xa8\xe5\x85\xac\xe4\274\227\xe5\x8f\267", "\x65\162\x72\x6f\x72", $jump_url_error); goto qzwCG; PJvlz: $nickname = $nickname ? $nickname : "\xe5\214\277\345\220\x8d\xe7\x94\xa8\xe6\x88\267"; goto XDdwI; TV3ER: $updata_rules["\x73\x63\141\x6e\x5f\156\x75\x6d\137\144\x61\171"] = $rule["\x73\143\x61\x6e\x5f\x6e\x75\155\137\x64\141\x79"] + 1; goto zCrdL; lqLtx: $today_start = strtotime(date("\131\55\x6d\55\144")); goto lGBxj; M3Cx5: $uuid = addslashes(trim($_GPC["\x75"])); goto SPe34; RUuR8: $subscribeinfo = $accObj->fansQueryInfo($from_user); goto x6hDS; P9XWK: Dhn0K: goto L81IB; LnNHC: goto rqMET; goto aR5lH; s1bJE: pdo_update("\143\x72\141\144\137\x71\162\x63\x6f\x64\x65\x5f\162\145\144\137\163\165\160\145\162\x71\x72\x63\157\144\145\x5f\x72\x75\154\145\163", $updata_rules, array("\151\x64" => $rule["\151\144"])); goto yRH0n; qzwCG: POPz3: goto lqLtx; yRH0n: if (!($rule["\151\144"] && $openid)) { goto Kuwf9; } goto u3esI; u52Hw: iVotj: goto sHjKr; ZYHnb: global $_GPC, $_W; goto q5taY; RbOhj: xQYI4: goto iLFCb; RQ0X9: header("\x4c\x6f\x63\x61\x74\151\157\156\72{$jump_url}"); goto ZCCtU; gGM2B: $data["\x73\x75\142\163\x63\162\x69\142\145"] = $subscribe; goto Y730Q; hRadG: UOLPt: goto uU5gP; uU5gP: $userinfo = mc_oauth_userinfo(); goto wFrk7; u3esI: $data = array("\x75\156\x69\x61\143\x69\x64" => $uniacid, "\x6f\160\145\156\151\144" => addslashes($openid)); goto Hh9Io; xWlJj: pjWdn: goto cgdg3; Y0VRb: ZiWaW: goto h8V5r; spIST: header("\114\x6f\143\141\x74\151\x6f\x6e\72{$jump_url}"); goto RqLsS; dB6h7: k1E4_: goto PJvlz; pKMDW: $data = array("\165\156\151\141\x63\151\x64" => $uniacid, "\x6e\151\x63\153\x6e\141\155\x65" => addslashes($nickname), "\x68\x65\x61\x64\151\155\x67\165\x72\x6c" => addslashes($headimg), "\x6f\160\x65\x6e\x69\x64" => addslashes($openid), "\146\162\157\155\137\x6f\x70\145\156\x69\x64" => $from_user ? $from_user : ''); goto Dve76; WNqGJ: $data["\x73\x74\141\164\x75\163"] = 1; goto z1X0p; dNIOX: if (!($qrcode["\156\x75\x6d\137\x75\x73\x65\162"] && $total_user >= $qrcode["\x6e\165\x6d\137\x75\163\x65\x72"])) { goto nXuDp; } goto cE3gT; SPe34: $from_user = base64_decode($_GPC["\146\162\157\x6d\x5f\165\x73\145\162"]); goto gyK5m; F5e0X: if (empty($user) && $openid) { goto IXWq1; } goto YDQwi; zCrdL: goto ikzAa; goto P9XWK; dCck1: $openid = $userinfo["\157\160\x65\156\151\x64"] ? $userinfo["\x6f\x70\145\156\x69\144"] : $openid; goto LzFH2; hWkjk: if ($qrcode["\x6c\x61\x73\164\137\164\151\x6d\145"] < $today_start) { goto B_R2l; } goto QUWt3; oP04t: $this->show_error("\344\xbb\212\xe6\x97\245\xe8\266\205\350\277\x87\346\234\200\345\xa4\xa7\xe6\xac\xa1\xe6\225\xb0", "\145\162\162\157\162", $jump_url_error); goto u52Hw; vJpCk: $rule = $this->get_superqrcode_rules($qrcode["\151\144"], $qrcode["\152\165\x6d\160\x5f\164\171\x70\145"], $qrcode["\x6c\141\x73\x74\137\162\x69\144"]); goto jAJCC; kUr3P: load()->func("\143\x6f\x6d\155\165\x6e\151\x63\x61\x74\x69\x6f\156"); goto F5e0X; z15GW: defined("\x49\116\x5f\x49\x41") or exit("\101\x63\x63\x65\163\x73\40\104\145\x6e\x69\145\144"); goto ZYHnb; Cf_mS: glz1O: goto NGXHH; Ya6DE: if (!$rule["\141\151\144"]) { goto o4loh; } goto RPWid; bndY9: $subscribe_time = $userinfo["\x73\165\142\x73\x63\162\151\x62\x65\x5f\164\x69\155\145"]; goto lHQ3R; gyK5m: $cfg = $this->module["\x63\x6f\156\146\151\147"]["\141\x70\x69"]; goto toLlF; oSGRt: $updata_superqrcode = array("\x73\143\x61\x6e\137\x6e\165\x6d" => $qrcode["\163\143\x61\156\137\156\x75\x6d"] + 1, "\x6c\x61\x73\164\x5f\164\x69\x6d\145" => time(), "\154\x61\163\x74\137\x72\x69\x64" => $rule["\x69\144"]); goto hWkjk; aCRWe: $total_user_day = pdo_fetchcolumn("\x73\145\154\145\143\x74\40\103\x4f\x55\116\124\50\52\x29\40\146\162\x6f\x6d\40" . tablename("\x63\x72\141\144\137\161\x72\x63\157\144\x65\x5f\162\145\x64\x5f\163\x75\160\x65\162\x71\162\143\x6f\144\145\x5f\154\157\147") . "\x20\127\110\x45\x52\105\x20\x73\151\144\x3d\x27{$qrcode["\x69\144"]}\x27\x20\101\x4e\x44\40\157\160\145\x6e\x69\144\75\47{$openid}\x27\40\x41\x4e\104\x20\x63\162\x65\141\164\145\x74\x69\x6d\x65\x3e{$today_start}"); goto dNIOX; kEz5W: $subscribe = $userinfo["\163\x75\142\x73\x63\x72\151\x62\145"]; goto bndY9; DrQRU: $openid = $_W["\x6f\160\x65\156\151\144"]; goto M3Cx5; h8V5r: $user = pdo_fetch("\x53\x45\114\x45\103\124\40\x2a\40\x46\x52\x4f\x4d\x20" . tablename(TABLE_USER) . "\x20\x57\x48\105\122\105\40\157\160\145\156\x69\144\x20\x3d\40\72\x6f\x70\x65\156\x69\144\40\101\116\x44\40\x73\151\144\75\x20\x3a\x73\151\x64", array("\x3a\157\x70\145\156\151\144" => $openid, "\x3a\x73\151\x64" => $qrcode["\151\x64"])); goto quqWo; CV4lc: if (!($qrcode["\156\165\x6d\x5f\144\x61\171\x5f\165\163\145\x72"] && $total_user_day >= $qrcode["\x6e\165\155\137\x64\x61\x79\137\165\163\x65\x72"])) { goto WbcGw; } goto pA8N6; ewAQb: $this->show_error("\345\217\x82\346\x95\xb0\351\x94\231\350\257\xaf", "\145\162\x72\157\x72", $jump_url_error); goto RbOhj; bc7mV: if (!$rule["\141\x69\x64"]) { goto HTfrp; } goto LqKQk; NGXHH: if (!($qrcode["\163\165\x62\163\143\x72\151\142\x65"] && empty($subscribe))) { goto POPz3; } goto n4XfR; ZCCtU: exit; goto kGZn0; lHQ3R: XzwfD: goto Bcsvs; iKTzT: VNTiM: goto eZRcX; FQZ33: $userinfo = $this->Get_checkoauth(); goto dCck1; LqKQk: $jump_url = $_W["\163\x69\x74\145\162\x6f\157\x74"] . "\x61\x70\x70\57\151\x6e\x64\145\x78\x2e\160\x68\x70\77\151\75" . $qrcode["\x75\x6e\151\141\143\x69\x64"] . "\46\x63\75\145\x6e\164\162\171\46\155\x3d\x63\x72\x61\144\x5f\x71\x72\143\157\144\x65\137\162\145\x64\46\144\x6f\x3d\151\x6e\144\x65\x78\46\x61\151\x64\75" . $qrcode["\141\x69\x64"]; goto FEpus; yf7_Z: load()->classs("\167\145\x69\170\151\x6e\x2e\x61\143\143\x6f\x75\156\164"); goto qcmmO; pigvV: $headimg = $_W["\x66\141\x6e\163"]["\x74\x61\x67"]["\141\166\x61\164\141\162"]; goto R0DyM; RPWid: $jump_url = $_W["\x73\151\x74\x65\x72\157\157\x74"] . "\x61\x70\x70\x2f\x69\x6e\144\x65\170\x2e\160\150\x70\x3f\x69\x3d" . $qrcode["\x75\x6e\151\141\x63\151\x64"] . "\46\x63\75\145\x6e\x74\162\171\x26\x6d\x3d\x63\x72\141\x64\137\161\162\x63\x6f\x64\x65\x5f\x72\145\x64\46\144\x6f\x3d\151\x6e\144\145\x78\46\x61\151\x64\75" . $rule["\141\151\x64"]; goto RQ0X9; x6hDS: $subscribe = $subscribeinfo["\163\x75\x62\x73\x63\162\151\142\145"]; goto q_HJB; QUWt3: $updata_superqrcode["\163\143\x61\x6e\137\156\x75\x6d\x5f\144\141\x79"] = $qrcode["\163\143\141\x6e\137\x6e\165\155\137\144\x61\171"] + 1; goto LnNHC; R0DyM: $subscribe = $_W["\146\x61\156\163"]["\146\157\154\x6c\x6f\x77"]; goto RGkM2; lGsyV: $this->show_error("\xe8\xb6\x85\xe8\xbf\x87\xe6\234\x80\xe5\xa4\xa7\346\xac\xa1\346\x95\260", "\x65\x72\162\x6f\162", $jump_url_error); goto RR1_1; fALWX: pdo_insert(TABLE_USER, $data); goto RNuQZ; z1X0p: $data["\x63\x72\x65\141\164\145\164\x69\155\x65"] = $_W["\x74\x69\155\x65\163\164\141\155\x70"]; goto fALWX; SKf_D: $this->show_error("\344\xba\214\347\xbb\264\xe7\240\x81\345\xb7\xb2\345\xa4\261\xe6\225\210", "\145\162\162\157\162", $jump_url_error); goto xWlJj; krK68: $nickname = $userinfo["\x6e\151\143\153\x6e\x61\155\x65"]; goto GdF7_; t1Xye: goto XzwfD; goto hRadG; Dve76: $data["\163\x69\x64"] = $qrcode["\151\144"]; goto gGM2B; kGZn0: o4loh: goto g62iH; qG_8x: IXWq1: goto pKMDW; CNIB2: rqMET: goto TCkOi; Dt_O2: $this->show_error("\x6f\160\x65\156\151\x64\344\xb8\xba\347\xa9\272\357\xbc\214\xe9\205\215\xe7\xbd\xae\351\224\231\xe8\xaf\xaf\xe6\210\226\345\x9c\xa8\xe9\235\236\xe5\276\256\344\xbf\241\xe6\xb5\217\350\247\x88\345\231\250\xe4\270\xad\xe6\211\223\345\274\200", "\x65\x72\x72\x6f\x72", $jump_url_error); goto Y0VRb; ugFz8: R3nw9: goto DmdQZ; VTmmj: $jump_url_error = $cfg["\x6a\x75\155\x70\137\165\x72\154"]; goto Paf3p; kBBr8: $jump_url = $rule["\x75\162\x6c"]; goto bc7mV; gNu2A: nXuDp: goto CV4lc; RNuQZ: $insertid = pdo_insertid(); goto Cf_mS; PhtGv: header("\x4c\157\143\x61\x74\151\157\x6e\72{$jump_url}"); goto BedAE; qcmmO: $accObj = WeiXinAccount::create($_W["\141\x63\x63\x6f\x75\x6e\x74"]); goto RUuR8; Hh9Io: $data["\163\151\x64"] = $qrcode["\151\144"]; goto lIUKz; sHjKr: if (!(empty($uniacid) || $qrcode["\165\156\x69\141\143\151\144"] != $uniacid)) { goto xQYI4; } goto ewAQb; RGkM2: $subscribe_time = $_W["\x66\x61\x6e\x73"]["\x66\157\x6c\154\157\167\x74\151\155\145"]; goto t1Xye; L81IB: $updata_rules["\x73\x63\x61\156\x5f\156\x75\155\x5f\x64\x61\171"] = 1; goto P67Yg; ENgEv: $jump_url = $rule["\165\162\x6c"]; goto PhtGv; Y730Q: $data["\x73\x75\142\x73\143\162\x69\x62\x65\137\x74\x69\x6d\x65"] = $subscribe ? $subscribe_time ? $subscribe_time : $_W["\164\151\x6d\145\x73\164\x61\x6d\x70"] : 0; goto UAZgo; tqpPP: Tx_fN: goto pQAQ9; iLFCb: if (empty($openid)) { goto UOLPt; } goto UfLzM; fsejW: $updata_superqrcode["\x73\143\x61\x6e\x5f\x6e\x75\x6d\x5f\x64\141\x79"] = 1; goto CNIB2; pQAQ9: pdo_update("\143\162\x61\x64\x5f\161\162\143\157\144\145\x5f\x72\x65\x64\137\x73\165\x70\145\x72\x71\x72\x63\157\x64\145", $updata_superqrcode, array("\x69\x64" => $qrcode["\x69\x64"])); goto Ybdz1; zbVON: $updata_superqrcode["\x6c\141\163\x74\x5f\x72\151\144"] = $rule["\x69\144"]; goto tqpPP; yMVzO: pdo_insert("\x63\x72\x61\144\137\161\162\x63\157\x64\145\x5f\x72\x65\x64\137\x73\165\x70\x65\x72\x71\162\x63\x6f\x64\145\137\154\x6f\x67", $data); goto JRWHA; GdF7_: $headimg = $userinfo["\x61\x76\x61\x74\x61\162"]; goto kEz5W; quqWo: if (!(empty($user) && empty($nickname) && empty($headimg))) { goto VNTiM; } goto FQZ33; cE3gT: $this->show_error("\346\x82\xa8\xe8\266\x85\350\277\207\346\x9c\x80\345\xa4\247\346\xac\xa1\xe6\x95\260", "\145\x72\x72\157\162", $jump_url_error); goto gNu2A; Ybdz1: $updata_rules = array("\x73\x63\141\x6e\x5f\156\x75\x6d" => $rule["\163\x63\x61\x6e\x5f\x6e\x75\x6d"] + 1, "\x6c\141\x73\x74\137\x74\151\x6d\145" => time()); goto bUomo; P8ZXe: $this->show_error("\350\267\263\350\xbd\254\346\254\241\346\x95\260\xe5\x8f\x97\351\x99\220\346\x88\x96\346\227\xa0\346\234\x89\346\225\210\350\267\xb3\350\275\xac\xe8\xa7\x84\xe5\210\x99", "\x65\162\x72\157\162", $jump_url_error); goto mqutz; UfLzM: $nickname = $_W["\146\x61\x6e\163"]["\x74\x61\147"]["\x6e\x69\x63\x6b\156\x61\155\145"]; goto pigvV; EW6K2: if (!empty($uuid)) { goto R3nw9; } goto TDbxA; P67Yg: ikzAa: goto s1bJE; S_gL_: $headimg = $user["\x68\x65\141\x64\151\155\x67\x75\x72\154"]; goto yeqOO; TDbxA: $this->show_error("\xe5\x8f\202\346\x95\xb0\351\224\231\350\257\257", "\145\162\x72\157\162", $jump_url_error); goto ugFz8; yeqOO: $subscribe = $user["\x73\165\142\x73\143\162\151\x62\145"]; goto WLzly; Bcsvs: if (!empty($openid)) { goto ZiWaW; } goto Dt_O2; ERckz: $data["\143\162\x65\x61\x74\x65\164\x69\x6d\x65"] = $_W["\164\x69\x6d\145\x73\164\x61\155\160"]; goto yMVzO; XDdwI: $headimg = $headimg ? $headimg : MODULE_URL . "\164\145\155\160\x6c\x61\164\145\57\155\x6f\142\x69\154\145\x2f\151\x6d\x67\x2f\144\x65\146\141\165\154\x74\165\x73\145\162\x2e\x6a\160\147"; goto kUr3P; ecrMg: wobhw: goto kBBr8; bUomo: if ($rule["\x6c\141\x73\164\137\164\151\x6d\x65"] < $today_start) { goto Dhn0K; } goto TV3ER; q5taY: error_reporting(0); goto mNEie; lIUKz: $data["\x72\x69\144"] = $rule["\151\144"]; goto CKCi8; YDQwi: $nickname = $user["\x6e\151\x63\153\156\x61\155\x65"]; goto S_gL_; g62iH: if (!$rule["\165\162\154"]) { goto wobhw; } goto ENgEv; mNEie: $uniacid = $_W["\x75\x6e\151\141\x63\x69\x64"]; goto DrQRU; RR1_1: ceR7g: goto tglcD; lGBxj: $total_user = pdo_fetchcolumn("\163\145\x6c\x65\143\x74\x20\103\117\x55\x4e\124\x28\x2a\51\x20\x66\162\157\155\x20" . tablename("\x63\162\x61\x64\137\x71\162\143\x6f\x64\x65\137\162\x65\144\137\x73\x75\160\145\162\161\162\143\157\144\x65\137\x6c\x6f\x67") . "\x20\x57\x48\x45\122\105\40\x73\x69\144\75\47{$qrcode["\x69\144"]}\x27\x20\101\116\x44\x20\157\160\x65\x6e\x69\x64\x3d\x27{$openid}\47"); goto aCRWe; GwSV7: $subscribe_time = $userinfo["\x66\x6f\154\x6c\157\x77\x74\x69\155\x65"]; goto iKTzT; qtBkv: WbcGw: goto vJpCk; RqLsS: exit;