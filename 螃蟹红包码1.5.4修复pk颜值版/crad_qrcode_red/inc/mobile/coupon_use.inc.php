<?php
 goto lReca; FS93b: goto Nv7dL; goto qB2kO; kF5qy: echo json_encode($data); goto mn4Rl; mnte5: goto qHJgW; goto tcCPo; maT1j: echo json_encode($data); goto JxbHe; TGO8L: global $_GPC, $_W; goto cXkAv; KiyYY: goto pUKIG; goto nJQ0B; cRzjK: $data["\x65\x72\162\x6f\162"] = "\350\257\xb7\345\x85\x88\xe9\xaa\214\350\xaf\201\xe6\211\x8b\346\x9c\xba"; goto Bh_oa; XWhlK: $update = array("\x73\x74\141\x74\x75\163" => 3, "\x75\163\145\x74\x69\155\x65" => time()); goto JCk0e; FfkXs: $data["\145\x72\x72\157\162"] = $status["\155\145\163\163\x61\x67\145"]; goto W8xej; vRtYX: $data["\145\162\162\157\162"] = "\345\x8d\241\xe5\x88\270\xe4\270\215\xe5\x9c\xa8\xe5\x8f\257\xe4\xbd\xbf\347\224\xa8\346\x97\266\xe9\x97\264\x28" . date("\131\x2d\x6d\x2d\x64", strtotime(date("\131\x2d\155\55\x64", $coupon["\x63\x72\x65\141\x74\x65\x74\x69\155\145"])) + $expiration["\x64\145\141\144\x6c\151\156\145"] * 86400) . "\xe5\210\xb0" . date("\x59\x2d\155\x2d\x64", strtotime(date("\x59\x2d\155\55\144", $coupon["\x63\x72\145\141\x74\x65\x74\x69\155\145"])) + ($expiration["\144\145\141\144\x6c\x69\156\145"] + $expiration["\154\151\155\151\x74"]) * 86400) . "\x29\xe8\x8c\x83\xe5\x9b\264\345\x86\x85"; goto KiyYY; IoOX0: xmixC: goto YZh5O; tCM9X: if (!$coupon["\x63\157\x64\x65"]) { goto YXMEz; } goto oNDKu; COJwO: $data["\x73\164\x61"] = 1; goto wdvLH; aT3aQ: echo json_encode($data); goto c8q1S; X4zoO: $data["\145\162\162\157\x72"] = "\345\x95\x86\xe5\256\xb6\xe4\xbf\xa1\xe6\201\257\344\270\215\345\xad\x98\xe5\234\250"; goto a2vIp; WbIux: $data["\x6d\145\x73\163\x61\147\x65"] = $card; goto KFysB; Ic3Fi: error_reporting(0); goto jmsTx; ie_cn: pdo_update("\143\157\165\160\x6f\x6e\137\x72\145\x63\x6f\x72\144", array("\163\x74\x61\x74\x75\163" => "\63"), array("\165\156\151\141\143\151\144" => $_W["\x75\x6e\151\x61\143\151\x64"], "\151\x64" => $recid)); goto IJKbp; mp79P: if (empty($coupon)) { goto BKbmH; } goto uxt91; h1BJK: $couponid = intval($_GPC["\143\157\x75\160\x6f\156\x69\x64"]); goto DHYOj; g6vCt: $data["\163\164\x61"] = 0; goto QPh64; JUPE4: if (!$coupon["\143\157\x75\x70\x6f\156\x5f\166\141\x6c\x69\144\x69\164\x79"]) { goto d9zNZ; } goto P8ur0; TXixI: if (!empty($openid)) { goto qQ0Pq; } goto jdunS; z6v4p: pdo_update("\143\157\x75\x70\157\x6e\x5f\x72\145\x63\x6f\x72\x64", array("\x73\164\x61\164\165\x73" => "\x32"), array("\x75\156\151\x61\143\x69\x64" => $_W["\x75\x6e\x69\x61\143\x69\x64"], "\151\x64" => $recid)); goto jSqkA; H0wQV: die; goto byUr8; vFAOu: w9_PL: goto Yw02c; LeS_y: die; goto gE8eD; jmsTx: header("\x43\157\x6e\164\x65\156\x74\x2d\164\171\x70\x65\72\141\160\x70\154\x69\x63\141\x74\151\157\x6e\x2f\152\163\x6f\156"); goto P8XvO; KHL7u: ZYxdJ: goto FDs_a; Exqtt: $data["\145\162\x72\x6f\x72"] = "\xe5\215\241\345\x88\xb8\344\270\x8d\xe5\x9c\250\xe5\x8f\257\344\275\xbf\xe7\x94\250\346\x97\266\xe9\x97\xb4\50" . $expiration["\x73\164\141\162\x74"] . "\345\210\260" . $expiration["\145\156\144"] . "\x29\xe8\214\203\xe5\x9b\264\xe5\x86\x85"; goto a8c9n; oCCm3: if (!(empty($cfg["\x74\x69\143\153\145\x74"]) || !preg_match("\x2f\x5e\133\x41\55\132\x61\55\172\60\x2d\71\135\173\x33\x32\x7d\x24\57", $cfg["\x74\151\x63\x6b\145\164"]))) { goto YNtD6; } goto I2BaJ; mn4Rl: die; goto nSuZW; mFwzS: die; goto fSin1; b56z_: $data["\163\x74\141"] = 0; goto SGTk9; DHYOj: $op = trim($_GPC["\157\160"]); goto Ic3Fi; Sixj_: $data["\163\164\141"] = 0; goto ytmh6; JxbHe: die; goto jHvZn; b2tK0: die; goto g_dTZ; DDaBx: if (!($activity["\143\150\145\x63\153\137\164\145\x6c"] == 2)) { goto i24VD; } goto Yi8H9; HXoE_: load()->classs("\x63\x6f\x75\x70\x6f\x6e"); goto cLzp2; RXYst: echo json_encode($data); goto LeS_y; jHvZn: akszv: goto HaTFg; jtqff: die; goto opxPM; KHZTN: if (is_error($card)) { goto V7rFT; } goto SwHTd; WGAMx: if (!($coupon["\167\145\143\150\x61\164\137\x63\157\165\x70\157\156"] == "\x31" && $coupon["\x63\x6f\x64\145"])) { goto Bo2nU; } goto HXoE_; UOmGN: if ($expiration["\164\x69\x6d\x65\x5f\x74\x79\x70\x65"] == 1) { goto Q03lF; } goto vRtYX; a2vIp: echo json_encode($data); goto bOd35; g_dTZ: DmrGm: goto oCCm3; bT8bT: $data["\163\x74\x61"] = 0; goto Dvafq; RjFjU: die; goto rq3x8; WVzFd: V7rFT: goto Sixj_; cXkAv: $uniacid = $_W["\165\156\151\141\143\151\144"]; goto h1BJK; oNDKu: $data["\163\164\141"] = 0; goto R_MC4; nJQ0B: Q03lF: goto Exqtt; YZh5O: if (!($op == "\141\x64\x64\x5f\x63\157\165\x70\157\x6e")) { goto onj1T; } goto tCM9X; n_SWD: $data["\163\164\x61"] = 1; goto KCKuQ; a8c9n: pUKIG: goto ElJbq; QPh64: $data["\x65\x72\x72\x6f\x72"] = "\346\xa0\270\xe9\224\x80\xe7\xa0\x81\351\224\x99\xe8\xaf\xaf\xef\274\214\xe8\257\xb7\xe8\x81\x94\xe7\263\273\345\xba\227\xe5\x91\230"; goto maT1j; vALbZ: $data["\145\x72\x72\157\x72"] = "\345\225\206\xe5\256\xb6\xe6\216\210\xe6\235\x83\xe5\xbc\x80\xe5\xa7\213\346\227\xb6\xe9\227\264\xe6\x9c\252\345\210\xb0"; goto lSZeM; ZdZ3D: $openid = $_W["\157\160\145\x6e\x69\144"]; goto TXixI; jh7Cr: Bo2nU: goto yQ7Nd; f2uzf: $data["\x73\164\x61"] = 0; goto tY4Of; yQ7Nd: if (!empty($shop)) { goto nEVxy; } goto Kw6jA; zQRbC: if (!($shop["\164\151\155\x65\137\x6f\x70\145\x6e"] && $shop["\x62\x65\147\x69\x6e\164\151\x6d\x65"] && $_W["\164\151\x6d\145\x73\164\x61\155\160"] < $shop["\x62\x65\x67\151\156\164\x69\x6d\x65"])) { goto YckiC; } goto imltF; R_MC4: $data["\145\162\x72\x6f\x72"] = "\345\267\xb2\xe7\273\x8f\xe6\xb7\273\xe5\x8a\xa0\345\210\260\345\215\241\345\x8c\x85\344\272\206"; goto RXYst; Bh_oa: echo json_encode($data); goto ztSan; tY4Of: $data["\145\162\162\157\x72"] = "\xe5\215\xa1\345\x88\xb8\344\277\xa1\346\x81\257\xe4\270\215\345\xad\230\xe5\234\xa8"; goto kF5qy; JU1QW: if (!is_error($status)) { goto xxz_V; } goto XRA6K; qI2ac: c3N3i: goto mnte5; qB2kO: HRLGz: goto bT8bT; AP1qT: die; goto KHL7u; Wwyq_: $data["\x73\164\141"] = 0; goto Dm4T4; W8xej: echo json_encode($data); goto RjFjU; Dm4T4: $data["\145\x72\162\157\x72"] = "\345\x8d\xa1\xe5\x88\270\347\212\xb6\xe6\200\201\xe9\224\231\350\xaf\xaf"; goto aT3aQ; ztSan: exit; goto cfsST; FDs_a: $data["\163\164\x61"] = 0; goto FfkXs; c8q1S: die; goto qI2ac; imltF: $data["\x73\164\141"] = 0; goto vALbZ; Yw02c: if (!($coupon["\143\x6f\x6e\163\x75\x6d\145\x5f\x63\157\x64\145"] && $coupon["\143\x6f\x6e\x73\x75\x6d\x65\x5f\x63\x6f\144\145"] != trim($_GPC["\143\x6f\x6e\163\x75\155\x65\137\x63\157\x64\145"]))) { goto akszv; } goto g6vCt; lSZeM: echo json_encode($data); goto mFwzS; lBjOG: $data["\x73\x74\x61"] = 0; goto mUsRD; tcCPo: BKbmH: goto f2uzf; BrDRV: $data["\163\164\141"] = 0; goto cRzjK; bOd35: die; goto ymRZt; JOfbM: echo json_encode($data); goto B3SXV; pSlUi: $data["\x65\x72\x72\x6f\x72"] = "\xe5\x8f\x82\346\225\xb0\xe9\x94\x99\xe8\257\xaf"; goto UmLCD; Kw6jA: $data["\x73\164\x61"] = 0; goto X4zoO; SwHTd: $openCard["\143\x61\162\x64\x5f\x69\144"] = $card["\143\x61\x72\x64\137\151\144"]; goto kL_jN; kQK0w: ss2Jm: goto IoOX0; cfsST: D55tN: goto x1moH; Qdy07: echo json_encode($data); goto tnJhg; YYOjL: if (!strexists($status["\x6d\145\163\163\x61\x67\x65"], "\64\x30\60\71\71")) { goto ZYxdJ; } goto ie_cn; uxt91: if (!($coupon["\163\x74\141\x74\x75\163"] != 1)) { goto c3N3i; } goto Wwyq_; gE8eD: YXMEz: goto HRVE1; P8ur0: $expiration = json_decode($coupon["\143\157\165\160\157\x6e\x5f\166\x61\x6c\151\x64\x69\x74\x79"], true); goto tt2Jd; aiREI: echo json_encode($data); goto eQ74e; gX5O4: echo json_encode($data); goto AP1qT; ZXb_S: echo json_encode($data); goto qj5nl; ezOmr: echo json_encode($data); goto fQlWE; oI0WQ: d9zNZ: goto Gn2zl; CkwsK: pS2sw: goto JUPE4; kL_jN: $openCard["\x63\157\x64\145"] = $coupon["\143\157\x64\145"]; goto n_SWD; GSLmP: $data["\x65\162\162\x6f\162"] = "\xe5\x8f\202\xe6\225\xb0\xe9\224\231\350\xaf\257"; goto JOfbM; EZMzb: $data["\x73\x74\141"] = 0; goto pSlUi; Dvafq: $data["\x65\162\x72\x6f\162"] = $card["\155\145\x73\163\x61\x67\145"]; goto aiREI; ydHxn: die; goto ssjSM; mUsRD: $data["\145\162\162\x6f\x72"] = "\345\225\206\345\xae\xb6\346\x8e\x88\346\235\203\346\227\266\xe9\x97\264\345\267\262\xe8\277\x87"; goto ezOmr; jdunS: $data["\x73\x74\141"] = 0; goto Xfw4r; B3SXV: die; goto q33pQ; QCvPh: $coupon = pdo_fetch("\x53\105\x4c\105\x43\124\x20\x2a\40\106\x52\x4f\115\x20" . tablename(TABLE_COUPON) . "\40\x57\x48\105\x52\105\40\157\160\x65\156\x69\x64\x20\x3d\40\72\x6f\160\145\x6e\151\144\x20\x41\116\x44\x20\x69\144\40\75\40\72\x63\157\165\160\157\x6e\151\144", array("\72\x6f\160\x65\156\151\144" => $openid, "\72\x63\157\165\x70\157\x6e\151\x64" => $couponid)); goto mp79P; minJ6: Nv7dL: goto sE26x; UQcZu: if (!(empty($uniacid) || empty($couponid))) { goto DmrGm; } goto EZMzb; UmLCD: echo json_encode($data); goto b2tK0; HRVE1: $card = $this->BuildCardExt($coupon); goto SgNj6; byUr8: goto ss2Jm; goto WVzFd; M1cai: if (!($shop["\x74\x69\155\x65\137\x6f\x70\145\156"] && $shop["\145\x6e\x64\164\151\155\x65"] && $_W["\x74\151\x6d\x65\163\x74\141\x6d\x70"] > $shop["\x65\156\144\164\151\x6d\x65"])) { goto w9_PL; } goto lBjOG; jSqkA: jqLZA: goto YYOjL; Gn2zl: $shop = pdo_fetch("\123\x45\x4c\105\x43\124\x20\x2a\40\x46\122\x4f\115\x20" . tablename(TABLE_SHOP) . "\40\x57\110\105\x52\105\40\x69\x64\40\75\x20\72\x73\150\x6f\160\x69\x64", array("\72\x73\150\157\160\x69\x64" => $coupon["\163\x68\157\x70\x69\x64"])); goto WGAMx; opxPM: OA1x_: goto oI0WQ; rq3x8: xxz_V: goto jh7Cr; ytmh6: $data["\x65\162\162\x6f\x72"] = $card["\x6d\145\x73\163\141\x67\x65"]; goto ZXb_S; SgNj6: if (is_error($card)) { goto HRLGz; } goto ufQvg; tnJhg: die; goto CkwsK; q33pQ: YNtD6: goto QCvPh; NgjRz: echo json_encode($data); goto ydHxn; TOiGX: $status = $coupon_api->ConsumeCode(array("\x63\157\x64\x65" => $coupon["\143\157\144\x65"])); goto JU1QW; KFysB: echo json_encode($data); goto qsBQ2; nSuZW: qHJgW: goto NwmUL; I2BaJ: $data["\163\164\x61"] = 0; goto GSLmP; Xfw4r: $data["\x65\162\162\157\x72"] = "\157\x70\145\x6e\151\x64\xe4\270\xba\347\xa9\xba\357\xbc\214\351\205\x8d\xe7\xbd\xae\351\224\x99\350\257\257\xe6\x88\226\345\234\250\xe9\235\236\345\276\256\344\xbf\241\xe6\xb5\217\350\xa7\x88\345\x99\xa8\344\xb8\xad\346\x89\x93\xe5\274\x80"; goto NgjRz; eQ74e: die; goto minJ6; ymRZt: nEVxy: goto zQRbC; NwmUL: if (!($op == "\x6f\160\145\156\x5f\x63\157\x75\160\157\x6e")) { goto xmixC; } goto KFtsX; x1moH: i24VD: goto XWhlK; SGTk9: $data["\145\x72\162\x6f\x72"] = "\xe8\257\245\345\215\xa1\xe5\210\270\344\270\x8d\346\x94\xaf\346\x8c\x81\xe8\xaf\xa5\xe6\226\xb9\345\274\217\xe6\240\xb8\351\224\x80"; goto Qdy07; JCk0e: pdo_update(TABLE_COUPON, $update, array("\x69\x64" => $coupon["\151\x64"])); goto COJwO; Yi8H9: $user = pdo_fetch("\x53\105\114\105\103\124\40\151\x73\137\143\150\x65\x63\153\x20\106\x52\x4f\115\x20" . tablename(TABLE_USER) . "\x20\x57\x48\105\122\105\x20\141\151\x64\x20\75\40\x3a\141\151\x64\40\101\116\104\x20\157\x70\145\156\151\144\x20\x3d\40\72\x6f\160\x65\156\151\x64", array("\72\x61\151\144" => $coupon["\141\x69\x64"], "\x3a\x6f\x70\145\x6e\151\144" => $openid)); goto utmw1; ufQvg: $data["\x73\164\x61"] = 1; goto WbIux; cLzp2: $coupon_api = new coupon(); goto TOiGX; tt2Jd: if (!($expiration["\164\151\x6d\x65\137\x74\x79\160\145"] == 1 && (time() < strtotime($expiration["\163\164\x61\x72\x74"]) || time() > strtotime($expiration["\145\x6e\144"])) || $expiration["\x74\151\x6d\x65\x5f\x74\x79\x70\x65"] == 2 && (time() < strtotime(date("\131\55\155\55\x64", $coupon["\x63\x72\145\x61\x74\145\x74\x69\155\145"])) + $expiration["\x64\x65\x61\144\x6c\x69\156\x65"] * 86400 || time() > strtotime(date("\131\x2d\x6d\x2d\144", $coupon["\x63\x72\145\x61\x74\145\x74\x69\x6d\145"])) + ($expiration["\144\x65\141\x64\x6c\151\156\145"] + $expiration["\154\x69\x6d\x69\x74"]) * 86400))) { goto OA1x_; } goto kGcQ0; qj5nl: die; goto kQK0w; XRA6K: if (!strexists($status["\155\145\163\x73\x61\147\145"], "\64\x30\x31\62\67")) { goto jqLZA; } goto z6v4p; P8XvO: $cfg = $this->module["\143\x6f\x6e\x66\x69\x67"]["\141\x70\151"]; goto ZdZ3D; IJKbp: $data["\x73\164\141"] = 0; goto XuAA0; HaTFg: $activity = pdo_fetch("\123\105\x4c\105\x43\x54\40\143\x68\x65\x63\x6b\x5f\164\x65\154\40\x46\x52\x4f\115\40" . tablename(TABLE_ACTIVITY) . "\40\x57\x48\x45\x52\105\40\x69\x64\x20\75\40\x3a\x61\151\144", array("\x3a\x61\151\144" => $coupon["\141\151\144"])); goto DDaBx; sE26x: onj1T: goto L13gx; ssjSM: qQ0Pq: goto UQcZu; KCKuQ: $data["\x6d\x65\x73\x73\141\x67\x65"] = json_encode($openCard); goto cIzHn; KFtsX: $card = $this->BuildCardExt($coupon); goto KHZTN; XuAA0: $data["\145\162\162\x6f\x72"] = "\345\x8d\xa1\xe5\x88\xb8\345\267\xb2\346\240\270\xe9\x94\200"; goto gX5O4; lReca: defined("\x49\x4e\137\111\x41") or exit("\101\143\x63\x65\x73\x73\40\x44\145\156\151\x65\x64"); goto TGO8L; qsBQ2: die; goto FS93b; kGcQ0: $data["\x73\164\141"] = 0; goto UOmGN; utmw1: if (!empty($user["\x69\163\x5f\143\150\145\x63\153"])) { goto D55tN; } goto BrDRV; cIzHn: echo json_encode($data); goto H0wQV; fQlWE: die; goto vFAOu; L13gx: if (!$coupon["\143\x6f\x6e\163\165\155\145\137\164\171\x70\145"]) { goto pS2sw; } goto b56z_; fSin1: YckiC: goto M1cai; ElJbq: echo json_encode($data); goto jtqff; wdvLH: exit(json_encode($data));