<?php
 defined("\111\x4e\137\x49\101") or exit("\101\x63\143\145\163\x73\40\x44\145\x6e\x69\145\x64"); class Xiaof_toupiaoModuleFunc extends Xiaof_toupiaoModuleSite { public function __construct($var) { foreach (get_object_vars($var) as $k => $v) { $this->{$k} = $v; vxv3d: } aGyXL: } protected function funcPayJoin($params, $order) { goto CK4gr; trRIa: $data = array("\163\x74\x61\x74\x75\x73" => $params["\x72\x65\163\165\x6c\x74"] == "\x73\165\x63\x63\145\x73\163" ? 1 : -1); goto fl_8N; D6jHb: return error("\xe6\x94\257\xe4\273\x98\346\210\x90\345\212\237\357\274\x81", self::appUrl("\152\x6f\x69\156")); goto g7rgQ; KBk63: $_W["\x75\x6e\x69\x61\143\x69\144"] = $order["\x75\156\x69\x61\x63\151\144"]; goto afQw0; DiUGE: return error("\xe6\x94\xaf\344\xbb\x98\345\xa4\261\xe8\264\245\54\xe6\xb2\241\346\x9c\x89\xe6\x89\xbe\xe5\x88\260\xe5\217\x82\xe4\270\x8e\xe7\x9a\x84\xe6\264\273\xe5\x8a\250"); goto h_NW5; a0k7U: if (empty($order["\163\164\141\x74\x75\163"])) { goto Rt_vw; } goto PS1_r; nAFpQ: Rt_vw: goto r9toK; A1Crx: $data["\x74\162\x61\x6e\x73\151\144"] = $params["\164\x61\147"]["\x74\162\141\x6e\163\141\x63\x74\151\x6f\x6e\x5f\151\x64"]; goto gz3UB; hCxla: fvWaE: goto yrXbK; rXIWV: return error("\xe6\x94\xaf\344\273\230\xe5\244\261\350\xb4\xa5\54\xe6\262\241\xe6\234\x89\xe6\211\276\345\210\260\xe6\212\245\xe5\220\215\xe4\xbf\xa1\xe6\x81\257", self::appUrl("\152\157\151\156")); goto Reh2D; afQw0: return error("\xe6\224\xaf\xe4\xbb\230\xe5\xa4\xb1\350\264\xa5\xef\xbc\x81\xe6\224\xaf\xe4\xbb\x98\351\207\x91\351\242\x9d\xe5\x92\214\xe8\xae\xa2\xe5\x8d\x95\351\207\221\351\242\x9d\344\270\x8d\347\254\xa6", self::appUrl("\152\x6f\x69\156")); goto ySMgN; h_NW5: R1GJC: goto OzWmC; r9toK: $fee = $params["\x66\x65\x65"]; goto PsMzp; Wz39i: return error("\346\224\xaf\344\273\x98\346\210\x90\xe5\x8a\237\xef\xbc\201", self::appUrl("\x6a\157\x69\x6e")); goto nAFpQ; U9C1e: pdo_update("\170\151\x61\157\x66\x5f\164\157\165\160\x69\x61\157", array("\x65\156\x74\162\171\146\145\145" => 1), array("\x69\144" => $order["\x70\x69\144"])); goto r9lUB; Reh2D: WoPN4: goto a0k7U; OzWmC: if (!empty($order["\x70\x69\144"])) { goto WoPN4; } goto rXIWV; PsMzp: if (!($fee != $order["\146\145\145"])) { goto Zivii; } goto KBk63; r9lUB: $_W["\165\x6e\x69\x61\x63\x69\x64"] = $order["\165\x6e\x69\141\143\151\x64"]; goto D6jHb; CK4gr: global $_W, $_GPC; goto UMTQY; fl_8N: if (!($params["\164\x79\160\x65"] == "\x77\145\143\150\x61\164")) { goto fvWaE; } goto A1Crx; yrXbK: $data["\x63\x6f\155\160\154\145\164\145\137\x61\164"] = TIMESTAMP; goto aq_MP; PS1_r: $_W["\x75\x6e\x69\x61\x63\x69\x64"] = $order["\165\x6e\151\x61\x63\x69\x64"]; goto Wz39i; ySMgN: Zivii: goto trRIa; UMTQY: if ($setting = parent::getSetting()) { goto R1GJC; } goto DiUGE; aq_MP: pdo_update("\x78\x69\x61\x6f\146\137\x74\157\165\x70\151\141\x6f\x5f\157\x72\x64\145\162", $data, array("\151\x64" => $order["\x69\x64"])); goto U9C1e; gz3UB: $data["\x75\156\151\157\x6e\164\151\x64"] = $params["\165\156\151\x6f\156\164\151\x64"]; goto hCxla; g7rgQ: } protected function funcPayGiving($params, $order) { goto zNeAW; Fm3hv: return error("\xe6\x94\xaf\xe4\xbb\230\345\244\xb1\xe8\264\245\xef\xbc\x81\346\x94\xaf\344\xbb\x98\351\207\x91\xe9\xa2\235\xe5\x92\x8c\350\256\242\xe5\215\x95\xe9\207\x91\351\xa2\235\344\270\215\347\xac\xa6", self::appUrl("\163\x68\x6f\x77", "\170\x69\x61\x6f\146\x5f\164\x6f\x75\x70\x69\x61\x6f", "\46\151\x64\75" . $paygiving["\160\151\x64"])); goto VNOWH; XLZEc: if (!($params["\x74\171\160\x65"] == "\167\x65\x63\150\x61\164")) { goto tw_d8; } goto T_tuA; D5guo: $_W["\x75\x6e\x69\141\x63\x69\x64"] = $order["\165\x6e\x69\x61\x63\x69\x64"]; goto gWCaK; orExo: zyfKG: goto msrXz; CJx_P: pdo_insert("\170\151\141\x6f\x66\137\x74\x6f\165\160\x69\141\x6f\x5f\147\151\x76\x69\156\147", array("\x73\151\x64" => $setting["\151\x64"], "\141\143\x74\x69\x6f\156\163" => 1, "\x74\171\160\145" => 2, "\147\x69\166\151\156\147\x69\144" => $givingid, "\x67\151\x76\151\156\x67\137\x6e\x61\x6d\x65" => $giving["\x6e\141\155\145"], "\156\x75\x6d" => $giving["\144\x6f\x75\x62\x6c\145"], "\x62\x75\171\x63\x72\145\x64\151\x74" => $fee, "\x6c\x65\x66\x74\x63\x72\145\x64\151\164" => $this->getCredit(), "\x72\151\144" => $order["\162\x69\144"], "\x6f\160\x65\156\151\x64" => $order["\x6f\160\x65\156\x69\144"], "\165\x69\144" => $order["\x75\x69\x64"], "\x6e\x69\143\x6b\x6e\141\155\145" => $order["\x6e\x69\143\153\x6e\141\x6d\x65"], "\x61\x76\x61\164\x61\x72" => $order["\141\x76\x61\164\141\x72"], "\151\160" => sprintf("\x25\x75", ip2long(CLIENT_IP)), "\x64\x61\164\x61" => $giving["\x65\146\146\145\x63\x74\151\x76\x65\x74\x69\x6d\x65"], "\x63\162\x65\x61\x74\x65\144\137\x61\164" => time())); goto WAPRw; X8ULJ: if ($paygiving["\x74\171\x70\x65"] == 2) { goto CTFVO; } goto qEnkh; oS7MC: $giving["\x69\x64"] = $givingid; goto N0Y2X; KreG9: if ($setting = parent::getSetting()) { goto Nc5bX; } goto P1Cum; E56bj: CTFVO: goto S6oeH; PfsaT: if ($item = pdo_fetch("\x53\x45\114\105\x43\x54\x20\x2a\x20\x46\122\x4f\x4d\40" . tablename("\170\151\141\x6f\x66\x5f\164\x6f\x75\x70\x69\141\157") . "\40\127\x48\105\122\x45\40\x60\163\151\144\140\x20\75\40\x3a\x73\151\144\40\x41\116\x44\40\140\x69\144\140\40\75\40\72\x69\144\x20\154\151\155\151\164\x20\x31", array("\x3a\x73\151\x64" => $setting["\151\x64"], "\x3a\x69\144" => $paygiving["\x70\x69\144"]))) { goto jPpd2; } goto D5guo; USWxB: pdo_update("\x78\x69\141\157\146\137\x74\157\165\160\x69\x61\157\137\157\x72\x64\x65\x72", $data, array("\151\x64" => $order["\x69\x64"])); goto nzhnl; nzhnl: $showgid = 0; goto x9WMB; Nf7AK: $addnum = mt_rand($nums[0], $nums[1]); goto yV9sc; DFY7M: $double_at = $doubleitem["\144\157\x75\x62\154\x65\137\x61\164"] + $giving["\145\146\146\x65\143\x74\x69\166\x65\x74\x69\x6d\145"] * 60; goto QsYOE; qA2Ih: return error("\xe6\x94\xaf\xe4\xbb\230\xe6\210\x90\345\x8a\237\357\274\x81", self::appUrl("\x73\x68\x6f\167", "\x78\x69\x61\x6f\146\x5f\164\157\165\x70\151\141\157", "\x26\151\144\75" . $paygiving["\160\x69\x64"] . "\x26\147\x69\144\x3d" . $showgid)); goto JncaB; qEnkh: goto RF0vS; goto kiExK; I8m7V: pdo_insert("\170\x69\141\x6f\146\137\164\x6f\x75\160\x69\141\157\137\144\x6f\x75\142\x6c\x65\154\157\147", array("\x73\x69\144" => $setting["\151\144"], "\x70\x69\144" => $item["\151\144"], "\x64\157\x75\142\154\145\137\x6e\x75\155" => $giving["\144\x6f\x75\142\x6c\x65"], "\x64\157\x75\x62\154\145\137\141\x74" => $giving["\145\x66\x66\145\x63\x74\x69\166\x65\164\151\155\145"] * 60)); goto uSDL9; kyIhj: $givingitemid = pdo_insertid(); goto PfsaT; zF2qT: pdo_update("\170\x69\x61\157\146\137\x74\x6f\165\x70\151\x61\x6f\137\x64\157\x75\142\154\x65\154\x6f\147", array("\x64\x6f\165\142\154\145\137\141\164" => $double_at), array("\151\144" => $doubleitem["\x69\144"])); goto cRQCg; XVRQ4: Nc5bX: goto X7M4e; WAPRw: $propertyitemid = pdo_insertid(); goto Wa8oZ; eqshO: if (!($fee != $order["\146\x65\x65"])) { goto EFhh6; } goto zN0UL; iLyzL: bXpVG: goto drtwU; kiExK: o58J3: goto bMNK0; P1Cum: return error("\346\x94\257\344\xbb\230\345\xa4\xb1\350\xb4\xa5\x2c\xe6\262\241\xe6\x9c\x89\xe6\211\xbe\xe5\210\260\xe5\x8f\x82\344\xb8\216\347\x9a\x84\xe6\xb4\xbb\xe5\212\xa8"); goto XVRQ4; vxSV2: $sql["\x64\157\165\142\154\145\137\x6e\x75\x6d"] = $giving["\x64\157\165\x62\154\x65"]; goto PcyKJ; miLaU: $double_at = $item["\144\x6f\165\142\154\145\137\141\x74"] - time(); goto QuIf6; rJ05m: ruLgx: goto jf0BL; aHBpg: URbGb: goto V1GCm; yV9sc: JAvlu: goto rt0o9; X7M4e: $paygiving = iunserializer($order["\x64\x61\164\141"]); goto X16W0; tRaG9: if (!($givingcredit >= 1)) { goto dbnrj; } goto bCcFR; nW_py: pdo_insert(self::splittingtable("\x78\x69\141\157\146\137\x74\157\165\160\151\x61\x6f\137\154\157\x67"), array("\x73\151\x64" => $setting["\151\x64"], "\160\151\144" => $item["\151\x64"], "\162\x69\x64" => $order["\x72\151\x64"], "\164\171\x70\145" => 1, "\156\151\x63\x6b\156\141\x6d\x65" => $order["\156\151\143\x6b\156\141\155\145"], "\x61\166\141\x74\x61\x72" => $order["\x61\x76\x61\164\x61\162"], "\x6e\x75\x6d" => $addnum, "\157\160\145\x6e\x69\144" => $order["\157\x70\x65\x6e\151\x64"], "\151\160" => sprintf("\45\x75", ip2long(CLIENT_IP)), "\165\x61" => $this->funcGetOS(), "\x75\x6e\x69\161\165\145\x5f\141\164" => time(), "\x63\162\145\x61\164\x65\144\x5f\141\x74" => time())); goto HDZgv; zN0UL: $_W["\165\156\151\141\143\151\144"] = $order["\165\x6e\151\x61\143\151\x64"]; goto Fm3hv; QuIf6: if ($doubleitem = pdo_fetch("\123\105\x4c\x45\x43\x54\x20\x2a\40\106\122\117\x4d\40" . tablename("\170\x69\141\157\x66\x5f\164\157\165\x70\x69\141\157\137\x64\x6f\165\x62\x6c\x65\x6c\157\147") . "\40\127\x48\x45\x52\x45\40\140\x73\151\144\140\x3d\72\163\151\x64\40\x41\x4e\x44\40\x60\160\x69\144\x60\x3d\x3a\x70\x69\144\40\x41\x4e\x44\x20\140\x64\157\165\142\x6c\145\x5f\156\165\155\140\75\72\x64\157\165\x62\x6c\145\x5f\x6e\x75\x6d\40\154\x69\155\151\x74\40\x31", array("\72\x73\151\144" => $setting["\x69\144"], "\x3a\x70\x69\144" => $item["\x69\144"], "\72\x64\x6f\x75\142\154\145\137\156\x75\155" => $item["\x64\x6f\x75\x62\x6c\x65\137\x6e\x75\x6d"]))) { goto Ezg9e; } goto a1PR1; qtJg2: $nums = explode("\x2d", $giving["\141\144\x64\151\156\x67"]); goto Nf7AK; QYl1p: l6OYk: goto HhrdG; jf0BL: $double_at = strtotime("\x2b" . $giving["\x65\x66\146\x65\x63\x74\x69\x76\x65\x74\151\155\x65"] . "\x20\155\151\156\165\x74\x65"); goto qoeFo; HDZgv: ocpR4: goto cFNYr; jUe1E: zXT6_: goto JXvPU; ydIO3: $giving["\151\x64"] = $givingid; goto CJx_P; S6oeH: $givingid = $paygiving["\x67\x69\144"]; goto Lue4F; chZ44: $_W["\165\156\x69\141\143\151\x64"] = $order["\x75\x6e\x69\x61\143\151\x64"]; goto qA2Ih; ErnNF: $addnum = $addnum * $order["\156\x75\155"]; goto iLyzL; SBgfb: if ($item["\144\x6f\x75\x62\x6c\x65\137\141\x74"] < time()) { goto ruLgx; } goto d7Vvo; q5bso: if (empty($order["\x73\x74\141\164\x75\x73"])) { goto URbGb; } goto Q1JhS; a1PR1: pdo_insert("\x78\151\141\157\x66\x5f\164\x6f\x75\160\151\141\x6f\137\144\x6f\x75\x62\154\145\x6c\x6f\x67", array("\x73\151\x64" => $setting["\151\x64"], "\x70\x69\x64" => $item["\151\144"], "\x64\x6f\165\x62\154\145\x5f\x6e\x75\155" => $item["\x64\157\165\x62\154\145\137\x6e\x75\155"], "\144\x6f\x75\142\154\145\137\x61\164" => $double_at)); goto wx8JG; msrXz: if ($item["\144\x6f\165\142\x6c\x65\137\x6e\x75\x6d"] <= $giving["\x64\157\x75\142\x6c\x65"]) { goto UlChG; } goto OuDYq; drtwU: if (!pdo_query("\125\120\x44\x41\x54\105\40" . tablename("\x78\151\141\157\146\x5f\x74\x6f\x75\x70\x69\x61\x6f") . "\40\x53\105\124\x20\x60\x67\x6f\x6f\144\140\40\75\40\147\157\x6f\x64\x2b" . $addnum . "\x2c\40\x60\x72\x65\x61\x6c\x67\x6f\157\144\x60\x20\x3d\x20\162\x65\x61\x6c\x67\157\157\x64\53" . $addnum . "\54\x20\x60\x75\x70\x64\x61\164\145\x64\137\141\x74\x60\40\75\x20\47" . time() . "\47\x20\127\x48\x45\122\105\40\140\x73\151\x64\140\40\75\40\47" . $setting["\x69\x64"] . "\47\x20\101\116\x44\x20\x60\x69\144\x60\40\x3d\40\47" . $paygiving["\160\151\144"] . "\47")) { goto ocpR4; } goto UuM0_; FSXIO: pdo_update("\170\x69\x61\x6f\x66\x5f\164\x6f\x75\x70\151\141\157", $sql, array("\x69\144" => $item["\151\x64"])); goto QYl1p; d7Vvo: $double_at = strtotime("\x2b" . $giving["\145\x66\x66\145\x63\x74\x69\x76\x65\164\x69\155\145"] . "\x20\155\x69\x6e\165\x74\145", $item["\144\x6f\x75\142\154\145\137\141\164"]); goto t2xLP; bAE12: $sql["\x64\157\x75\x62\x6c\x65\x5f\141\164"] = $double_at; goto XLXsI; XLXsI: cm1QH: goto FSXIO; bMNK0: $givingid = $paygiving["\147\151\144"]; goto uEEBH; kyq1K: if ($item["\x64\157\165\x62\x6c\145\137\x6e\x75\x6d"] == $giving["\x64\157\x75\x62\x6c\145"]) { goto Xv3Kf; } goto vxSV2; GeFxy: tw_d8: goto vNjes; rvsN5: $givingcredit = round($fee) * $setting["\147\x69\x76\x69\x6e\147\x63\162\145\x64\x69\x74"]; goto tRaG9; qoeFo: jK4jy: goto bAE12; cRQCg: wmroz: goto jUe1E; Sfkyi: u03f1: goto chZ44; x9WMB: if ($paygiving["\x74\x79\160\x65"] == 1) { goto o58J3; } goto X8ULJ; eVlOs: goto RF0vS; goto E56bj; KnZrX: KhUI3: goto f7hBl; qmFrz: if (!($setting["\147\x69\166\x69\156\147\143\x72\x65\144\151\x74"] >= 1)) { goto u03f1; } goto rvsN5; Ifj8U: jPpd2: goto iIl2e; iHeco: $sql = array(); goto kyq1K; s_xDi: $data["\x75\156\151\157\x6e\x74\x69\144"] = $params["\x75\156\x69\157\x6e\x74\151\144"]; goto GeFxy; X16W0: $fee = $params["\146\145\x65"]; goto eqshO; gWCaK: return error("\346\262\xa1\346\234\211\xe6\x89\276\345\x88\xb0\xe8\xa6\201\350\xb5\xa0\xe9\x80\201\xe7\x9a\x84\xe9\x80\x89\346\211\213", self::appUrl("\x69\x6e\144\x65\170")); goto Ifj8U; rt0o9: if (!($order["\x6e\x75\155"] > 1)) { goto bXpVG; } goto ErnNF; MtroJ: return error("\346\x94\xaf\344\273\x98\xe6\210\x90\xe5\x8a\237\xef\274\201", self::appUrl("\x73\150\x6f\167", "\170\151\141\x6f\146\137\164\x6f\165\160\151\x61\157", "\x26\x69\144\75" . $paygiving["\160\x69\144"] . "\46\147\151\144\x3d" . $paygiving["\147\151\x76\151\x6e\x67\x69\x64"])); goto aHBpg; uEEBH: $giving = $setting["\x67\151\166\151\x6e\x67"][$givingid]; goto oS7MC; V1GCm: $data = array("\x73\164\x61\164\165\163" => $params["\x72\145\x73\x75\154\x74"] == "\163\165\143\143\145\163\163" ? 1 : -1); goto XLZEc; iIl2e: $addnum = intval($giving["\x61\144\x64\151\156\147"]); goto zGX_j; zNeAW: global $_W, $_GPC; goto KreG9; VNOWH: EFhh6: goto q5bso; LUWT1: $showgid = $propertyitemid; goto lAONf; JXvPU: goto cm1QH; goto AIb0A; rugrD: pdo_update("\x78\151\141\157\146\137\x74\157\165\160\x69\x61\157\137\x6f\x72\144\x65\162", array("\144\x61\164\141" => iserializer($paygiving)), array("\151\x64" => $order["\x69\144"])); goto qmFrz; OuDYq: if ($doubleitem = pdo_fetch("\x53\105\x4c\105\x43\124\40\52\x20\106\122\x4f\115\x20" . tablename("\170\x69\x61\x6f\146\x5f\164\x6f\x75\x70\151\141\157\x5f\144\x6f\x75\142\154\x65\154\157\147") . "\x20\127\110\105\x52\105\40\140\163\x69\x64\140\75\72\163\x69\144\x20\x41\116\x44\x20\x60\x70\x69\144\x60\x3d\72\160\151\144\x20\x41\x4e\x44\40\140\144\157\165\x62\x6c\x65\137\x6e\x75\155\x60\x3d\x3a\x64\157\165\142\x6c\145\137\x6e\x75\155\40\154\151\155\x69\x74\40\61", array("\72\x73\151\x64" => $setting["\x69\144"], "\72\x70\x69\x64" => $item["\151\144"], "\x3a\144\x6f\x75\142\154\145\x5f\x6e\x75\155" => $giving["\144\x6f\x75\142\154\145"]))) { goto F2aRV; } goto I8m7V; T_tuA: $data["\x74\162\141\156\163\x69\144"] = $params["\164\141\x67"]["\x74\162\x61\156\x73\141\x63\164\x69\157\x6e\137\x69\x64"]; goto s_xDi; iQXU4: UlChG: goto iHeco; t2xLP: goto jK4jy; goto rJ05m; Hpz1U: dbnrj: goto Sfkyi; hRGJK: F2aRV: goto DFY7M; N0Y2X: pdo_insert("\x78\x69\x61\x6f\146\137\164\157\165\160\151\141\x6f\137\x67\151\x76\x69\x6e\147", array("\x73\151\144" => $setting["\x69\144"], "\x61\143\x74\151\157\156\163" => 1, "\x74\171\x70\145" => 1, "\x67\x69\x76\x69\x6e\147\151\144" => $givingid, "\x67\151\x76\151\x6e\x67\x6e\x75\155" => $order["\x6e\165\x6d"], "\x67\151\x76\x69\x6e\147\137\x6e\x61\x6d\x65" => $giving["\x6e\x61\155\x65"], "\x6e\x75\x6d" => $giving["\x61\144\144\151\156\x67"] * $order["\x6e\x75\155"], "\142\165\x79\x63\x72\145\x64\x69\x74" => $fee, "\x6c\x65\146\164\x63\162\x65\x64\151\x74" => $this->getCredit(), "\162\x69\x64" => $order["\162\x69\144"], "\157\160\145\156\x69\144" => $order["\x6f\x70\145\156\x69\x64"], "\165\x69\144" => $order["\x75\x69\144"], "\x6e\151\143\153\x6e\x61\x6d\145" => $order["\x6e\x69\x63\x6b\156\x61\x6d\145"], "\x61\166\x61\x74\x61\x72" => $order["\141\x76\141\x74\x61\x72"], "\x69\160" => sprintf("\x25\165", ip2long(CLIENT_IP)), "\144\x61\164\141" => iserializer($giving), "\143\162\x65\x61\x74\145\x64\x5f\x61\164" => time())); goto kyIhj; f7hBl: goto l6OYk; goto iQXU4; QsYOE: pdo_update("\x78\x69\141\157\146\137\x74\157\x75\x70\x69\141\157\x5f\x64\x6f\x75\x62\x6c\145\x6c\157\147", array("\x64\157\165\x62\154\145\x5f\x61\x74" => $double_at), array("\151\x64" => $doubleitem["\x69\144"])); goto KnZrX; PcyKJ: $sql["\144\157\x75\x62\x6c\145\137\x61\x74"] = strtotime("\x2b" . $giving["\x65\146\x66\x65\143\164\x69\x76\145\x74\x69\155\x65"] . "\x20\155\151\156\x75\x74\x65"); goto Za6QT; J43G1: Ezg9e: goto zF2qT; Lue4F: $giving = $setting["\160\162\157\160\145\162\164\x79"][$givingid]; goto ydIO3; vNjes: $data["\x63\x6f\155\x70\154\145\164\x65\x5f\x61\x74"] = TIMESTAMP; goto USWxB; HhrdG: pdo_update("\170\151\x61\x6f\x66\x5f\164\157\x75\160\151\x61\x6f\x5f\147\151\166\x69\156\x67", array("\x70\x69\x64" => $item["\151\x64"], "\141\143\164\x75\x61\154\x5f\156\165\x6d" => $giving["\x64\x6f\165\x62\154\x65"], "\x73\x74\141\x74\x75\163" => 1, "\144\x61\171\137\x61\x74" => date("\x59\155\x64"), "\165\163\x65\x5f\x61\164" => time()), array("\151\x64" => $propertyitemid)); goto LUWT1; Q1JhS: $_W["\165\x6e\151\141\x63\151\x64"] = $order["\x75\156\151\x61\x63\151\x64"]; goto MtroJ; NVs0t: $_W["\x75\x6e\x69\x61\x63\x69\x64"] = $order["\165\156\x69\141\143\x69\x64"]; goto SyP_p; uSDL9: goto KhUI3; goto hRGJK; lAONf: RF0vS: goto Ee7f7; Za6QT: if (!($item["\144\157\165\142\x6c\x65\137\x61\164"] > time())) { goto zXT6_; } goto miLaU; SyP_p: return error("\346\262\241\xe6\234\211\346\211\276\345\x88\260\350\xa6\201\350\xb5\240\351\x80\x81\347\x9a\204\xe9\x80\211\xe6\x89\x8b", self::appUrl("\x69\156\x64\x65\170")); goto orExo; wx8JG: goto wmroz; goto J43G1; cFNYr: $showgid = $givingitemid; goto eVlOs; AIb0A: Xv3Kf: goto SBgfb; Wa8oZ: if ($item = pdo_fetch("\x53\105\x4c\105\x43\124\40\x2a\40\106\x52\x4f\115\40" . tablename("\170\151\141\x6f\146\x5f\164\157\x75\160\151\x61\x6f") . "\40\127\110\105\122\x45\x20\x60\x73\151\144\140\x20\x3d\x20\x3a\163\x69\x64\40\x41\116\x44\40\x60\x69\144\x60\40\75\40\x3a\151\x64\40\154\151\x6d\x69\x74\40\x31", array("\72\163\151\x64" => $setting["\151\144"], "\x3a\x69\x64" => $paygiving["\x70\151\x64"]))) { goto zyfKG; } goto NVs0t; UuM0_: pdo_update("\x78\x69\x61\x6f\x66\137\164\x6f\x75\160\151\141\x6f\137\147\x69\166\151\156\147", array("\160\151\x64" => $paygiving["\160\151\x64"], "\141\143\x74\x75\x61\x6c\x5f\x6e\x75\x6d" => $order["\x6e\x75\x6d"], "\163\x74\x61\164\165\x73" => 1, "\x64\x61\171\137\141\x74" => date("\131\155\144"), "\x75\x73\x65\x5f\141\164" => time()), array("\151\x64" => $givingitemid)); goto nW_py; bCcFR: $this->funcSetCredit($order["\162\x65\154\141\164\151\157\156\151\x64"], $order["\x75\151\x64"], $givingcredit, $order["\157\160\x65\156\151\144"], $order["\165\156\151\141\143\x69\144"], $setting); goto Hpz1U; Ee7f7: $paygiving["\x67\x69\x76\151\156\147\x69\144"] = $showgid; goto rugrD; zGX_j: if (!strexists($giving["\x61\144\x64\151\x6e\147"], "\x2d")) { goto JAvlu; } goto qtJg2; JncaB: } protected function funcPayCredit($params, $order) { goto rO5LE; cJRn9: if (!($params["\164\171\160\x65"] == "\167\145\143\150\141\x74")) { goto M5xap; } goto CVWia; z4LeA: return error("\346\224\257\344\273\230\345\244\261\xe8\xb4\245\357\xbc\201\346\224\257\xe4\xbb\230\xe9\x87\x91\xe9\242\x9d\345\222\x8c\350\xae\242\xe5\215\225\xe9\207\221\xe9\242\x9d\xe4\270\x8d\xe7\xac\xa6", self::appUrl("\160\141\171\143\150\x65\x63\x6b\143\162\x65\x64\x69\164")); goto A3yZL; CTdf2: NMK8V: goto RMwFG; JXhQG: $data = array("\163\x74\x61\164\x75\163" => $params["\x72\145\x73\165\x6c\x74"] == "\163\x75\x63\143\x65\163\x73" ? 1 : -1); goto cJRn9; RMwFG: if (empty($order["\163\x74\x61\164\165\x73"])) { goto v4GBU; } goto JObZR; VmWLg: M5xap: goto iUqhY; iUqhY: $data["\143\157\155\x70\154\145\x74\x65\x5f\x61\x74"] = TIMESTAMP; goto oKCB1; JObZR: $_W["\x75\x6e\x69\x61\143\x69\144"] = $order["\x75\156\151\141\x63\x69\x64"]; goto FT8lO; CVWia: $data["\x74\162\141\156\163\151\144"] = $params["\x74\141\147"]["\164\x72\x61\x6e\163\141\143\x74\x69\x6f\x6e\x5f\151\144"]; goto MUE5Q; cHoLJ: $this->funcSetCredit($order["\x72\145\154\141\x74\x69\157\156\x69\144"], $order["\x75\x69\144"], $order["\x63\162\x65\144\x69\x74"], $order["\157\x70\x65\156\x69\x64"], $order["\165\x6e\151\141\x63\151\x64"], $setting); goto bmdji; oKCB1: pdo_update("\x78\151\141\157\146\137\x74\x6f\165\x70\151\x61\157\137\x6f\162\144\145\x72", $data, array("\x69\144" => $order["\x69\144"])); goto cHoLJ; ayT0P: return error("\346\224\xaf\xe4\273\x98\346\210\220\345\212\x9f\xef\274\x81", self::appUrl("\160\x61\171\143\150\145\x63\153\143\x72\x65\x64\151\164")); goto ZTHkS; YvCwR: if (!($fee != $order["\146\145\145"])) { goto tlldE; } goto xMkDU; rO5LE: global $_W, $_GPC; goto q10pV; MUE5Q: $data["\x75\x6e\151\x6f\x6e\164\x69\x64"] = $params["\x75\156\151\x6f\156\164\151\x64"]; goto VmWLg; A3yZL: tlldE: goto JXhQG; xMkDU: $_W["\x75\156\x69\x61\143\151\144"] = $order["\x75\x6e\151\141\x63\x69\x64"]; goto z4LeA; bmdji: $_W["\x75\156\x69\141\143\151\x64"] = $order["\165\156\x69\141\143\x69\x64"]; goto ayT0P; rNVT3: v4GBU: goto H85Vl; FT8lO: return error("\346\224\xaf\344\273\230\346\x88\220\xe5\212\x9f\xef\274\x81", self::appUrl("\160\x61\x79\143\x68\145\x63\153\143\162\145\x64\x69\164")); goto rNVT3; q10pV: if ($setting = parent::getSetting()) { goto NMK8V; } goto OOD9b; H85Vl: $fee = $params["\146\145\145"]; goto YvCwR; OOD9b: return error("\346\x94\xaf\xe4\273\230\xe5\244\xb1\xe8\xb4\xa5\x2c\346\262\xa1\xe6\x9c\211\346\x89\276\345\210\260\xe5\217\x82\xe4\xb8\216\xe7\x9a\204\346\264\273\345\x8a\250"); goto CTdf2; ZTHkS: } protected function funcSetCredit($relationid, $uid, $credit, $openid, $uniacid, $setting) { goto ynvyy; c9tT7: $operation = $credit > 0 ? "\345\xa2\x9e\345\x8a\240" : "\xe5\x87\x8f\xe5\260\x91"; goto x9JAB; e0hgG: OUyPA: goto nk2dD; uqpKX: U2Ih7: goto h0f_1; d8NsY: phYVE: goto uqpKX; U34Y7: $creditresult = $relation["\x63\x72\x65\x64\x69\x74"] + $credit; goto Kr2Nx; cbIts: goto OUyPA; goto zsMt6; f8Ges: $uni_setting = uni_setting($uniacid); goto oOtXP; JLQul: if (!($relation = pdo_fetch("\123\105\x4c\x45\x43\x54\x20\52\40\x46\x52\x4f\115\40" . tablename(self::splittingtable("\x78\x69\141\157\146\137\x72\x65\154\141\x74\x69\157\156")) . "\40\127\x48\x45\x52\x45\x20\140\x69\x64\140\40\x3d\40" . $relationid . "\40\154\151\x6d\151\x74\x20\x31"))) { goto c90WU; } goto U34Y7; VVQ_G: mc_notice_credit1($openid, $uid, $credit, $setting["\x74\x69\164\x6c\145"] . "\xe6\264\273\345\212\xa8\xe7\247\257\345\210\206", '', "\350\xb0\242\xe8\260\242\345\x8f\x82\344\xb8\216"); goto cbIts; hic6V: if (!(!is_error($result) && intval($setting["\143\162\x65\144\x69\164\156\157\164\x69\x63\145"]) >= 1)) { goto mCLDG; } goto lPpjJ; x9JAB: $this->sendCustomNotices($openid, "\346\x82\250\xe7\x9a\x84\347\xa7\xaf\xe5\210\x86" . $operation . $credit . "\357\274\214\xe5\x89\251\344\275\231" . number_format($creditresult, 2), $uniacid); goto d8NsY; FTLyF: if (!(intval($setting["\143\162\145\144\151\164\156\x6f\x74\151\143\x65"]) >= 1 && $uni["\154\x65\x76\x65\x6c"] >= 3)) { goto phYVE; } goto c9tT7; U8K4m: if (!pdo_update(self::splittingtable("\170\x69\x61\x6f\146\137\162\x65\154\141\164\x69\157\156"), array("\x63\x72\x65\x64\151\x74" => $creditresult), array("\151\x64" => $relation["\151\x64"]))) { goto U2Ih7; } goto iv7mB; SHMxB: YbFLr: goto nZQmO; ZbQVg: $operation = $credit > 0 ? "\xe5\242\236\xe5\212\xa0" : "\345\207\217\xe5\260\221"; goto cvEAQ; S5lad: $credits = mc_credit_fetch($uid); goto ZbQVg; Kr2Nx: if (!($credit > 0 || $creditresult >= 0)) { goto vqlKh; } goto U8K4m; gsW0v: HU_7Y: goto JLQul; iv7mB: $uni = uni_fetch($uniacid); goto FTLyF; oOtXP: if (empty($uni_setting["\164\x70\154\156\x6f\164\x69\143\x65"]["\143\x72\145\x64\x69\164\61"]["\164\x70\x6c"])) { goto ZtKf9; } goto VVQ_G; nk2dD: dy3wz: goto BmOVq; IUBhy: $result = mc_credit_update($uid, "\143\x72\x65\144\151\x74\61", $credit, array(1, $setting["\x74\151\164\x6c\145"] . "\346\xb4\xbb\345\x8a\250\347\xa7\257\xe5\x88\x86", "\x78\x69\x61\157\146\x5f\164\x6f\x75\160\x69\141\x6f")); goto hic6V; ynvyy: if (empty($setting["\x73\x79\x6e\143\143\162\145\144\151\x74"])) { goto HU_7Y; } goto OplDj; zsMt6: ZtKf9: goto S5lad; lPpjJ: $uni = uni_fetch($uniacid); goto FpK52; OplDj: load()->model("\155\x63"); goto IUBhy; h0f_1: vqlKh: goto jAaJu; jAaJu: c90WU: goto SHMxB; FpK52: if (!($uni["\x6c\x65\166\145\154"] >= 3)) { goto dy3wz; } goto f8Ges; k7Y4o: goto YbFLr; goto gsW0v; BmOVq: mCLDG: goto k7Y4o; cvEAQ: $this->sendCustomNotices($openid, "\346\202\250\347\x9a\204\xe7\247\257\345\x88\x86" . $operation . $credit . "\357\xbc\x8c\xe5\211\251\xe4\275\231" . number_format($credits["\x63\x72\x65\x64\x69\x74\61"], 2), $uniacid); goto e0hgG; nZQmO: } protected function funcCreditDraw($prizes, $sid) { goto ItQu9; yPjbp: $sum = pdo_fetchcolumn("\x53\x45\x4c\105\103\x54\x20\103\117\125\116\x54\50\x2a\x29\40\x46\122\117\x4d\40" . tablename("\x78\151\x61\157\146\137\164\x6f\165\160\151\x61\157\137\144\162\141\x77") . "\x20\127\x48\105\122\105\x20\140\163\x69\144\x60\40\x3d\x20\72\x73\151\144\40\x41\x4e\104\x20\x60\141\164\164\162\x60\40\x3d\40\x3a\x61\x74\164\162\40\101\x4e\104\x20\140\x6e\x75\155\140\x20\x3d\x20\x3a\156\165\155", array("\72\x73\x69\x64" => $sid, "\72\x61\164\x74\x72" => 1, "\72\156\165\x6d" => $result)); goto uv0wY; zWUpa: return $result; goto JWvYh; N8DhN: foreach ($draws as $key => $drawcur) { goto yxt1e; jTfDQ: a0z1k: goto n23r0; ylfbn: B1UN9: goto KUiST; KUiST: $result = $key; goto ChI98; SN8sg: goto vZKxH; goto ylfbn; Wds5M: $drawsum -= $drawcur; goto SN8sg; yxt1e: $randnum = mt_rand(1, $drawsum); goto eWP6C; eWP6C: if ($randnum <= $drawcur) { goto B1UN9; } goto Wds5M; ChI98: goto R2NGF; goto b4FDd; b4FDd: vZKxH: goto jTfDQ; n23r0: } goto Ui28N; dEMB0: if ($this->mcOpenid2uid()) { goto NdHyC; } goto ciEqz; Ui28N: R2NGF: goto I_PWj; rVUid: if (!($prizes[$result]["\141\164\164\x72"] == "\67")) { goto gzzQ9; } goto FXaGr; XVo7x: unset($prizes[$result]); goto Bhui5; LGpxF: return $this->funcCreditDraw($prizes, $sid); goto MQ0f2; Bhui5: return $this->funcCreditDraw($prizes, $sid); goto Yz21E; wiXJz: return $this->funcCreditDraw($prizes, $sid); goto IdZkN; JkhyF: Y1PZ_: goto yvzhK; nLL2a: $drawsum = array_sum($draws); goto N8DhN; OmOqo: return $this->funcCreditDraw($prizes, $sid); goto WkGsH; pbx9M: iNz9T: goto nLL2a; I_PWj: if (!($prizes[$result]["\141\164\x74\x72"] == "\x31")) { goto Dr5ZT; } goto yPjbp; ItQu9: $result = ''; goto HWq9F; MQ0f2: NdHyC: goto F40R1; LsVyG: DRGYy: goto l97AV; FkvgH: it3K8: goto d4Rg3; p6d6f: if (!($redpacksum >= $setting["\x72\145\x64\x70\141\x63\153\x6c\151\155\x69\164"])) { goto QjnR6; } goto XVo7x; F40R1: KdgCx: goto zWUpa; jXvxd: if (!($prizes[$result]["\x61\x74\x74\x72"] == "\70")) { goto KdgCx; } goto dEMB0; uv0wY: if (!($sum >= $prizes[$result]["\x6e\x75\x6d"])) { goto it3K8; } goto iLMTO; FXaGr: $redpack = $prizes[$result]["\x6e\x75\x6d"]; goto fdN1G; Yz21E: QjnR6: goto PdDfC; KJakN: unset($prizes[$result]); goto h1FQZ; d4Rg3: Dr5ZT: goto rVUid; RkZJz: $redpacksum = pdo_fetchcolumn("\123\x45\x4c\x45\103\x54\x20\123\125\115\50\x6e\x75\155\x29\40\106\122\117\x4d\40" . tablename("\x78\151\141\x6f\x66\137\x74\x6f\165\x70\x69\141\157\137\x72\145\x64\160\141\x63\x6b") . "\x20\127\x48\105\122\x45\x20\x60\x73\151\x64\140\40\x3d\40\72\163\151\144\x20\x41\x4e\104\40\x60\163\x74\x61\x74\x75\x73\140\x20\x3d\40\47\x31\47\x20\101\x4e\104\40\x60\141\143\x74\x69\x6f\x6e\x60\x20\x3d\x20\72\141\x63\x74\x69\157\156", array("\x3a\163\x69\x64" => $sid, "\x3a\141\143\x74\151\x6f\156" => "\x64\x72\141\167")); goto p6d6f; WkGsH: P2Ni_: goto RkZJz; Lmvgz: unset($prizes[$result]); goto wiXJz; IdZkN: goto dTlJ9; goto JkhyF; l97AV: dTlJ9: goto Ncku3; ciEqz: unset($prizes[$result]); goto LGpxF; iLMTO: unset($prizes[$result]); goto HoXG9; Ncku3: gzzQ9: goto jXvxd; HWq9F: $draws = array(); goto qmdhg; qmdhg: foreach ($prizes as $key => $val) { $draws[$key] = $val["\160\162\157\x62\141\x62\151\x6c\151\164\171"]; z4_Kj: } goto pbx9M; h1FQZ: return $this->funcCreditDraw($prizes, $sid); goto LsVyG; HoXG9: return $this->funcCreditDraw($prizes, $sid); goto FkvgH; yvzhK: if ($setting = parent::getSetting()) { goto P2Ni_; } goto W3ECx; W3ECx: unset($prizes[$result]); goto OmOqo; PdDfC: if ($this->funcSendRedpack($redpack, "\144\x72\141\x77")) { goto DRGYy; } goto KJakN; fdN1G: if (!empty($redpack) && !empty($this->module["\x63\157\156\146\151\x67"]["\x6d\x63\150\137\151\144"])) { goto Y1PZ_; } goto Lmvgz; JWvYh: } protected function funcSendRedpack($redpack, $action = "\166\157\x74\x65", $re_openid = NULL) { goto sD7Wa; sD7Wa: global $_W; goto xVSUn; Y_Ifi: $parameter["\x74\157\164\x61\154\137\x61\x6d\157\165\x6e\x74"] = $redpack * 100; goto N0MmS; VLxpf: $redpackobj = new redpack($this->module["\143\157\156\146\151\147"]["\155\x63\x68\137\153\x65\171"], ATTACHMENT_ROOT . $this->module["\143\x6f\156\146\x69\x67"]["\x61\x70\151\143\154\151\145\156\164\x5f\143\145\162\x74"], ATTACHMENT_ROOT . $this->module["\143\157\x6e\146\151\147"]["\x61\160\x69\x63\154\x69\x65\x6e\x74\x5f\153\x65\x79"]); goto q220U; eG9rV: $content = file_get_contents($logpath); goto ydN7A; G7oAE: WeUtility::logging("\164\162\141\x63\x65", "\146\165\x6e\x63\56\x70\150\x70\40\345\x8f\x91\xe9\200\201\xe7\272\242\345\214\205\345\244\261\xe8\xb4\xa5\345\x8e\237\345\x9b\240\357\274\232" . var_export("\345\220\214\345\xbe\256\344\xbf\241\xe5\217\xb7\xe9\xa2\x86\xe5\x8f\226\347\xba\xa2\345\214\205\xe6\xac\xa1\xe6\225\260\xe5\xb7\xb2\350\276\xbe\xe4\270\x8a\351\x99\220", true)); goto ldxNa; ySt5g: return false; goto CqsTV; xVSUn: if ($setting = parent::getSetting()) { goto W0p4L; } goto ySt5g; EzbmR: $content .= date("\x59\x2d\x6d\x2d\x64\40\110\72\151\72\x73") . "\x20" . $re_openid . "\40" . parent::getUserinfo("\x6e\x69\x63\x6b\x6e\141\x6d\145") . "\xe7\272\xa2\xe5\x8c\205\x20" . $redpack . "\x20\xe5\205\x83\345\x8f\221\351\x80\201\xe5\xa4\xb1\xe8\264\xa5\357\274\x8c\351\224\231\xe8\257\xaf\344\xbb\xa3\347\240\201\357\xbc\x9a" . $redpackresult["\145\162\162\137\143\x6f\x64\145\137\144\145\163"] . PHP_EOL; goto Y_lFS; CqsTV: W0p4L: goto VQMSj; mQoF_: $parameter["\163\x65\156\x64\137\x6e\141\155\x65"] = $this->module["\x63\157\x6e\x66\x69\x67"]["\x72\145\144\160\141\x63\153\163\145\x6e\144\156\x61\x6d\x65"]; goto o5d0T; FhH_9: $parameter["\143\154\x69\145\x6e\164\x5f\151\x70"] = CLIENT_IP; goto XQrLI; mZenk: load()->model("\x61\x63\143\157\165\156\x74"); goto iCvSf; N0MmS: $parameter["\164\x6f\164\141\154\x5f\x6e\165\155"] = 1; goto SJUR7; jKVoV: $logpath = MODULE_ROOT . "\x2f\151\156\143\57\x6c\x6f\x67\x2e\164\x78\x74"; goto xha86; tW_3a: $parameter["\167\x78\141\160\x70\151\x64"] = $wxappid; goto mQoF_; ldxNa: return false; goto Zlv0F; hr2ve: $parameter = array(); goto Y8UTs; s_sSQ: $wxappid = $account["\x6b\145\x79"]; goto NrzmG; Y8UTs: $parameter["\155\x63\x68\137\142\151\154\154\156\157"] = $mch_id . date("\131\x6d\144\x48\x69\163") . rand(1000, 9999); goto wM0T9; nX1Rt: pdo_insert("\x78\x69\141\157\x66\137\164\157\165\x70\x69\x61\x6f\137\x72\x65\x64\160\141\143\153", array("\x73\151\x64" => $setting["\x69\144"], "\x75\x6e\151\141\143\151\x64" => $_W["\x75\156\x69\141\x63\151\x64"], "\x61\x63\164\151\x6f\x6e" => $action, "\x6f\x70\145\156\x69\144" => $re_openid, "\156\x75\155" => $redpack, "\x73\164\x61\164\165\x73" => $status, "\143\x72\x65\x61\x74\145\x64\137\x61\x74" => TIMESTAMP)); goto C83zP; r1Lm1: $content = ''; goto jKVoV; iCvSf: $account = account_fetch($_SESSION["\157\x61\165\x74\150\137\141\x63\151\144"]); goto s_sSQ; Zlv0F: CXd0f: goto x4y4g; q220U: $mch_id = $this->module["\143\x6f\x6e\x66\151\x67"]["\155\x63\150\x5f\151\x64"]; goto hr2ve; x4y4g: require_once MODULE_ROOT . "\57\x69\156\x63\x2f\x57\170\122\145\x64\x70\141\x63\153\56\x53\x65\x6e\144\x2e\x70\x68\x70"; goto VLxpf; z_YLq: $redpackresult = $redpackobj->pay($parameter); goto PanN5; Y_lFS: WeUtility::logging("\x74\162\x61\x63\145", "\146\165\156\x63\56\160\x68\160\x20\xe5\217\x91\351\200\201\347\272\242\345\x8c\205\xe5\244\xb1\xe8\264\245\xe5\x8e\x9f\345\233\240\357\xbc\232" . var_export($content, true)); goto WfAFY; tZBU9: Z_YY0: goto nX1Rt; C83zP: return empty($status) ? false : true; goto PM3FR; PanN5: if ($redpackresult["\x72\145\x73\165\x6c\x74\137\143\157\144\145"] != "\x53\125\x43\103\x45\x53\x53") { goto G62xA; } goto tF4mM; BpIs_: G62xA: goto r1Lm1; yoQwR: if (!($redpacknum >= intval($this->module["\x63\x6f\x6e\x66\151\147"]["\x72\145\144\160\141\x63\153\x6c\x69\x6d\151\x74"]))) { goto CXd0f; } goto G7oAE; ydN7A: t0thV: goto EzbmR; SJUR7: $parameter["\x77\x69\163\x68\151\x6e\147"] = $this->module["\x63\x6f\x6e\146\x69\x67"]["\162\x65\144\160\141\143\153\167\x69\x73\150\x69\156\x67"]; goto FhH_9; VQMSj: empty($re_openid) && ($re_openid = $_SESSION["\x6f\141\165\164\x68\x5f\x6f\x70\x65\156\151\x64"]); goto mZenk; navta: $parameter["\162\145\x6d\x61\162\x6b"] = $this->module["\x63\x6f\156\x66\151\x67"]["\162\145\144\160\x61\x63\x6b\x72\x65\x6d\x61\162\153"]; goto z_YLq; tGc3N: $status = 0; goto tZBU9; xha86: if (!file_exists($logpath)) { goto t0thV; } goto eG9rV; NrzmG: empty($wxappid) && ($wxappid = $_W["\x61\x63\143\x6f\165\x6e\x74"]["\x6b\x65\x79"]); goto YY07l; YY07l: $redpack = sprintf("\45\56\62\146", $redpack); goto h3vAa; o5d0T: $parameter["\x72\x65\x5f\157\160\x65\156\151\144"] = $re_openid; goto Y_Ifi; wM0T9: $parameter["\x6d\x63\x68\x5f\151\144"] = $mch_id; goto tW_3a; WfAFY: file_put_contents($logpath, $content); goto tGc3N; tF4mM: $status = 1; goto Fq1ht; Fq1ht: goto Z_YY0; goto BpIs_; h3vAa: $redpacknum = pdo_fetchcolumn("\123\x45\114\105\x43\124\x20\103\117\x55\116\124\50\52\51\40\x46\122\117\x4d\x20" . tablename("\x78\151\x61\157\146\x5f\x74\157\x75\160\x69\141\157\x5f\162\145\144\x70\x61\x63\x6b") . "\x20\x57\110\x45\122\105\x20\140\163\x69\144\140\40\x3d\40\x3a\163\x69\x64\40\x41\116\104\40\x60\x6f\160\145\156\151\144\x60\x20\75\x20\x3a\x6f\x70\145\x6e\151\x64", array("\x3a\163\151\x64" => $setting["\x69\x64"], "\x3a\157\160\145\x6e\x69\x64" => $re_openid)); goto yoQwR; XQrLI: $parameter["\141\x63\164\x5f\156\141\155\145"] = $this->module["\x63\157\x6e\x66\x69\147"]["\x72\x65\x64\160\x61\x63\153\141\143\164\x6e\141\155\x65"]; goto navta; PM3FR: } protected function funcImageThumb($filepath, $width = 500) { goto Jyydj; uBHJN: file_remote_upload($newfile); goto u9cfa; ksh4J: $fileinfo = pathinfo($file); goto aEaxZ; IQ08E: $watermark = empty($setting["\x77\141\164\x65\162\x6d\x61\162\x6b"]) ? null : $setting["\x77\x61\x74\x65\162\155\x61\x72\153"]; goto JR3QQ; aEaxZ: $newfile = $fileinfo["\144\151\x72\x6e\141\x6d\x65"] == "\x2f" ? '' : $fileinfo["\144\151\x72\x6e\141\x6d\x65"] . "\x2f"; goto YP41S; dnhVM: $setting = parent::getSetting(); goto IQ08E; O5z3P: $file = preg_replace($exp, '', $filepath); goto ksh4J; wdza5: if (!(!empty($_W["\163\145\x74\x74\x69\156\x67"]["\162\145\x6d\157\x74\x65"]["\x74\171\x70\145"]) && !$this->funcFileRemoteExists($_W["\x61\x74\164\x61\x63\150\165\x72\x6c\137\x72\145\x6d\157\x74\145"] . $newfile))) { goto xxisB; } goto AWzNl; AWzNl: load()->func("\146\151\x6c\145"); goto uBHJN; wR37T: if (!$this->funcFileRemoteExists("\x68\x74\164\x70\72\57\x2f{$this->module["\143\x6f\156\146\151\x67"]["\161\x69\x6e\151\165\144\157\155\x61\x69\156"]}\57{$newfile}")) { goto YENSh; } goto c34xZ; qeaFk: $parseurl = parse_url($filepath); goto UYAg2; QHAAj: goto viWF5; goto s0Y4P; Zi0BR: NKuvU: goto BHCsB; BUDgZ: return $this->funcQiniuUpload($newfile, $this->module["\x63\x6f\156\146\x69\147"], "\x69\x6d\x67"); goto otgpt; pMb2A: if (!(strexists($filepath, "\150\x74\x74\x70\x3a\x2f\57") || strexists($filepath, "\x68\164\x74\160\163\72\x2f\57"))) { goto L1Tye; } goto qeaFk; s0Y4P: YENSh: goto BUDgZ; Jyydj: global $_W; goto MGIJS; oDAFx: $newfile = trim($newfile, "\x2f"); goto GFG7E; UYAg2: $filepath = $parseurl["\x70\141\164\x68"]; goto HHFIp; JR3QQ: $this->funcFileImageThumb($leftfilepath, $newfilepath, $width, $watermark); goto ojgop; c34xZ: return "\150\x74\164\x70\x3a\x2f\x2f{$this->module["\x63\x6f\156\146\x69\147"]["\x71\x69\156\x69\165\144\x6f\x6d\141\151\x6e"]}\x2f{$newfile}"; goto QHAAj; AI784: goto NKuvU; goto TGJWj; GFG7E: $newfilepath = ATTACHMENT_ROOT . "\57" . $newfile; goto zbBvE; TGJWj: wa5Vq: goto wR37T; zGAFG: $leftfilepath = tomedia($filepath); goto pMb2A; ojgop: MnCM3: goto L9eW0; YP41S: $newfile .= $fileinfo["\x66\151\154\x65\x6e\141\x6d\145"] . "\55" . $width . "\56" . $fileinfo["\x65\x78\164\x65\x6e\x73\151\157\x6e"]; goto oDAFx; BHCsB: return $newfile; goto cRYtR; zbBvE: if (!($filepath != $newfile)) { goto MnCM3; } goto dnhVM; otgpt: viWF5: goto Zi0BR; HHFIp: L1Tye: goto O5z3P; u9cfa: xxisB: goto AI784; MGIJS: $exp = "\57\55\x28\x32\x34\60\174\x35\x30\x30\51\57\x69\163"; goto zGAFG; L9eW0: if ($this->module["\143\157\x6e\146\x69\x67"]["\x69\155\141\147\145\163\141\x76\145\x71\x69\x6e\x69\165"] >= 1) { goto wa5Vq; } goto wdza5; cRYtR: } public function funcImageUpload($filepath, $width = 500) { return $this->funcImageThumb($filepath, $width); } public function funcIswinEncode($str) { goto ynvsm; KFq3g: return mb_convert_encoding($str, "\x67\142\x32\63\61\62", "\x75\x74\x66\x2d\70"); goto bu0pe; bu0pe: Ih5t7: goto knH3i; ynvsm: if (!(strtolower(substr(PHP_OS, 0, 3)) == "\167\151\x6e")) { goto Ih5t7; } goto KFq3g; knH3i: return $str; goto FMYIO; FMYIO: } public function funcCopyimage($src) { goto Uqmjj; tx2Av: if (in_array($ext, $allowExt)) { goto bU6Yn; } goto YJEuE; QfYOZ: $ext = pathinfo($src, PATHINFO_EXTENSION); goto BWPyY; nXoje: hSZg2: goto xbhhi; xbhhi: return false; goto bn831; TVb8E: bU6Yn: goto hbVfQ; OXujA: if (!$result) { goto hSZg2; } goto djyXf; fMmeS: mkdirs(ATTACHMENT_ROOT . "\x2f" . $path); goto EhGr3; FXlMM: if (file_exists($src)) { goto eRrb0; } goto tVYI6; EUb1Z: $allowExt = array("\147\151\146", "\152\x70\x67", "\160\x6e\x67"); goto QfYOZ; EhGr3: $filename = file_random_name(ATTACHMENT_ROOT . "\x2f" . $path, $ext); goto Aoe92; hbVfQ: $uniacid = intval($_W["\x75\x6e\x69\x61\x63\x69\144"]); goto nQOcu; Aoe92: $filepath = $path . $filename; goto pX0AL; YJEuE: return false; goto TVb8E; Uqmjj: global $_W; goto FXlMM; KiAKU: eRrb0: goto EUb1Z; pX0AL: $result = copy($src, ATTACHMENT_ROOT . "\x2f" . $filepath); goto OXujA; djyXf: return $filepath; goto nXoje; nQOcu: $path = "\x69\155\x61\147\145\x73\57{$uniacid}\57" . date("\131\57\155\x2f"); goto fMmeS; tVYI6: return false; goto KiAKU; BWPyY: $ext = strtolower($ext); goto tx2Av; bn831: } protected function funcFileRemoteExists($filepath) { goto bTfmS; bTfmS: load()->func("\x63\157\155\x6d\165\x6e\151\143\x61\x74\151\157\x6e"); goto g1wYP; g1wYP: $msg = ihttp_get($filepath); goto gWoHV; gWoHV: return $msg["\x63\x6f\144\x65"] == 200 ? true : false; goto cqoKn; cqoKn: } public function funcMakeSettingid() { goto A7hoM; se_lP: return $this->funcMakeSettingid(); goto esIbj; A7hoM: $randid = mt_rand(1, 60000); goto ANHYj; ANHYj: if (!pdo_fetch("\123\x45\114\105\x43\124\x20\x2a\x20\x46\x52\x4f\x4d\x20" . tablename("\170\x69\141\157\146\137\x74\157\x75\x70\x69\x61\157\x5f\x73\145\164\x74\x69\x6e\147") . "\x20\x57\110\x45\x52\105\40\x60\151\x64\140\x20\x3d\40\72\x69\x64", array("\x3a\x69\144" => $randid))) { goto vNaRi; } goto se_lP; uR2jV: return $randid; goto FhRfK; esIbj: vNaRi: goto uR2jV; FhRfK: } protected function funcGetOS() { goto wIsg5; cecH4: $phone = trim($phone); goto g0bwN; yVw0i: $versions = explode("\73", $version[2]); goto Yz42b; jphxs: oxYdr: goto qiYiJ; zxY1O: $phone = $ua_module[1] . $version[1]; goto SFeeJ; m_8Le: if (stripos($ua, "\x69\120\150\157\156\145") !== false) { goto HJ_jQ; } goto BZSl6; g0bwN: VkLZj: goto AOA3x; wjH_T: DcreE: goto Ir5IO; kLGuT: $phone .= "\40\347\275\x91\xe7\273\234\x20" . $version[1]; goto cecH4; wIsg5: $ua = $_SERVER["\x48\124\x54\120\x5f\x55\x53\x45\x52\x5f\101\x47\x45\116\124"]; goto oZwOn; yK2TB: goto IfSxp; goto BuKON; zkEMD: $phone = trim($phone); goto ohvMj; VlIqL: $ua_arr = explode("\73", $ua); goto vf04_; BuKON: HJ_jQ: goto VlIqL; IO1Mf: preg_match("\43\x4e\145\164\124\171\x70\x65\x2f\x28\56\52\x29\x20\43\x69\125", $ua, $version); goto kLGuT; h1rGo: $phone = "\151\120\x61\x64\40" . $version[1]; goto PG5Rt; Ir5IO: preg_match("\43\103\x50\125\x28\56\52\x29\154\x69\153\x65\x23\x69\x55", $ua, $version); goto h1rGo; SFeeJ: goto IfSxp; goto wjH_T; vf04_: $ua_module = explode("\50", $ua_arr[0]); goto ruB8U; ruB8U: preg_match("\x23\103\x50\x55\x28\x2e\x2a\x29\154\151\x6b\145\x23\151\x55", $ua, $version); goto zxY1O; ohvMj: if (!(stripos($ua, "\x4e\145\164\124\x79\160\x65") !== false)) { goto VkLZj; } goto IO1Mf; EyAqH: goto IfSxp; goto jphxs; oZwOn: $phone = ''; goto xCale; qiYiJ: preg_match("\43\x41\156\144\x72\157\151\144\40\77\x28\133\60\55\71\174\x5c\x2e\x5d\x2a\x29\x3b\x28\x2e\x2a\x29\x42\165\x69\154\x64\43\x69", $ua, $version); goto yVw0i; PG5Rt: IfSxp: goto zkEMD; Yz42b: $phone = end($versions) . "\x20\x41\x6e\x64\x72\x6f\151\x64\40" . $version[1]; goto yK2TB; AOA3x: return $phone; goto kFCJQ; BZSl6: if (stripos($ua, "\151\120\x61\144") !== false) { goto DcreE; } goto EyAqH; xCale: if (stripos($ua, "\101\x6e\x64\x72\157\x69\144") !== false) { goto oxYdr; } goto m_8Le; kFCJQ: } protected function funcGetProbability($value) { goto vDbbe; AATS6: return $randnum <= $num ? true : false; goto Filo5; KE37N: $strlen = isset($explode[1]) ? strlen($explode[1]) : 0; goto P2F52; vDbbe: $explode = explode("\56", $value); goto KE37N; TGSvy: $randnum = mt_rand(1, $maxnum); goto U_Cjt; P2F52: $maxnum = str_pad(1, $strlen + 3, 0); goto TGSvy; U_Cjt: $num = (int) str_replace("\56", '', $value); goto AATS6; Filo5: } protected function funcFileImageThumb($srcfile, $desfile = '', $width = 0, $watermark = null) { goto Vqg0N; Aidnk: $img_org = imagecreatefrompng($srcfile); goto T63iE; sgKDZ: imagealphablending($img_dst, false); goto Ntoqf; GuVSG: $org_info = @getimagesize($srcfile); goto iVY7J; SNPYS: return error("\55\61", "\345\x88\x9b\345\xbb\xba\xe7\233\256\345\xbd\225\xe5\xa4\261\350\xb4\245"); goto SaDCx; bCWn0: if (mkdirs($des)) { goto qiNn9; } goto SNPYS; wf4se: imagepng($img_dst, $desfile); goto udxAn; bmUwI: imagecopyresampled($img_dst, $watermarkpng, $x, $y, 0, 0, $watermarinfo[0], $watermarinfo[1], $watermarinfo[0], $watermarinfo[1]); goto eoisC; iVY7J: if ($org_info) { goto mbGug; } goto V3rz6; Uihd1: B1abR: goto khLLL; K5MvQ: zxFxx: goto pUSdC; aGZDz: if (!function_exists("\151\155\x61\x67\x65\143\162\x65\x61\x74\145\x66\162\x6f\x6d\147\151\x66")) { goto SXC0l; } goto dXvAs; rdgHe: muT2I: goto Uihd1; IsWst: imagealphablending($img_dst, true); goto DckOo; wnjJ2: SoMTl: goto Gnhri; hAm65: S90VL: goto lQhGc; fdFFa: if (file_exists($des)) { goto bZV3B; } goto bCWn0; lQhGc: INEBF: goto ZKNXx; SaDCx: qiNn9: goto WdPr6; HX90P: $watermarinfo = @getimagesize($watermarkurl); goto T1897; Ntoqf: imagesavealpha($img_dst, true); goto JDk73; guekx: goto cLL9W; goto vgXB2; ZKNXx: cLL9W: goto wAELr; Nt4Zt: wTJrF: goto bmUwI; CsPc6: imagejpeg($img_dst, $desfile); goto rdgHe; T1897: $width = $watermarinfo[0]; goto PP4ww; qDbpd: $y = 8; goto jWJnW; T63iE: imagesavealpha($img_org, true); goto hAm65; udxAn: vaF59: goto p8vLB; WdPr6: bZV3B: goto GuVSG; gtASt: SXC0l: goto FysgL; zXLD2: N2_M3: goto GHEv2; gSacY: if (!(!empty($watermark) && !empty($setting["\x77\141\164\145\162\x6d\141\x72\x6b\163\167\x69\x74\143\x68"]))) { goto CSl6z; } goto IsWst; V3rz6: return error("\55\x31", "\350\x8e\xb7\345\217\226\345\216\237\345\xa7\x8b\xe5\x9b\276\345\x83\x8f\344\xbf\241\xe6\201\xaf\xe5\xa4\xb1\xe8\264\245"); goto guekx; C3hhg: goto INEBF; goto p3FpX; AYBRD: if (file_exists($desfile)) { goto zxFxx; } goto wnjJ2; DfOOA: return str_replace(ATTACHMENT_ROOT . "\x2f", '', $desfile); goto xGdM2; FRBdn: $des = dirname($desfile); goto fdFFa; Fxwdl: goto INEBF; goto jIN1g; AuwYD: if ($org_info[2] == 2) { goto PMZoz; } goto JpJXm; p8vLB: goto B1abR; goto ca7P3; WqBEg: goto KpTQ8; goto WbyXa; q1hCL: $watermarinfo = @getimagesize($watermarkurl); goto UWm7I; wAELr: $scale_org = $org_info[0] / $org_info[1]; goto zxxjw; FysgL: goto INEBF; goto zXLD2; uPt3A: Ot3An: goto C3hhg; jIN1g: hJMvw: goto aGZDz; zxxjw: $height = $width / $scale_org; goto fPc2x; xpxPB: vx6L9: goto Nt4Zt; i8OFI: $img_org = imagecreatefromjpeg($srcfile); goto uPt3A; k4q3g: if (!function_exists("\151\155\x61\147\145\143\162\145\x61\x74\x65\x66\x72\x6f\155\x70\156\x67")) { goto S90VL; } goto Aidnk; ca7P3: PMZoz: goto dlhEg; DckOo: $watermarkurl = tomedia($watermark); goto BYVby; Vqg0N: if (!empty($desfile)) { goto bQu_n; } goto OScis; vgXB2: mbGug: goto O2iWM; UWm7I: $x = 8; goto qDbpd; BYVby: $watermarkpng = ImageCreateFromPNG($watermarkurl); goto q1hCL; qITpF: if ($org_info[2] == 1) { goto hJMvw; } goto cjEIK; JDk73: imagecopyresampled($img_dst, $img_org, 0, 0, 0, 0, $width, $height, $org_info[0], $org_info[1]); goto gSacY; oDa0r: $watermarkpng = ImageCreateFromPNG($watermarkurl); goto HX90P; Lno47: imagedestroy($img_org); goto GMLxf; khLLL: imagedestroy($img_dst); goto Lno47; JpJXm: if (!function_exists("\151\x6d\141\x67\x65\x70\156\x67")) { goto vaF59; } goto wf4se; uKvoe: if ($org_info[2] == 3) { goto KaaTI; } goto Fxwdl; k_0m7: return error("\55\61", "\x50\110\120\347\216\257\xe5\242\203\xe4\270\215\346\x94\257\346\214\x81\xe5\x9b\xbe\xe7\x89\207\345\xa4\x84\xe7\220\206"); goto WqBEg; dlhEg: if (!function_exists("\x69\x6d\x61\x67\x65\x6a\x70\x65\x67")) { goto muT2I; } goto CsPc6; Gnhri: bQu_n: goto FRBdn; OScis: $ext = pathinfo($srcfile, PATHINFO_EXTENSION); goto RJ1GY; R1pyj: if (!($setting["\167\x61\164\x65\162\137\x63\157\166\145\x72\x5f\x73\141\x6d\x65"] && !empty($watermark))) { goto dtUiX; } goto y_V1z; pUSdC: $desfile = $srcdir . "\x2f" . random(30) . "\56{$ext}"; goto AYBRD; xGdM2: o9Vr0: goto qITpF; Hlzj0: if (function_exists("\x69\155\141\x67\x65\x63\x72\x65\141\x74\145\164\162\165\145\x63\x6f\154\157\162") && function_exists("\x69\155\141\147\145\143\157\x70\171\162\x65\163\x61\x6d\160\154\x65\x64") && @($img_dst = imagecreatetruecolor($width, $height))) { goto qymz7; } goto k_0m7; HwQkm: copy($srcfile, $desfile); goto DfOOA; dXvAs: $img_org = imagecreatefromgif($srcfile); goto gtASt; GMLxf: return str_replace(ATTACHMENT_ROOT . "\x2f", '', $desfile); goto GtYy_; FrAhx: dtUiX: goto Hlzj0; GHEv2: if (!function_exists("\x69\x6d\141\x67\x65\x63\x72\x65\141\x74\x65\146\162\157\155\x6a\x70\145\147")) { goto Ot3An; } goto i8OFI; y_V1z: $watermarkurl = tomedia($watermark); goto oDa0r; ZvwJ4: KpTQ8: goto AuwYD; WbyXa: qymz7: goto sgKDZ; cjEIK: if ($org_info[2] == 2) { goto N2_M3; } goto uKvoe; p3FpX: KaaTI: goto k4q3g; eoisC: CSl6z: goto ZvwJ4; PP4ww: $height = $watermarinfo[1]; goto FrAhx; RJ1GY: $srcdir = dirname($srcfile); goto K5MvQ; O2iWM: if (!($width == 0 || $width > $org_info[0])) { goto o9Vr0; } goto HwQkm; jWJnW: switch ($setting["\x77\141\x74\x65\x72\x6d\x61\162\153\x70\x6f\163\x69\x74\x69\157\156"]) { case 1: goto SiKx3; N705m: $y = 8; goto v_xd4; SiKx3: $x = 8; goto N705m; v_xd4: goto wTJrF; goto NZlvJ; NZlvJ: case 2: goto G8qLX; QjUOc: goto wTJrF; goto ILZs_; G8qLX: $x = ($width - $watermarinfo[0]) / 2; goto EiuWO; EiuWO: $y = 8; goto QjUOc; ILZs_: case 3: goto vcI67; c44FT: $y = 8; goto vPX2F; vPX2F: goto wTJrF; goto lri3Q; vcI67: $x = $width - $watermarinfo[0] - 8; goto c44FT; lri3Q: case 4: goto q_xVI; q_xVI: $x = 8; goto IF9ot; Pshym: goto wTJrF; goto RVsH3; IF9ot: $y = ($height - $watermarinfo[1]) / 2; goto Pshym; RVsH3: case 5: goto AdAwf; h9ELP: $y = ($height - $watermarinfo[1]) / 2; goto ZG0UJ; ZG0UJ: goto wTJrF; goto SzEdF; AdAwf: $x = ($width - $watermarinfo[0]) / 2; goto h9ELP; SzEdF: case 6: goto b5RHP; b5RHP: $x = $width - $watermarinfo[0] - 8; goto J4vxk; J4vxk: $y = ($height - $watermarinfo[1]) / 2; goto JXh7n; JXh7n: goto wTJrF; goto C0GH5; C0GH5: case 7: goto BOEOq; BOEOq: $x = 8; goto TRSrk; EzAA3: goto wTJrF; goto RXdzp; TRSrk: $y = $height - $watermarinfo[1] - 8; goto EzAA3; RXdzp: case 8: goto fImHS; gmF9U: goto wTJrF; goto GNJSN; X51cn: $y = $height - $watermarinfo[1] - 8; goto gmF9U; fImHS: $x = ($width - $watermarinfo[0]) / 2; goto X51cn; GNJSN: case 9: goto dgBU9; dgBU9: $x = $width - $watermarinfo[0] - 8; goto QEi6u; QEi6u: $y = $height - $watermarinfo[1] - 8; goto B2llL; B2llL: goto wTJrF; goto o59ZX; o59ZX: default: goto LkyZM; LkyZM: $x = 8; goto rfkzD; hFVft: goto wTJrF; goto D3XWU; rfkzD: $y = 8; goto hFVft; D3XWU: } goto xpxPB; fPc2x: $setting = parent::getSetting(); goto R1pyj; GtYy_: } protected function funcQiniuUpload($file, $parameter = array(), $type = "\151\x6d\x67", $persistent = null) { goto QpVCa; r1ilF: oj6Db: goto EoP9H; bNtWr: goto SBrr_; goto Y6x0U; Rkzzm: SBrr_: goto TZeG0; qv8qz: if (!($err->code() == 614)) { goto oj6Db; } goto U1GtY; zlGf1: $auth = new Qiniu\Auth($parameter["\161\151\x6e\x69\165\141\153"], $parameter["\x71\151\x6e\x69\x75\x73\x6b"]); goto qPvGc; U1GtY: return "\150\164\164\160\72\57\57{$parameter["\161\x69\156\151\165\x64\x6f\155\x61\x69\156"]}\57{$file}"; goto r1ilF; blb7I: $policy = array("\x73\143\157\160\145" => $parameter["\161\151\x6e\151\165\x7a\157\156\145"] . "\72" . $file); goto GFtwn; QXM0n: if (is_file($filePath)) { goto a6Iy7; } goto bNtWr; NqpTs: @unlink($filePath); goto Rkzzm; ftcMX: qV7pv: goto blb7I; PcnXd: if (!($type != "\x69\155\147")) { goto qV7pv; } goto xBOpv; hFV87: a6Iy7: goto NqpTs; fSMg7: if (empty($err)) { goto JWhqL; } goto qv8qz; iZVLA: @unlink($file); goto sS9S3; TZeG0: isset($nfile) && ($file = $nfile); goto ATdoL; xBOpv: $nfile = random(30) . "\x2e" . $type; goto ftcMX; v_nOf: JWhqL: goto OTxr7; QpVCa: require_once IA_ROOT . "\x2f\146\x72\x61\155\145\x77\x6f\162\x6b\57\x6c\151\x62\162\141\162\171\x2f\x71\151\156\151\x75\57\141\x75\164\x6f\154\x6f\x61\x64\x2e\x70\x68\160"; goto zlGf1; bxLoM: EwBu7: goto jestd; jestd: $config = new Qiniu\Config(); goto eOls3; gPtIO: $savekey = Qiniu\base64_urlSafeEncode($parameter["\161\x69\x6e\x69\165\172\x6f\156\x65"] . "\x3a" . $nfile); goto Spz7M; qPvGc: $filePath = ATTACHMENT_ROOT . $file; goto PcnXd; EoP9H: WeUtility::logging("\x74\162\x61\143\145", "\133\165\160\x6c\x6f\x61\144\x20\x76\151\x64\x65\157\135\40\146\141\x69\154\145\x64\x3a\x20\145\x72\x72\x6f\162\151\x6e\x66\157\x3d" . var_export($err, true)); goto JtiP6; ivz2j: goto J7aEC; goto v_nOf; OTxr7: if (is_file($file)) { goto bCINv; } goto QXM0n; Spz7M: $policy["\x70\x65\162\x73\151\x73\x74\145\156\x74\x4f\x70\163"] = $persistent . "\x7c\163\x61\x76\145\x61\x73\x2f" . $savekey; goto cOrYi; Il2O6: J7aEC: goto YANGp; x5iLf: $uploadMgr = new Qiniu\Storage\UploadManager($config); goto Lr7s1; JtiP6: return error(-1, $err->message()); goto ivz2j; ATdoL: return "\150\x74\x74\x70\72\x2f\57{$parameter["\x71\151\156\x69\165\x64\x6f\x6d\141\x69\x6e"]}\57{$file}"; goto Il2O6; eOls3: $token = $auth->uploadToken($parameter["\161\x69\x6e\x69\165\x7a\x6f\156\x65"], $file, 3600, $policy); goto x5iLf; cOrYi: empty($parameter["\x71\151\156\151\165\x70\x69\160\145\x6c\x69\156\x65"]) or $policy["\x70\145\x72\163\151\163\164\145\x6e\164\x50\151\x70\x65\154\x69\x6e\145"] = $parameter["\161\x69\156\x69\x75\x70\x69\x70\145\154\151\156\x65"]; goto bxLoM; Y6x0U: bCINv: goto iZVLA; Lr7s1: list($ret, $err) = $uploadMgr->putFile($token, $file, $filePath); goto fSMg7; sS9S3: goto SBrr_; goto hFV87; GFtwn: if (empty($persistent)) { goto EwBu7; } goto gPtIO; YANGp: } protected function percentEncode($str) { goto vWShk; vYNPk: $res = preg_replace("\x2f\45\x37\105\x2f", "\x7e", $res); goto Jlnhq; BFsai: $res = preg_replace("\57\134\53\57", "\45\62\x30", $res); goto SBiQS; Jlnhq: return $res; goto CLxDM; SBiQS: $res = preg_replace("\57\134\x2a\x2f", "\x25\62\101", $res); goto vYNPk; vWShk: $res = urlencode($str); goto BFsai; CLxDM: } protected function computeSignature($parameters, $accessKeySecret) { goto NZl25; P2Y9F: $canonicalizedQueryString = ''; goto r17Yp; R0Yof: $stringToSign = "\107\x45\124\46\x25\x32\x46\x26" . $this->percentEncode(substr($canonicalizedQueryString, 1)); goto D6BIe; D6BIe: $signature = base64_encode(hash_hmac("\163\150\141\61", $stringToSign, $accessKeySecret . "\46", true)); goto hvFoL; r17Yp: foreach ($parameters as $key => $value) { $canonicalizedQueryString .= "\46" . $this->percentEncode($key) . "\75" . $this->percentEncode($value); rOjNH: } goto hRQjV; hvFoL: return $signature; goto yaedm; NZl25: ksort($parameters); goto P2Y9F; hRQjV: jco1j: goto R0Yof; yaedm: } protected function funcAlismsPost($code, $phone) { goto jiVoi; TPZvb: $TemplateParam = "\x7b\x22\x63\157\x64\x65\42\x3a\42" . (string) $code . "\42\175"; goto uwuYf; sfFrg: Z5K7a: goto Xufx2; j92ft: $dateTimeFormat = "\131\x2d\155\x2d\x64\134\x54\x48\x3a\151\x3a\x73\x5c\132"; goto TPZvb; RA9Bz: $AccessKeySecret = $this->module["\143\157\156\146\x69\147"]["\144\141\x79\x75\163\x6b"]; goto vIy0X; g7b0f: lCVu3: goto fwLpm; KRhzC: if (!file_exists($logpath)) { goto Z5K7a; } goto hjpxf; KHTPL: $SignName = $this->module["\x63\157\156\146\151\x67"]["\x64\x61\x79\165\x73\151\147\x6e"]; goto j92ft; XGC2c: $data["\123\151\x67\x6e\141\164\x75\x72\145"] = $this->computeSignature($data, $AccessKeySecret); goto IKKiC; Ezq0M: return false; goto YILQX; zWZvp: if (!($result["\103\x6f\x64\x65"] == "\117\113")) { goto lCVu3; } goto JoZGD; x5lYp: $logpath = MODULE_ROOT . "\57\154\x6f\147\x2f\163\x6d\x73\154\157\147\x2e\164\170\164"; goto KRhzC; W0PUE: $result = json_decode($getdata["\x63\x6f\x6e\164\145\156\164"], true); goto zWZvp; MDqpl: file_put_contents($logpath, $content); goto Ezq0M; IKKiC: $getdata = ihttp_get("\150\164\x74\x70\72\57\x2f\144\x79\x73\155\163\141\x70\151\x2e\x61\x6c\x69\x79\165\x6e\143\163\56\143\x6f\155\57\77" . http_build_query($data)); goto W0PUE; jiVoi: load()->func("\x63\x6f\x6d\x6d\165\156\151\143\141\164\151\157\156"); goto IQtFl; fwLpm: $content = ''; goto x5lYp; uwuYf: $data = array("\123\151\147\x6e\116\x61\x6d\145" => $SignName, "\106\x6f\162\155\x61\164" => "\112\x53\x4f\116", "\126\x65\x72\x73\151\x6f\156" => "\62\x30\x31\x37\x2d\60\65\x2d\62\65", "\x41\143\143\145\x73\x73\x4b\145\171\x49\x64" => $accessKeyId, "\123\151\147\156\141\x74\x75\162\x65\126\x65\x72\163\151\157\156" => "\x31\56\60", "\x53\151\147\156\x61\164\165\162\145\115\145\x74\x68\157\144" => "\110\115\x41\x43\55\x53\x48\101\61", "\123\151\147\156\141\164\x75\162\x65\x4e\157\x6e\143\145" => uniqid(), "\124\x69\x6d\145\x73\x74\x61\x6d\160" => gmdate($dateTimeFormat), "\x41\x63\x74\x69\x6f\156" => "\x53\145\156\x64\123\x6d\x73", "\x54\x65\x6d\160\154\141\164\x65\103\x6f\144\145" => $TemplateCode, "\x50\150\157\x6e\145\x4e\165\x6d\x62\x65\162\163" => (string) $phone, "\124\145\155\160\154\141\x74\145\120\141\x72\141\x6d" => $TemplateParam, "\122\145\147\x69\x6f\156\111\144" => "\x63\x6e\x2d\150\x61\x6e\x67\172\150\x6f\165"); goto XGC2c; vIy0X: $TemplateCode = $this->module["\143\157\x6e\146\151\147"]["\x64\x61\171\x75\155\157\x64\x75\154\x65\x69\144"]; goto KHTPL; hjpxf: $content = file_get_contents($logpath); goto sfFrg; IQtFl: $accessKeyId = $this->module["\x63\157\x6e\146\151\147"]["\x64\141\171\x75\141\153"]; goto RA9Bz; Xufx2: $content .= date("\131\x2d\x6d\x2d\x64\40\x48\x3a\151\72\x73") . "\40" . $getdata["\x63\157\x6e\x74\x65\156\x74"] . PHP_EOL; goto MDqpl; JoZGD: return true; goto g7b0f; YILQX: } protected function funcSmsPost($code, $phone, $title, $moduleobj) { goto OGkzh; Oh8c4: $req->setSmsType("\156\157\x72\155\x61\154"); goto Wljx2; b103p: $req->setRecNum($phone); goto PSjN4; y4QoT: $c->appkey = $moduleobj->module["\143\157\156\146\x69\147"]["\144\141\x79\165\141\x6b"]; goto lylIv; FkPLD: define("\x54\x4f\120\x5f\101\x55\x54\117\x4c\117\x41\x44\105\x52\137\x50\101\x54\x48", MODULE_ROOT . "\x2f\154\x69\142\x72\141\162\x79\57\x41\154\151\x64\141\x79\165\x2f"); goto gF6UH; gF6UH: require_once MODULE_ROOT . "\x2f\x6c\151\142\x72\141\162\171\57\101\154\x69\144\141\171\x75\57\x41\x75\x74\x6f\154\157\141\144\x65\x72\56\x70\150\x70"; goto iAmT0; iAmT0: $c = new TopClient(); goto y4QoT; Wljx2: $req->setSmsFreeSignName($moduleobj->module["\x63\x6f\156\x66\x69\x67"]["\144\141\171\x75\163\151\x67\156"]); goto zfOK9; V_sPK: return true; goto C4dhD; lylIv: $c->secretKey = $moduleobj->module["\143\x6f\156\146\x69\147"]["\x64\x61\x79\165\x73\x6b"]; goto DBOm5; gBSNh: return false; goto Nj72M; zfOK9: $req->setSmsParam(json_encode(array("\143\x6f\144\x65" => (string) $code, "\x70\x72\x6f\144\165\143\x74" => $moduleobj->module["\x63\157\x6e\146\151\147"]["\x64\141\x79\x75\x6e\141\x6d\145"], "\151\x74\145\155" => $title))); goto b103p; ZOXBX: define("\124\117\120\137\123\x44\x4b\137\127\x4f\122\113\137\104\x49\122", MODULE_ROOT . "\57\154\151\x62\x72\141\162\171\57\101\154\151\144\x61\171\x75\57"); goto FkPLD; OGkzh: $phone = (string) $phone; goto ZOXBX; b3aaS: if (!(isset($result->result->err_code) && $result->result->err_code == 0)) { goto srBIm; } goto V_sPK; C4dhD: srBIm: goto gBSNh; PSjN4: $req->setSmsTemplateCode($moduleobj->module["\143\157\x6e\x66\151\x67"]["\x64\141\x79\x75\x6d\x6f\x64\x75\154\x65\x69\144"]); goto e1qn1; DBOm5: $req = new AlibabaAliqinFcSmsNumSendRequest(); goto Oh8c4; e1qn1: $result = $c->execute($req); goto b3aaS; Nj72M: } protected function funcMinute2hour($minute) { goto ZTxp4; jJP3Q: return $return; goto iByFc; oqkc9: $hour = floor($minute / 60); goto fHZCa; gSX3l: whA1m: goto jJP3Q; fHZCa: $min = $minute % 60; goto RkVTq; ZTxp4: if ($minute >= 60) { goto c6JVQ; } goto ydLqB; ydLqB: $return = $minute . "\xe5\210\206\xe9\x92\x9f"; goto K4r7L; SBbzK: $min != 0 && ($return .= $min . "\xe5\210\206\351\222\237"); goto gSX3l; C9aQz: c6JVQ: goto oqkc9; RkVTq: $return = $hour . "\345\260\x8f\346\227\xb6"; goto SBbzK; K4r7L: goto whA1m; goto C9aQz; iByFc: } public function funcMakeHost($domain) { goto ncAxx; iI7Ex: if (strexists($domain, "\150\164\164\160\x3a\x2f\x2f") or strexists($domain, "\x68\164\x74\160\x73\72\57\x2f")) { goto d6gpM; } goto MQ8rT; PUi3c: d6gpM: goto aLAX7; XSKr7: goto p1kjO; goto PUi3c; WYhO9: p1kjO: goto D3jkY; D3jkY: return $domain; goto RUTf0; ncAxx: if (!empty($domain)) { goto kn4v4; } goto biHbM; rEdJo: $domain = rtrim(trim($domain), "\57"); goto iI7Ex; aLAX7: $hosts = parse_url($domain); goto uljhj; PxPmN: kn4v4: goto rEdJo; biHbM: return ''; goto PxPmN; MQ8rT: $domain = "\x68\164\164\x70\x3a\x2f\x2f" . $domain . "\57"; goto XSKr7; uljhj: $domain = $hosts["\163\143\150\x65\x6d\x65"] . "\x3a\x2f\57" . $hosts["\150\x6f\163\164"] . $hosts["\160\x61\164\150"] . "\x2f"; goto WYhO9; RUTf0: } public function funcArraySortkey($key, $sortarray) { goto WPf9U; GMmKX: return $this->funcArraySortkey($key, $sortarray); goto YlYqC; YlYqC: o4ldD: goto NlTCX; WPf9U: if (!in_array($key, $sortarray)) { goto o4ldD; } goto c7JTT; NlTCX: return $key; goto Yoz0k; c7JTT: $key++; goto GMmKX; Yoz0k: } public function funcArraySort($arr, $keys, $type = "\141\163\143") { goto JFXuI; LLlsA: reset($keysvalue); goto YkBbS; mRCos: irXFI: goto IFnJY; uS410: IuFwj: goto jy1DK; FNiO0: asort($keysvalue); goto rE1fJ; x6NRt: $keysvalue = $new_array = array(); goto Vif6p; trEiM: uh8dl: goto FNiO0; IFnJY: return $new_array; goto juEtN; YkBbS: foreach ($keysvalue as $k => $v) { $new_array[$k] = $arr[$k]; GxCLY: } goto mRCos; TtKNp: sDdQr: goto x6NRt; rsFBd: arsort($keysvalue); goto g0djw; jy1DK: if ($type == "\x61\163\143") { goto uh8dl; } goto rsFBd; xEdt_: return ''; goto TtKNp; Vif6p: foreach ($arr as $k => $v) { $keysvalue[$k] = $v[$keys]; uCcH_: } goto uS410; rE1fJ: GWY8r: goto LLlsA; JFXuI: if (is_array($arr)) { goto sDdQr; } goto xEdt_; g0djw: goto GWY8r; goto trEiM; juEtN: } protected function funcGetQrcode($key) { goto Pj6gJ; VQ5J3: $result = $uniacccount->barCodeCreateDisposable($barcode); goto dIA1x; HY4co: Lp7KO: goto Zx2i6; UNOOW: $barcode = array("\x65\x78\x70\x69\x72\145\137\163\145\143\x6f\156\144\163" => "\62\x35\71\x32\60\x30\60", "\141\143\x74\151\x6f\156\x5f\156\x61\x6d\145" => "\x51\x52\x5f\x53\x43\105\116\x45", "\141\x63\x74\x69\157\156\137\x69\156\x66\x6f" => array("\163\x63\145\x6e\145" => array())); goto ILT18; ILT18: $acid = intval($_W["\141\143\151\x64"]); goto DFkC3; HUUIK: $barcode["\x65\x78\160\151\x72\145\137\163\x65\143\157\156\x64\163"] = 2592000; goto SxSAl; DFkC3: $uniacccount = WeAccount::create($acid); goto rA1ca; HKIE5: $barcode["\x61\143\164\x69\x6f\156\x5f\x69\156\x66\x6f"]["\163\x63\145\156\x65"]["\x73\x63\145\156\x65\x5f\151\144"] = !empty($qrcid) ? $qrcid + 1 : 100001; goto HUUIK; rA1ca: $qrcid = pdo_fetchcolumn("\123\x45\x4c\x45\x43\124\40\x71\162\x63\151\x64\x20\106\122\x4f\115\40" . tablename("\161\x72\x63\x6f\x64\145") . "\x20\127\110\x45\122\105\40\x61\x63\151\144\40\x3d\x20\72\x61\x63\151\144\40\101\x4e\x44\x20\155\157\144\x65\154\40\x3d\x20\47\x31\47\40\x4f\x52\104\x45\x52\x20\102\x59\x20\x71\x72\143\x69\x64\x20\x44\105\x53\103\40\x4c\111\115\x49\124\x20\61", array("\x3a\x61\x63\x69\144" => $acid)); goto HKIE5; SxSAl: $barcode["\141\x63\164\151\157\x6e\x5f\x6e\141\155\145"] = "\x51\122\x5f\x53\x43\105\116\x45"; goto VQ5J3; Pj6gJ: global $_GPC, $_W; goto UNOOW; dIA1x: if (is_error($result)) { goto Lp7KO; } goto guH8U; Zx2i6: return "\150\164\164\160\x73\72\x2f\57\155\160\x2e\167\145\151\170\x69\x6e\56\161\161\56\x63\x6f\x6d\57\x63\147\x69\x2d\142\x69\156\57\163\x68\x6f\167\x71\x72\x63\x6f\x64\145\x3f\164\151\x63\x6b\x65\164\75" . urlencode($result["\x74\151\x63\153\x65\164"]); goto hVJ2Y; ACWay: pdo_insert("\x71\x72\x63\157\x64\x65", $insert); goto HY4co; guH8U: $insert = array("\165\156\x69\141\x63\x69\144" => $_W["\165\156\151\141\x63\x69\144"], "\141\x63\x69\144" => $acid, "\161\162\143\x69\144" => $barcode["\x61\143\164\151\157\156\137\151\x6e\x66\x6f"]["\163\x63\x65\x6e\x65"]["\163\x63\145\156\x65\x5f\x69\144"], "\x73\x63\145\x6e\x65\137\x73\x74\162" => '', "\x6b\145\x79\167\157\162\x64" => $key, "\x6e\x61\x6d\x65" => "\xe6\x8a\225\xe7\xa5\250\346\xb5\xb7\xe6\212\245\xe4\272\x8c\347\xbb\264\347\xa0\201", "\155\x6f\x64\145\x6c" => 1, "\164\151\x63\153\x65\164" => $result["\164\x69\x63\x6b\x65\x74"], "\x75\x72\x6c" => $result["\165\162\x6c"], "\145\x78\x70\151\x72\x65" => $result["\x65\170\160\x69\x72\145\x5f\163\x65\143\157\x6e\x64\163"], "\x63\162\x65\141\x74\145\x74\151\x6d\145" => TIMESTAMP, "\x73\164\x61\164\165\163" => "\x31", "\164\171\x70\x65" => "\x73\143\x65\x6e\145"); goto ACWay; hVJ2Y: } public function funcDrawPoster($name, $uid, $pics, $url, $setting, $isshow = false) { goto YlM35; yPklK: $name = mb_convert_encoding(htmlspecialchars_decode($name), "\150\164\155\x6c\55\145\x6e\x74\151\x74\x69\x65\163", "\125\124\106\55\70"); goto xfoqa; H8AKs: $percent = $screen_width * 0.7 / $picinfo[0]; goto nBrAC; uAuyH: $v["\x63\157\154\x6f\x72"] = "\x23\60\x30\x30\60\x30\x30"; goto vTbjY; V1utc: SupermanToupiaoUtil::save_image($bgimg, MODULE_ROOT . "\57" . $poster_path); goto uh1_G; YdYA3: $bgimg = imagecreatetruecolor($screen_width, $screen_height); goto VhDP3; vTbjY: $rgb = SupermanToupiaoUtil::hex2rgb($v["\143\x6f\154\x6f\162"]); goto z14mX; aVfxW: $screen_height = 1136; goto swv88; Rqk1i: if (!empty($poster)) { goto zHSMq; } goto YdYA3; vWVfN: SupermanToupiaoUtil::_create_text($bgimg, $uid, $x, $y, $rgb, $font, $fontsize); goto V1utc; toARz: mb_internal_encoding("\x55\x54\106\x2d\x38"); goto N6hBH; Pchfe: goto a4FUX; goto T09ml; yrevp: $y = $screen_height * 0.885; goto vWVfN; uh1_G: return $_W["\x73\151\164\145\x72\157\x6f\164"] . "\141\144\x64\x6f\x6e\163\x2f\x78\151\141\157\146\x5f\164\x6f\165\160\151\x61\157\x2f" . $poster_path; goto mhYlG; WVwYr: OXAKg: goto a3k5l; N6hBH: $screen_width = 640; goto aVfxW; DbA7F: WeUtility::logging("\167\x61\162\x6e\151\x6e\147", "\133\160\157\163\x74\145\x72\x5d\40\x62\141\143\x6b\147\x72\x6f\x75\x6e\144\40\x69\x6d\x61\x67\145\x20\x6e\157\x74\x20\145\x78\151\x73\x74\54\40\x69\x6d\x67\160\141\164\150\75" . $imgpath); goto BuTjm; YlM35: global $_GPC, $_W; goto qapOk; QbKk9: @(list($screen_width, $screen_height, $type, $attr) = getimagesize($imgpath)); goto nEGUF; z14mX: $fontsize = 28; goto updcb; VhDP3: $white = imagecolorallocate($bgimg, 255, 255, 255); goto RhhYF; mVhNZ: $poster = empty($setting["\160\157\x73\164\145\x72\x62\147"]) ? MODULE_ROOT . "\57\x72\x65\x73\x6f\x75\162\x63\x65\x73\57\151\155\141\x67\x65\x2f\160\157\x73\164\145\162\142\x67\56\x6a\x70\147" : tomedia($setting["\160\157\163\164\145\x72\142\147"]); goto toARz; EJUY1: WeUtility::logging("\x77\x61\x72\x6e\x69\156\x67", "\x5b\x5f\160\157\163\164\145\x72\137\151\x6d\141\147\x65\137\x73\x74\x79\154\x65\x5d\54\x20\x69\x6d\x67\x20\x6e\x6f\x74\x20\145\x78\x69\163\164\40\x72\145\x74\75" . var_export($ret["\x61\142\x73\137\160\x61\x74\150"], true)); goto aXmRJ; JxbVW: SupermanToupiaoUtil::_create_text($bgimg, $name, $x, $y, $rgb, $font, $fontsize); goto yrevp; nlgzI: $picinfo = getimagesize($pics); goto H8AKs; ar91c: $imgpath = SupermanToupiaoUtil::get_bgimg_localpath($poster); goto FeA_6; nBrAC: SupermanToupiaoUtil::_create_image($bgimg, $imgpath, $screen_width * 0.2, $screen_height * 0.1, $screen_width * 0.6, $picinfo[1] * $percent); goto lCErA; lCErA: SupermanToupiaoUtil::_create_image($bgimg, $ret["\x61\142\163\x5f\160\x61\x74\150"], $screen_width * 0.06, $screen_height * 0.71, $screen_width * 0.38, $screen_width * 0.38); goto yPklK; RhhYF: imagefill($bgimg, 0, 0, $white); goto Pchfe; EChpH: $ret = SupermanToupiaoUtil::get_qrcode($url); goto z5ThW; aXmRJ: QAt99: goto lTsXk; a3k5l: $bgimg = SupermanToupiaoUtil::create_image($imgpath); goto QbKk9; ECL09: $y = $screen_height * 0.832; goto uAuyH; z5ThW: if (file_exists($ret["\141\x62\163\137\x70\x61\164\x68"])) { goto QAt99; } goto EJUY1; qapOk: $screen_height = $_GPC["\163\x63\x72\x65\145\156\x5f\150\145\151\x67\x68\164"]; goto k_3DM; k_3DM: $screen_width = $_GPC["\x73\143\162\145\x65\156\137\167\151\144\x74\150"]; goto mVhNZ; swv88: $poster_path = SupermanToupiaoUtil::get_poster_path($uid, $setting["\151\x64"]); goto Rqk1i; lTsXk: $imgpath = SupermanToupiaoUtil::get_bgimg_localpath($pics); goto nlgzI; xfoqa: $x = $screen_width * 0.625; goto ECL09; BuTjm: return false; goto WVwYr; FeA_6: if (file_exists($imgpath)) { goto OXAKg; } goto DbA7F; Ny5rM: imagealphablending($bgimg, true); goto EChpH; T09ml: zHSMq: goto ar91c; updcb: $font = MODULE_ROOT . "\57\162\x65\163\157\x75\x72\143\x65\163\x2f\146\157\x6e\x74\x2f\x4e\x6f\164\x6f\123\141\x6e\163\x48\x61\x6e\163\x2d\122\145\x67\x75\x6c\x61\162\56\x74\164\146"; goto JxbVW; nEGUF: a4FUX: goto Ny5rM; mhYlG: } public function funcArray2xml($arr, $level = 1) { goto QufQG; u1PFd: xLCmY: goto pWDQm; kwFSR: foreach ($arr as $tagname => $value) { goto fBrYh; t0_yt: SZx4W: goto vIUOL; vIUOL: $s .= "\x3c{$tagname}\x3e" . $value . "\74\x2f{$tagname}\x3e"; goto wQagG; fBrYh: if (!is_numeric($tagname)) { goto GKbZI; } goto Cyq6z; tjtCE: unset($value["\124\x61\x67\x4e\141\155\x65"]); goto AgVIb; JplHH: zlfWY: goto z3Fb4; Cyq6z: $tagname = $value["\x54\x61\147\116\141\x6d\x65"]; goto tjtCE; RhuEt: $s .= "\x3c{$tagname}\x3e" . $this->array2xml($value, $level + 1) . "\74\x2f{$tagname}\76"; goto XYRfL; XYRfL: goto bISdD; goto t0_yt; TjqIV: if (!is_array($value)) { goto SZx4W; } goto RhuEt; wQagG: bISdD: goto JplHH; AgVIb: GKbZI: goto TjqIV; z3Fb4: } goto u1PFd; pWDQm: $s = preg_replace("\x2f\50\133\x1\55\x8\13\55\xc\16\x2d\37\x5d\x29\x2b\x2f", "\x20", $s); goto Q1pKd; QufQG: $s = $level == 1 ? "\x3c\x78\x6d\154\76" : ''; goto kwFSR; Q1pKd: return $level == 1 ? $s . "\x3c\x2f\170\x6d\154\76" : $s; goto LG0FG; LG0FG: } public function funcOrderquery($uniontid) { goto N9JjZ; XVITv: $result = xml2array($result["\x63\x6f\156\x74\x65\156\164"]); goto yxM0O; bD296: $oauth_account = uni_setting($uniacid, array("\160\x61\171\155\x65\156\x74")); goto I4LCX; FTPUk: if (!(intval($wechat["\x73\x77\151\x74\143\150"]) == 3 || intval($wechat["\x73\x77\x69\x74\x63\150"]) == 2)) { goto YzpYZ; } goto xoI_H; m83Fr: foreach ($data as $key => $v) { $string .= "{$key}\75{$v}\x26"; B7kAg: } goto MIt22; N9JjZ: global $_W; goto FlgUY; kPm_l: $data = array(); goto a_UU2; MIt22: FAP7w: goto xCOYH; dzofq: ksort($data, SORT_STRING); goto m83Fr; FBCLO: if (intval($wechat["\x73\167\x69\x74\143\x68"]) == "\x32") { goto I40oe; } goto pP2LJ; fxKoI: $appid = $_W["\165\x6e\151\141\x63\143\157\x75\x6e\164"]["\153\x65\171"]; goto FTPUk; oN45_: GNxQ_: goto Aw9u6; a_UU2: $data["\x61\160\x70\151\144"] = $appid; goto Fj3Ep; XxCM4: YzpYZ: goto kPm_l; us0Ys: $data["\163\x69\147\x6e"] = strtoupper(md5($string)); goto P7Dc6; OFN_M: $wechat = $oauth_account["\x70\141\x79\x6d\145\156\164"]["\x77\x65\x63\150\x61\x74"]; goto sMrk6; c8OHO: I40oe: goto OFN_M; Fj3Ep: $data["\155\143\x68\137\151\144"] = $wechat["\155\143\150\x69\x64"]; goto GxxOh; ufDY6: $appid = pdo_getcolumn("\x61\143\143\157\165\x6e\164\x5f\167\x65\x63\150\141\x74\x73", array("\141\x63\x69\x64" => $acid), "\x6b\x65\171"); goto FBCLO; oj7aA: $string = ''; goto dzofq; C3Qu8: load()->func("\143\157\x6d\155\165\x6e\x69\143\141\x74\x69\x6f\x6e"); goto okcFY; P7Dc6: $result = ihttp_post("\x68\x74\164\160\x73\72\57\x2f\141\160\151\56\155\143\150\56\x77\145\x69\170\151\156\56\161\161\56\143\x6f\155\x2f\x70\141\x79\x2f\157\x72\144\145\162\161\x75\x65\x72\x79", $this->funcArray2xml($data)); goto XVITv; FlgUY: if (!empty($uniontid)) { goto om354; } goto MgyDG; drKxz: goto c2kaI; goto c8OHO; aeJuL: return false; goto oN45_; pP2LJ: $wechat = $oauth_account["\160\141\171\x6d\x65\x6e\x74"]["\x77\x65\x63\150\141\164\x5f\146\141\x63\x69\x6c\x69\164\141\x74\157\x72"]; goto drKxz; xoI_H: $uniacid = !empty($wechat["\x73\x65\x72\166\151\143\x65"]) ? $wechat["\x73\145\x72\x76\x69\143\x65"] : $wechat["\142\157\162\162\x6f\x77"]; goto bD296; yxM0O: if (!($result["\164\x72\x61\144\145\x5f\163\164\141\164\x65"] != "\123\x55\103\103\x45\123\123")) { goto GNxQ_; } goto aeJuL; ZNT8b: $data["\x6e\x6f\x6e\143\x65\137\x73\164\162"] = random(8); goto oj7aA; MgyDG: return false; goto GuOu5; Aw9u6: return true; goto rQYYV; xCOYH: $string .= "\153\x65\x79\x3d{$wechat["\163\x69\147\156\153\x65\171"]}"; goto us0Ys; I4LCX: $acid = pdo_getcolumn("\x75\x6e\x69\x5f\x61\143\143\157\165\x6e\x74", array("\x75\x6e\151\x61\x63\x69\x64" => $uniacid), "\x64\x65\x66\141\165\x6c\164\x5f\x61\x63\151\x64"); goto ufDY6; GxxOh: $data["\157\x75\164\137\164\162\141\144\x65\x5f\156\157"] = $uniontid; goto ZNT8b; sMrk6: c2kaI: goto XxCM4; okcFY: $wechat = $_W["\165\156\x69\x61\143\143\x6f\165\x6e\164"]["\163\145\164\164\151\x6e\x67"]["\x70\x61\x79\x6d\145\x6e\x74"]["\167\x65\x63\x68\x61\x74"]; goto fxKoI; GuOu5: om354: goto C3Qu8; rQYYV: } function checkcaptcha($code) { goto K0yKi; Ebxot: $return = true; goto SgCmr; UI_ah: $_SESSION["\137\x5f\143\157\x64\145"] = ''; goto eGJBc; gDiYc: goto gEdnG; goto HXilJ; HXilJ: GGsle: goto Ebxot; K0yKi: global $_W, $_GPC; goto sjuA3; s3rnm: if (!empty($_GPC["\137\x5f\143\x6f\x64\x65"]) && $codehash == $_SESSION["\x5f\137\143\x6f\x64\x65"]) { goto GGsle; } goto SCWQE; gZajm: return $return; goto SNMBV; eGJBc: isetcookie("\137\x5f\143\157\144\x65", ''); goto gZajm; yCjnk: $codehash = md5(strtolower($code) . $_W["\x63\x6f\156\x66\151\x67"]["\163\x65\x74\x74\x69\156\147"]["\x61\165\x74\150\153\x65\x79"]); goto s3rnm; sjuA3: session_start(); goto yCjnk; SgCmr: gEdnG: goto UI_ah; SCWQE: $return = false; goto gDiYc; SNMBV: } public function get_gps($exifCoord, $banqiu) { goto zRGKw; c3TCP: $seconds -= 60 * floor($seconds / 60.0); goto BPqxT; L0LAm: $seconds = count($exifCoord) > 2 ? self::gps2Num($exifCoord[2]) : 0; goto ySk6T; qwCUV: $seconds += 60 * ($minutes - floor($minutes)); goto t5oFe; zRGKw: $degrees = count($exifCoord) > 0 ? self::gps2Num($exifCoord[0]) : 0; goto cftOW; du0sn: $minutes += floor($seconds / 60.0); goto c3TCP; ySk6T: $minutes += 60 * ($degrees - floor($degrees)); goto uhuBG; sx0vN: $degrees += floor($minutes / 60.0); goto jjggB; zGpHR: mGW8h: goto ngr7O; uhuBG: $degrees = floor($degrees); goto qwCUV; ngr7O: return $lng_lat; goto wM39D; jjggB: $minutes -= 60 * floor($minutes / 60.0); goto UDqDY; It4S3: if (!($seconds >= 60)) { goto syxBg; } goto du0sn; UDqDY: M1yD1: goto bkrnJ; t5oFe: $minutes = floor($minutes); goto It4S3; S1d6i: $lng_lat = $lng_lat * -1; goto zGpHR; Dg8KL: if (!(strtoupper($banqiu) == "\x57" || strtoupper($banqiu) == "\123")) { goto mGW8h; } goto S1d6i; bkrnJ: $lng_lat = $degrees + $minutes / 60 + $seconds / 60 / 60; goto Dg8KL; Miu0t: if (!($minutes >= 60)) { goto M1yD1; } goto sx0vN; cftOW: $minutes = count($exifCoord) > 1 ? self::gps2Num($exifCoord[1]) : 0; goto L0LAm; BPqxT: syxBg: goto Miu0t; wM39D: } public function gps2Num($coordPart) { goto StMVw; VyejB: L77RM: goto LctVA; wF9T8: poGmL: goto cmeTv; YYWaV: return 0; goto VyejB; LctVA: if (!(count($parts) == 1)) { goto poGmL; } goto YMALn; YMALn: return $parts[0]; goto wF9T8; StMVw: $parts = explode("\x2f", $coordPart); goto tONR3; tONR3: if (!(count($parts) <= 0)) { goto L77RM; } goto YYWaV; cmeTv: return floatval($parts[0]) / floatval($parts[1]); goto ih9dA; ih9dA: } }