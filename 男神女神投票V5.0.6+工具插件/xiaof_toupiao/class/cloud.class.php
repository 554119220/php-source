<?php
 defined("\111\116\137\x49\101") or exit("\101\143\143\x65\x73\163\40\104\x65\156\x69\x65\x64"); class SupermanCloud { public $showMessage = true; private $errmsg = ''; private $module_info = array(), $site_info = array(), $result, $post_data; public function __construct($module_info, $site_info = array()) { $this->module_info = $module_info; $this->site_info = $site_info; } public function api($action_method, $data = array()) { goto A_Awu; kvJW1: b7wvM: goto cOXv4; MDgIz: jxaax: goto kx38T; NCGZ3: return $this->result; goto vk6cL; yqAUm: $data["\163\x69\164\x65\151\x64"] = $this->site_info["\163\x69\x74\145\151\144"]; goto LJbHX; kx38T: $msg = "{$this->result["\x65\x72\x72\155\163\x67"]}\50{$this->result["\145\x72\x72\156\x6f"]}\51"; goto GgLoa; wpKLb: $this->result = json_decode($response["\143\x6f\156\x74\145\156\164"], true); goto aUxL3; LJbHX: $url = $this->url($action_method, array(), true); goto zsrz9; WRwqQ: $data["\160\150\x70\x5f\166\145\162\x69\157\x6e"] = PHP_VERSION; goto R6fZ4; bg11y: $data["\x62\162\x61\x6e\x63\x68"] = "\147\x69\146\164"; goto ywBKx; zsrz9: $response = $this->request($url, $data, true); goto hU38D; aUxL3: if (!(!is_array($this->result) || !isset($this->result["\145\162\x72\x6e\x6f"]))) { goto DlFZ7; } goto ZHpQs; M9Xwo: JX6SC: goto xont7; A_Awu: global $_W; goto WRwqQ; XhY8r: return false; goto i6JTr; WXguL: DlFZ7: goto NCGZ3; cOXv4: $this->errmsg = "\xe7\xbd\221\347\xbb\234\345\xbc\202\xe5\270\xb8\357\274\x8c\xe8\257\267\347\250\215\xe5\220\216\xe9\x87\x8d\xe8\257\x95\xef\274\201"; goto hwPBq; EIF6r: if ($this->showMessage) { goto b7wvM; } goto Pq3ji; GgLoa: $this->errmsg = $msg; goto IiYMq; hU38D: if (!empty($response)) { goto rIPZI; } goto WVQ1N; ywBKx: $data["\163\x69\x74\145\x72\x6f\x6f\164"] = $_W["\163\151\164\145\x72\x6f\157\x74"]; goto yqAUm; IiYMq: return false; goto brJEC; jJMHV: $data["\155\x6f\144\x75\154\x65\137\156\141\155\145"] = $this->module_info["\x6e\141\155\145"]; goto bg11y; WVQ1N: WeUtility::logging("\146\x61\x74\141\x6c", "\133\x63\x6c\x6f\x75\x64\x2e{$action_method}\x5d\40\x72\x65\x73\x70\x6f\x6e\x73\x65\x20\151\x73\40\156\x75\154\154\x2c\40\x75\162\x6c\x3d{$url}\x2c\x20\x70\x6f\163\x74\137\144\x61\x74\141\75" . var_export($this->post_data, true)); goto EIF6r; Mn1jg: goto JX6SC; goto kvJW1; R6fZ4: $data["\x6d\x6f\x64\165\x6c\145\137\x76\145\x72\x73\x69\x6f\x6e"] = $this->module_info["\166\x65\162\x73\x69\157\x6e"]; goto jJMHV; chNew: if ($this->showMessage) { goto jxaax; } goto XhY8r; xont7: rIPZI: goto wpKLb; i6JTr: goto VRljF; goto MDgIz; ZHpQs: WeUtility::logging("\146\x61\x74\x61\x6c", "\133\x63\x6c\157\x75\144\x2e{$action_method}\x5d\40\162\145\163\160\157\156\x73\x65\40\151\156\x76\x61\x6c\151\144\x65\x2c\40\x72\x65\x73\160\x6f\x6e\163\x65\75" . var_export($response, true)); goto chNew; Pq3ji: return false; goto Mn1jg; hwPBq: return false; goto M9Xwo; brJEC: VRljF: goto WXguL; vk6cL: } public function url($action_method, $extra = array(), $signature = false) { goto utYqU; vVvpI: $host = $this->get_host(); goto dPcq7; XzIXB: PNoP8: goto ypU8g; SMrVr: if (isset($params[$action][$method])) { goto BZPy7; } goto UukW3; vTA0h: $str = http_build_query($querystring); goto BEkSn; VkTzs: if (!(strpos($action_method, "\56") !== false)) { goto k4jPK; } goto C2_tK; TlGwk: $action = $action_method; goto sx5hA; VPBxq: BZPy7: goto vVvpI; UlW2Z: if (!($action_method == "\163\151\164\x65\x2e\x69\x6e\x64\x65\170" || $action_method == "\147\x6f\x6f\144\x73\56\x61\147\162\x65\145\x6d\x65\x6e\x74")) { goto PNoP8; } goto bbHbM; EvloH: $params = array("\x5f\x63\157\155\x6d\157\x6e" => array("\155" => "\x69\x6e\x64\x65\x78", "\143" => "\x61\160\x69"), "\x63\x68\x65\143\x6b" => array("\151\156\144\x65\x78" => array("\141" => "\x63\150\x65\143\x6b", "\x6d\145\164\150\157\x64" => "\x69\156\x64\145\x78", "\x73\x69\x74\145\151\x64" => $this->site_info["\163\x69\164\145\x69\x64"])), "\162\145\160\157\x72\x74" => array("\151\156\x64\145\x78" => array("\141" => "\162\145\160\157\162\x74", "\155\x65\x74\x68\157\144" => "\x69\156\x64\x65\170", "\163\x69\164\145\x69\x64" => $this->site_info["\x73\151\164\x65\151\144"])), "\165\x70\147\162\141\144\145" => array("\x72\145\160\x6f\x72\x74" => array("\x61" => "\165\x70\x67\162\141\x64\x65", "\x6d\x65\164\150\157\x64" => "\162\145\x70\157\162\x74", "\x73\x69\164\x65\151\x64" => $this->site_info["\x73\151\164\145\151\144"]))); goto SMrVr; bbHbM: $querystring = array_merge($querystring, array("\160\150\x70\x5f\166\145\x72\x69\x6f\156" => PHP_VERSION, "\x6d\x6f\x64\165\x6c\x65\137\166\145\x72\x73\x69\157\156" => $this->module_info["\166\x65\x72\x73\151\157\156"], "\x6d\x6f\144\x75\154\145\137\x6e\141\155\145" => $this->module_info["\x6e\x61\x6d\145"], "\x62\162\141\156\x63\150" => "\147\151\146\x74")); goto XzIXB; agccI: $url .= $host . "\57\x69\156\144\x65\x78\56\x70\x68\x70\x3f"; goto ASQbg; GyMm_: $querystring["\x73\x6e"] = sha1($str); goto LgQuG; sx5hA: $method = "\151\156\144\x65\170"; goto VkTzs; UgfDE: $url = $_W["\151\x73\150\164\x74\160\x73"] ? "\150\164\164\160\x73\x3a\57\57" : "\150\164\x74\x70\72\x2f\x2f"; goto agccI; UukW3: trigger_error("\x69\156\166\x61\x6c\151\x64\x20\160\141\x72\x61\x6d\163\40\42" . $action_method . "\x22"); goto VPBxq; dPcq7: $querystring = array_merge($params["\137\x63\x6f\x6d\x6d\157\x6e"], $params[$action][$method], $extra); goto UlW2Z; BEkSn: $str .= "\46\x73\x65\x63\162\145\164\75" . $this->site_info["\163\145\143\x72\x65\x74"]; goto GyMm_; R_1P8: ksort($querystring); goto vTA0h; utYqU: global $_W; goto TlGwk; C2_tK: list($action, $method) = explode("\x2e", $action_method); goto skF6g; LgQuG: olrgi: goto UgfDE; uN7ai: return $url; goto aSwtB; ypU8g: if (!$signature) { goto olrgi; } goto R_1P8; ASQbg: $url .= http_build_query($querystring); goto uN7ai; skF6g: k4jPK: goto EvloH; aSwtB: } public function is_error() { goto JQl35; JQl35: if (empty($this->errmsg)) { goto DC7rg; } goto YAT65; RufV_: return false; goto f_KPp; YAT65: return true; goto yOpQa; yOpQa: DC7rg: goto RufV_; f_KPp: } public function get_errmsg() { goto zFb6p; zFb6p: $errmsg = $this->errmsg; goto cSMDK; Cw73y: return $errmsg; goto sURqp; cSMDK: $this->errmsg = ''; goto Cw73y; sURqp: } private function get_host() { goto pjOnn; uxLUZ: j6EAO: goto eNi7d; J2HPA: return "\x64\145\x76\143\x6c\x6f\x75\x64\56\163\x75\160\x65\x72\155\141\156\x61\x70\x70\x2e\143\x6e"; goto YglGu; eNi7d: if (!defined("\117\x4e\114\111\116\105\137\x44\x45\126\105\114\x4f\120\115\105\116\x54")) { goto d03km; } goto J2HPA; YglGu: d03km: goto t2Nn5; t2Nn5: return "\x63\x6c\x6f\165\144\56\x73\165\160\145\x72\x6d\x61\x6e\x61\x70\x70\x2e\x63\156"; goto s4j8k; kYigu: return "\x6c\x6f\x63\141\x6c\x2d\143\154\x6f\165\144\56\x73\x75\160\145\x72\x6d\141\156\141\x70\x70\56\x63\x6e"; goto uxLUZ; pjOnn: if (!defined("\x4c\x4f\103\101\x4c\x5f\x44\105\126\105\x4c\117\x50\115\x45\x4e\x54")) { goto j6EAO; } goto kYigu; s4j8k: } private function request($url, $post, $extra = array(), $timeout = 30) { goto NTkWj; B3djl: HYjJa: goto UKi23; tTiO7: UZg3h: goto iZddX; BEk1Z: WeUtility::logging("\x64\x65\142\x75\x67", "\x5b\x72\x65\x71\x75\145\x73\x74\x5d\x20\x75\x72\x6c\x3d{$url}\x2c\x20\x70\157\x73\x74\75" . var_export($post, true) . "\54\x20\x65\170\164\162\141\75" . var_export($extra, true)); goto B3djl; iZddX: return $response; goto H4vS2; V4USs: $post["\x6f\163"] = php_uname(); goto MdXrL; MdXrL: e74o_: goto Tas8Q; WGrKG: $post["\160\150\160\x5f\166\145\x72\x73\x69\x6f\x6e"] = PHP_VERSION; goto UXr5i; nsS02: if (isset($post["\157\x73"])) { goto e74o_; } goto V4USs; UKi23: if (isset($post["\x70\x68\160\137\x76\145\x72\163\151\x6f\x6e"])) { goto aVbEP; } goto WGrKG; Ez0LO: if (!defined("\x53\125\x50\x45\x52\115\x41\x4e\x5f\104\105\126\105\114\x4f\x50\115\x45\x4e\124")) { goto HYjJa; } goto BEk1Z; NTkWj: load()->func("\143\x6f\x6d\x6d\165\156\151\143\x61\x74\151\x6f\x6e"); goto Ez0LO; UXr5i: aVbEP: goto nsS02; juQ_i: if (!defined("\x53\x55\120\x45\x52\115\101\x4e\x5f\104\105\126\x45\x4c\117\120\115\105\116\124")) { goto UZg3h; } goto P_6Fo; P_6Fo: WeUtility::logging("\144\145\142\x75\147", "\x5b\162\x65\163\160\157\x6e\x73\145\x5d\x20\x63\x6f\156\164\145\x6e\164\x3d" . $response["\x63\157\x6e\164\145\156\164"] . "\54\40\x64\141\164\141\75" . var_export(json_decode($response["\x63\x6f\x6e\164\x65\x6e\x74"], true), true)); goto tTiO7; Tas8Q: $response = ihttp_request($url, $post, $extra, $timeout); goto juQ_i; H4vS2: } }