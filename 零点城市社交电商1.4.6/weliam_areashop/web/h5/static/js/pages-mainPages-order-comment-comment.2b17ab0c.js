(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mainPages-order-comment-comment"],{"2e7a":function(e,t,o){"use strict";o.r(t);var i=o("cffc"),a=o("a741");for(var s in a)"default"!==s&&function(e){o.d(t,e,function(){return a[e]})}(s);o("6758");var c=o("2877"),n=Object(c["a"])(a["default"],i["a"],i["b"],!1,null,"32cbe9cf",null);t["default"]=n.exports},"559a":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(o("deda"));function a(e){return e&&e.__esModule?e:{default:e}}var s={data:function(){return{options:null,scorenum:null,goodsList:[],imagarray:null,formData:[],contentlength:0,submitDisable:!1,scoreList:[!1,!1,!1,!1,!1]}},components:{},computed:{},onLoad:function(e){this.options=e,this.getGoodsList()},onShow:function(){},mounted:function(){},methods:{getGoodsList:function(){var e=this;i.default._get("user.comment/order",{order_id:this.options.order_id},function(t){var o=t.data.goodsList;e.setData({goodsList:o,formData:e.initFormData(o)})})},initFormData:function(e){var t=[];return e.forEach(function(e){t.push({goods_id:e.goods_id,order_goods_id:e.order_goods_id,scorenum:0,content:"",image_list:[],uploaded:[]})}),t},contentInput:function(e){var t=e.currentTarget.dataset.index;this.contentlength=e.detail.value.length,this.$set(this.formData[t],"content",e.detail.value)},chooseImage:function(e){var t=this,o=e.currentTarget.dataset.index,i=t.formData[o].image_list;uni.chooseImage({count:9-i.length,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){t.$set(t.formData[o],"image_list",i.concat(e.tempFilePaths))}})},deleteImage:function(e){var t=e.currentTarget.dataset,o=this.formData[t.index].image_list;o.splice(t.imageIndex,1)},commentSubmit:function(e,t){var o=this;i.default._post_form("Comment/createComment",{score:e.scorenum,content:e.content,order_id:Number(o.options.order_id),source:2,img_list:t},function(e){if(console.log(e,"评价成功"),1===e.code){i.default.showSuccess("评价成功",function(){uni.redirectTo({url:"/pages/mainPages/order/comment/success?type=success&&comment_id=".concat(e.data)})})}},!1,function(){uni.hideLoading(),o.submitDisable=!1})},submit:function(){var e=this,t=e.formData[0];if(0===t.scorenum)return i.default.showError("请选评价等级"),!1;if(!t.content)return i.default.showError("请填写评论内容"),!1;if(!0===e.submitDisable)return!1;if(uni.showLoading({title:"正在处理...",mask:!0}),e.submitDisable=!0,t.image_list.length>0){var o=[],a=t.image_list.map(function(e){return i.default._upLoad(e)});Promise.all(a).then(function(i){var a=i.map(function(e){return e.file_id});o.push(a),e.commentSubmit(t,o)})}else e.commentSubmit(t,"")},scoreClick:function(e){var t=this.scoreList.map(function(t,o){return t=o<=e,t});for(var o in t)console.log(t[o]),t[o]&&this.$set(this.formData[0],"scorenum",Number(o)+1);this.$set(this,"scoreList",t)},orderInfo:function(){i.default.navigationTo({url:"pages/mainPages/order/detail?order_id="+this.options.order_id})}},onPullDownRefresh:function(){},onShareAppMessage:function(){}};t.default=s},6758:function(e,t,o){"use strict";var i=o("8c41"),a=o.n(i);a.a},"8c41":function(e,t,o){var i=o("d04d");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=o("4f06").default;a("25ac56a4",i,!0,{sourceMap:!1,shadowMode:!1})},a741:function(e,t,o){"use strict";o.r(t);var i=o("559a"),a=o.n(i);for(var s in i)"default"!==s&&function(e){o.d(t,e,function(){return i[e]})}(s);t["default"]=a.a},cffc:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.goodsList.length&&e.formData.length?o("v-uni-view",{staticClass:"container p-bottom"},[o("v-uni-view",{staticClass:"goods-list"},e._l(e.goodsList,function(t,i){return o("v-uni-view",{key:i,staticClass:"goods-item"},[o("v-uni-view",{staticClass:"goods-detail dis-flex flex-dir-row"},[o("v-uni-view",{staticClass:"left"},[o("v-uni-image",{staticClass:"goods-image",attrs:{src:t.image.file_path}})],1),o("v-uni-view",{staticClass:"right dis-flex flex-box flex-dir-column flex-x-around"},[o("v-uni-view",{staticClass:"twolist-hidden"},[e._v(e._s(t.goods_name))]),o("v-uni-view",{staticClass:"order-info",on:{click:function(t){t=e.$handleEvent(t),e.orderInfo(t)}}},[e._v("订单详情")]),o("v-uni-view",{staticClass:"goods-price col-3 f-28"},[e._v("￥"+e._s(t.goods_price)),o("v-uni-text",[e._v("¥"+e._s(t.line_price))])],1)],1)],1),o("v-uni-view",{staticClass:"comment-detail"},[o("v-uni-view",{staticClass:"score-row dis-flex flex-x-center flex-y-center"},[o("v-uni-view",{staticClass:"set-score f-32 col-9"},[e._v("评分")]),o("v-uni-view",{staticClass:"score-list"},[o("v-uni-view",{staticClass:"comment-star dis-flex flex-y-center"},e._l(e.scoreList,function(t,i){return o("v-uni-view",{key:i,staticClass:"iconfont icon-shoucangxiao",class:t?"select":"",attrs:{"data-index":"score"},on:{click:function(t){t=e.$handleEvent(t),e.scoreClick(i)}}})}),1)],1)],1),o("v-uni-view",{staticClass:"comment-contnet"},[o("v-uni-view",{staticClass:"dis-flex content-row"},[o("v-uni-textarea",{attrs:{"data-index":i,maxlength:"200",placeholder:"请输入评价内容 (留空则不评价)",placeholderStyle:"color:#ccc"},on:{input:function(t){t=e.$handleEvent(t),e.contentInput(t)}}}),o("v-uni-view",{staticClass:"content-num"},[e._v(e._s(e.contentlength)+"/200")])],1),o("v-uni-view",{staticClass:"image-list dis-flex flex-y-center"},[e._l(e.formData[i].image_list,function(t,a){return o("v-uni-view",{key:a,staticClass:"image-preview"},[o("v-uni-text",{staticClass:"image-delete iconfont icon-shanchu",attrs:{"data-index":i,"data-image-index":a},on:{click:function(t){t=e.$handleEvent(t),e.deleteImage(t)}}}),o("v-uni-image",{attrs:{mode:"aspectFill",src:t}})],1)}),!e.formData[i].image_list||e.formData[i].image_list.length<9?o("v-uni-view",{staticClass:"image-picker dis-flex flex-dir-column flex-x-center flex-y-center",attrs:{"data-index":i},on:{click:function(t){t=e.$handleEvent(t),e.chooseImage(t)}}},[o("v-uni-text",{staticClass:"choose__icon iconfont icon-paizhao"}),o("v-uni-text",{staticClass:"choose__text"},[e._v(e._s(e.formData[i].image_list.length)+"/9")])],1):e._e()],2)],1)],1)],1)}),1),o("v-uni-view",{staticClass:"flow-fixed-footer"},[o("v-uni-view",{staticClass:"flow-btn f-32"},[o("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.submit(t)}}},[e._v("确认提交")])],1)],1)],1):e._e()},a=[];o.d(t,"a",function(){return i}),o.d(t,"b",function(){return a})},d04d:function(e,t,o){t=e.exports=o("2350")(!1),t.push([e.i,'.goods-list[data-v-32cbe9cf]{font-size:%?28?%}.goods-item[data-v-32cbe9cf]{margin:%?20?% %?30?%}.goods-item .goods-detail[data-v-32cbe9cf]{padding:%?30?%;background:#fff;border-radius:%?20?%;position:relative}.goods-item .goods-detail .order-info[data-v-32cbe9cf]{font-size:%?24?%;padding:%?10?% %?18?%;border-radius:%?28?%;border:%?1?% solid #6b696c;position:absolute;right:%?30?%;bottom:%?44?%}.goods-item .goods-detail .left .goods-image[data-v-32cbe9cf]{display:block;width:%?150?%;height:%?150?%;border-radius:%?6?%}.goods-item .goods-price uni-text[data-v-32cbe9cf]{font-size:%?24?%;text-decoration:line-through;color:#999;margin-left:%?12?%}.goods-item .goods-detail .right[data-v-32cbe9cf]{padding-left:%?20?%}.goods-item .comment-detail[data-v-32cbe9cf]{margin-top:%?20?%;padding:%?30?%;border-radius:%?20?%;background:#fff}.goods-item .score-row[data-v-32cbe9cf]{margin-bottom:%?30?%}.goods-item .score-row .score-item.score__praise[data-v-32cbe9cf]{color:#ff4544}.goods-item .score-row .score-item.score__praise .score__icon[data-v-32cbe9cf]{background:#ff4544}.goods-item .score-row .score-item.score__review[data-v-32cbe9cf]{color:#fcb500}.goods-item .score-row .score-item.score__review .score__icon[data-v-32cbe9cf]{background:#fcb500}.goods-item .score-row .score-item.score__negative[data-v-32cbe9cf]{color:#9b9b9b}.goods-item .score-row .score-item.score__negative .score__icon[data-v-32cbe9cf]{background:#9b9b9b}.goods-item .score-row .score-item .score[data-v-32cbe9cf]{padding:%?10?% %?20?% %?10?% %?10?%;border-radius:%?30?%}.goods-item .score-row .score-item .score .score__icon[data-v-32cbe9cf]{margin-right:%?10?%;padding:%?10?%;border-radius:50%;font-size:%?30?%;color:#fff}.goods-item .score-row .score-item.__active .score[data-v-32cbe9cf]{color:#fff}.goods-item .score-row .score-item.__active.score__praise .score[data-v-32cbe9cf]{background:#ff4544}.goods-item .score-row .score-item.__active.score__review .score[data-v-32cbe9cf]{background:#fcb500}.goods-item .score-row .score-item.__active.score__negative .score[data-v-32cbe9cf]{background:#9b9b9b}.goods-item .comment-contnet[data-v-32cbe9cf]{padding:%?20?% %?30?%;margin-top:%?20?%;background:#fdfbfe}.goods-item .content-row[data-v-32cbe9cf]{position:relative}.goods-item .content-row .content-num[data-v-32cbe9cf]{position:absolute;right:0;bottom:0;color:#ccc;font-size:%?28?%}.goods-item .content-row uni-textarea[data-v-32cbe9cf]{width:100%;height:%?220?%;padding:%?12?%;border-radius:%?6?%;-webkit-box-sizing:border-box;box-sizing:border-box}.goods-item .image-list[data-v-32cbe9cf]{-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.goods-item .image-list[data-v-32cbe9cf]:after{clear:both;content:" ";display:table}.goods-item .image-list uni-image[data-v-32cbe9cf]{display:block;width:%?150?%;height:%?150?%;border-radius:%?10?%}.goods-item .image-list .image-picker[data-v-32cbe9cf]{width:%?150?%;height:%?150?%;border:%?1?% dashed #ccc;color:#ccc}.goods-item .image-list .image-picker .choose__icon[data-v-32cbe9cf]{font-size:%?56?%;margin-bottom:%?6?%}.goods-item .image-list .image-picker .choose__text[data-v-32cbe9cf]{font-size:%?22?%}.goods-item .image-list .image-picker[data-v-32cbe9cf],.goods-item .image-list .image-preview[data-v-32cbe9cf]{margin-right:%?30?%;margin-top:%?30?%}\n\n/* \t.goods-item .image-list .image-picker:nth-child(4n+0),\n.goods-item .image-list .image-preview:nth-child(4n+0) {\n\tmargin-right: 0;\n} */.goods-item .image-list .image-preview[data-v-32cbe9cf]{position:relative}.goods-item .image-list .image-preview .image-delete[data-v-32cbe9cf]{position:absolute;top:%?-15?%;right:%?-15?%;height:%?42?%;width:%?42?%;line-height:%?42?%;background:rgba(0,0,0,.64);border-radius:50%;color:#fff;font-weight:bolder;font-size:%?22?%;z-index:10;text-align:center}.flow-fixed-footer[data-v-32cbe9cf]{border:0;padding:0 %?30?% %?30?%;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:rgba(0,0,0,0)}.flow-fixed-footer .flow-btn[data-v-32cbe9cf]{background:#ffd940;border-radius:%?50?%}.score-list[data-v-32cbe9cf]{margin-left:%?20?%}.score-list uni-image[data-v-32cbe9cf]{width:%?50?%;height:%?50?%;display:block;margin-left:%?10?%}.comment-star .iconfont[data-v-32cbe9cf]{width:%?36?%;height:%?36?%;line-height:%?36?%;font-size:%?36?%;margin-right:%?8?%;display:block;color:#ccc}.comment-star .iconfont.select[data-v-32cbe9cf]{color:#ffd940}.set-score[data-v-32cbe9cf]{margin-top:%?2?%}',""])}}]);