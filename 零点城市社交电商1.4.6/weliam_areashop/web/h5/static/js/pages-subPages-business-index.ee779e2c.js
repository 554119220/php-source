(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-subPages-business-index"],{"44b2":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("deda"));function n(e){return e&&e.__esModule?e:{default:e}}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var o={data:function(){return{tabList:[{title:"订单管理",id:"order",thumb:"/static/images/ordergl.png",link:"pages/subPages/business/order"},{title:"核销记录",id:"check",thumb:"/static/images/hexiaojilu.png",link:"pages/subPages/business/check"},{title:"我的店铺",id:"store",thumb:"/static/images/ordergl.png",link:"pages/mainPages/store/index?bus_id="}],detail:null,codeNumber:"",checkType:"3",user_id:null}},components:{},computed:{placeholder:function(){return"请输入".concat("3"===this.checkType?"核销":"自提","码")}},beforeCreate:function(){},onLoad:function(e){this.user_id=uni.getStorageSync("user_id")},onShow:function(){this.getMerchantInfo()},mounted:function(){},methods:{getMerchantInfo:function(){var e=this;i.default._get("merchant.index/index",{},function(t){e.detail=t.data})},navigationTo:function(e){var t=this;1===t.detail.right.seedata?i.default.navigationTo({url:e.link+("store"===e.id?t.detail.bus_id:"")}):i.default.showError("请在后台开启查看权限")},checkConfirm:function(){var e=this,t=e.checkType;i.default.showError("是否确认操作?",function(a){var n;a.confirm&&i.default._post_form("merchant.index/checkCode",(n={},c(n,"2"===t?"selfcode_id":"vercode",e.codeNumber),c(n,"check_type",e.checkType),n),function(a){1===a.code&&i.default.showSuccess("2"===t?"自提成功":"核销成功",function(){e.codeNumber="",e.getMerchantInfo()})})})},lotterWriteOff:function(e,t,a){if(e&&t&&a)if("3"===this.checkType){i.default._get("luck.luck/checkLuckCode",{bus_id:e,luck_code:t,luck_id:a},function(e){var t=e.code,a=e.msg;1===t&&i.default.showError("".concat(a||"核销成功"))},function(e){0===e.data.code&&uni.navigateBack({delta:1})})}else i.default.showError("扫码失败,抽奖暂不支持自提,请重试");console.log(e,t,a)},scanningCode:function(){var e=this,t=i.default.getClientType();"4"===t?wxApi.scanQRCode(function(t){console.log(t.resultStr);var a=JSON.parse(t.resultStr),n=a.order_id,c=a.luck_code,o=void 0===c?"":c,s=a.luck_id,r=void 0===s?"":s;"scanQRCode:ok"===t.errMsg?(console.log(t),r?e.lotterWriteOff(e.detail.bus_id,o,r):n&&i.default.navigationTo({url:"pages/mainPages/order/selfcancel?order_type=store&order_id=".concat(n||"","&user_id=").concat(e.user_id)})):i.default.showError("扫码失败,请重试")}):uni.scanCode({complete:function(t){if("scanCode:ok"===t.errMsg){console.log(t);var a=JSON.parse(t.result),n=a.order_id,c=a.luck_code,o=void 0===c?"":c,s=a.luck_id,r=void 0===s?"":s;r?e.lotterWriteOff(e.detail.bus_id,o,r):n&&i.default.navigationTo({url:"pages/mainPages/order/selfcancel?order_type=store&order_id=".concat(n||"","&user_id=").concat(e.user_id)})}else i.default.showError("扫码失败,请重试")}})},checkTypeChange:function(){var e=this;uni.showActionSheet({itemList:["商品核销","商品自提"],success:function(t){e.checkType=0===t.tapIndex?"3":"2"}})}}};t.default=o},"5b15":function(e,t,a){"use strict";a.r(t);var i=a("44b2"),n=a.n(i);for(var c in i)"default"!==c&&function(e){a.d(t,e,function(){return i[e]})}(c);t["default"]=n.a},"6e25":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"page"},[a("v-uni-view",{staticClass:"header-bg"},[a("v-uni-image",{attrs:{src:"/static/images/zhushoubg.png",mode:"widthFix"}})],1),e.detail?a("v-uni-view",{staticClass:"section"},[a("v-uni-view",{staticClass:"cancel-content p-left-right-30"},[1===e.detail.right.check?a("v-uni-view",{staticClass:"content-header b-f m-btm20"},[a("v-uni-view",{staticClass:"cancel-header t-c"},[a("v-uni-view",{staticClass:"cancel-logo"},[a("v-uni-image",{attrs:{src:"/static/images/saoma.png"},on:{click:function(t){t=e.$handleEvent(t),e.scanningCode()}}})],1),a("v-uni-view",{staticClass:"col-3 f-28 m-btm40"},[e._v("扫一扫")])],1),a("v-uni-view",{staticClass:"cancel-main p-left-right-40"},[a("v-uni-view",{staticClass:"cancel-main-content dis-flex"},[a("v-uni-view",{staticClass:"check-type dis-flex flex-x-center flex-y-center",on:{click:function(t){t=e.$handleEvent(t),e.checkTypeChange(t)}}},[a("v-uni-view",{staticClass:"col-6 f-26"},[e._v(e._s("3"===e.checkType?"核销":"自提"))]),a("v-uni-view",{staticClass:"iconfont icon-triangledownfill"})],1),a("v-uni-view",{staticClass:"cancel-input"},[a("v-uni-input",{staticClass:"f-24 col-9",attrs:{type:"number",placeholder:e.placeholder},model:{value:e.codeNumber,callback:function(t){e.codeNumber=t},expression:"codeNumber"}})],1),a("v-uni-view",{staticClass:"cancel-btn f-24 col-3",on:{click:function(t){t=e.$handleEvent(t),e.checkConfirm(t)}}},[e._v("确认"+e._s("3"===e.checkType?"核销":"自提"))])],1)],1)],1):e._e(),a("v-uni-view",{staticClass:"cancel-data dis-flex b-f p-top-bom-40  m-btm20"},[a("v-uni-view",{staticClass:"data-content t-c"},[a("v-uni-view",{staticClass:"col-9 f-24"},[e._v("核销金额")]),a("v-uni-view",{staticClass:"col-3 f-32"},[e._v(e._s(e.detail.checkTotalMoney&&1===e.detail.right.seedata?e.detail.checkTotalMoney:"0.00"))])],1),a("v-uni-view",{staticClass:"data-content t-c bor-lr-1px"},[a("v-uni-view",{staticClass:"col-9 f-24"},[e._v("自提金额")]),a("v-uni-view",{staticClass:"col-3 f-32"},[e._v(e._s(e.detail.selfTotalMoney&&1===e.detail.right.seedata?e.detail.selfTotalMoney:"0.00"))])],1)],1),a("v-uni-view",{staticClass:"cancel-tab dis-flex b-f"},e._l(e.tabList,function(t,i){return a("v-uni-view",{key:i,staticClass:"tab-item t-c",on:{click:function(a){a=e.$handleEvent(a),e.navigationTo(t)}}},[a("v-uni-view",{staticClass:"tab-imag"},[a("v-uni-image",{attrs:{src:t.thumb,mode:""}})],1),a("v-uni-view",{staticClass:"col-3 f-24"},[e._v(e._s(t.title))])],1)}),1)],1)],1):e._e()],1)},n=[];a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n})},"76de":function(e,t,a){"use strict";a.r(t);var i=a("6e25"),n=a("5b15");for(var c in n)"default"!==c&&function(e){a.d(t,e,function(){return n[e]})}(c);a("af70");var o=a("2877"),s=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"4061a31a",null);t["default"]=s.exports},a6f7:function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,".header-bg uni-image[data-v-4061a31a]{width:100%;margin-top:%?-2?%}.section[data-v-4061a31a]{position:relative;top:%?-160?%}.content-header[data-v-4061a31a]{height:%?280?%;-webkit-border-radius:%?6?%;border-radius:%?6?%}.cancel-logo uni-image[data-v-4061a31a]{width:%?176?%;height:%?176?%}.cancel-header[data-v-4061a31a],.cancel-main[data-v-4061a31a]{position:relative;top:%?-86?%}.cancel-main-content[data-v-4061a31a]{height:%?80?%}.cancel-main-content .check-type[data-v-4061a31a]{padding:0 %?12?%;background:#f0f0f0;-webkit-border-top-left-radius:%?10?%;border-top-left-radius:%?10?%;-webkit-border-bottom-left-radius:%?10?%;border-bottom-left-radius:%?10?%}.cancel-main-content .check-type .iconfont[data-v-4061a31a]{font-size:%?18?%;padding-left:%?6?%}.cancel-main-content .cancel-input[data-v-4061a31a]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;background:#f0f0f0;padding-left:%?12?%}.cancel-main-content .cancel-input uni-input[data-v-4061a31a]{height:%?80?%;line-height:%?80?%}.cancel-main-content .cancel-btn[data-v-4061a31a]{width:%?120?%;height:%?80?%;line-height:%?80?%;background:#ffd940;text-align:center;-webkit-border-top-right-radius:%?10?%;border-top-right-radius:%?10?%;-webkit-border-bottom-right-radius:%?10?%;border-bottom-right-radius:%?10?%}.cancel-data[data-v-4061a31a]{-webkit-border-radius:%?6?%;border-radius:%?6?%}.data-content[data-v-4061a31a]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.bor-lr-1px[data-v-4061a31a]{border-left:1px solid #eee;border-right:1px solid #eee}.cancel-tab[data-v-4061a31a]{padding:%?46?% 0;-webkit-border-radius:%?6?%;border-radius:%?6?%}.tab-item[data-v-4061a31a]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.tab-item .tab-imag uni-image[data-v-4061a31a]{width:%?84?%;height:%?84?%}",""])},af70:function(e,t,a){"use strict";var i=a("d178"),n=a.n(i);n.a},d178:function(e,t,a){var i=a("a6f7");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("489a61ca",i,!0,{sourceMap:!1,shadowMode:!1})}}]);