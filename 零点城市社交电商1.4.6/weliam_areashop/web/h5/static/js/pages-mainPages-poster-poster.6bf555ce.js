(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mainPages-poster-poster"],{"3a8d":function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,".page[data-v-2e2910d6]{padding:0 %?30?%}.poster-image[data-v-2e2910d6]{width:100%;margin:%?30?% 0;-webkit-border-radius:%?15?%;border-radius:%?15?%;height:-webkit-calc(100vh - %?160?%);height:calc(100vh - %?160?%);\n\theight:-webkit-calc(100vh - %?160?% - 44px);height:calc(100vh - %?160?% - 44px);\n\tdisplay:block}.saveBtn[data-v-2e2910d6]{width:%?300?%;height:%?80?%;line-height:%?80?%;-webkit-border-radius:%?50?%;border-radius:%?50?%;display:inline-block;background:#ffd940;text-align:center}.setting-btn[data-v-2e2910d6]{position:absolute;top:0;left:0;right:0;bottom:0;opacity:0}",""])},"4b8b":function(e,t,a){"use strict";var n=a("f587"),i=a.n(n);i.a},"7df2":function(e,t,a){"use strict";a.r(t);var n=a("ca71"),i=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,function(){return n[e]})}(o);t["default"]=i.a},"89a8":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"page"},[e.poster_images?[a("v-uni-image",{staticClass:"poster-image",attrs:{src:e.poster_images,mode:"aspectFit"}})]:e._e(),"4"!==e.clientType?a("v-uni-view",{staticClass:"t-c p-r"},[e.openSetting?a("v-uni-button",{staticClass:"btn-normal setting-btn",attrs:{"open-type":"openSetting"},on:{opensetting:function(t){t=e.$handleEvent(t),e.onSetting(t)}}}):e._e(),a("v-uni-view",{staticClass:"saveBtn f-30 col-3",on:{click:function(t){t=e.$handleEvent(t),e.saveimages(e.poster_images)}}},[e._v("保存海报")])],1):e._e(),a("page-loading",{ref:"loading"})],2)},i=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})},ad48:function(e,t,a){"use strict";a.r(t);var n=a("89a8"),i=a("7df2");for(var o in i)"default"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);a("4b8b");var s=a("2877"),r=Object(s["a"])(i["default"],n["a"],n["b"],!1,null,"2e2910d6",null);t["default"]=r.exports},ca71:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("6c98"));function i(e){return e&&e.__esModule?e:{default:e}}var o={data:function(){return{poster_images:null,user_id:null,openSetting:!1}},onLoad:function(e){var t=this;t.user_id=e.userid,t.clientType=n.default.getClientType(),t.$nextTick(function(){t.getposterDetail(e)})},methods:{getposterDetail:function(e){n.default.showLoading();var t=this,a="";switch(e.postertype){case"goods":a="goods/getQrcode";break;case"store":a="merchant.index/getQrcode",e.bus_id=e.pid;break;case"dealer":a="user.dealer.user/getQrcode";break;case"evaluate":a="comment/getPoster",e.evaluate_id=e.pid;break;case"luck":a="luck.luck/getQrcode",e.luck_id=e.pid;break}delete e.pid,delete e.postertype,delete e.requesttype,n.default._post_form(a,e,function(e){1===e.code&&t.setData({poster_images:e.data})},!1,function(){n.default.hideLoading()})},saveimages:function(){uni.showLoading();var e=this,t=this.poster_images;e.downloadIamge(t)},onSetting:function(e){console.log(e);var t=e.detail.authSetting,a="scope.writePhotosAlbum";t[a]&&(this.openSetting=!1)},downloadIamge:function(e){var t=new Image;t.setAttribute("crossOrigin","anonymous"),t.onload=function(){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var a=e.getContext("2d");a.drawImage(t,0,0,t.width,t.height);var n=e.toDataURL("image/png"),i=document.createElement("a"),o=new MouseEvent("click");i.download="poster",i.href=n,i.dispatchEvent(o)},t.src=e}},mounted:function(){}};t.default=o},f587:function(e,t,a){var n=a("3a8d");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("2b856400",n,!0,{sourceMap:!1,shadowMode:!1})}}]);