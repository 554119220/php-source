(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mainPages-order-comment-comment"],{"1acc":function(t,e,i){"use strict";i.r(e);var o=i("91ff"),a=i.n(o);for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);e["default"]=a.a},"3da2":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.goodsList.length&&t.formData.length?i("v-uni-view",{staticClass:"container p-bottom"},[i("v-uni-view",{staticClass:"goods-list"},t._l(t.goodsList,function(e,o){return i("v-uni-view",{key:o,staticClass:"goods-item"},[i("v-uni-view",{staticClass:"goods-detail dis-flex flex-dir-row"},[i("v-uni-view",{staticClass:"left"},[i("v-uni-image",{staticClass:"goods-image",attrs:{src:e.image.file_path}})],1),i("v-uni-view",{staticClass:"right dis-flex flex-box flex-dir-column flex-x-around"},[i("v-uni-view",{staticClass:"twolist-hidden"},[t._v(t._s(e.goods_name))]),i("v-uni-view",{staticClass:"order-info",on:{click:function(e){e=t.$handleEvent(e),t.orderInfo(e)}}},[t._v("订单详情")]),i("v-uni-view",{staticClass:"goods-price col-3 f-28"},[t._v("￥"+t._s(e.goods_price)),i("v-uni-text",[t._v("¥"+t._s(e.line_price))])],1)],1)],1),i("v-uni-view",{staticClass:"comment-detail"},[i("v-uni-view",{staticClass:"score-row dis-flex flex-x-center flex-y-center"},[i("v-uni-view",{staticClass:"set-score f-32 col-9"},[t._v("评分")]),i("v-uni-view",{staticClass:"score-list"},[i("v-uni-view",{staticClass:"comment-star dis-flex flex-y-center"},t._l(t.scoreList,function(e,o){return i("v-uni-view",{key:o,staticClass:"iconfont icon-shoucangxiao",class:e?"select":"",attrs:{"data-index":"score"},on:{click:function(e){e=t.$handleEvent(e),t.scoreClick(o)}}})}),1)],1)],1),i("v-uni-view",{staticClass:"comment-contnet"},[i("v-uni-view",{staticClass:"dis-flex content-row"},[i("v-uni-textarea",{attrs:{"data-index":o,maxlength:"200",placeholder:"请输入评价内容 (留空则不评价)",placeholderStyle:"color:#ccc"},on:{input:function(e){e=t.$handleEvent(e),t.contentInput(e)}}}),i("v-uni-view",{staticClass:"content-num"},[t._v(t._s(t.contentlength)+"/200")])],1),i("v-uni-view",{staticClass:"image-list dis-flex flex-y-center"},[t._l(t.formData[o].image_list,function(e,a){return i("v-uni-view",{key:a,staticClass:"image-preview"},[i("v-uni-text",{staticClass:"image-delete iconfont icon-shanchu",attrs:{"data-index":o,"data-image-index":a},on:{click:function(e){e=t.$handleEvent(e),t.deleteImage(e)}}}),i("v-uni-image",{attrs:{mode:"aspectFill",src:e}})],1)}),!t.formData[o].image_list||t.formData[o].image_list.length<9?i("v-uni-view",{staticClass:"image-picker dis-flex flex-dir-column flex-x-center flex-y-center",attrs:{"data-index":o},on:{click:function(e){e=t.$handleEvent(e),t.chooseImage(e)}}},[i("v-uni-text",{staticClass:"choose__icon iconfont icon-paizhao"}),i("v-uni-text",{staticClass:"choose__text"},[t._v(t._s(t.formData[o].image_list.length)+"/9")])],1):t._e()],2)],1)],1)],1)}),1),i("v-uni-view",{staticClass:"flow-fixed-footer"},[i("v-uni-view",{staticClass:"flow-btn f-32"},[i("v-uni-view",{on:{click:function(e){e=t.$handleEvent(e),t.submit(e)}}},[t._v("确认提交")])],1)],1)],1):t._e()},a=[];i.d(e,"a",function(){return o}),i.d(e,"b",function(){return a})},"63b4":function(t,e,i){var o=i("d388");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=i("4f06").default;a("7523781c",o,!0,{sourceMap:!1,shadowMode:!1})},"91ff":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(i("e099"));function a(t){return t&&t.__esModule?t:{default:t}}var s={data:function(){return{options:null,scorenum:null,goodsList:[],imagarray:null,formData:[],contentlength:0,submitDisable:!1,scoreList:[!1,!1,!1,!1,!1]}},components:{},computed:{},onLoad:function(t){this.options=t,this.getGoodsList()},onShow:function(){},mounted:function(){},methods:{getGoodsList:function(){var t=this;o.default._get("user.comment/order",{order_id:this.options.order_id},function(e){var i=e.data.goodsList;t.setData({goodsList:i,formData:t.initFormData(i)})})},initFormData:function(t){var e=[];return t.forEach(function(t){e.push({goods_id:t.goods_id,order_goods_id:t.order_goods_id,scorenum:0,content:"",image_list:[],uploaded:[]})}),e},contentInput:function(t){var e=t.currentTarget.dataset.index;this.contentlength=t.detail.value.length,this.$set(this.formData[e],"content",t.detail.value)},chooseImage:function(t){var e=this,i=t.currentTarget.dataset.index,o=e.formData[i].image_list;uni.chooseImage({count:9-o.length,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){e.$set(e.formData[i],"image_list",o.concat(t.tempFilePaths))}})},deleteImage:function(t){var e=t.currentTarget.dataset,i=this.formData[e.index].image_list;i.splice(e.imageIndex,1)},commentSubmit:function(t,e){var i=this;o.default._post_form("Comment/createComment",{score:t.scorenum,content:t.content,order_id:Number(i.options.order_id),source:2,img_list:e},function(t){if(console.log(t,"评价成功"),1===t.code){o.default.showSuccess("评价成功",function(){uni.redirectTo({url:"/pages/mainPages/order/comment/success?type=success&&comment_id=".concat(t.data)})})}},!1,function(){uni.hideLoading(),i.submitDisable=!1})},submit:function(){var t=this,e=t.formData[0];if(0===e.scorenum)return o.default.showError("请选评价等级"),!1;if(!e.content)return o.default.showError("请填写评论内容"),!1;if(!0===t.submitDisable)return!1;if(uni.showLoading({title:"正在处理...",mask:!0}),t.submitDisable=!0,e.image_list.length>0){var i=[],a=e.image_list.map(function(t){return o.default._upLoad(t)});Promise.all(a).then(function(o){var a=o.map(function(t){return t.file_id});i.push(a),t.commentSubmit(e,i)})}else t.commentSubmit(e,"")},scoreClick:function(t){var e=this.scoreList.map(function(e,i){return e=i<=t,e});for(var i in e)console.log(e[i]),e[i]&&this.$set(this.formData[0],"scorenum",Number(i)+1);this.$set(this,"scoreList",e)},orderInfo:function(){o.default.navigationTo({url:"pages/mainPages/order/detail?order_id="+this.options.order_id})}}};e.default=s},9398:function(t,e,i){"use strict";var o=i("63b4"),a=i.n(o);a.a},"9e53":function(t,e,i){"use strict";i.r(e);var o=i("3da2"),a=i("1acc");for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);i("9398");var r=i("2877"),n=Object(r["a"])(a["default"],o["a"],o["b"],!1,null,"122a2fc6",null);e["default"]=n.exports},d388:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'.goods-list[data-v-122a2fc6]{font-size:%?28?%}.goods-item[data-v-122a2fc6]{margin:%?20?% %?30?%}.goods-item .goods-detail[data-v-122a2fc6]{padding:%?30?%;background:#fff;-webkit-border-radius:%?20?%;border-radius:%?20?%;position:relative}.goods-item .goods-detail .order-info[data-v-122a2fc6]{font-size:%?24?%;padding:%?10?% %?18?%;-webkit-border-radius:%?28?%;border-radius:%?28?%;border:%?1?% solid #6b696c;position:absolute;right:%?30?%;bottom:%?44?%}.goods-item .goods-detail .left .goods-image[data-v-122a2fc6]{display:block;width:%?150?%;height:%?150?%;-webkit-border-radius:%?6?%;border-radius:%?6?%}.goods-item .goods-price uni-text[data-v-122a2fc6]{font-size:%?24?%;text-decoration:line-through;color:#999;margin-left:%?12?%}.goods-item .goods-detail .right[data-v-122a2fc6]{padding-left:%?20?%}.goods-item .comment-detail[data-v-122a2fc6]{margin-top:%?20?%;padding:%?30?%;-webkit-border-radius:%?20?%;border-radius:%?20?%;background:#fff}.goods-item .score-row[data-v-122a2fc6]{margin-bottom:%?30?%}.goods-item .score-row .score-item.score__praise[data-v-122a2fc6]{color:#ff4544}.goods-item .score-row .score-item.score__praise .score__icon[data-v-122a2fc6]{background:#ff4544}.goods-item .score-row .score-item.score__review[data-v-122a2fc6]{color:#fcb500}.goods-item .score-row .score-item.score__review .score__icon[data-v-122a2fc6]{background:#fcb500}.goods-item .score-row .score-item.score__negative[data-v-122a2fc6]{color:#9b9b9b}.goods-item .score-row .score-item.score__negative .score__icon[data-v-122a2fc6]{background:#9b9b9b}.goods-item .score-row .score-item .score[data-v-122a2fc6]{padding:%?10?% %?20?% %?10?% %?10?%;-webkit-border-radius:%?30?%;border-radius:%?30?%}.goods-item .score-row .score-item .score .score__icon[data-v-122a2fc6]{margin-right:%?10?%;padding:%?10?%;-webkit-border-radius:50%;border-radius:50%;font-size:%?30?%;color:#fff}.goods-item .score-row .score-item.__active .score[data-v-122a2fc6]{color:#fff}.goods-item .score-row .score-item.__active.score__praise .score[data-v-122a2fc6]{background:#ff4544}.goods-item .score-row .score-item.__active.score__review .score[data-v-122a2fc6]{background:#fcb500}.goods-item .score-row .score-item.__active.score__negative .score[data-v-122a2fc6]{background:#9b9b9b}.goods-item .comment-contnet[data-v-122a2fc6]{padding:%?20?% %?30?%;margin-top:%?20?%;background:#fdfbfe}.goods-item .content-row[data-v-122a2fc6]{position:relative}.goods-item .content-row .content-num[data-v-122a2fc6]{position:absolute;right:0;bottom:0;color:#ccc;font-size:%?28?%}.goods-item .content-row uni-textarea[data-v-122a2fc6]{width:100%;height:%?220?%;padding:%?12?%;-webkit-border-radius:%?6?%;border-radius:%?6?%;-webkit-box-sizing:border-box;box-sizing:border-box}.goods-item .image-list[data-v-122a2fc6]{-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.goods-item .image-list[data-v-122a2fc6]:after{clear:both;content:" ";display:table}.goods-item .image-list uni-image[data-v-122a2fc6]{display:block;width:%?150?%;height:%?150?%;-webkit-border-radius:%?6?%;border-radius:%?6?%}.goods-item .image-list .image-picker[data-v-122a2fc6]{width:%?150?%;height:%?150?%;border:%?1?% dashed #ccc;color:#ccc}.goods-item .image-list .image-picker .choose__icon[data-v-122a2fc6]{font-size:%?56?%;margin-bottom:%?6?%}.goods-item .image-list .image-picker .choose__text[data-v-122a2fc6]{font-size:%?22?%}.goods-item .image-list .image-picker[data-v-122a2fc6],.goods-item .image-list .image-preview[data-v-122a2fc6]{margin-right:%?30?%;margin-top:%?30?%}\n\n/* \t.goods-item .image-list .image-picker:nth-child(4n+0),\n.goods-item .image-list .image-preview:nth-child(4n+0) {\n\tmargin-right: 0;\n} */.goods-item .image-list .image-preview[data-v-122a2fc6]{position:relative}.goods-item .image-list .image-preview .image-delete[data-v-122a2fc6]{position:absolute;top:%?-15?%;right:%?-15?%;height:%?42?%;width:%?42?%;line-height:%?42?%;background:rgba(0,0,0,.64);-webkit-border-radius:50%;border-radius:50%;color:#fff;font-weight:bolder;font-size:%?22?%;z-index:10;text-align:center}.flow-fixed-footer[data-v-122a2fc6]{border:0;padding:0 %?30?% %?30?%;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:rgba(0,0,0,0)}.flow-fixed-footer .flow-btn[data-v-122a2fc6]{background:#ffd940;-webkit-border-radius:%?50?%;border-radius:%?50?%}.score-list[data-v-122a2fc6]{margin-left:%?20?%}.score-list uni-image[data-v-122a2fc6]{width:%?50?%;height:%?50?%;display:block;margin-left:%?10?%}.comment-star .iconfont[data-v-122a2fc6]{width:%?36?%;height:%?36?%;line-height:%?36?%;font-size:%?36?%;margin-right:%?8?%;display:block;color:#ccc}.comment-star .iconfont.select[data-v-122a2fc6]{color:#ffd940}.set-score[data-v-122a2fc6]{margin-top:%?2?%}',""])}}]);