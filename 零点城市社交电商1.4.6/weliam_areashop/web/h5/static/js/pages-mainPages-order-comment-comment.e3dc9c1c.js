(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mainPages-order-comment-comment"],{"0f36":function(e,t,i){"use strict";i.r(t);var o=i("6b40"),a=i.n(o);for(var s in o)"default"!==s&&function(e){i.d(t,e,function(){return o[e]})}(s);t["default"]=a.a},"6b40":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(i("6c98"));function a(e){return e&&e.__esModule?e:{default:e}}var s={data:function(){return{options:null,scorenum:null,goodsList:[],imagarray:null,formData:[],contentlength:0,submitDisable:!1,scoreList:[!1,!1,!1,!1,!1]}},components:{},computed:{},onLoad:function(e){this.options=e,this.getGoodsList()},onShow:function(){},mounted:function(){},methods:{getGoodsList:function(){var e=this;o.default._get("user.comment/order",{order_id:this.options.order_id},function(t){var i=t.data.goodsList;e.setData({goodsList:i,formData:e.initFormData(i)})})},initFormData:function(e){var t=[];return e.forEach(function(e){t.push({goods_id:e.goods_id,order_goods_id:e.order_goods_id,scorenum:0,content:"",image_list:[],uploaded:[]})}),t},contentInput:function(e){var t=e.currentTarget.dataset.index;this.contentlength=e.detail.value.length,this.$set(this.formData[t],"content",e.detail.value)},chooseImage:function(e){var t=this,i=e.currentTarget.dataset.index,o=t.formData[i].image_list;uni.chooseImage({count:9-o.length,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){t.$set(t.formData[i],"image_list",o.concat(e.tempFilePaths))}})},deleteImage:function(e){var t=e.currentTarget.dataset,i=this.formData[t.index].image_list;i.splice(t.imageIndex,1)},commentSubmit:function(e,t){var i=this;o.default._post_form("Comment/createComment",{score:e.scorenum,content:e.content,order_id:Number(i.options.order_id),source:2,img_list:t},function(e){if(console.log(e,"评价成功"),1===e.code){o.default.showSuccess("评价成功",function(){uni.redirectTo({url:"/pages/mainPages/order/comment/success?type=success&&comment_id=".concat(e.data)})})}},!1,function(){uni.hideLoading(),i.submitDisable=!1})},submit:function(){var e=this,t=e.formData[0];if(0===t.scorenum)return o.default.showError("请选评价等级"),!1;if(!t.content)return o.default.showError("请填写评论内容"),!1;if(!0===e.submitDisable)return!1;if(uni.showLoading({title:"正在处理...",mask:!0}),e.submitDisable=!0,t.image_list.length>0){var i=[],a=t.image_list.map(function(e){return o.default._upLoad(e)});Promise.all(a).then(function(o){var a=o.map(function(e){return e.file_id});i.push(a),e.commentSubmit(t,i)})}else e.commentSubmit(t,"")},scoreClick:function(e){var t=this.scoreList.map(function(t,i){return t=i<=e,t});for(var i in t)console.log(t[i]),t[i]&&this.$set(this.formData[0],"scorenum",Number(i)+1);this.$set(this,"scoreList",t)},orderInfo:function(){o.default.navigationTo({url:"pages/mainPages/order/detail?order_id="+this.options.order_id})}}};t.default=s},"6d9ec":function(e,t,i){var o=i("fe07");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var a=i("4f06").default;a("cf2fbc0c",o,!0,{sourceMap:!1,shadowMode:!1})},"7c3c":function(e,t,i){"use strict";var o=i("6d9ec"),a=i.n(o);a.a},be4a:function(e,t,i){"use strict";i.r(t);var o=i("e52f"),a=i("0f36");for(var s in a)"default"!==s&&function(e){i.d(t,e,function(){return a[e]})}(s);i("7c3c");var r=i("2877"),n=Object(r["a"])(a["default"],o["a"],o["b"],!1,null,"ea0cf2a8",null);t["default"]=n.exports},e52f:function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.goodsList.length&&e.formData.length?i("v-uni-view",{staticClass:"container p-bottom"},[i("v-uni-view",{staticClass:"goods-list"},e._l(e.goodsList,function(t,o){return i("v-uni-view",{key:o,staticClass:"goods-item"},[i("v-uni-view",{staticClass:"goods-detail dis-flex flex-dir-row"},[i("v-uni-view",{staticClass:"left"},[i("v-uni-image",{staticClass:"goods-image",attrs:{src:t.image.file_path}})],1),i("v-uni-view",{staticClass:"right dis-flex flex-box flex-dir-column flex-x-around"},[i("v-uni-view",{staticClass:"twolist-hidden"},[e._v(e._s(t.goods_name))]),i("v-uni-view",{staticClass:"order-info",on:{click:function(t){t=e.$handleEvent(t),e.orderInfo(t)}}},[e._v("订单详情")]),i("v-uni-view",{staticClass:"goods-price col-3 f-28"},[e._v("￥"+e._s(t.goods_price)),i("v-uni-text",[e._v("¥"+e._s(t.line_price))])],1)],1)],1),i("v-uni-view",{staticClass:"comment-detail"},[i("v-uni-view",{staticClass:"score-row dis-flex flex-x-center flex-y-center"},[i("v-uni-view",{staticClass:"set-score f-32 col-9"},[e._v("评分")]),i("v-uni-view",{staticClass:"score-list"},[i("v-uni-view",{staticClass:"comment-star dis-flex flex-y-center"},e._l(e.scoreList,function(t,o){return i("v-uni-view",{key:o,staticClass:"iconfont icon-shoucangxiao",class:t?"select":"",attrs:{"data-index":"score"},on:{click:function(t){t=e.$handleEvent(t),e.scoreClick(o)}}})}),1)],1)],1),i("v-uni-view",{staticClass:"comment-contnet"},[i("v-uni-view",{staticClass:"dis-flex content-row"},[i("v-uni-textarea",{attrs:{"data-index":o,maxlength:"200",placeholder:"请输入评价内容 (留空则不评价)",placeholderStyle:"color:#ccc"},on:{input:function(t){t=e.$handleEvent(t),e.contentInput(t)}}}),i("v-uni-view",{staticClass:"content-num"},[e._v(e._s(e.contentlength)+"/200")])],1),i("v-uni-view",{staticClass:"image-list dis-flex flex-y-center"},[e._l(e.formData[o].image_list,function(t,a){return i("v-uni-view",{key:a,staticClass:"image-preview"},[i("v-uni-text",{staticClass:"image-delete iconfont icon-shanchu",attrs:{"data-index":o,"data-image-index":a},on:{click:function(t){t=e.$handleEvent(t),e.deleteImage(t)}}}),i("v-uni-image",{attrs:{mode:"aspectFill",src:t}})],1)}),!e.formData[o].image_list||e.formData[o].image_list.length<9?i("v-uni-view",{staticClass:"image-picker dis-flex flex-dir-column flex-x-center flex-y-center",attrs:{"data-index":o},on:{click:function(t){t=e.$handleEvent(t),e.chooseImage(t)}}},[i("v-uni-text",{staticClass:"choose__icon iconfont icon-paizhao"}),i("v-uni-text",{staticClass:"choose__text"},[e._v(e._s(e.formData[o].image_list.length)+"/9")])],1):e._e()],2)],1)],1)],1)}),1),i("v-uni-view",{staticClass:"flow-fixed-footer"},[i("v-uni-view",{staticClass:"flow-btn f-32"},[i("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.submit(t)}}},[e._v("确认提交")])],1)],1)],1):e._e()},a=[];i.d(t,"a",function(){return o}),i.d(t,"b",function(){return a})},fe07:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,'.goods-list[data-v-ea0cf2a8]{font-size:%?28?%}.goods-item[data-v-ea0cf2a8]{margin:%?20?% %?30?%}.goods-item .goods-detail[data-v-ea0cf2a8]{padding:%?30?%;background:#fff;-webkit-border-radius:%?20?%;border-radius:%?20?%;position:relative}.goods-item .goods-detail .order-info[data-v-ea0cf2a8]{font-size:%?24?%;padding:%?10?% %?18?%;-webkit-border-radius:%?28?%;border-radius:%?28?%;border:%?1?% solid #6b696c;position:absolute;right:%?30?%;bottom:%?44?%}.goods-item .goods-detail .left .goods-image[data-v-ea0cf2a8]{display:block;width:%?150?%;height:%?150?%;-webkit-border-radius:%?6?%;border-radius:%?6?%}.goods-item .goods-price uni-text[data-v-ea0cf2a8]{font-size:%?24?%;text-decoration:line-through;color:#999;margin-left:%?12?%}.goods-item .goods-detail .right[data-v-ea0cf2a8]{padding-left:%?20?%}.goods-item .comment-detail[data-v-ea0cf2a8]{margin-top:%?20?%;padding:%?30?%;-webkit-border-radius:%?20?%;border-radius:%?20?%;background:#fff}.goods-item .score-row[data-v-ea0cf2a8]{margin-bottom:%?30?%}.goods-item .score-row .score-item.score__praise[data-v-ea0cf2a8]{color:#ff4544}.goods-item .score-row .score-item.score__praise .score__icon[data-v-ea0cf2a8]{background:#ff4544}.goods-item .score-row .score-item.score__review[data-v-ea0cf2a8]{color:#fcb500}.goods-item .score-row .score-item.score__review .score__icon[data-v-ea0cf2a8]{background:#fcb500}.goods-item .score-row .score-item.score__negative[data-v-ea0cf2a8]{color:#9b9b9b}.goods-item .score-row .score-item.score__negative .score__icon[data-v-ea0cf2a8]{background:#9b9b9b}.goods-item .score-row .score-item .score[data-v-ea0cf2a8]{padding:%?10?% %?20?% %?10?% %?10?%;-webkit-border-radius:%?30?%;border-radius:%?30?%}.goods-item .score-row .score-item .score .score__icon[data-v-ea0cf2a8]{margin-right:%?10?%;padding:%?10?%;-webkit-border-radius:50%;border-radius:50%;font-size:%?30?%;color:#fff}.goods-item .score-row .score-item.__active .score[data-v-ea0cf2a8]{color:#fff}.goods-item .score-row .score-item.__active.score__praise .score[data-v-ea0cf2a8]{background:#ff4544}.goods-item .score-row .score-item.__active.score__review .score[data-v-ea0cf2a8]{background:#fcb500}.goods-item .score-row .score-item.__active.score__negative .score[data-v-ea0cf2a8]{background:#9b9b9b}.goods-item .comment-contnet[data-v-ea0cf2a8]{padding:%?20?% %?30?%;margin-top:%?20?%;background:#fdfbfe}.goods-item .content-row[data-v-ea0cf2a8]{position:relative}.goods-item .content-row .content-num[data-v-ea0cf2a8]{position:absolute;right:0;bottom:0;color:#ccc;font-size:%?28?%}.goods-item .content-row uni-textarea[data-v-ea0cf2a8]{width:100%;height:%?220?%;padding:%?12?%;-webkit-border-radius:%?6?%;border-radius:%?6?%;-webkit-box-sizing:border-box;box-sizing:border-box}.goods-item .image-list[data-v-ea0cf2a8]{-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.goods-item .image-list[data-v-ea0cf2a8]:after{clear:both;content:" ";display:table}.goods-item .image-list uni-image[data-v-ea0cf2a8]{display:block;width:%?150?%;height:%?150?%;-webkit-border-radius:%?6?%;border-radius:%?6?%}.goods-item .image-list .image-picker[data-v-ea0cf2a8]{width:%?150?%;height:%?150?%;border:%?1?% dashed #ccc;color:#ccc}.goods-item .image-list .image-picker .choose__icon[data-v-ea0cf2a8]{font-size:%?56?%;margin-bottom:%?6?%}.goods-item .image-list .image-picker .choose__text[data-v-ea0cf2a8]{font-size:%?22?%}.goods-item .image-list .image-picker[data-v-ea0cf2a8],.goods-item .image-list .image-preview[data-v-ea0cf2a8]{margin-right:%?30?%;margin-top:%?30?%}\n\n/* \t.goods-item .image-list .image-picker:nth-child(4n+0),\n.goods-item .image-list .image-preview:nth-child(4n+0) {\n\tmargin-right: 0;\n} */.goods-item .image-list .image-preview[data-v-ea0cf2a8]{position:relative}.goods-item .image-list .image-preview .image-delete[data-v-ea0cf2a8]{position:absolute;top:%?-15?%;right:%?-15?%;height:%?42?%;width:%?42?%;line-height:%?42?%;background:rgba(0,0,0,.64);-webkit-border-radius:50%;border-radius:50%;color:#fff;font-weight:bolder;font-size:%?22?%;z-index:10;text-align:center}.flow-fixed-footer[data-v-ea0cf2a8]{border:0;padding:0 %?30?% %?30?%;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:rgba(0,0,0,0)}.flow-fixed-footer .flow-btn[data-v-ea0cf2a8]{background:#ffd940;-webkit-border-radius:%?50?%;border-radius:%?50?%}.score-list[data-v-ea0cf2a8]{margin-left:%?20?%}.score-list uni-image[data-v-ea0cf2a8]{width:%?50?%;height:%?50?%;display:block;margin-left:%?10?%}.comment-star .iconfont[data-v-ea0cf2a8]{width:%?36?%;height:%?36?%;line-height:%?36?%;font-size:%?36?%;margin-right:%?8?%;display:block;color:#ccc}.comment-star .iconfont.select[data-v-ea0cf2a8]{color:#ffd940}.set-score[data-v-ea0cf2a8]{margin-top:%?2?%}',""])}}]);