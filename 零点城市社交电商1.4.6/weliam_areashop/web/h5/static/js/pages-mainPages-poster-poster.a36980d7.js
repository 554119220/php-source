(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mainPages-poster-poster"],{"15e8":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("e099"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){r(e,t,n[t])})}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s={data:function(){return{poster_images:null,user_id:null,openSetting:!1}},onLoad:function(e){var t=this;t.user_id=e.userid,t.$nextTick(function(){t.getposterDetail(e.postertype,String(e.pid),e.requesttype,e.user_id)})},methods:{getposterDetail:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";a.default.showLoading();var s=this,u={},c="";switch(e){case"goods":c="goods/getQrcode";break;case"store":c="merchant.index/getQrcode";break;case"dealer":c="user.dealer.user/getQrcode";break;case"evaluate":c="comment/getPoster";break}"evaluate"===e&&(u={user_id:o}),a.default._post_form(c,i({},u,r({},n,t)),function(e){1===e.code&&s.setData({poster_images:e.data})},!1,function(){a.default.hideLoading()})},saveimages:function(){var e=this.poster_images;this.downloadIamge(e)},onSetting:function(e){console.log(e);var t=e.detail.authSetting,n="scope.writePhotosAlbum";t[n]&&(this.openSetting=!1)},downloadIamge:function(e){var t=new Image;t.setAttribute("crossOrigin","anonymous"),t.onload=function(){var n=document.createElement("canvas");n.width=t.width,n.height=t.height;var a=n.getContext("2d");a.drawImage(t,0,0,t.width,t.height);var o=n.toDataURL("image/png"),i=document.createElement("a"),r=new MouseEvent("click");i.download="poster",i.href=o,console.log(e),i.dispatchEvent(r)},t.src=e}},mounted:function(){}};t.default=s},"1e48":function(e,t,n){"use strict";n.r(t);var a=n("a92d"),o=n("262f4");for(var i in o)"default"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);n("3e17");var r=n("2877"),s=Object(r["a"])(o["default"],a["a"],a["b"],!1,null,"63784ba6",null);t["default"]=s.exports},"262f4":function(e,t,n){"use strict";n.r(t);var a=n("15e8"),o=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,function(){return a[e]})}(i);t["default"]=o.a},"3e17":function(e,t,n){"use strict";var a=n("b348"),o=n.n(a);o.a},7397:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".page[data-v-63784ba6]{padding:%?30?% %?30?% 0}.poster-image[data-v-63784ba6]{width:100%;margin-bottom:%?30?%;border-radius:%?15?%;height:calc(100vh - %?160?%);\n\theight:calc(100vh - %?160?% - 44px);\n\tdisplay:block}.saveBtn[data-v-63784ba6]{width:%?300?%;height:%?80?%;line-height:%?80?%;border-radius:%?50?%;display:inline-block;background:#ffd940;text-align:center}.setting-btn[data-v-63784ba6]{position:absolute;top:0;left:0;right:0;bottom:0;opacity:0}",""])},a92d:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"page"},[e.poster_images?[n("v-uni-image",{staticClass:"poster-image",attrs:{src:e.poster_images,mode:"aspectFit"}})]:e._e(),n("v-uni-view",{staticClass:"t-c p-r"},[e.openSetting?n("v-uni-button",{staticClass:"btn-normal setting-btn",attrs:{"open-type":"openSetting"},on:{opensetting:function(t){t=e.$handleEvent(t),e.onSetting(t)}}}):e._e(),n("v-uni-view",{staticClass:"saveBtn f-30 col-3",on:{click:function(t){t=e.$handleEvent(t),e.saveimages(e.poster_images)}}},[e._v("保存海报")])],1),n("page-loading",{ref:"loading"})],2)},o=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o})},b348:function(e,t,n){var a=n("7397");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=n("4f06").default;o("12d6d902",a,!0,{sourceMap:!1,shadowMode:!1})}}]);