(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mainPages-flow-checkout~pages-mainPages-member-member_goods-member_goods~pages-mainPages-membe~0b5dd653"],{"04e7":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".pop[data-v-2a589927]{visibility:hidden}.pop--show[data-v-2a589927]{visibility:visible}.pop__mask[data-v-2a589927]{position:fixed;top:0;left:0;right:0;bottom:0;z-index:100;background:rgba(0,0,0,.5);display:none}.pop__mask--hide[data-v-2a589927]{background:0 0}.pop__container[data-v-2a589927]{position:fixed;left:50%;top:50%;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0);-webkit-transform-origin:center;-ms-transform-origin:center;transform-origin:center;-webkit-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease;z-index:200;opacity:0}.pop--show .pop__container[data-v-2a589927]{opacity:1}.pop--show .pop__mask[data-v-2a589927]{display:block}.pop--left .pop__container[data-v-2a589927]{left:0;top:50%;-webkit-transform:translate3d(-100%,-50%,0);transform:translate3d(-100%,-50%,0)}.pop--show.pop--left .pop__container[data-v-2a589927]{-webkit-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0)}.pop--right .pop__container[data-v-2a589927]{right:0;top:50%;left:auto;-webkit-transform:translate3d(100%,-50%,0);transform:translate3d(100%,-50%,0)}.pop--show.pop--right .pop__container[data-v-2a589927]{-webkit-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0)}.pop--bottom .pop__container[data-v-2a589927]{top:auto;left:50%;bottom:0;-webkit-transform:translate3d(-50%,100%,0);transform:translate3d(-50%,100%,0)}.pop--show.pop--bottom .pop__container[data-v-2a589927]{-webkit-transform:translate3d(-50%,0,0);transform:translate3d(-50%,0,0)}.pop--top .pop__container[data-v-2a589927]{top:0;left:50%;-webkit-transform:translate3d(-50%,-100%,0);transform:translate3d(-50%,-100%,0)}.pop--show.pop--top .pop__container[data-v-2a589927]{-webkit-transform:translate3d(-50%,0,0);transform:translate3d(-50%,0,0)}",""])},"092d":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("pop-manager",{attrs:{show:t.showList,type:"bottom"},on:{clickmask:function(e){e=t.$handleEvent(e),t.clickMask(e)}}},[a("v-uni-view",{staticClass:"order-pay-menu",style:"height:"+t.PayMenuHeight+"px"},[a("v-uni-form",{attrs:{"report-submit":""},on:{submit:function(e){e=t.$handleEvent(e),t.formSubmit(e)}}},[a("v-uni-view",{staticClass:"pay-menu-title"},[t._v("支付方式")]),a("v-uni-view",{staticClass:"order-pay-list"},[a("radio-group-list",{attrs:{"data-list":t.radioList},on:{radioChange:function(e){e=t.$handleEvent(e),t.radioChange(e)}}}),0===t.radioList.length?a("v-uni-view",{staticClass:"col-3 t-c f-32"},[t._v("暂未设置支付方式")]):t._e()],1),a("v-uni-view",{staticClass:"order-pay-btn"},[a("v-uni-button",{attrs:{"form-type":"submit"}},[t._v("确认支付")])],1)],1)],1)],1)],1)},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},"134d":function(t,e,a){"use strict";var n=a("ba94"),i=a.n(n);i.a},"15cb":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,'.order-pay-menu[data-v-077a895b]{width:100vw;\n\t/* height: 600upx; */background:#fff;-webkit-border-radius:%?20?% %?20?% 0 0;border-radius:%?20?% %?20?% 0 0}.pay-menu-title[data-v-077a895b]{font-size:%?34?%;color:#333;line-height:3em;font-weight:400;text-align:center;position:relative}.order-pay-list[data-v-077a895b]{padding:%?30?%}.pay-menu-title[data-v-077a895b]:after{content:" ";position:absolute;left:50%;bottom:0;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);width:%?40?%;height:%?8?%;background:#ffd940;-webkit-border-radius:%?20?%;border-radius:%?20?%}.order-pay-btn[data-v-077a895b]{position:absolute;left:0;right:0;bottom:0;padding:0 %?30?% %?40?%}.order-pay-btn uni-button[data-v-077a895b]{background:#fd0;color:#333;height:%?84?%;line-height:%?84?%;-webkit-border-radius:%?45?%;border-radius:%?45?%;font-size:%?32?%}',""])},"20ed":function(t,e,a){var n=a("15cb");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("11166b16",n,!0,{sourceMap:!1,shadowMode:!1})},"2c22":function(t,e,a){"use strict";var n=a("20ed"),i=a.n(n);i.a},"359e":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".order-pay-item[data-v-571a73bc]{position:relative;padding:%?16?% 0}.order-pay-item.pay-border[data-v-571a73bc]{padding:%?20?% 0}.order-pay-item .radio[data-v-571a73bc]{position:absolute;top:0;left:0;right:0;bottom:0;opacity:0}.order-pay-item .iconfont[data-v-571a73bc]{font-size:%?42?%;height:1em;width:1em;line-height:1em;color:#ccc}.order-pay-item .iconfont.icon-radiobox[data-v-571a73bc]{color:#fd0}.order-pay-item uni-image[data-v-571a73bc]{width:%?60?%;height:%?60?%;display:block;-webkit-border-radius:50%;border-radius:50%;margin:0 %?20?%}.order-pay-text[data-v-571a73bc]{margin-left:%?20?%}",""])},"3b72":function(t,e,a){"use strict";a.r(e);var n=a("092d"),i=a("d051");for(var r in i)"default"!==r&&function(t){a.d(e,t,function(){return i[t]})}(r);a("2c22");var o=a("2877"),s=Object(o["a"])(i["default"],n["a"],n["b"],!1,null,"077a895b",null);e["default"]=s.exports},4052:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"page"},[a("v-uni-view",{staticClass:"pop",class:["pop--"+t.type,{"pop--show":t.show}]},[t.overlay?a("v-uni-view",{staticClass:"pop__mask",class:{"pop__mask--hide":!t.showOverlay},on:{click:function(e){e=t.$handleEvent(e),t.handleMaskClick(e)}}}):t._e(),a("v-uni-view",{staticClass:"pop__container"},[t._t("default")],2)],1)],1)},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},"64e7":function(t,e,a){"use strict";var n=a("fd21"),i=a.n(n);i.a},7833:function(t,e,a){"use strict";a.r(e);var n=a("a71e"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);e["default"]=i.a},"9c20":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-radio-group",{attrs:{name:t.formName},on:{change:function(e){e=t.$handleEvent(e),t.radioChange(e)}}},t._l(t.dataList,function(e,n){return a("v-uni-label",{key:e.id,staticClass:"order-pay-item dis-flex flex-y-center flex-x-between",class:{"pay-border":"pay"===t.type}},[a("v-uni-radio",{staticClass:"radio",attrs:{value:e.id,checked:t.current==e.id}}),a("v-uni-view",{staticClass:"order-pay dis-flex flex-y-center"},[e.thumb?[a("v-uni-image",{attrs:{src:e.thumb}})]:t._e(),a("v-uni-view",{staticClass:"order-pay-text col-3",class:["pay"===t.type?"f-30":"f-26"]},[t._v(t._s(e.title))])],2),a("v-uni-view",{staticClass:"iconfont",class:[t.current==e.id?"icon-radiobox":"icon-round"]})],1)}),1)],1)},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},a16d:function(t,e,a){"use strict";a.r(e);var n=a("dbaa"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);e["default"]=i.a},a71e:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{}},props:{show:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},showOverlay:{type:Boolean,default:!0},type:{type:String,default:"center"},modelData:{type:Object,default:function(){}}},components:{},computed:{},mounted:function(){},methods:{handleMaskClick:function(){this.$emit("clickmask")}}};e.default=n},ad87:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(a("f711")),i=o(a("d91e")),r=o(a("f337"));function o(t){return t&&t.__esModule?t:{default:t}}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),n.forEach(function(e){u(t,e,a[e])})}return t}function u(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function d(t){return p(t)||l(t)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function p(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}var f={data:function(){return{currentChecked:"",showList:!1,radioList:[],PayMenuHeight:null,paymentUrl:null,currentPayType:null}},props:{},components:{PopManager:n.default,RadioGroupList:i.default},onLoad:function(t){},mounted:function(){var t=this,e=r.default.getClientType(),a={2:[{id:"wechat",title:"微信支付",thumb:"/static/images/checkout/weixin.png"}],7:[{id:"alipay",title:"支付宝支付",thumb:"/static/images/checkout/zhifubao.png"}],8:[{id:"baidu",title:"百度收银台",thumb:"/static/images/checkout/baidu.png"}],9:[{id:"alipay",title:"支付宝支付",thumb:"/static/images/checkout/zhifubao.png"}],3:[{id:"wechat",title:"微信支付",thumb:"/static/images/checkout/weixin.png"},{id:"alipay",title:"支付宝支付",thumb:"/static/images/checkout/zhifubao.png"}],4:[{id:"wechat",title:"微信支付",thumb:"/static/images/checkout/weixin.png"},{id:"alipay",title:"支付宝支付",thumb:"/static/images/checkout/zhifubao.png"}]},n=a[e];r.default._get("setting/index",{},function(a){var i=a.data.pay_type||{};if(i=Object.keys(i).filter(function(t){return"0"!=i[t]}),i.length>0){var r,o;if(n=n.filter(function(t){return i.includes(t.id)}),"3"===e||"4"===e)(r=t.radioList).push.apply(r,d(n)),t.currentChecked=n[0]?n[0].id:"";else(o=t.radioList).push.apply(o,d(n)),t.currentChecked=n[0].id;uni.$emit("dataList",n),t.PayMenuHeight=1===n.length?200:300}else t.PayMenuHeight=200})},methods:{clickMask:function(){this.onToggleList()},onToggleList:function(){this.showList=!this.showList},radioChange:function(t){this.currentChecked=t.value,this.$emit("payChange",t)},formSubmit:function(t){r.default.saveFormId(t.detail.formId);var e=this,a=e.paymentUrl,n=e.currentPayType,i=r.default.getClientType(),o=e.$store.state.orderPay,u=e.currentChecked,d="checkout"===o.pay_from?"order/buyNow":"user.order/pay";u?(e.$emit("payBefore"),e.onToggleList(),a&&n&&n===u?location.href=a:(uni.showLoading({title:"正在处理..."}),r.default._post_form(d,s({},o,{pay_type:u}),function(t){e.showList=!1,e.$emit("orderReady",{result:t,source:i}),"blance"===u||("3"===i||"4"===i?(e.currentPayType=u,"alipay"===u?e.aliPayment(t):"wechat"===u&&e.wechatPayment(t,i)):e.miniProgramPay(t))},function(){uni.hideLoading()}))):r.default.showError("暂时无法支付~")},miniProgramPay:function(t){var e=this,a=e.$store.state.clientType;if(-10===t.code)return r.default.showError(t.msg,function(){e.$emit("payError",res),uni.redirectTo({url:"/pages/mainPages/order/index?type=payment"})}),!1;e.requestPayment(a,t)},requestPayment:function(t,e){var a=this,n={2:"wxpay",7:"alipay",8:"baidu",9:"toutiao"},i={};if("2"===t)i={timeStamp:e.data.payment.timeStamp,nonceStr:e.data.payment.nonceStr,package:e.data.payment.package,signType:"MD5",paySign:e.data.payment.paySign};else if("7"===t)i.orderInfo=e.data.payment.trade_no;else if("8"===t)i.orderInfo=e.data.payment;else if("9"===t){var r=e.data.payment;r.timestamp=String(r.timestamp),r.trade_no=String(r.trade_no),r.risk_info="",i.data=r}console.log(i),uni.requestPayment(s({provider:n[t]},i,{success:function(t){console.log("支付成功",t),a.$emit("paySuccess",{pay:t,order:e.data})},fail:function(t){a.$emit("payFail",t)}}))},aliPayment:function(t){var e=this.$store.state.orderPay,a=this.$store.state.clientType,n="".concat(t.data.payment,"&goods_id=").concat(e.goods_id);if("3"===a)this.paymentUrl=n,location.href=n;else if("4"===a){var i=new this.$util.Base64,o=i.encode(t.data.payment);r.default.navigationTo({url:"pages/mainPages/flow/pay?goto="+o})}},wechatPayment:function(t,e){console.log(t,e);var a=this,n=t.data.payment;"3"===e?location.href=n:"4"===e&&WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:n.appId,timeStamp:n.timeStamp,nonceStr:n.nonceStr,package:n.package,signType:n.signType,paySign:n.paySign},function(e){"get_brand_wcpay_request:ok"==e.err_msg?a.$emit("paySuccess",{pay:e,order:t.data}):a.$emit("payFail",e)})}},computed:{}};e.default=f},ba94:function(t,e,a){var n=a("04e7");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("4dea97da",n,!0,{sourceMap:!1,shadowMode:!1})},d051:function(t,e,a){"use strict";a.r(e);var n=a("ad87"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);e["default"]=i.a},d91e:function(t,e,a){"use strict";a.r(e);var n=a("9c20"),i=a("a16d");for(var r in i)"default"!==r&&function(t){a.d(e,t,function(){return i[t]})}(r);a("64e7");var o=a("2877"),s=Object(o["a"])(i["default"],n["a"],n["b"],!1,null,"571a73bc",null);e["default"]=s.exports},dbaa:function(t,e,a){"use strict";function n(t){return o(t)||r(t)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function o(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={data:function(){return{current:"",dataList:[]}},props:{selected:{type:String,default:""},type:{type:String,default:"pay"},formName:{type:String,default:"current"}},onLoad:function(t){},mounted:function(){var t=this;uni.$on("dataList",function(e){var a;(a=t.dataList).push.apply(a,n(e)),t.current=e[0].id})},watch:{dataList:function(t,e){t.length}},methods:{radioChange:function(t){this.current=t.detail.value,this.$emit("radioChange",t.detail)}}};e.default=s},f711:function(t,e,a){"use strict";a.r(e);var n=a("4052"),i=a("7833");for(var r in i)"default"!==r&&function(t){a.d(e,t,function(){return i[t]})}(r);a("134d");var o=a("2877"),s=Object(o["a"])(i["default"],n["a"],n["b"],!1,null,"2a589927",null);e["default"]=s.exports},fd21:function(t,e,a){var n=a("359e");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("31ffa38b",n,!0,{sourceMap:!1,shadowMode:!1})}}]);