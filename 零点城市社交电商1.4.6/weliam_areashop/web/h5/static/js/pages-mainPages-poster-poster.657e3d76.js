(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mainPages-poster-poster"],{"0d1b":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".page[data-v-4a887156]{padding:0 %?30?%}.poster-image[data-v-4a887156]{width:100%;margin:%?30?% 0;-webkit-border-radius:%?15?%;border-radius:%?15?%;height:-webkit-calc(100vh - %?160?%);height:calc(100vh - %?160?%);\n\theight:-webkit-calc(100vh - %?160?% - 44px);height:calc(100vh - %?160?% - 44px);\n\tdisplay:block}.saveBtn[data-v-4a887156]{width:%?300?%;height:%?80?%;line-height:%?80?%;-webkit-border-radius:%?50?%;border-radius:%?50?%;display:inline-block;background:#ffd940;text-align:center}.setting-btn[data-v-4a887156]{position:absolute;top:0;left:0;right:0;bottom:0;opacity:0}",""])},"2e6a":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("deda"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){r(e,t,n[t])})}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s={data:function(){return{poster_images:null,user_id:null,openSetting:!1}},onLoad:function(e){var t=this;t.user_id=e.userid,t.clientType=a.default.getClientType(),t.$nextTick(function(){t.getposterDetail(e.postertype,String(e.pid),e.requesttype,e.user_id)})},methods:{getposterDetail:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";a.default.showLoading();var s=this,c={},u="";switch(e){case"goods":u="goods/getQrcode";break;case"store":u="merchant.index/getQrcode";break;case"dealer":u="user.dealer.user/getQrcode";break;case"evaluate":u="comment/getPoster";break}"evaluate"===e&&(c={user_id:i}),a.default._post_form(u,o({},c,r({},n,t)),function(e){1===e.code&&s.setData({poster_images:e.data})},!1,function(){a.default.hideLoading()})},saveimages:function(){uni.showLoading();var e=this.poster_images;this.downloadIamge(e)},onSetting:function(e){console.log(e);var t=e.detail.authSetting,n="scope.writePhotosAlbum";t[n]&&(this.openSetting=!1)},downloadIamge:function(e){var t=new Image;t.setAttribute("crossOrigin","anonymous"),t.onload=function(){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);var a=e.toDataURL("image/png"),i=document.createElement("a"),o=new MouseEvent("click");i.download="poster",i.href=a,i.dispatchEvent(o)},t.src=e}},mounted:function(){}};t.default=s},"322f":function(e,t,n){"use strict";n.r(t);var a=n("a8a5"),i=n("efeb");for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o);n("b503");var r=n("2877"),s=Object(r["a"])(i["default"],a["a"],a["b"],!1,null,"4a887156",null);t["default"]=s.exports},a8a5:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"page"},[e.poster_images?[n("v-uni-image",{staticClass:"poster-image",attrs:{src:e.poster_images,mode:"aspectFit"}})]:e._e(),"4"!==e.clientType?n("v-uni-view",{staticClass:"t-c p-r"},[e.openSetting?n("v-uni-button",{staticClass:"btn-normal setting-btn",attrs:{"open-type":"openSetting"},on:{opensetting:function(t){t=e.$handleEvent(t),e.onSetting(t)}}}):e._e(),n("v-uni-view",{staticClass:"saveBtn f-30 col-3",on:{click:function(t){t=e.$handleEvent(t),e.saveimages(e.poster_images)}}},[e._v("保存海报")])],1):e._e(),n("page-loading",{ref:"loading"})],2)},i=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i})},b503:function(e,t,n){"use strict";var a=n("d8ef"),i=n.n(a);i.a},d8ef:function(e,t,n){var a=n("0d1b");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=n("4f06").default;i("320820bc",a,!0,{sourceMap:!1,shadowMode:!1})},efeb:function(e,t,n){"use strict";n.r(t);var a=n("2e6a"),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);t["default"]=i.a}}]);