(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mainPages-member-memberpay-memberpay"],{"09e8":function(e,t,a){var i=a("3009");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("3475b310",i,!0,{sourceMap:!1,shadowMode:!1})},1126:function(e,t,a){"use strict";a.r(t);var i=a("28fd"),n=a.n(i);for(var r in i)"default"!==r&&function(e){a.d(t,e,function(){return i[e]})}(r);t["default"]=n.a},"28fd":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("deda"));function n(e){return e&&e.__esModule?e:{default:e}}var r={data:function(){return{countdown:60,codeMsg:"获取验证码",timer:null,disabled:!1,mobile:"",verCode:"",ClientType:null,isShow:!1}},mounted:function(){var e=this;e.ClientType=i.default.getClientType()},methods:{showChange:function(){this.isShow=!this.isShow},getCode:function(){var e=this;e.mobile?e.disabled||(e.disabled=!0,i.default._post_form("user.H5/sendSms",{mobile:e.mobile,type:"register"},function(t){i.default.showSuccess("发送成功"),console.log(t),e.setCountdown()},function(){e.disabled=!1})):i.default.showError("请填写手机号")},setCountdown:function(){var e=this;this.timer||(this.timer=setInterval(function(){e.countdown>0&&e.countdown<=60&&(e.countdown--,0!==e.countdown?e.codeMsg="重新发送("+e.countdown+")":(clearInterval(e.timer),e.codeMsg="获取验证码",e.countdown=60,e.timer=null,e.disabled=!1))},1e3))},formSubmit:function(e){var t=e.detail.value,a=t.mobile,n=t.verCode,r=this;console.log(a,n),a&&n?(uni.showLoading({title:"提交中..."}),i.default._post_form("user.index/bindMobile",{mobile:a,verCode:n,isWechat:""},function(e){if(console.log(e),uni.hideLoading(),1===e.code){var t=r.$store.state.userInfo;t.mobile=a,r.$store.commit("userInfo",t),i.default.showSuccess(e.msg,function(){r.isShow=!1,r.$emit("bindMobileAfter")})}},function(){uni.hideLoading()})):i.default.showError("请填写手机号和验证码")},getPhoneNumber:function(e){console.log(e);var t=this;"getPhoneNumber:ok"===e.detail.errMsg&&i.default._post_form("user.Index/getMobile",{iv:e.detail.iv,encryptedData:e.detail.encryptedData},function(e){if(1===e.code){uni.showLoading({});var a=e.data.mobile;i.default._post_form("user.index/bindMobile",{mobile:a,verCode:"",isWechat:"1"},function(e){1===e.code&&i.default.showSuccess("绑定成功",function(){console.log(t),t.isShow=!1,t.$emit("bindMobileAfter")})},!1,function(){uni.hideLoading()})}})}}};t.default=r},"2e8c":function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,'.header .header-main[data-v-f6696fea]{position:relative;width:100%;height:%?320?%;background-repeat:no-repeat;background-size:cover;-webkit-box-shadow:0 %?4?% %?12?% 0 hsla(0,0%,60.4%,.35);box-shadow:0 %?4?% %?12?% 0 hsla(0,0%,60.4%,.35);border-radius:%?20?%;z-index:2}.header .header-main .member-number[data-v-f6696fea]{position:absolute;right:%?46?%;top:15%}.member-msg[data-v-f6696fea]{padding:%?200?% %?46?% 0 %?46?%}.member-user-msg .member-avatar[data-v-f6696fea]{display:block;width:%?70?%;height:%?70?%;border-radius:50%;margin-right:%?12?%}.member-logo[data-v-f6696fea]{display:inline-block;width:%?30?%;height:%?30?%;vertical-align:middle;margin-left:%?10?%}.header .member-label[data-v-f6696fea]{background-color:#333;border-radius:0 0 %?20?% %?20?%;margin:0 %?20?%}.header .member-label uni-text[data-v-f6696fea]{color:#ef4343}.tab-bar[data-v-f6696fea]{padding:%?40?% %?30?% %?20?%;border-radius:0 0 %?20?% %?20?%;margin-top:%?-20?%\n\t/* \t\tbox-shadow: 0 2upx 12upx 0px rgba(226, 226, 226, 0.35);\n\tborder-radius: 20upx;\n\tposition: relative;\n\t/* z-index: 1; */\n\t/* \t\tmargin-top: -20upx; */}.tab-bar uni-image[data-v-f6696fea]{display:block}.Tabbar-items uni-image[data-v-f6696fea]{width:%?60?%;height:%?60?%}.section .member-Tabbar[data-v-f6696fea]{background-color:#fff;position:relative;padding:%?36?% %?30?% %?16?%;border-radius:%?20?%}.section .member-Tabbar[data-v-f6696fea]:after{content:" ";position:absolute;top:%?40?%;left:%?15?%;bottom:%?2?%;width:%?8?%;height:%?36?%;background:#f1e0ce;border-radius:%?20?%}.member-Tabbar .title[data-v-f6696fea]{padding-left:%?10?%}.member-items.select[data-v-f6696fea]{border:1px solid #fcf6ea;background-color:#fcf6ea}.member-items .member-items-select[data-v-f6696fea]{position:absolute;top:%?-48?%;right:%?-48?%;width:%?90?%;height:%?90?%;background:#333;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.member-items .member-items-select uni-image[data-v-f6696fea]{position:absolute;left:%?32?%;bottom:%?4?%;width:%?22?%;height:%?22?%;display:block;-webkit-transform:rotate(-45deg);-ms-transform:rotate(-45deg);transform:rotate(-45deg)}.select .after[data-v-f6696fea]{\n\t/* content: ""; */}.member-items.not-select[data-v-f6696fea]{border:1px solid #f0f0f0}.member-items[data-v-f6696fea]{position:relative;padding:%?30?% %?44?% %?30?% %?36?%;border-radius:%?20?%;overflow:hidden;z-index:5}.member-price .now-price[data-v-f6696fea]{color:#f04c4c}.member-price .old-price[data-v-f6696fea]{text-decoration:line-through}.member-price .now-price .text[data-v-f6696fea]{margin-left:%?4?%}.formbutton[data-v-f6696fea]{height:%?90?%;line-height:%?90?%;background:#ffd940;-webkit-box-shadow:0 %?2?% %?12?% 0 rgba(204,149,182,.35);box-shadow:0 %?2?% %?12?% 0 rgba(204,149,182,.35);border-radius:%?44?%;margin:0 %?30?%;position:fixed;left:0;right:0;bottom:%?20?%;z-index:20}.padding-box[data-v-f6696fea]{margin-bottom:%?80?%}.bottomHeight[data-v-f6696fea]{height:%?30?%}',""])},3009:function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,'.mask-main[data-v-ab840afe]{position:relative}.mask-view[data-v-ab840afe]{position:fixed;width:100%;height:100%;background-color:rgba(0,0,0,.4);left:0;top:0;z-index:100}.call-main[data-v-ab840afe]{position:fixed;width:100%;z-index:101;left:0;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.call-main .call-view[data-v-ab840afe]{margin:0 5%;background-color:#fff;\n\t/* height: 360upx; */padding:%?40?% %?40?% %?80?% %?40?%;border-radius:%?25?%}.call-view .title[data-v-ab840afe]{font-size:%?32?%;font-weight:600}.call-view .intor[data-v-ab840afe]{margin:%?40?% 0 %?50?% 0;color:#9e9e9e;font-size:%?26?%}.input-bg[data-v-ab840afe]{position:relative;border-radius:%?50?%;background-color:#eee;height:%?90?%;padding:0 %?30?%;margin-bottom:%?30?%;font-size:%?28?%}.input-bg uni-input[data-v-ab840afe]{height:%?90?%;line-height:%?90?%}.getcode-btn[data-v-ab840afe]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;color:#f1aa45}.getcode-btn[data-v-ab840afe]:before{content:"";position:absolute;right:33%;top:54%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:1px;height:%?40?%;background-color:#b2b2b2}.bindmobile[data-v-ab840afe]{background-color:#000;color:#fff;font-size:%?28?%;height:%?90?%;line-height:%?90?%;border-radius:%?50?%;margin:0 %?20?%}.close-img[data-v-ab840afe]{position:relative;width:100%;z-index:101;-webkit-transform:translateY(%?40?%);-ms-transform:translateY(%?40?%);transform:translateY(%?40?%);text-align:center}.close-img .iconfont[data-v-ab840afe]{color:#fff;font-size:%?56?%}',""])},"3b18":function(e,t,a){var i=a("2e8c");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("94f3cd92",i,!0,{sourceMap:!1,shadowMode:!1})},"5c74":function(e,t,a){"use strict";var i=a("09e8"),n=a.n(i);n.a},"74e8":function(e,t,a){"use strict";a.r(t);var i=a("9e9b"),n=a("c99e");for(var r in n)"default"!==r&&function(e){a.d(t,e,function(){return n[e]})}(r);a("828f");var o=a("2877"),s=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"f6696fea",null);t["default"]=s.exports},"7be5":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isShow?a("v-uni-view",{staticClass:"mask-main"},[a("v-uni-view",{staticClass:"mask-view"}),a("v-uni-view",{staticClass:"call-main"},[a("v-uni-view",{staticClass:"call-view"},[a("v-uni-view",{staticClass:"title"},[e._v("手机绑定")]),a("v-uni-view",{staticClass:"intor"},[e._v("为了您的账户安全,请及时绑定手机号")]),a("v-uni-view",{staticClass:"call-from"},[a("v-uni-form",{on:{submit:function(t){t=e.$handleEvent(t),e.formSubmit(t)}}},[a("v-uni-view",{staticClass:"input-bg"},[a("v-uni-input",{attrs:{type:"number",name:"mobile",placeholder:"请输入手机号"},model:{value:e.mobile,callback:function(t){e.mobile=t},expression:"mobile"}})],1),a("v-uni-view",{staticClass:"input-bg dis-flex flex-x-between"},[a("v-uni-input",{attrs:{type:"number",name:"verCode",placeholder:"请输入验证码"},model:{value:e.verCode,callback:function(t){e.verCode=t},expression:"verCode"}}),a("v-uni-view",{staticClass:"getcode-btn",on:{click:function(t){t=e.$handleEvent(t),e.getCode(t)}}},[e._v(e._s(e.codeMsg))])],1),a("v-uni-button",{staticClass:"bindmobile",attrs:{formType:"submit"}},[e._v("绑定手机号")])],1)],1)],1),a("v-uni-view",{staticClass:"close-img"},[a("v-uni-text",{staticClass:"iconfont icon-roundclose",on:{click:function(t){t=e.$handleEvent(t),e.showChange(t)}}})],1)],1)],1):e._e()},n=[];a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n})},"828f":function(e,t,a){"use strict";var i=a("3b18"),n=a.n(i);n.a},"9e9b":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"padding-box m-top20"},[e.memberSet?a("v-uni-view",{staticClass:"header m-btm20"},[a("v-uni-view",{staticClass:"header-main",style:{"background-image":e.memberInfo.is_member?e.memberSet.image_second.length>0?"url("+e.memberSet.image_second[0]["file_path"]+")":"url("+e.imageRoot+"27.png)":e.memberSet.image_first.length>0?"url("+e.memberSet.image_first[0]["file_path"]+")":"url("+e.imageRoot+"26.png)"}},[e.memberInfo.is_member?a("v-uni-view",{staticClass:"member-number col-98 f-24"},[e._v("VIP："),a("v-uni-text",[e._v(e._s(e.memberInfo.card_number))])],1):e._e(),a("v-uni-view",{staticClass:"member-msg dis-flex flex-x-between"},[a("v-uni-view",{staticClass:"member-user-msg dis-flex flex-y-center"},[a("v-uni-image",{staticClass:"member-avatar",class:e.memberInfo.is_member?"ady-member-avatar-bor":"not-member-avatar-bor",attrs:{src:e.memberInfo.avatarUrl,mode:""}}),a("v-uni-view",[a("v-uni-view",{staticClass:"user-nickname f-30",class:e.memberInfo.is_member?"col-f":"col-3"},[e._v(e._s(e.memberInfo.nickName)),a("v-uni-image",{staticClass:"member-logo",attrs:{src:e.memberInfo.is_member?"/static/images/member/ady-member.png":"/static/images/member/not-member.png",mode:""}})],1),e.memberInfo.is_member?a("v-uni-view",{staticClass:"member-dge-price f-24 col-f"},[e._v(e._s(e.memberInfo.card_end_time)+"到期")]):a("v-uni-view",{staticClass:"member-dge-price f-24 col-9"},[e._v(e._s(e.memberSet.card_title?e.memberSet.card_title:"会员卡")+"仅售¥"+e._s(e.memberSet.price_min))])],1)],1),e.memberInfo.is_member?e._e():a("v-uni-view",{staticClass:"member-people"},[a("v-uni-view",{staticClass:"f-24 col-9"},[e._v("已加入会员")]),a("v-uni-view",{staticClass:"f-24 col-9 t-r"},[a("v-uni-text",{staticClass:"col-917952"},[e._v(e._s(e.memberSet.number))]),e._v("人")],1)],1)],1)],1),a("v-uni-view",{staticClass:"tab-bar b-f"},[a("v-uni-image",{staticStyle:{width:"100%"},attrs:{src:e.memberSet.image_third.length>0?e.memberSet.image_third[0]["file_path"]:e.imageRoot+"31.png",mode:"widthFix"}})],1)],1):e._e(),a("v-uni-view",{staticClass:"section m-btm20"},[a("v-uni-view",{staticClass:"member-Tabbar"},[a("v-uni-view",{staticClass:"title col-3 f-32 f-w m-btm36"},[e._v("开通类型")]),a("v-uni-view",{staticClass:"member-list"},[e._l(e.cardList,function(t,i){return[a("v-uni-view",{key:i+"_0",staticClass:"member-items b-f dis-flex flex-y-center flex-x-between m-btm36",class:t.card_id===e.card_id?"select":"not-select",on:{click:function(a){a=e.$handleEvent(a),e.selectCard(t.card_id)}}},[t.card_id===e.card_id?a("v-uni-view",{staticClass:"member-items-select"},[a("v-uni-image",{attrs:{src:"/static/images/select.png"}})],1):e._e(),a("v-uni-view",{staticClass:"title-period"},[a("v-uni-view",{staticClass:"membertitle f-28 col-3"},[e._v(e._s(t.card_title))]),t.coupon?[a("v-uni-view",{staticClass:"memberperiod f-24 col-9 m-top10"},[e._v("赠:"+e._s(t.coupon.name)+e._s(t.coupon_number)+"张")])]:[a("v-uni-view",{staticClass:"memberperiod f-24 col-9 m-top10"},[e._v("有效期："+e._s(2===t.card_type?t.card_time_date["start_time"]+"至"+t.card_time_date["end_time"]:t.card_time_date+"天"))])]],2),a("v-uni-view",{staticClass:"member-price"},[a("v-uni-view",{staticClass:"now-price f-36 f-w"},[e._v("¥"),a("v-uni-text",{staticClass:"text"},[e._v(e._s(t.card_price))])],1),a("v-uni-view",{staticClass:"f-24 col-9 old-price"},[e._v("¥"+e._s(t.card_marking_price))])],1)],1)]})],2)],1)],1),a("v-uni-view",{staticClass:"formbutton t-c f-28 col-3 f-w",on:{click:function(t){t=e.$handleEvent(t),e.submitOrder(t)}}},[e._v(e._s("1"===e.memberType?"立即支付":"立即续费"))]),a("v-uni-view",{staticClass:"bottomHeight"}),a("order-pay",{ref:"orderPay",on:{clickMask:function(t){t=e.$handleEvent(t),e.onToggleList(t)},payChange:function(t){t=e.$handleEvent(t),e.payTypeChange(t)},orderReady:function(t){t=e.$handleEvent(t),e.payOrderReady(t)},paySuccess:function(t){t=e.$handleEvent(t),e.paySuccess(t)},payFail:function(t){t=e.$handleEvent(t),e.payFail(t)}}}),a("page-loading",{ref:"loading"}),a("GetUserPhone",{ref:"getUserPhone"})],1)},n=[];a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n})},c99e:function(e,t,a){"use strict";a.r(t);var i=a("fe6a"),n=a.n(i);for(var r in i)"default"!==r&&function(e){a.d(t,e,function(){return i[e]})}(r);t["default"]=n.a},f7e7:function(e,t,a){"use strict";a.r(t);var i=a("7be5"),n=a("1126");for(var r in n)"default"!==r&&function(e){a.d(t,e,function(){return n[e]})}(r);a("5c74");var o=a("2877"),s=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"ab840afe",null);t["default"]=s.exports},fe6a:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=d(a("deda")),n=d(a("014d")),r=d(a("daa1")),o=d(a("f7e7")),s=d(a("e666"));function d(e){return e&&e.__esModule?e:{default:e}}var l={data:function(){return{card_id:null,cardList:[],memberInfo:null,memberSet:null,memberType:null,isShowBinding:!1,payOrderId:null,isSubmit:!1,payType:null}},onLoad:function(e){var t=uni.getStorageSync("member"),a=i.default.getClientType();1!==t&&"4"===a&&(uni.setStorageSync("member",1),location.reload()),i.default.showLoading(),uni.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#ffffff"}),this.memberType="2"===e.card_type?"1":"2",this.dataDetail(this.memberType),s.default.wxRegister(function(){},"pay")},computed:{},onShow:function(){i.default.getClientType();var e=this.isSubmit&&"alipay"===this.payType;e&&this.orderStatusInquiry(this.payOrderId)},components:{OrderPay:n.default,wxParse:r.default,GetUserPhone:o.default},mounted:function(){},methods:{dataDetail:function(e){var t=this;i.default._post_form("member.Member/getCard",{card_type:e,user_id:uni.getStorageSync("user_id")},function(e){t.setData(e.data),t.card_id=e.data.cardList[0]["card_id"]},!1,function(){i.default.hideLoading()})},selectCard:function(e){var t=this;t.card_id===e?t.card_id=null:t.card_id=e},submitOrder:function(){var e=this,t={pay_from:"checkout",memberType:e.memberType,memberCard:e.card_id},a=e.$store.state.userInfo;e.card_id?!a||a.mobile?(console.log(t),e.$store.commit("orderPay",t),e.onToggleList()):i.default.showError("请先绑定手机号",function(){e.$refs.getUserPhone.showChange()}):i.default.showError("请选择购买会员卡")},onToggleList:function(){this.$refs.orderPay.onToggleList()},payTypeChange:function(e){this.payType=e.value,console.log("当前选择支付方式:",e.value)},payOrderReady:function(e){console.log(e),uni.hideLoading();var t=this,a=i.default.getClientType(),n=this.payType,r=e.result.data.order_id;"4"===a&&"alipay"===n&&(t.isSubmit=!0,t.payOrderId=r)},paySuccess:function(e){console.log("paySuccess",e),i.default.navigationTo({url:"pages/mainPages/member/index/index"})},payFail:function(e){console.log("payFail",e);var t=this.$store.state.clientType,a=null;if("2"===t){var n="requestPayment:fail cancel"===e.errMsg;a=n?"订单未支付":e.err_desc}else a="7"===t&&"6001"===e.resultCode?"订单未支付":"支付失败";i.default.showError(a)},orderStatusInquiry:function(e){i.default.getUniacid();uni.showModal({title:"温馨提示",content:"请确认当前支付是否已完成",cancelText:"未完成",confirmText:"已完成",success:function(t){t.confirm&&(console.log("用户已完成支付"),i.default._get("member.Member/getMemberOrderStatus",{order_id:e},function(e){var t=e.data,a=t.pay_status;20===a&&i.default.navigationTo({url:"pages/mainPages/member/index/index"})}))}})}}};t.default=l}}]);