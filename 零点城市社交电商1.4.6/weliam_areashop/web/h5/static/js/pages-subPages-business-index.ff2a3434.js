(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-subPages-business-index"],{1918:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"page"},[i("v-uni-view",{staticClass:"header-bg"},[i("v-uni-image",{attrs:{src:"/static/images/zhushoubg.png",mode:"widthFix"}})],1),e.detail?i("v-uni-view",{staticClass:"section"},[i("v-uni-view",{staticClass:"cancel-content p-left-right-30"},[1===e.detail.right.check?i("v-uni-view",{staticClass:"content-header b-f m-btm20"},[i("v-uni-view",{staticClass:"cancel-header t-c"},[i("v-uni-view",{staticClass:"cancel-logo"},[i("v-uni-image",{attrs:{src:"/static/images/saoma.png"},on:{click:function(t){t=e.$handleEvent(t),e.scanningCode()}}})],1),i("v-uni-view",{staticClass:"col-3 f-28 m-btm40"},[e._v("扫一扫")])],1),i("v-uni-view",{staticClass:"cancel-main p-left-right-40"},[i("v-uni-view",{staticClass:"cancel-main-content dis-flex"},[i("v-uni-view",{staticClass:"check-type dis-flex flex-x-center flex-y-center",on:{click:function(t){t=e.$handleEvent(t),e.checkTypeChange(t)}}},[i("v-uni-view",{staticClass:"col-6 f-26"},[e._v(e._s("3"===e.checkType?"核销":"自提"))]),i("v-uni-view",{staticClass:"iconfont icon-triangledownfill"})],1),i("v-uni-view",{staticClass:"cancel-input"},[i("v-uni-input",{staticClass:"f-24 col-9",attrs:{type:"number",placeholder:e.placeholder},model:{value:e.codeNumber,callback:function(t){e.codeNumber=t},expression:"codeNumber"}})],1),i("v-uni-view",{staticClass:"cancel-btn f-24 col-3",on:{click:function(t){t=e.$handleEvent(t),e.checkConfirm(t)}}},[e._v("确认"+e._s("3"===e.checkType?"核销":"自提"))])],1)],1)],1):e._e(),i("v-uni-view",{staticClass:"cancel-data dis-flex b-f p-top-bom-40  m-btm20"},[i("v-uni-view",{staticClass:"data-content t-c"},[i("v-uni-view",{staticClass:"col-9 f-24"},[e._v("核销金额")]),i("v-uni-view",{staticClass:"col-3 f-32"},[e._v(e._s(e.detail.checkTotalMoney&&1===e.detail.right.seedata?e.detail.checkTotalMoney:"0.00"))])],1),i("v-uni-view",{staticClass:"data-content t-c bor-lr-1px"},[i("v-uni-view",{staticClass:"col-9 f-24"},[e._v("自提金额")]),i("v-uni-view",{staticClass:"col-3 f-32"},[e._v(e._s(e.detail.selfTotalMoney&&1===e.detail.right.seedata?e.detail.selfTotalMoney:"0.00"))])],1)],1),"1"==e.$right.seedata?i("v-uni-view",{staticClass:"cancel-data dis-flex flex-dir-column b-f p-top-bom-40  m-btm20"},[i("v-uni-view",{staticClass:"cancel-title"},[e._v("店铺收益")]),i("v-uni-view",{staticClass:"dis-flex flex-y-center"},[i("v-uni-view",{staticClass:"t-c dis-flex flex-dir-column flex-x-between p-left-right-40",staticStyle:{width:"64%"}},[i("v-uni-view",{staticClass:"dis-flex flex-dir-column flex-x-between",staticStyle:{"text-align":"left"}},[i("v-uni-view",{staticClass:"col-3 f-32"},[e._v(e._s(e.$applyNum.day))]),i("v-uni-view",{staticClass:"col-9 f-24",staticStyle:{"margin-bottom":"40upx"}},[e._v("今日营业额(元)")])],1),i("v-uni-view",{staticClass:"dis-flex flex-x-between",staticStyle:{"text-align":"left"}},[i("v-uni-view",{staticClass:"dis-flex flex-dir-column flex-x-between"},[i("v-uni-view",{staticClass:"col-3 f-32"},[e._v(e._s(e.$applyNum.month))]),i("v-uni-view",{staticClass:"col-9 f-24"},[e._v("本月营业额(元)")])],1),i("v-uni-view",{staticClass:"dis-flex flex-dir-column flex-x-between"},[i("v-uni-view",{staticClass:"col-3 f-32"},[e._v(e._s(e.$applyNum.total))]),i("v-uni-view",{staticClass:"col-9 f-24"},[e._v("累计营业额(元)")])],1)],1)],1),i("v-uni-view",{staticClass:"t-c bor-lr-1px dis-flex flex-dir-column flex-x-between flex-y-center p-left-right-40",staticStyle:{"flex-grow":"1"}},[i("v-uni-view",{staticClass:"dis-flex flex-dir-column flex-x-between",staticStyle:{"text-align":"left"}},[i("v-uni-view",{staticClass:"col-3 f-32",staticStyle:{color:"#FFD940"}},[e._v(e._s(e.$applyNum.balance))]),i("v-uni-view",{staticClass:"col-9 f-24",staticStyle:{"margin-bottom":"40upx","white-space":"nowrap"}},[e._v("可结算金额(元)")])],1),0!=e.detail.apply.is_show?i("v-uni-view",{staticClass:"mymoney-btn",on:{click:function(t){t=e.$handleEvent(t),e.withdrawInfo(t)}}},[e._v("我的钱包")]):e._e()],1)],1)],1):e._e(),i("v-uni-view",{staticClass:"cancel-tab dis-flex b-f"},e._l(e.tabList,function(t,a){return i("v-uni-view",{key:a,staticClass:"tab-item t-c",on:{click:function(i){i=e.$handleEvent(i),e.navigationTo(t)}}},[i("v-uni-view",{staticClass:"tab-imag"},[i("v-uni-image",{attrs:{src:t.thumb,mode:""}})],1),i("v-uni-view",{staticClass:"col-3 f-24"},[e._v(e._s(t.title))])],1)}),1)],1)],1):e._e()],1)},n=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return n})},"44b2":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=c(i("deda")),n=c(i("e666"));function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o={data:function(){return{tabList:[{title:"订单管理",id:"order",thumb:"/static/images/ordergl.png",link:"pages/subPages/business/order"},{title:"核销记录",id:"check",thumb:"/static/images/hexiaojilu.png",link:"pages/subPages/business/check"},{title:"我的店铺",id:"store",thumb:"/static/images/ordergl.png",link:"pages/mainPages/store/index?bus_id="}],detail:null,codeNumber:"",checkType:"3",user_id:null}},components:{},computed:{placeholder:function(){return"请输入".concat("3"===this.checkType?"核销":"自提","码")},$apply:function(){var e=this.detail||{},t=e.apply,i=void 0===t?{}:t;return i},$right:function(){var e=this.detail||{},t=e.right,i=void 0===t?{}:t;return i},$applyNum:function(){var e=this.$apply,t=e.balance,i=void 0===t?0:t,a=e.total,n=void 0===a?0:a,c=e.day,s=void 0===c?0:c,o=e.month,l=void 0===o?0:o;return{balance:parseFloat(i).toFixed(2),total:parseFloat(n).toFixed(2),day:parseFloat(s).toFixed(2),month:parseFloat(l).toFixed(2)}}},beforeCreate:function(){},onLoad:function(e){this.user_id=uni.getStorageSync("user_id")},onShow:function(){this.getMerchantInfo()},mounted:function(){},methods:{withdrawInfo:function(){a.default.navigationTo({url:"pages/subPages/withdraw/store/store?bus_id=".concat(this.detail.bus_id)})},getMerchantInfo:function(){var e=this;a.default._get("merchant.index/index",{},function(t){e.detail=t.data})},navigationTo:function(e){var t=this;1===t.detail.right.seedata?a.default.navigationTo({url:e.link+("store"===e.id?t.detail.bus_id:"")}):a.default.showError("请在后台开启查看权限")},checkConfirm:function(){var e=this,t=e.checkType;a.default.showError("是否确认操作?",function(i){var n;i.confirm&&a.default._post_form("merchant.index/checkCode",(n={},s(n,"2"===t?"selfcode_id":"vercode",e.codeNumber),s(n,"check_type",e.checkType),n),function(i){1===i.code&&a.default.showSuccess("2"===t?"自提成功":"核销成功",function(){e.codeNumber="",e.getMerchantInfo()})})})},lotterWriteOff:function(e,t,i){if(e&&t&&i)if("3"===this.checkType){a.default._get("luck.luck/checkLuckCode",{bus_id:e,luck_code:t,luck_id:i},function(e){var t=e.code,i=e.msg;1===t&&a.default.showError("".concat(i||"核销成功"))},function(e){0===e.data.code&&uni.navigateBack({delta:1})})}else a.default.showError("扫码失败,抽奖暂不支持自提,请重试");console.log(e,t,i)},scanningCode:function(){var e=this,t=a.default.getClientType();"4"===t?n.default.scanQRCode(function(t){console.log(t.resultStr);var i=JSON.parse(t.resultStr),n=i.order_id,c=i.luck_code,s=void 0===c?"":c,o=i.luck_id,l=void 0===o?"":o;"scanQRCode:ok"===t.errMsg?(console.log(t),l?e.lotterWriteOff(e.detail.bus_id,s,l):n&&a.default.navigationTo({url:"pages/mainPages/order/selfcancel?order_type=store&order_id=".concat(n||"","&user_id=").concat(e.user_id)})):a.default.showError("扫码失败,请重试")}):uni.scanCode({complete:function(t){if("scanCode:ok"===t.errMsg){console.log(t);var i=JSON.parse(t.result),n=i.order_id,c=i.luck_code,s=void 0===c?"":c,o=i.luck_id,l=void 0===o?"":o;l?e.lotterWriteOff(e.detail.bus_id,s,l):n&&a.default.navigationTo({url:"pages/mainPages/order/selfcancel?order_type=store&order_id=".concat(n||"","&user_id=").concat(e.user_id)})}else a.default.showError("扫码失败,请重试")}})},checkTypeChange:function(){var e=this;uni.showActionSheet({itemList:["商品核销","商品自提"],success:function(t){e.checkType=0===t.tapIndex?"3":"2"}})}}};t.default=o},"4aaf":function(e,t,i){var a=i("5305");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("cc6c2ca4",a,!0,{sourceMap:!1,shadowMode:!1})},5305:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,".header-bg uni-image[data-v-27528f8b]{width:100%;margin-top:%?-2?%}.section[data-v-27528f8b]{position:relative;top:%?-160?%}.content-header[data-v-27528f8b]{height:%?280?%;-webkit-border-radius:%?6?%;border-radius:%?6?%}.cancel-logo uni-image[data-v-27528f8b]{width:%?176?%;height:%?176?%}.cancel-header[data-v-27528f8b],.cancel-main[data-v-27528f8b]{position:relative;top:%?-86?%}.cancel-main-content[data-v-27528f8b]{height:%?80?%}.cancel-main-content .check-type[data-v-27528f8b]{padding:0 %?12?%;background:#f0f0f0;-webkit-border-top-left-radius:%?10?%;border-top-left-radius:%?10?%;-webkit-border-bottom-left-radius:%?10?%;border-bottom-left-radius:%?10?%}.cancel-main-content .check-type .iconfont[data-v-27528f8b]{font-size:%?18?%;padding-left:%?6?%}.cancel-main-content .cancel-input[data-v-27528f8b]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;background:#f0f0f0;padding-left:%?12?%}.cancel-main-content .cancel-input uni-input[data-v-27528f8b]{height:%?80?%;line-height:%?80?%}.cancel-main-content .cancel-btn[data-v-27528f8b]{width:%?120?%;height:%?80?%;line-height:%?80?%;background:#ffd940;text-align:center;-webkit-border-top-right-radius:%?10?%;border-top-right-radius:%?10?%;-webkit-border-bottom-right-radius:%?10?%;border-bottom-right-radius:%?10?%}.cancel-data[data-v-27528f8b]{-webkit-border-radius:%?6?%;border-radius:%?6?%}.cancel-data .cancel-title[data-v-27528f8b]{font-size:%?30?%;color:#333;padding:0 %?40?% %?40?%}.data-content[data-v-27528f8b]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.mymoney-btn[data-v-27528f8b]{width:%?170?%;height:%?65?%;border:1px solid #ccc;-webkit-border-radius:%?33?%;border-radius:%?33?%;font-size:%?24?%;font-weight:400;color:#333;text-align:center;line-height:%?65?%}.bor-lr-1px[data-v-27528f8b]{border-left:1px solid #eee;border-right:1px solid #eee}.cancel-tab[data-v-27528f8b]{padding:%?46?% 0;-webkit-border-radius:%?6?%;border-radius:%?6?%}.tab-item[data-v-27528f8b]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.tab-item .tab-imag uni-image[data-v-27528f8b]{width:%?84?%;height:%?84?%}",""])},"5b15":function(e,t,i){"use strict";i.r(t);var a=i("44b2"),n=i.n(a);for(var c in a)"default"!==c&&function(e){i.d(t,e,function(){return a[e]})}(c);t["default"]=n.a},"6e15":function(e,t,i){"use strict";var a=i("4aaf"),n=i.n(a);n.a},"76de":function(e,t,i){"use strict";i.r(t);var a=i("1918"),n=i("5b15");for(var c in n)"default"!==c&&function(e){i.d(t,e,function(){return n[e]})}(c);i("6e15");var s=i("2877"),o=Object(s["a"])(n["default"],a["a"],a["b"],!1,null,"27528f8b",null);t["default"]=o.exports}}]);