(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mainPages-poster-poster"],{"361e":function(e,t,n){var a=n("ed94");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=n("4f06").default;i("24c56394",a,!0,{sourceMap:!1,shadowMode:!1})},4182:function(e,t,n){"use strict";n.r(t);var a=n("ec8d"),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);t["default"]=i.a},"68c5":function(e,t,n){"use strict";var a=n("361e"),i=n.n(a);i.a},c9ce:function(e,t,n){"use strict";n.r(t);var a=n("d9dc"),i=n("4182");for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o);n("68c5");var s=n("2877"),r=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,"423c070d",null);t["default"]=r.exports},d9dc:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"page"},[e.poster_images?[n("v-uni-image",{staticClass:"poster-image",attrs:{src:e.poster_images,mode:"aspectFit"}})]:e._e(),"4"!==e.clientType?n("v-uni-view",{staticClass:"t-c p-r"},[e.openSetting?n("v-uni-button",{staticClass:"btn-normal setting-btn",attrs:{"open-type":"openSetting"},on:{opensetting:function(t){t=e.$handleEvent(t),e.onSetting(t)}}}):e._e(),n("v-uni-view",{staticClass:"saveBtn f-30 col-3",on:{click:function(t){t=e.$handleEvent(t),e.saveimages(e.poster_images)}}},[e._v("保存海报")])],1):e._e(),n("page-loading",{ref:"loading"})],2)},i=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i})},ec8d:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("f337"));function i(e){return e&&e.__esModule?e:{default:e}}var o={data:function(){return{poster_images:null,user_id:null,openSetting:!1}},onLoad:function(e){var t=this;t.user_id=e.userid,t.clientType=a.default.getClientType(),t.$nextTick(function(){t.getposterDetail(e)})},methods:{getposterDetail:function(e){a.default.showLoading();var t=this,n="";switch(e.postertype){case"goods":n="goods/getQrcode";break;case"store":n="merchant.index/getQrcode",e.bus_id=e.pid;break;case"dealer":n="user.dealer.user/getQrcode";break;case"evaluate":n="comment/getPoster",e.evaluate_id=e.pid;break;case"luck":n="luck.luck/getQrcode",e.luck_id=e.pid;break}delete e.pid,delete e.postertype,delete e.requesttype,a.default._post_form(n,e,function(e){1===e.code&&t.setData({poster_images:e.data})},!1,function(){a.default.hideLoading()})},saveimages:function(){uni.showLoading();var e=this,t=this.poster_images;e.downloadIamge(t)},onSetting:function(e){console.log(e);var t=e.detail.authSetting,n="scope.writePhotosAlbum";t[n]&&(this.openSetting=!1)},downloadIamge:function(e){var t=new Image;t.setAttribute("crossOrigin","anonymous"),t.onload=function(){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);var a=e.toDataURL("image/png"),i=document.createElement("a"),o=new MouseEvent("click");i.download="poster",i.href=a,i.dispatchEvent(o)},t.src=e}},mounted:function(){}};t.default=o},ed94:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".page[data-v-423c070d]{padding:0 %?30?%}.poster-image[data-v-423c070d]{width:100%;margin:%?30?% 0;-webkit-border-radius:%?15?%;border-radius:%?15?%;height:-webkit-calc(100vh - %?160?%);height:calc(100vh - %?160?%);\n\theight:-webkit-calc(100vh - %?160?% - 44px);height:calc(100vh - %?160?% - 44px);\n\tdisplay:block}.saveBtn[data-v-423c070d]{width:%?300?%;height:%?80?%;line-height:%?80?%;-webkit-border-radius:%?50?%;border-radius:%?50?%;display:inline-block;background:#ffd940;text-align:center}.setting-btn[data-v-423c070d]{position:absolute;top:0;left:0;right:0;bottom:0;opacity:0}",""])}}]);