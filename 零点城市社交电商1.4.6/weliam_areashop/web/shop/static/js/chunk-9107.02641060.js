(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-9107"],{"9Pkp":function(t,o,a){"use strict";var e=a("KMiw");a.n(e).a},GILk:function(t,o,a){"use strict";a.r(o);var e=a("XYSW"),r=a("vooH"),i=a("YU0t"),s=a("Y/SO"),l=a("slWK"),n={mixins:[a("UC6z").a.getters("Form")],name:"ManagementUserAdd",components:{ChooseFiles:e.a,ChooseCategories:i.a,ueditor:s.a,ChooseGoods:r.a,couponRender:{template:'<span><slot name="title"></slot><span class="text-danger"><slot name="price"></slot></span><slot name="tail"></slot></span>'}},directives:{},created:function(){var t=this;this.$nextTick(function(){Object(l.B)().then(function(o){var a=o.data.data,e=void 0===a?[]:a;t.categoryData=e})})},data:function(){return{ueditorList:[],categoryData:[],defaultMsg:"",currentRow:[],couponCurrentRow:[],chooseCategoriesConfig:{type:["chooseCategories"],initList:[],choose_type:"coupon"},chooseGoodsConfig:{type:["chooseGoods"],model:"normal",initList:[]},chooseLogoConfig:{type:["image"],model:"normal",uploadConfig:{limit:1,isMore:!1,model:"normal"},initList:[],file_type:"image",bindKey:{key:"image_first",model:"img"}},chooseQrConfig:{type:["image"],model:"normal",uploadConfig:{limit:1,isMore:!1,model:"normal"},initList:[],file_type:"image",bindKey:{key:"image_second",model:"img"}},formFormatData:{key:["platform","orther"],api:{editForm:{api:l.d,params:{always:!0}},submitForm:l.e},formData:{is_open:"1",image_first:[],image_second:[],number:"",cost:"",content:"",is_cdkey:"2",coupon_count:"1",is_buy:"2",goods:[],coupon:[]},rules:{}}}},mounted:function(){},methods:{serverInfoChange:function(t){this.defaultMsg=t},formFormatCallBack:function(t,o,a){if("editForm"===o){var e=t.content;this.defaultMsg=e}},saveForm:function(){this.formFormatData.formData.content=this.defaultMsg,this.formFormatSubmit()},chooseCouponChange:function(t){var o=this,a=t.currentRow,e=t.displayData;this.couponCurrentRow=a,e.map(function(t){var a=o.formFormatData.formData.coupon.findIndex(function(o){return""+o.coupon_id==""+t.coupon_id});-1===a&&o.formFormatData.formData.coupon.push({name:t.name,total_num:t.total_num,receive_num:t.receive_num,coupon_id:t.coupon_id,coupon_number:t.coupon_number})})},filtersChange:function(t){var o=this;this.currentRow=t.currentRow,t.displayData.map(function(t){-1===o.formFormatData.formData.goods.findIndex(function(o){return""+o.goods_id==""+t.goods_id})&&o.formFormatData.formData.goods.push({goods_id:t.goods_id,goods_name:t.goods_name,img:t.image[0].file_path})})},goodsToogle:function(){this.$refs.chooseGoods.currentRow=this.currentRow,this.$refs.chooseGoods.toggle()},deleteTable:function(t){this.formFormatData.formData.goods.splice(t.$index,1),this.currentRow.splice(t.$index,1)},deleteCouponTable:function(t){this.formFormatData.formData.coupon.splice(t.$index,1),this.currentRow.splice(t.$index,1)}}},m=(a("9Pkp"),a("KHd+")),c=Object(m.a)(n,function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("div",{staticClass:"application-vipsetting views-container"},[a("div",{staticClass:"wlm-form"},[a("div",{staticClass:"wlm-form-header"},[t._v("平台信息")]),t._v(" "),a("div",{staticClass:"wlm-form-content"},[a("el-form",{ref:"platform",staticClass:"retail-form",attrs:{model:t.formFormatData.formData,rules:t.formFormatData.rules,size:"small","label-width":"180px","label-position":"right"}},[a("el-form-item",{attrs:{label:"是否开启会员卡"}},[a("el-radio-group",{model:{value:t.formFormatData.formData.is_open,callback:function(o){t.$set(t.formFormatData.formData,"is_open",o)},expression:"formFormatData.formData.is_open"}},[a("el-radio",{attrs:{label:"1"}},[t._v("开启")]),t._v(" "),a("el-radio",{attrs:{label:"2"}},[t._v("关闭")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"开通前背景"}},[a("choose-files",{ref:"chooseFilesBefore",attrs:{config:t.chooseLogoConfig,changeEvt:t.formFormatFiltersChange}}),t._v(" "),t.formFormatData.formData.image_first[0]?a("div",{staticClass:"images-loader img-center",style:{"background-image":"url("+t.formFormatData.formData.image_first[0].file_path+")"}},[a("i",{staticClass:"el-icon-close",on:{click:function(o){t.formFormatData.formData.image_first=[]}}})]):a("div",{staticClass:"flex-row flex-align-c flex-justify-c wlm-update-load",on:{click:function(o){t.$refs.chooseFilesBefore.toggle()}}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"开通后背景"}},[a("choose-files",{ref:"chooseFilesAfter",attrs:{config:t.chooseQrConfig,changeEvt:t.formFormatFiltersChange}}),t._v(" "),t.formFormatData.formData.image_second[0]?a("div",{staticClass:"images-loader img-center",style:{"background-image":"url("+t.formFormatData.formData.image_second[0].file_path+")"}},[a("i",{staticClass:"el-icon-close",on:{click:function(o){t.formFormatData.formData.image_second=[]}}})]):a("div",{staticClass:"flex-row flex-align-c flex-justify-c wlm-update-load",on:{click:function(o){t.$refs.chooseFilesAfter.toggle()}}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"虚拟人数"}},[a("el-input",{attrs:{width:"50"},nativeOn:{input:function(o){t.clearNativeReg(t.formFormatData.formData,"number")}},model:{value:t.formFormatData.formData.number,callback:function(o){t.$set(t.formFormatData.formData,"number","string"==typeof o?o.trim():o)},expression:"formFormatData.formData.number"}},[a("template",{slot:"append"},[t._v("人")])],2),t._v(" "),a("div",{staticClass:"form-help"},[t._v("虚拟人数在用户端展示,用户营造气氛,刺激用户开通会员 "),a("el-button",{attrs:{type:"text"}},[t._v("查看模板")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"虚拟成本"}},[a("el-input",{attrs:{width:"50"},nativeOn:{input:function(o){t.clearNativeReg(t.formFormatData.formData,"cost")}},model:{value:t.formFormatData.formData.cost,callback:function(o){t.$set(t.formFormatData.formData,"cost",o)},expression:"formFormatData.formData.cost"}},[a("template",{slot:"append"},[t._v("元")])],2),t._v(" "),a("div",{staticClass:"form-help"},[t._v("虚拟成本在用户端展示,用户营造气氛,刺激用户开通会员 "),a("el-button",{attrs:{type:"text"}},[t._v("查看模板")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"会员特权"}},[a("ueditor",{ref:"by_know",attrs:{ueditorChange:t.serverInfoChange,ueditorList:t.ueditorList,bindIndex:1,defaultMsg:t.defaultMsg,config:{initialFrameWidth:null,initialFrameHeight:350}}}),t._v(" "),a("div",{staticClass:"form-help"},[t._v("平台服务协议内容我们已为您初始化一套模版，请根据您的需要进行修改使用。原文模版点此下载："),a("el-button",{attrs:{type:"text"}},[t._v("查看模板")])],1)],1)],1)],1)]),t._v(" "),a("div",{staticClass:"wlm-form"},[a("div",{staticClass:"wlm-form-header"},[t._v("其他设置")]),t._v(" "),a("div",{staticClass:"wlm-form-content"},[a("el-form",{ref:"orther",staticClass:"retail-form",attrs:{model:t.formFormatData.formData,rules:t.formFormatData.rules,size:"small","label-width":"180px","label-position":"right"}},[a("el-form-item",{attrs:{label:"是否开启激活码"}},[a("el-radio-group",{model:{value:t.formFormatData.formData.is_cdkey,callback:function(o){t.$set(t.formFormatData.formData,"is_cdkey",o)},expression:"formFormatData.formData.is_cdkey"}},[a("el-radio",{attrs:{label:"1"}},[t._v("开启")]),t._v(" "),a("el-radio",{attrs:{label:"2"}},[t._v("关闭")])],1),t._v(" "),a("div",{staticClass:"form-help"},[t._v("开启激活码后，用户端才展示兑换激活码入口")])],1),t._v(" "),a("el-form-item",{attrs:{label:"会员专属优惠券"}},[a("choose-categories",{ref:"chooseCategories",attrs:{config:t.chooseCategoriesConfig,changeEvt:t.chooseCouponChange}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(o){t.chooseCategoriesConfig.choose_type=["coupon"],t.$refs.chooseCategories.toggle()}}},[t._v("添加优惠券")]),t._v(" "),""!=t.formFormatData.formData.coupon?a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.formFormatData.formData.coupon}},[a("el-table-column",{attrs:{prop:"date",label:"优惠券名称"},scopedSlots:t._u([{key:"default",fn:function(o){return[a("p",[t._v(t._s(o.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"剩余库存"},scopedSlots:t._u([{key:"default",fn:function(o){return[a("p",[t._v(t._s(""+(o.row.total_num-o.row.receive_num)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"优惠券个数"},scopedSlots:t._u([{key:"default",fn:function(o){return[a("el-input",{model:{value:o.row.coupon_number,callback:function(a){t.$set(o.row,"coupon_number",a)},expression:"scope.row.coupon_number"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(o){return[a("div",{staticClass:"operation-group"},[a("el-button",{staticClass:"wlm-text",attrs:{type:"text"},on:{click:function(a){t.deleteCouponTable(o)}}},[t._v("删除")])],1)]}}])})],1):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"优惠券领取个数"}},[a("el-radio-group",{model:{value:t.formFormatData.formData.coupon_count,callback:function(o){t.$set(t.formFormatData.formData,"coupon_count",o)},expression:"formFormatData.formData.coupon_count"}},[a("el-radio",{attrs:{label:"1"}},[t._v("1个")]),t._v(" "),a("el-radio",{attrs:{label:"2"}},[t._v("2个")]),t._v(" "),a("el-radio",{attrs:{label:"3"}},[t._v("3个")]),t._v(" "),a("el-radio",{attrs:{label:"all"}},[t._v("不限")])],1),t._v(" "),a("div",{staticClass:"form-help"},[t._v("用户开通会员后，所领取的不同优惠券个数")])],1),t._v(" "),a("el-form-item",{attrs:{label:"购买商品为会员"}},[a("el-radio-group",{model:{value:t.formFormatData.formData.is_buy,callback:function(o){t.$set(t.formFormatData.formData,"is_buy",o)},expression:"formFormatData.formData.is_buy"}},[a("el-radio",{attrs:{label:"1"}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:"2"}},[t._v("否")])],1),t._v(" "),a("choose-goods",{ref:"chooseGoods",attrs:{config:t.chooseGoodsConfig,changeEvt:t.filtersChange}}),t._v(" "),"1"==t.formFormatData.formData.is_buy?a("el-button",{attrs:{type:"primary"},on:{click:t.goodsToogle}},[t._v("添加商品")]):t._e(),t._v(" "),a("div",{staticClass:"form-help",staticStyle:{"margin-bottom":"10px"}},[t._v("用户购买指定的商品后，自动成为相应会员")]),t._v(" "),""!=t.formFormatData.formData.goods&&"1"==t.formFormatData.formData.is_buy?a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.formFormatData.formData.goods}},[a("el-table-column",{attrs:{prop:"date",label:"商品"},scopedSlots:t._u([{key:"default",fn:function(o){return[a("div",{staticClass:"flex-row"},[o.row.img?a("img",{staticClass:"logo",attrs:{src:o.row.img}}):t._e(),t._v(" "),a("div",{staticClass:"inner-text flex-row flex-align-c"},[a("p",[t._v(t._s(o.row.goods_name))])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"选择会员卡"},scopedSlots:t._u([{key:"default",fn:function(o){return[a("el-select",{attrs:{placeholder:"请选择"},model:{value:o.row.card_id,callback:function(a){t.$set(o.row,"card_id",a)},expression:"scope.row.card_id"}},t._l(t.categoryData,function(t){return a("el-option",{key:t.card_id,attrs:{label:t.card_title,value:""+t.card_id}})}))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(o){return[a("div",{staticClass:"operation-group"},[a("el-button",{staticClass:"wlm-text",attrs:{type:"text"},on:{click:function(a){t.deleteTable(o)}}},[t._v("删除")])],1)]}}])})],1):t._e()],1)],1)],1)]),t._v(" "),a("div",{staticClass:"wlm-fixed-btn flex-row flex-align-c flex-justify-c"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveForm}},[t._v("保存")])],1)])},[],!1,null,"62d1cef0",null);c.options.__file="vipSetting.vue";o.default=c.exports},KMiw:function(t,o,a){}}]);