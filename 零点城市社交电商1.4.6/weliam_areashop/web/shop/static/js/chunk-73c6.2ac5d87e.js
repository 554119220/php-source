(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-73c6"],{"+KkK":function(t,e,a){"use strict";a.r(e);var l=a("bfoT"),i={mixins:[a("UC6z").a.getters("Form")],name:"WeChatMenuChannelAdd",components:{},directives:{},computed:{isFirstMax:function(){return this.formFormatData.formData.button.length>=this.firstMax},isSecondMax:function(){return function(t){return this.formFormatData.formData.button[t].children.length>=this.secondMax}},hasMenu:function(){return 0===this.formFormatData.formData.button.length&&!this.showMenu}},data:function(){return{showMenu:!1,visible:!1,firstMax:3,secondMax:5,formFormatData:{key:["menuBase","menuSetting"],api:{submitForm:l.b},formData:{title:"",button:[{name:"13",type:"click",source:"2",content:{text:"",image:[],audio:[]},link:"",appid:"",pagepath:"",url:"",visible:!1,children:[{name:"13",visible:!1,type:"click",source:"2",content:{text:"",image:[],audio:[]},link:"",appid:"",pagepath:"",url:""}]}],name:"",password:"",repassword:"",username:""},rules:{title:[{required:!0,message:"请输入菜单名称",trigger:"blur"}]}}}},methods:{deletePrimary:function(t){this.formFormatData.formData.button.splice(t,1)},deleteSecondary:function(t,e){this.formFormatData.formData.button[t].children.splice(e,1)},addMenu:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,l=!1;switch(t){case"first":this.formFormatData.formData.button.length<3&&(this.formFormatData.formData.button.push({name:"13",type:"click",source:"2",content:{text:"",image:[],audio:[]},link:"",appid:"",pagepath:"",url:"",visible:!1,children:[]}),l=!0);break;case"second":this.formFormatData.formData.button[e].children.length<5&&(this.formFormatData.formData.button[e].children.push({name:"13",type:"click",source:"2",content:{text:"",image:[],audio:[]},link:"",appid:"",pagepath:"",url:"",visible:!1}),l=!0)}l||this.$message({message:l?"添加成功：上限不超过"+a+"个":"添加失败：上限不超过"+a+"个",type:l?"success":"error"})}}},n=(a("VXI6"),a("KHd+")),s=Object(n.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wechat-menu-channel views-container"},[t._m(0),t._v(" "),a("div",{staticClass:"wlm-form"},[a("div",{staticClass:"wlm-form-header"},[t._v("菜单名称")]),t._v(" "),a("div",{staticClass:"flex-row",staticStyle:{padding:"10px 20px 50px"}},[a("div",{staticClass:"wlm-form-content"},[a("el-form",{ref:"menuBase",staticClass:"retail-form",attrs:{model:t.formFormatData.formData,rules:t.formFormatData.rules,size:"small","label-width":"140px","label-position":"right"}},[a("el-form-item",{attrs:{label:"菜单名称",prop:"title"}},[a("el-input",{model:{value:t.formFormatData.formData.title,callback:function(e){t.$set(t.formFormatData.formData,"title",e)},expression:"formFormatData.formData.title"}})],1)],1)],1)])]),t._v(" "),a("div",{staticClass:"wlm-form"},[a("div",{staticClass:"wlm-form-header"},[t._v("菜单管理")]),t._v(" "),a("div",{staticClass:"flex-row",staticStyle:{padding:"10px 20px 50px"}},[a("div",{staticClass:"pannel__left"},[a("div",{staticClass:"menu-preview flex-col flex-col-reverse"},[a("div",{staticClass:"menu-content flex-row flex-align-c flex-justify-b"},[a("div",{staticClass:"menu-icon flex-row flex-align-c flex-justify-c"},[a("svg-icon",{staticStyle:{width:"30px",height:"30px"},attrs:{"icon-class":"wechatmenu"}})],1),t._v(" "),a("div",{staticClass:"menu-item-box flex-row flex-align-c flex-justify-c scale-grow"},[t.hasMenu?a("span",[t._v("未命名")]):t._l(t.formFormatData.formData.button,function(e,l){return a("el-tooltip",{key:l,attrs:{effect:"light","popper-class":"tooltip-menu-item","hide-after":0,disabled:0===e.children.length,placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},t._l(e.children,function(l,i){return a("span",{key:i,style:{width:268/t.formFormatData.formData.button.length+"px",height:"50px","box-sizing":"border-box",display:"block","text-align":"center","border-top":(e.children.length>1&&0!==i?"1":"0")+"px solid #ccc","font-size":"14px",padding:"0",cursor:"pointer","line-height":"50px"}},[t._v(t._s(l.name||""))])})),t._v(" "),a("el-button",{attrs:{type:"text"}},[t._v(t._s(e.name))])],1)})],2)])])]),t._v(" "),a("div",{staticClass:"wlm-form-content",staticStyle:{"padding-top":"0"}},[t.hasMenu?a("el-alert",{staticStyle:{width:"500px",height:"150px"},attrs:{title:"还没有任何菜单",center:"",closable:!1,type:"warning"}},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(e){t.showMenu=!0}}},[t._v("添加一级菜单")])],1):t._e(),t._v(" "),t.hasMenu?t._e():a("el-form",{ref:"menuSetting",staticClass:"retail-form",attrs:{model:t.formFormatData.formData,rules:t.formFormatData.rules,size:"small","label-width":"100px","label-position":"right"}},[t._l(t.formFormatData.formData.button,function(e,l){return a("el-alert",{key:l,staticStyle:{"margin-bottom":"20px","background-color":"#f3f4f7"},attrs:{title:"",closable:!1,type:"success"}},[a("div",{staticClass:"my-badge",on:{click:function(e){t.deletePrimary(l)}}},[a("i",{staticClass:"el-icon-close"})]),t._v(" "),a("el-form-item",{attrs:{label:"一级菜单名称"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"menuitem.name"}}),t._v(" "),a("el-popover",{attrs:{placement:"bottom",trigger:"click"},model:{value:e.visible,callback:function(a){t.$set(e,"visible",a)},expression:"menuitem.visible"}},[a("div",{staticClass:"flex-col",staticStyle:{padding:"20px 30px"}},[a("el-radio-group",{staticStyle:{"margin-bottom":"20px",width:"100%"},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"menuitem.type"}},[a("el-radio",{attrs:{label:"click"}},[t._v("发送消息")]),t._v(" "),a("el-radio",{attrs:{label:"view"}},[t._v("跳转网页")]),t._v(" "),a("el-radio",{attrs:{label:"miniprogram"}},[t._v("小程序")])],1),t._v(" "),"click"==e.type?a("el-tabs",{staticStyle:{"margin-top":"-10px"},model:{value:e.source,callback:function(a){t.$set(e,"source",a)},expression:"menuitem.source"}},[a("el-tab-pane",{attrs:{label:"文字",name:"2"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请输入内容"},model:{value:e.content.text,callback:function(a){t.$set(e.content,"text",a)},expression:"menuitem.content.text"}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"图片",name:"4"}},[t._v("图片")]),t._v(" "),a("el-tab-pane",{attrs:{label:"音频",name:"6"}},[t._v("音频")]),t._v(" "),a("el-tab-pane",{attrs:{label:"视频",name:"8"}},[t._v("小程序")]),t._v(" "),a("el-tab-pane",{attrs:{label:"关键字",name:"10"}},[t._v("其他")])],1):t._e(),t._v(" "),"view"==e.type?a("el-form-item",{attrs:{label:"跳转网页"}},[a("el-input",{model:{value:e.link,callback:function(a){t.$set(e,"link",a)},expression:"menuitem.link"}},[a("template",{slot:"append"},[t._v("选择链接")])],2)],1):t._e(),t._v(" "),"miniprogram"==e.type?[a("el-form-item",{attrs:{label:"APPID"}},[a("el-input",{model:{value:e.appid,callback:function(a){t.$set(e,"appid",a)},expression:"menuitem.appid"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"页面地址"}},[a("el-input",{model:{value:e.pagepath,callback:function(a){t.$set(e,"pagepath",a)},expression:"menuitem.pagepath"}},[a("template",{slot:"append"},[t._v("选择链接")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"URL"}},[a("el-input",{model:{value:e.url,callback:function(a){t.$set(e,"url",a)},expression:"menuitem.url"}},[a("template",{slot:"append"},[t._v("选择链接")])],2)],1)]:t._e()],2),t._v(" "),a("el-button",{attrs:{slot:"reference",type:"text"},on:{click:function(e){t.visible=!t.visible}},slot:"reference"},[t._v("设置菜单动作")])],1),t._v(" "),t._l(e.children,function(e,i){return a("el-form-item",{key:i,staticClass:"wlm-form-child",attrs:{label:"二级菜单名称"}},[a("el-input",{staticStyle:{width:"150px"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"sub_button.name"}}),t._v(" "),a("el-popover",{attrs:{placement:"bottom",trigger:"click"},model:{value:e.visible,callback:function(a){t.$set(e,"visible",a)},expression:"sub_button.visible"}},[a("div",{staticClass:"flex-col",staticStyle:{padding:"15px 20px"}},[a("el-radio-group",{staticStyle:{"margin-bottom":"20px",width:"100%"},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"sub_button.type"}},[a("el-radio",{attrs:{label:"click"}},[t._v("发送消息")]),t._v(" "),a("el-radio",{attrs:{label:"view"}},[t._v("跳转网页")]),t._v(" "),a("el-radio",{attrs:{label:"miniprogram"}},[t._v("小程序")])],1),t._v(" "),"click"==e.type?a("el-tabs",{staticStyle:{"margin-top":"-10px"},model:{value:e.source,callback:function(a){t.$set(e,"source",a)},expression:"sub_button.source"}},[a("el-tab-pane",{attrs:{label:"文字",name:"2"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请输入内容"},model:{value:e.content.text,callback:function(a){t.$set(e.content,"text",a)},expression:"sub_button.content.text"}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"图片",name:"4"}},[t._v("图片")]),t._v(" "),a("el-tab-pane",{attrs:{label:"音频",name:"6"}},[t._v("音频")]),t._v(" "),a("el-tab-pane",{attrs:{label:"视频",name:"8"}},[t._v("小程序")]),t._v(" "),a("el-tab-pane",{attrs:{label:"关键字",name:"10"}},[t._v("其他")])],1):t._e(),t._v(" "),"view"==e.type?a("el-form-item",{attrs:{label:"跳转网页"}},[a("el-input",{model:{value:e.link,callback:function(a){t.$set(e,"link",a)},expression:"sub_button.link"}},[a("template",{slot:"append"},[t._v("选择链接")])],2)],1):t._e(),t._v(" "),"miniprogram"==e.type?[a("el-form-item",{attrs:{label:"APPID"}},[a("el-input",{model:{value:e.appid,callback:function(a){t.$set(e,"appid",a)},expression:"sub_button.appid"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"页面地址"}},[a("el-input",{model:{value:e.pagepath,callback:function(a){t.$set(e,"pagepath",a)},expression:"sub_button.pagepath"}},[a("template",{slot:"append"},[t._v("选择链接")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"URL"}},[a("el-input",{model:{value:e.url,callback:function(a){t.$set(e,"url",a)},expression:"sub_button.url"}},[a("template",{slot:"append"},[t._v("选择链接")])],2)],1)]:t._e()],2),t._v(" "),a("el-button",{attrs:{slot:"reference",type:"text"},on:{click:function(a){e.visible=!t.visible}},slot:"reference"},[t._v("设置菜单动作")]),t._v(" "),a("el-button",{staticClass:"color-red",attrs:{slot:"reference",type:"text"},on:{click:function(e){t.deleteSecondary(l,i)}},slot:"reference"},[t._v("删除")])],1)],1)}),t._v(" "),t.isSecondMax(l)?t._e():a("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(e){t.addMenu("second",l,5)}}},[t._v("添加二级菜单")])],2)],1)}),t._v(" "),t.isFirstMax?t._e():a("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(e){t.addMenu("first")}}},[t._v("添加一级菜单")])],2)],1)])]),t._v(" "),a("div",{staticClass:"wlm-fixed-btn flex-row flex-align-c flex-justify-c"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.formFormatSubmit({router:{type:"replace",path:"/user/managementUser",code:1}})}}},[t._v("保存")])],1)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"wlm-form"},[e("div",{staticClass:"wlm-form-notice warning",staticStyle:{margin:"0"}},[e("p",[this._v("由于微信接口延迟，菜单修改后最长需要30分钟更新至公众号，如未及时更新，请取消关注，再重新关注")])])])}],!1,null,"3b180900",null);s.options.__file="weChatMenuChannelAdd.vue";e.default=s.exports},VXI6:function(t,e,a){"use strict";var l=a("xsdm");a.n(l).a},xsdm:function(t,e,a){}}]);