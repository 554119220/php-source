(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6a45"],{"2XpJ":function(t,e,a){},"5NrO":function(t,e,a){"use strict";a.r(e);var i=a("GQeE"),s=a.n(i),n=a("sk9p"),l=a.n(n),o=a("ukxx"),r=a.n(o),c=a("7An/"),u=a.n(c),d=a("9qRs"),p=a("XYSW"),f=a("UwIj"),v=a("7Qib");r.a.use(u.a);var g={name:"MProject",data:function(){return{chooseLinkConfig:{type:["chooseLink"],initList:[],link_type:"2"},chooseFilesConfig:{type:["image"],model:"normal",initList:[],file_type:"image"},current:0,model:"default",isShowModel:!1,checkList:[],editData:[],styleData:{textcolor:"#AAAAAA",bgcolor:"#ffffff",textcoloron:"#000000"},predefineColors:["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","#111111","#aaaaaa","#dddddd"]}},components:{ChooseLink:d.a,ChooseFiles:p.a},computed:{getstyleData:function(){return this.styleData}},created:function(){var t=this;this.$nextTick(function(){Object(f.d)().then(function(e){var a=l()(e.data.data,1)[0],i=a.checkList,s=void 0===i?[]:i,n=a.menu;(n||Array.isArray(s)&&s.length>0)&&(t.editData=t.formatData(n.data),t.styleData=n.style,t.checkList=s)})})},mounted:function(){},methods:{uploadTrigger:function(t,e,a){"chooseIcon"===t?(this.current=e,this.model=a,this.$refs.chooseFiles.toggle()):"chooseUrl"===t&&(this.current=e,this.model=a,this.$refs.chooseLink.toggle())},formatData:function(t){if(t){var e=[];return s()(t).map(function(a,i){t[a].signid=a,t[a].iconPath=t[a].iconPath,t[a].iconactivePath=t[a].iconactivePath,e.push(t[a])}),e||[]}return[]},resetFormate:function(){var t=this.editData,e=this.styleData,a={};if(t.length>0){var i={};return t.map(function(t,e){i[t.signid]={iconPath:t.iconPath||{file_path:""},iconactivePath:t.iconactivePath||{file_path:""},linkurl:t.linkurl,name:t.name,text:t.text}}),a.data=i,a.style=e,console.log(a),a}},delEdit:function(t){var e=this;this.$confirm("此操作将删除该导航, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.editData.length>1?(e.$message({type:"success",message:"删除成功!"}),e.editData.splice(t,1)):e.$message({type:"error",message:"菜单栏至少保留一个!"})}).catch(function(){e.$message({type:"warning",message:"已取消删除"})})},saveForm:function(){var t=this,e=this.resetFormate();if(e){var a={menu:e,checkList:this.checkList};Object(f.a)({data:[a]}).then(function(e){var a=e.data,i=a.code,s=a.msg;1===i?t.$message.success("保存成功"):t.$message.error(s)}),console.log(a)}else this.$message.error("请设置菜单栏~!")},uploadFileChange:function(t){if("ChooseLink"===t.key){var e=l()(t.currentRow,1)[0],a=l()(t.displayData,1)[0],i=a.name,s=a.title;if(e){var n=this.current,o=this.editData[n];o.linkurl=e,o.name=i,o.text=s}else this.$message.error("请选择链接~!")}else{var r=l()(t.displayData,1)[0];if(-1!==this.current&&r)this.editData[this.current]["active"===this.model?"iconactivePath":"iconPath"]=r}},onSubmit:function(){console.log("submit!")},add_click:function(){this.editData.length>=5?this.$message({message:"最大添加5个！",center:"true",type:"error"}):this.editData.push({iconPath:{file_path:""},iconactivePath:{file_path:""},linkurl:"",name:"",signid:Object(v.signid)("Mo"),text:""})},Reset:function(t,e){this.styleData[t]=e}}},h=(a("mG2D"),a("KHd+")),m=Object(h.a)(g,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"section-page renovationbmenu-page views-container"},[a("div",{staticClass:"wlm-form"},[a("div",{staticClass:"wlm-form-header"},[t._v("导航菜单")]),t._v(" "),a("div",{staticClass:"page-body pad-no"},[a("section",{staticClass:"page-box"},[a("div",{staticClass:"welcome-container"},[a("section",{staticClass:"account-stat"},[a("div",{staticClass:"diy-main flex-row flex-justify-c"},[a("div",{staticClass:"diy-phone-box flex-col"},[a("div",{staticClass:"diy-phone"},[a("div",{staticClass:"phone-body"},[a("div",{staticClass:"phone-title"},[t._v("导航菜单")]),t._v(" "),a("div",{staticClass:"phone-main"},[a("div",{staticClass:"diy-menu flex-row flex-align-c flex-justify-c",style:{background:t.getstyleData.bgcolor}},t._l(t.editData,function(e,i){return a("div",{key:i,staticClass:"item",style:{width:"calc("+100/t.editData.length+"%)"}},[a("div",{staticClass:"inner flex-col flex-justify-b flex-align-c",style:{background:t.getstyleData.bgcolor}},[e.iconPath.file_path?a("img",{staticClass:"iconimg",attrs:{src:e.iconPath.file_path}}):a("img",{staticClass:"iconimg"}),t._v(" "),a("span",{staticClass:"text",style:{color:t.getstyleData.textcolor}},[t._v(t._s(e.text))])])])}))])])])]),t._v(" "),a("div",{staticClass:"diy-edit-box flex-col"},[a("div",{staticClass:"diy-editor"},[a("p",{staticClass:"edit-title"},[t._v("将导航应用在以下页面：")]),t._v(" "),a("el-checkbox-group",{model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},[a("el-checkbox",{attrs:{label:"index"}},[t._v("首页")]),t._v(" "),a("el-checkbox",{attrs:{label:"category"}},[t._v("查找")]),t._v(" "),a("el-checkbox",{attrs:{label:"comment"}},[t._v("好评")]),t._v(" "),a("el-checkbox",{attrs:{label:"user"}},[t._v("个人中心")])],1)],1),t._v(" "),a("div",{staticClass:"diy-editor"},[a("div",{staticClass:"form-group bg-color"},[a("div",{staticClass:"input-group flex-row"},[a("span",{staticClass:"control-label"},[t._v("背景颜色")]),t._v(" "),a("span",{staticClass:"re-addon border-left"},[t._v("默认")]),t._v(" "),t.getstyleData.bgcolor?a("el-color-picker",{attrs:{predefine:t.predefineColors},model:{value:t.getstyleData.bgcolor,callback:function(e){t.$set(t.getstyleData,"bgcolor",e)},expression:"getstyleData.bgcolor"}}):t._e(),t._v(" "),a("span",{staticClass:"re-addon border-right",on:{click:function(e){t.Reset("bgcolor","#ffffff")}}},[t._v("重置")])],1)]),t._v(" "),a("div",{staticClass:"form-group"},[a("div",{staticClass:"input-group flex-row"},[a("span",{staticClass:"control-label"},[t._v("文字颜色")]),t._v(" "),a("span",{staticClass:"re-addon border-left"},[t._v("默认")]),t._v(" "),t.getstyleData.textcolor?a("el-color-picker",{attrs:{predefine:t.predefineColors},model:{value:t.getstyleData.textcolor,callback:function(e){t.$set(t.getstyleData,"textcolor",e)},expression:"getstyleData.textcolor"}}):t._e(),t._v(" "),a("span",{staticClass:"re-addon",staticStyle:{"border-right":"0",cursor:"pointer"},on:{click:function(e){t.Reset("textcolor","#7a7e83")}}},[t._v("重置")]),t._v(" "),a("span",{staticClass:"re-addon"},[t._v("选中")]),t._v(" "),t.getstyleData.textcoloron?a("el-color-picker",{attrs:{predefine:t.predefineColors},model:{value:t.getstyleData.textcoloron,callback:function(e){t.$set(t.getstyleData,"textcoloron",e)},expression:"getstyleData.textcoloron"}}):t._e(),t._v(" "),a("span",{staticClass:"re-addon border-right",on:{click:function(e){t.Reset("textcoloron","#ff4444")}}},[t._v("重置")])],1)]),t._v(" "),a("div",[t._l(t.editData,function(e,i){return a("div",{directives:[{name:"dragging",rawName:"v-dragging",value:{item:e,list:t.editData,group:"editList"},expression:"{ item: edititem, list: editData, group: 'editList'}"}],key:i},[a("div",{staticClass:"list flex-row"},[a("div",{staticClass:"marker",on:{click:function(e){t.delEdit(i)}}},[t._v("x")]),t._v(" "),a("div",{staticClass:"nav-item"},[a("div",{staticClass:"app-nav-image-group flex-row"},[a("div",{staticClass:"nav-item-image-content"},[a("p",[t._v("普通:")]),t._v(" "),a("div",{staticClass:"nav-item-image-wrapper",on:{click:function(e){t.uploadTrigger("chooseIcon",i,"default")}}},[a("div",{staticClass:"nav-item-image-block img-center",style:{"background-image":"url("+e.iconPath.file_path+")"}}),t._v(" "),a("div",{staticClass:"nav-item-image-text"},[t._v("选择")])])]),t._v(" "),a("div",{staticClass:"nav-item-image-content"},[a("p",[t._v("选中:")]),t._v(" "),a("div",{staticClass:"nav-item-image-wrapper",on:{click:function(e){t.uploadTrigger("chooseIcon",i,"active")}}},[a("div",{staticClass:"nav-item-image-block img-center",style:{"background-image":"url("+e.iconactivePath.file_path+")"}}),t._v(" "),a("div",{staticClass:"nav-item-image-text"},[t._v("选择")])])])]),t._v(" "),a("div",{staticClass:"nav-item-tips"},[t._v("图片尺寸要求：不大于128*128像素，支持PNG格式")]),t._v(" "),a("div",{staticClass:"nav-item-link flex-row flex-align-c"},[a("div",{staticClass:"nav-item-link-label"},[t._v("链接:")]),t._v(" "),a("div",{staticClass:"readonly-div",on:{click:function(e){t.uploadTrigger("chooseUrl",i)}}},[a("div",{staticClass:"readonly ivu-input-wrapper ivu-input-wrapper-default ivu-input-type"},[a("i",{staticClass:"ivu-icon ivu-icon-ios-loading ivu-load-loop ivu-input-icon ivu-input-icon-validate"}),t._v(" "),a("input",{staticClass:"ivu-input ivu-input-default",attrs:{autocomplete:"off",spellcheck:"false",type:"text",placeholder:"请选择链接",readonly:"readonly"},domProps:{value:e.linkurl}})]),t._v(" "),a("i",{staticClass:"icon icon-fujian readonly-icon",staticStyle:{left:"12px","margin-top":"-3px"}})])]),t._v(" "),a("div",{staticClass:"nav-item-link flex-row flex-align-c",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"nav-item-link-label"},[t._v("文字:")]),t._v(" "),a("div",{staticClass:"readonly-div"},[a("div",{staticClass:"readonly ivu-input-wrapper ivu-input-wrapper-default ivu-input-type"},[a("el-input",{attrs:{placeholder:"请选择链接"},model:{value:e.text,callback:function(a){t.$set(e,"text",a)},expression:"edititem.text"}})],1)])])])])])}),t._v(" "),a("el-button",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{size:"small",icon:"el-icon-plus"},on:{click:t.add_click}},[t._v("添加一个 ("+t._s(t.editData.length)+"/5)")])],2)])])])])])]),t._v(" "),a("choose-files",{ref:"chooseFiles",attrs:{config:t.chooseFilesConfig,changeEvt:t.uploadFileChange}}),t._v(" "),a("choose-link",{ref:"chooseLink",attrs:{config:t.chooseLinkConfig,changeEvt:t.uploadFileChange}})],1)]),t._v(" "),a("div",{staticClass:"wlm-fixed-btn flex-row flex-align-c flex-justify-c"},[a("el-button",{staticStyle:{width:"20%",margin:"10px auto"},attrs:{size:"small",type:"primary"},on:{click:t.saveForm}},[t._v("保存菜单")])],1)])},[],!1,null,"f70f6b9e",null);m.options.__file="renovationBmenu.vue";e.default=m.exports},"9qRs":function(t,e,a){"use strict";var i=a("sk9p"),s=a.n(i),n=a("bG4Z"),l=a("UC6z"),o={mixins:l.a.getters("ChooseLink"),initData:{model:"display"}},r={mixins:[o.mixins,l.a.getters("Table")],props:{defaultConfig:{type:Object,default:function(){return o}},isShow:{type:Boolean,default:!0}},watch:{"config.link_type":{handler:function(t,e){t&&"string"==typeof t&&["1","2","spike"].includes(t)&&(this.link_type=t)},immediate:!0,deep:!1}},data:function(){return{defaultProps:{children:"child",label:"name"},link_type:"1",displayData:[],menuData:[],currentRow:[],closable:!0,dialogTableVisible:!1,tableFormatData:{current:"userTable",userTable:{key:"userTable",api:{getList:n.h,noCreate:!0},tableData:[],files:{name:"",ids:[],type:"",checkall:"0",category_id:""},pagination:{page:1,list_rows:10,pagesizes:[10,20,50],total:10}}}}},computed:{$type:function(){return this.link_type}},created:function(){},methods:{dialogGetData:function(){this.tableFormatData.userTable.api.noCreate=!1,this.getLikeList()},getLikeList:function(){var t=this;Object(n.g)({type:this.$type}).then(function(e){var a=e.data.data,i=void 0===a?[]:a;t.menuData=i;var n=s()(i,1),l=s()(n[0].list,1)[0].type;l&&(t.tableFormatData.userTable.files.type=l,t.getTableList())})},handleSelect:function(t,e){this.tableFormatData.userTable.files.type=t,this.filesSerch()},clearData:function(){this.currentRow=[],this.displayData=[]},toggle:function(){this.dialogTableVisible=!this.dialogTableVisible},saveChoose:function(){this.toggle(),this.output()},chooseGoods:function(t,e){if(this.currentRow=[t],this.currentRow.includes(t))this.displayData=[e];else{var a=this.displayData.findIndex(function(e){return e.category_id===t});this.displayData.splice(a,1)}},output:function(){"[object Function]"===Object.prototype.toString.call(this.changeEvt)&&this.changeEvt({currentRow:this.currentRow,displayData:this.displayData,key:"ChooseLink"},this.updateConfig.bindKey),console.log(this.displayData)}}},c=(a("U/Wc"),a("KHd+")),u=Object(c.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"choose-userlist"},["normal"!==t.config.model?a("section"):t._e(),t._v(" "),a("el-dialog",{attrs:{"custom-class":"wlm-form-dialog dialog-table",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e},close:t.clearData,open:t.dialogGetData}},[a("div",{staticClass:"wlm-dialog-fixheader"},[a("span",{staticClass:"wlm-dialog-inlenr"},[t._v("链接选择器")])]),t._v(" "),a("el-scrollbar",[a("div",{staticClass:"wlm-table-content"},[a("div",{staticClass:"wlm-dialog-main"},[a("div",{staticClass:"flex-row"},[a("el-scrollbar",[a("div",{staticClass:"link-menu"},[a("el-menu",{staticClass:"el-menu-vertical-demo",on:{select:t.handleSelect}},t._l(t.menuData,function(e,i){return a("el-submenu",{key:i,attrs:{index:""+e.id}},[a("template",{slot:"title"},[a("span",[t._v(t._s(e.title))])]),t._v(" "),a("el-menu-item-group",t._l(e.list,function(e,i){return a("el-menu-item",{key:i,attrs:{index:""+e.type}},[t._v(t._s(e.title))])}))],2)}))],1)]),t._v(" "),a("el-scrollbar",{staticStyle:{width:"100%"}},[a("div",{staticClass:"goods-list-box"},[a("div",{staticClass:"goods-serch"},[a("el-input",{attrs:{placeholder:"搜索名称"},model:{value:t.tableFormatData.userTable.files.name,callback:function(e){t.$set(t.tableFormatData.userTable.files,"name",e)},expression:"tableFormatData.userTable.files.name"}}),a("i",{staticClass:"el-icon-search pos-col-center",on:{click:t.filesSerch}})],1),t._v(" "),a("el-table",{attrs:{data:t.tableFormatData.userTable.tableData}},[a("el-table-column",{attrs:{label:"",width:"55"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.path||e.row.id?a("span",{staticClass:"el-radio__input",class:{"is-checked":t.currentRow.includes(e.row.path||e.row.id)},on:{click:function(a){t.chooseGoods(e.row.path||e.row.id,e.row)}}},[a("span",{staticClass:"el-radio__inner"})]):t._e()]}}])}),t._v(" "),"spike"!==t.$type?a("el-table-column",{attrs:{label:"名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{class:{"is-checked":t.currentRow.includes(e.row.path)}},[t._v(t._s(e.row.title))])]}}])}):t._e(),t._v(" "),"spike"!==t.$type?a("el-table-column",{attrs:{label:"路径"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v("路径: "+t._s(e.row.path))]),t._v(" "),a("div",{staticClass:"wlm-table-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("p",{class:{"is-checked":t.currentRow.includes(e.row.path)}},[t._v(t._s(e.row.path))])])])]}}])}):t._e(),t._v(" "),"spike"===t.$type?a("el-table-column",{attrs:{label:"活动名称",width:"100","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{class:{"is-checked":t.currentRow.includes(e.row.id)}},[t._v(t._s(e.row.title))])]}}])}):t._e(),t._v(" "),"spike"===t.$type?a("el-table-column",{attrs:{label:"活动时间","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v(" "+t._s(t._f("parseTime")(e.row.start_time,"{y}-{m}-{d} {h}:{i}"))+" - "+t._s(t._f("parseTime")(e.row.end_time,"{y}-{m}-{d} {h}:{i}")))]),t._v(" "),a("div",{staticClass:"wlm-table-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("p",{class:{"is-checked":t.currentRow.includes(e.row.id)}},[t._v(t._s(t._f("parseTime")(e.row.start_time,"{y}-{m}-{d} {h}:{i}"))+" - "+t._s(t._f("parseTime")(e.row.end_time,"{y}-{m}-{d} {h}:{i}")))])])])]}}])}):t._e(),t._v(" "),"spike"===t.$type?a("el-table-column",{attrs:{label:"添加时间","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v(t._s(e.row.create_time))]),t._v(" "),a("div",{staticClass:"wlm-table-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("p",{class:{"is-checked":t.currentRow.includes(e.row.id)}},[t._v(t._s(e.row.create_time))])])])]}}])}):t._e()],1)],1)])],1)])])]),t._v(" "),a("div",{staticClass:"pagination-content flex-row flex-justify-b flex-align-c"},[a("el-row",{staticClass:"pagination-btns"}),t._v(" "),a("el-pagination",{staticStyle:{"margin-top":"20px","margin-bottom":"20px","margin-right":"25px"},attrs:{disabled:!t.hasTableData,"current-page":t.tableFormatData.userTable.pagination.page,"page-sizes":t.tableFormatData.userTable.pagination.pagesizes,"page-size":t.tableFormatData.userTable.pagination.list_rows,layout:"total, sizes, prev, pager, next, jumper",total:t.hasTableData?t.tableFormatData.userTable.pagination.total:0},on:{"size-change":t.listPageChange,"current-change":t.listPageChange,"update:currentPage":function(e){t.$set(t.tableFormatData.userTable.pagination,"page",e)},"update:pageSize":function(e){t.$set(t.tableFormatData.userTable.pagination,"list_rows",e)}}})],1),t._v(" "),a("div",{staticClass:"wlm-dialog-fixfooter"},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:t.toggle}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveChoose}},[t._v("确 定")])],1)])],1)],1)},[],!1,null,"0e1a3e1a",null);u.options.__file="index.vue";e.a=u.exports},"U/Wc":function(t,e,a){"use strict";var i=a("YlX3");a.n(i).a},YlX3:function(t,e,a){},bG4Z:function(t,e,a){"use strict";a.d(e,"f",function(){return l}),a.d(e,"e",function(){return o}),a.d(e,"b",function(){return r}),a.d(e,"d",function(){return c}),a.d(e,"c",function(){return u}),a.d(e,"a",function(){return d}),a.d(e,"g",function(){return p}),a.d(e,"h",function(){return f});var i=a("t3Un"),s=a("Qyje"),n=a.n(s);function l(t){return Object(i.a)({url:"/getFileSelectorList",method:"post",data:n.a.stringify(t)})}function o(t){return Object(i.a)({url:"/getFileGroupList",method:"post",data:n.a.stringify(t)})}function r(t){return Object(i.a)({url:"/batchMoveFile",method:"post",data:n.a.stringify(t)})}function c(t){return Object(i.a)({url:"/delUploadFileInfo",method:"post",data:n.a.stringify(t)})}function u(t){return Object(i.a)({url:"/delFileGroup",method:"post",data:n.a.stringify(t)})}function d(t){return Object(i.a)({url:"/addFileGroup",method:"post",data:n.a.stringify(t)})}function p(t){return Object(i.a)({url:"/getWeChatPathCatalog",method:"post",data:n.a.stringify(t)})}function f(t){return Object(i.a)({url:"/getWeChatUrlPath",method:"post",data:n.a.stringify(t)})}},kbZS:function(t,e,a){"use strict";a.d(e,"a",function(){return l}),a.d(e,"d",function(){return o}),a.d(e,"c",function(){return r}),a.d(e,"b",function(){return c});var i=a("t3Un"),s=a("Qyje"),n=a.n(s);function l(t){var e=t.getwebPath;return Object(i.a)({url:"/m=utility&do=grab_image&token=2302018081011184865072836&url="+e,method:"get",params:{}})}function o(t){return Object(i.a)({url:"/uploadListImg",method:"post",data:n.a.stringify(t)})}function r(t){return Object(i.a)({url:"/outUpload",method:"post",data:n.a.stringify(t)})}function c(t){return Object(i.a)({url:"/orderInput",method:"post",data:t})}},mG2D:function(t,e,a){"use strict";var i=a("2XpJ");a.n(i).a}}]);