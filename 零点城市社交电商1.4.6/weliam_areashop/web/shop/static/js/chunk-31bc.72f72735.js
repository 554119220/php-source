(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-31bc"],{"/DaW":function(t,a,r){"use strict";r.r(a);var o=r("slWK"),e=r("vooH"),n=function(t,a,r){var o=t.message;if(!Array.isArray(a)||Array.isArray(a)&&0===a.length)return r(new Error(o+"！~"));r()},i={mixins:[r("UC6z").a.getters("Form")],name:"ManagementUserAdd",components:{ChooseGoods:e.a},directives:{},data:function(){return{defaultMsg:"",pickerOptions:{disabledDate:function(t){var a=new Date,r=a.getFullYear(),o=a.getMonth()+1,e=a.getDate();return t.getTime()<new Date(r+"/"+o+"/"+e)}},chooseGoodsConfig:{type:["chooseGoods"],initList:[],model:"display",bindKey:{key:"suit_goods",model:"choose"}},formFormatData:{key:["base","use"],api:{editForm:{api:o.i,params:{id:""},redirect:"couponId",filters:{choose:{bindInit:["chooseGoodsConfig"]}}},submitForm:o.j},formData:{couponId:"",couponData:{coupon_type:10,name:"",total_num:"",reduce_price:"",expire_type:10,limit_time:[],expire_day:"",rule:1,rule_min_money:"",suit_goods_type:0,get_limit_type:0,limit_num:"",use_desc:"",get_limit_num_type:0},suit_goods:[]},rules:{suit_goods:[{message:"请选择适用商品",required:!1,validator:n,trigger:"blur"}]}}}},methods:{saveForm:function(){""!==this.couponId&&0!==this.formFormatData.formData.couponData.suit_goods_type?this.$refs.chooseGoods.output():this.formFormatData.formData.suit_goods=[],this.formFormatSubmit({router:{type:"replace",path:"/application/couponMarketing",code:1}})},chooseGoodsChange:function(t){this.formFormatData.formData.suit_goods=[],this.formFormatData.rules.suit_goods=0===t?[{message:"请选择适用商品",required:!1,trigger:"change"}]:[{message:"请选择适用商品",required:!0,validator:n,trigger:"change"}]},infoChange:function(t){this.formFormatData.formData.couponData.use_desc=t},formFormatCallBack:function(t,a,r){if("editForm"===a){var o=r.data.data.couponData.use_desc,e=void 0===o?"":o;this.defaultMsg=e}}}},u=(r("lq4Y"),r("KHd+")),s=Object(u.a)(i,function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("div",{staticClass:"serving-merchandise-add views-container"},[r("div",{staticClass:"wlm-form"},[r("div",{staticClass:"wlm-form-header"},[t._v("基本信息")]),t._v(" "),r("div",{staticClass:"wlm-form-content"},[r("el-form",{ref:"base",staticClass:"retail-form",attrs:{model:t.formFormatData.formData,rules:t.formFormatData.rules,size:"small","label-width":"120px","label-position":"right"}},[r("el-form-item",{attrs:{label:"优惠券名称",prop:"couponData.name",rules:[{required:!0,message:"请输入优惠券名称",trigger:"blur"}]}},[r("el-input",{model:{value:t.formFormatData.formData.couponData.name,callback:function(a){t.$set(t.formFormatData.formData.couponData,"name","string"==typeof a?a.trim():a)},expression:"formFormatData.formData.couponData.name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"发放总数",prop:"couponData.total_num",rules:[{required:!0,message:"请输入发放总数",trigger:"blur"}]}},[r("el-input",{model:{value:t.formFormatData.formData.couponData.total_num,callback:function(a){t.$set(t.formFormatData.formData.couponData,"total_num","string"==typeof a?a.trim():a)},expression:"formFormatData.formData.couponData.total_num"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"使用时间"}},[r("el-radio-group",{staticClass:"wlm-form-group flex-col no-top",attrs:{disabled:t.isFormEdit},on:{change:function(a){t.$refs.base.validateField("couponData.limit_time")}},model:{value:t.formFormatData.formData.couponData.expire_type,callback:function(a){t.$set(t.formFormatData.formData.couponData,"expire_type",a)},expression:"formFormatData.formData.couponData.expire_type"}},[r("el-radio",{attrs:{label:10}},[r("el-form-item",{staticClass:"inline",attrs:{label:"","label-width":"0",prop:"couponData.limit_time",rules:[{required:10===t.formFormatData.formData.couponData.expire_type,message:"请选择使用时间",trigger:"change"}]}},[r("el-date-picker",{attrs:{disabled:t.isFormEdit,"picker-options":t.pickerOptions,"value-format":"timestamp",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.formFormatData.formData.couponData.limit_time,callback:function(a){t.$set(t.formFormatData.formData.couponData,"limit_time",a)},expression:"formFormatData.formData.couponData.limit_time"}})],1)],1),t._v(" "),r("el-radio",{attrs:{label:20}},[t._v("领券后当日可用")]),t._v(" "),r("el-radio",{attrs:{label:30}},[t._v("\r\n                            领券后次日起\r\n                            "),r("el-form-item",{staticClass:"inline",attrs:{label:"","label-width":"0",prop:"couponData.expire_day",rules:[{required:30===t.formFormatData.formData.couponData.expire_type,message:"请选择使用时间",trigger:"blur"}]}},[r("el-input",{staticStyle:{width:"80px"},attrs:{disabled:t.isFormEdit},model:{value:t.formFormatData.formData.couponData.expire_day,callback:function(a){t.$set(t.formFormatData.formData.couponData,"expire_day","string"==typeof a?a.trim():a)},expression:"formFormatData.formData.couponData.expire_day"}})],1),t._v("\r\n                            天内可用\r\n                        ")],1)],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"使用门槛"}},[r("el-radio-group",{staticClass:"wlm-form-group",attrs:{disabled:t.isFormEdit},model:{value:t.formFormatData.formData.couponData.rule,callback:function(a){t.$set(t.formFormatData.formData.couponData,"rule",a)},expression:"formFormatData.formData.couponData.rule"}},[r("el-radio",{attrs:{label:1}},[t._v("无门槛")]),t._v(" "),r("el-radio",{attrs:{label:0}},[t._v("有门槛")])],1)],1),t._v(" "),0===t.formFormatData.formData.couponData.rule?r("el-form-item",{attrs:{label:"",prop:"couponData.rule_min_money",rules:[{required:!0,message:"请输入消费门槛",trigger:"blur"}]}},[r("el-input",{attrs:{width:"50",disabled:t.isFormEdit},model:{value:t.formFormatData.formData.couponData.rule_min_money,callback:function(a){t.$set(t.formFormatData.formData.couponData,"rule_min_money",a)},expression:"formFormatData.formData.couponData.rule_min_money"}},[r("template",{slot:"prepend"},[t._v("消费满")]),t._v(" "),r("template",{slot:"append"},[t._v("元")])],2)],1):t._e(),t._v(" "),r("el-form-item",{attrs:{label:"优惠内容",prop:"couponData.reduce_price",rules:[{required:!0,message:"请输入优惠内容",trigger:"blur"}]}},[r("el-input",{attrs:{width:"50",disabled:t.isFormEdit},model:{value:t.formFormatData.formData.couponData.reduce_price,callback:function(a){t.$set(t.formFormatData.formData.couponData,"reduce_price",a)},expression:"formFormatData.formData.couponData.reduce_price"}},[r("template",{slot:"prepend"},[t._v("减免")]),t._v(" "),r("template",{slot:"append"},[t._v("元")])],2)],1)],1)],1)]),t._v(" "),r("div",{staticClass:"wlm-form"},[r("div",{staticClass:"wlm-form-header"},[t._v("领取使用")]),t._v(" "),r("div",{staticClass:"wlm-form-content"},[r("el-form",{ref:"use",staticClass:"retail-form",attrs:{model:t.formFormatData.formData,rules:t.formFormatData.rules,size:"small","label-width":"120px","label-position":"right"}},[r("el-form-item",{attrs:{label:"适用商品"}},[r("el-radio-group",{staticClass:"wlm-form-group flex-col",on:{change:t.chooseGoodsChange},model:{value:t.formFormatData.formData.couponData.suit_goods_type,callback:function(a){t.$set(t.formFormatData.formData.couponData,"suit_goods_type",a)},expression:"formFormatData.formData.couponData.suit_goods_type"}},[r("el-radio",{attrs:{label:0}},[t._v("\r\n                            全部商品可用\r\n                        ")]),t._v(" "),r("el-radio",{attrs:{label:1}},[t._v("\r\n                            部分商品可用\r\n                        ")]),t._v(" "),r("el-radio",{attrs:{label:2}},[t._v("\r\n                            部分商品不可用\r\n                        ")])],1)],1),t._v(" "),0!==t.formFormatData.formData.couponData.suit_goods_type?r("el-form-item",{attrs:{label:"",prop:"suit_goods"}},[r("choose-goods",{ref:"chooseGoods",attrs:{config:t.chooseGoodsConfig,changeEvt:t.formFormatFiltersChange}})],1):t._e(),t._v(" "),r("el-form-item",{attrs:{label:"领取人限制"}},[r("el-radio-group",{staticClass:"wlm-form-group flex-col",model:{value:t.formFormatData.formData.couponData.get_limit_type,callback:function(a){t.$set(t.formFormatData.formData.couponData,"get_limit_type",a)},expression:"formFormatData.formData.couponData.get_limit_type"}},[r("el-radio",{attrs:{label:0}},[t._v("所有人均可领取")]),t._v(" "),r("el-radio",{attrs:{label:1}},[t._v("会员可领取")])],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"领取次数",prop:"couponData.limit_num",rules:[{required:1===t.formFormatData.formData.couponData.get_limit_num_type,message:"请输入领取次数",trigger:"blur"}]}},[r("el-radio-group",{staticClass:"wlm-form-group flex-col",model:{value:t.formFormatData.formData.couponData.get_limit_num_type,callback:function(a){t.$set(t.formFormatData.formData.couponData,"get_limit_num_type",a)},expression:"formFormatData.formData.couponData.get_limit_num_type"}},[r("el-radio",{attrs:{label:0}},[t._v("不限次数")]),t._v(" "),r("el-radio",{attrs:{label:1}},[t._v("\r\n                          最多领取\r\n                          "),r("el-input",{staticStyle:{width:"50px"},model:{value:t.formFormatData.formData.couponData.limit_num,callback:function(a){t.$set(t.formFormatData.formData.couponData,"limit_num","string"==typeof a?a.trim():a)},expression:"formFormatData.formData.couponData.limit_num"}}),t._v("\r\n                          次\r\n                        ")],1)],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"使用说明"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:4}}})],1)],1)],1)]),t._v(" "),r("div",{staticClass:"wlm-fixed-btn flex-row flex-align-c flex-justify-c"},[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveForm}},[t._v("保存")]),t._v(" "),r("router-link",{attrs:{tag:"span",to:"/application/couponMarketing"}},[r("el-button",{attrs:{size:"small"}},[t._v("返回")])],1)],1)])},[],!1,null,"15dc294a",null);s.options.__file="couponMarketingFullAdd.vue";a.default=s.exports},dO4O:function(t,a,r){},hoR8:function(t,a,r){"use strict";r.d(a,"v",function(){return i}),r.d(a,"x",function(){return u}),r.d(a,"H",function(){return s}),r.d(a,"z",function(){return m}),r.d(a,"y",function(){return c}),r.d(a,"A",function(){return d}),r.d(a,"F",function(){return l}),r.d(a,"G",function(){return f}),r.d(a,"u",function(){return p}),r.d(a,"w",function(){return g}),r.d(a,"E",function(){return D}),r.d(a,"B",function(){return b}),r.d(a,"n",function(){return _}),r.d(a,"a",function(){return y}),r.d(a,"h",function(){return h}),r.d(a,"s",function(){return v}),r.d(a,"o",function(){return O}),r.d(a,"l",function(){return F}),r.d(a,"m",function(){return j}),r.d(a,"j",function(){return x}),r.d(a,"i",function(){return C}),r.d(a,"r",function(){return w}),r.d(a,"q",function(){return k}),r.d(a,"p",function(){return G}),r.d(a,"D",function(){return E}),r.d(a,"c",function(){return S}),r.d(a,"d",function(){return $}),r.d(a,"e",function(){return q}),r.d(a,"k",function(){return A}),r.d(a,"g",function(){return I}),r.d(a,"b",function(){return M}),r.d(a,"I",function(){return z}),r.d(a,"C",function(){return L}),r.d(a,"f",function(){return R}),r.d(a,"t",function(){return U});var o=r("t3Un"),e=r("Qyje"),n=r.n(e);function i(t){return Object(o.a)({url:"/goodsclassEdit",method:"post",data:n.a.stringify(t)})}function u(t){return Object(o.a)({url:"/goodsclassIndex",method:"post",data:n.a.stringify(t)})}function s(t){return Object(o.a)({url:"/serviceIndex",method:"post",data:n.a.stringify(t)})}function m(t){return Object(o.a)({url:"/parameterEdit",method:"post",data:n.a.stringify(t)})}function c(t){return Object(o.a)({url:"/parameteGet",method:"post",data:n.a.stringify(t)})}function d(t){return Object(o.a)({url:"/parameterIndex",method:"post",data:n.a.stringify(t)})}function l(t){return Object(o.a)({url:"/serviceEdit",method:"post",data:n.a.stringify(t)})}function f(t){return Object(o.a)({url:"/serviceGet",method:"post",data:n.a.stringify(t)})}function p(t){return Object(o.a)({url:"/goodsclassDelete",method:"post",data:n.a.stringify(t)})}function g(t){return Object(o.a)({url:"/goodsclassGet",method:"post",data:n.a.stringify(t)})}function D(t){return Object(o.a)({url:"/serlistDelete",method:"post",data:n.a.stringify(t)})}function b(t){return Object(o.a)({url:"/parlistDelete",method:"post",data:n.a.stringify(t)})}function _(t){return Object(o.a)({url:"/goodsIndex",method:"post",data:n.a.stringify(t)})}function y(t){return Object(o.a)({url:"/categoryIndex",method:"post",data:n.a.stringify(t)})}function h(t){return Object(o.a)({url:"/goodsAdd",method:"post",data:n.a.stringify(t)})}function v(t){return Object(o.a)({url:"/goodsServeListAll",method:"post",data:n.a.stringify(t)})}function O(t){return Object(o.a)({url:"/goodsParamListAll",method:"post",data:n.a.stringify(t)})}function F(t){return Object(o.a)({url:"/goodsEdit",method:"post",data:n.a.stringify(t)})}function j(t){return Object(o.a)({url:"/goodsGet",method:"post",data:n.a.stringify(t)})}function x(t){return Object(o.a)({url:"/goodsDelivery",method:"post",data:n.a.stringify(t)})}function C(t){return Object(o.a)({url:"/goodsDelete",method:"post",data:n.a.stringify(t)})}function w(t){return Object(o.a)({url:"/goodsRegainDel",method:"post",data:n.a.stringify(t)})}function k(t){return Object(o.a)({url:"/goodsRegain",method:"post",data:n.a.stringify(t)})}function G(t){return Object(o.a)({url:"/goodsRecovery",method:"post",data:n.a.stringify(t)})}function E(t){return Object(o.a)({url:"/reviseStatus",method:"post",data:n.a.stringify(t)})}function S(t){return Object(o.a)({url:"/editGoodsName",method:"post",data:n.a.stringify(t)})}function $(t){return Object(o.a)({url:"/editGoodsPrice",method:"post",data:n.a.stringify(t)})}function q(t){return Object(o.a)({url:"/editStockNum",method:"post",data:n.a.stringify(t)})}function A(t){return Object(o.a)({url:"/goodsDown",method:"post",data:n.a.stringify(t)})}function I(t){return Object(o.a)({url:"/getCommentList",method:"post",data:n.a.stringify(t)})}function M(t){return Object(o.a)({url:"/delComment",method:"post",data:n.a.stringify(t)})}function z(t){return Object(o.a)({url:"/setCommentShow",method:"post",data:n.a.stringify(t)})}function L(t){return Object(o.a)({url:"/replyComment",method:"post",data:n.a.stringify(t)})}function R(t){return Object(o.a)({url:"/getCommentDetail",method:"post",data:n.a.stringify(t)})}function U(t){return Object(o.a)({url:"/goodsUpper",method:"post",data:n.a.stringify(t)})}},lq4Y:function(t,a,r){"use strict";var o=r("dO4O");r.n(o).a},slWK:function(t,a,r){"use strict";r.d(a,"j",function(){return i}),r.d(a,"l",function(){return u}),r.d(a,"h",function(){return s}),r.d(a,"i",function(){return m}),r.d(a,"m",function(){return c}),r.d(a,"A",function(){return d}),r.d(a,"z",function(){return l}),r.d(a,"B",function(){return f}),r.d(a,"C",function(){return p}),r.d(a,"k",function(){return g}),r.d(a,"b",function(){return D}),r.d(a,"c",function(){return b}),r.d(a,"u",function(){return _}),r.d(a,"o",function(){return y}),r.d(a,"q",function(){return h}),r.d(a,"s",function(){return v}),r.d(a,"v",function(){return O}),r.d(a,"n",function(){return F}),r.d(a,"p",function(){return j}),r.d(a,"e",function(){return x}),r.d(a,"d",function(){return C}),r.d(a,"g",function(){return w}),r.d(a,"x",function(){return k}),r.d(a,"r",function(){return G}),r.d(a,"w",function(){return E}),r.d(a,"f",function(){return S}),r.d(a,"t",function(){return $}),r.d(a,"a",function(){return q}),r.d(a,"y",function(){return A});var o=r("t3Un"),e=r("Qyje"),n=r.n(e);function i(t){return Object(o.a)({url:"/couponEditOrAdd",method:"post",data:n.a.stringify(t)})}function u(t){return Object(o.a)({url:"/couponList",method:"post",data:n.a.stringify(t)})}function s(t){return Object(o.a)({url:"/couponDelete",method:"post",data:n.a.stringify(t)})}function m(t){return Object(o.a)({url:"/couponDetail",method:"post",data:n.a.stringify(t)})}function c(t){return Object(o.a)({url:"/couponOp",method:"post",data:n.a.stringify(t)})}function d(t){return Object(o.a)({url:"/smsSave",method:"post",data:n.a.stringify(t)})}function l(t){return Object(o.a)({url:"/smsGet",method:"post",data:n.a.stringify(t)})}function f(t){return Object(o.a)({url:"/smsTplGet",method:"post",data:n.a.stringify(t)})}function p(t){return Object(o.a)({url:"/smsTplSave",method:"post",data:n.a.stringify(t)})}function g(t){return Object(o.a)({url:"/couponInfo",method:"post",data:n.a.stringify(t)})}function D(t){return Object(o.a)({url:"/ReceiveInfoList",method:"post",data:n.a.stringify(t)})}function b(t){return Object(o.a)({url:"/addSpike",method:"post",data:n.a.stringify(t)})}function _(t){return Object(o.a)({url:"/getSpikeList",method:"post",data:n.a.stringify(t)})}function y(t){return Object(o.a)({url:"/delSpikeList",method:"post",data:n.a.stringify(t)})}function h(t){return Object(o.a)({url:"/getEditData",method:"post",data:n.a.stringify(t)})}function v(t){return Object(o.a)({url:"/getMemberCard",method:"post",data:n.a.stringify(t)})}function O(t){return Object(o.a)({url:"/memberAddEdit",method:"post",data:n.a.stringify(t)})}function F(t){return Object(o.a)({url:"/delDataCard",method:"post",data:n.a.stringify(t)})}function j(t){return Object(o.a)({url:"/getCardData",method:"post",data:n.a.stringify(t)})}function x(t){return Object(o.a)({url:"/cardSave",method:"post",data:n.a.stringify(t)})}function C(t){return Object(o.a)({url:"/cardGet",method:"post",data:n.a.stringify(t)})}function w(t){return Object(o.a)({url:"/changeCardSell",method:"post",data:n.a.stringify(t)})}function k(t){return Object(o.a)({url:"/selectedCard",method:"post",data:n.a.stringify(t)})}function G(t){return Object(o.a)({url:"/getMember",method:"post",data:n.a.stringify(t)})}function E(t){return Object(o.a)({url:"/memberUserAddEdit",method:"post",data:n.a.stringify(t)})}function S(t){return Object(o.a)({url:"/changeCancel",method:"post",data:n.a.stringify(t)})}function $(t){return Object(o.a)({url:"/getMemberFindData",method:"post",data:n.a.stringify(t)})}function q(t){return Object(o.a)({url:"/MemberGoodsStatus",method:"post",data:n.a.stringify(t)})}function A(t){return Object(o.a)({url:"/setMemberGoodsPrice",method:"post",data:n.a.stringify(t)})}}}]);