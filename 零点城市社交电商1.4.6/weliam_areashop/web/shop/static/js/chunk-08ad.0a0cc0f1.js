(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-08ad"],{"1o9f":function(t,a,e){"use strict";var r=e("jxEf");e.n(r).a},"Ot+v":function(t,a,e){"use strict";e.r(a);var r=e("m1cH"),o=e.n(r),s=e("GQeE"),l=e.n(s),i=e("hJLm"),n=e("ZySA"),c=e("hxQk"),u=e("UC6z"),m={mixins:[u.a.getters("Table"),u.a.getters("Form")],name:"UserPlatform",components:{ChooseUser:c.a},directives:{waves:n.a},created:function(){var t=this;Object(i.n)({bus_id:this.$route.query.bus_id}).then(function(a){var e=a.data.data,r=void 0===e?{}:e;t.selecStoreData=r})},data:function(){return{passwordType:"password",initChooseUser:{closable:!0,saveList:[]},dialogTableVisible:!1,selecUseData:[],selecStoreData:[],formFormatData:{key:"user",model:{noCreateEdit:!1,hasMessage:!1,closeDialog:!1,bindDialog:"dialogTableVisible"},api:{editForm:{api:i.h,params:{bus_id:this.$route.query.bus_id}},submitForm:i.g,change:{status:{key:"status",api:i.j}}},formData:{bus_id:this.$route.query.bus_id,store_id:"",mid:"",nickName:"",name:"",mobile:"",type:0,power:[],password:"",status:1},rules:{password:[{required:!0,message:"请输入核销密码",trigger:"blur"}]}},tableFormatData:{current:"userTable",userTable:{key:"userTable",api:{getList:i.i,delList:i.f},tableData:[],files:{name:"",ids:[],checkall:"0",Recycle:"1"},pagination:{page:1,list_rows:10,pagesizes:[10,20,50],total:0}}}}},methods:{changeCodeF:function(){var t=this;this.$nextTick(function(){null!==t.formFormatData.formData.password&&(t.formFormatData.formData.password=t.formFormatData.formData.password.replace(/[^\d]/g,""))})},showPwd:function(){"password"===this.passwordType?this.passwordType="":this.passwordType="password"},saveDialogForm:function(){this.initChooseUser.saveList=[],this.resetDialogFormData({store_id:"",mid:"",nickName:"",name:"",mobile:"",type:0,power:[],status:1,bus_id:this.$route.query.bus_id,password:""})},formFormatCallBack:function(t,a,e){var r=this;if("editForm"===a){var o=t.mid,s=t.name,i=t.nickName;this.initChooseUser.saveList=[{user_id:o,nickName:i||s}]}else if("submitForm"===a){var n=e.data,c=n.data,u=c.code,m=c.id,f=n.msg,d=l()(this.$route.query).includes(this.formFormatData.api.editForm.redirect||"id"),p=this.formFormatData.api.editForm&&this.formFormatData.api.editForm.api&&(this.$route.query&&d||this.formFormatData.api.editForm.params&&this.formFormatData.api.editForm.params.always);(u||0===u)&&(1===u?(this.$message.success(p&&d?"编辑成功":"保存成功"),this.dialogTableVisible=!1,this.getTableList()):0===u&&m?this.formFormatData.api.editForm.params.id?(this.formFormatData.formData.force=1,this.formFormatSubmit()):this.$alert("该店员已存在于其他商家","注意",{confirmButtonText:"继续添加",cancelButtonText:"取消",callback:function(t){"confirm"===t&&(r.formFormatData.formData.force=1,r.formFormatSubmit())}}):this.$message.error(""+f))}},userChange:function(t){var a=[].concat(o()(t))[0].user_id;this.formFormatData.formData.mid=a}}},f=(e("1o9f"),e("KHd+")),d=Object(f.a)(m,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"management-merchant views-container"},[e("el-dialog",{attrs:{visible:t.dialogTableVisible,"custom-class":"reset-pwd wlm-form-dialog dialog-table"},on:{close:t.saveDialogForm,"update:visible":function(a){t.dialogTableVisible=a}}},[t.dialogTableVisible?e("div",{staticClass:"wlm-form"},[e("div",{staticClass:"wlm-form-header wlm-dialog-fixheader"},[e("span",{staticClass:"wlm-dialog-inlenr"},[t._v(t._s((t.formFormatData.api.editForm.params.id?"编辑":"添加")+"店员"))])]),t._v(" "),e("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper"}},[e("div",{staticClass:"wlm-form-content"},[e("div",{staticClass:"wlm-dialog-main"},[e("div",{staticClass:"wlm-dialog-content"},[e("el-form",{ref:"user",staticClass:"retail-form",attrs:{model:t.formFormatData.formData,rules:t.formFormatData.rules,size:"small","label-width":"120px","label-position":"right"}},[e("el-form-item",{attrs:{label:"用户"}},[e("chooseUser",{ref:"chooseUser",attrs:{config:t.initChooseUser,changeEvt:t.userChange}})],1),t._v(" "),e("el-form-item",{attrs:{label:"姓名"}},[e("el-input",{model:{value:t.formFormatData.formData.name,callback:function(a){t.$set(t.formFormatData.formData,"name","string"==typeof a?a.trim():a)},expression:"formFormatData.formData.name"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"联系方式"}},[e("el-input",{model:{value:t.formFormatData.formData.mobile,callback:function(a){t.$set(t.formFormatData.formData,"mobile","string"==typeof a?a.trim():a)},expression:"formFormatData.formData.mobile"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"店员身份"}},[e("el-radio-group",{on:{change:function(a){t.formFormatData.formData.power=[]}},model:{value:t.formFormatData.formData.type,callback:function(a){t.$set(t.formFormatData.formData,"type",a)},expression:"formFormatData.formData.type"}},[e("el-radio",{attrs:{label:0}},[t._v("店员")]),t._v(" "),e("el-radio",{attrs:{label:1}},[t._v("管理员")])],1)],1),t._v(" "),0==t.formFormatData.formData.type?e("el-form-item",{attrs:{label:"所属门店",prop:"nickname"}},[e("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.formFormatData.formData.store_id,callback:function(a){t.$set(t.formFormatData.formData,"store_id",a)},expression:"formFormatData.formData.store_id"}},t._l(t.selecStoreData,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),e("p",{staticClass:"form-help"},[t._v("管理员不隶属于某个门店")])],1):t._e(),t._v(" "),e("el-form-item",{attrs:{label:"权限"}},[e("el-checkbox-group",{model:{value:t.formFormatData.formData.power,callback:function(a){t.$set(t.formFormatData.formData,"power",a)},expression:"formFormatData.formData.power"}},[t._l([{label:"订单核销",value:"hxorder"},{label:"查看交易数据",value:"seedata"}],function(a){return 0==t.formFormatData.formData.type?e("el-checkbox",{key:a.value,attrs:{label:a.value}},[t._v(t._s(a.label))]):t._e()}),t._v(" "),t._l([{label:"查看交易数据",value:"seedata"}],function(a){return 1==t.formFormatData.formData.type?e("el-checkbox",{key:a.value,attrs:{label:a.value}},[t._v(t._s(a.label))]):t._e()})],2)],1),t._v(" "),e("el-form-item",{attrs:{label:"状态"}},[e("el-radio-group",{model:{value:t.formFormatData.formData.status,callback:function(a){t.$set(t.formFormatData.formData,"status",a)},expression:"formFormatData.formData.status"}},[e("el-radio",{attrs:{label:1}},[t._v("开启")]),t._v(" "),e("el-radio",{attrs:{label:0}},[t._v("关闭")])],1)],1),t._v(" "),0==t.formFormatData.formData.type?e("el-form-item",{attrs:{label:"店员核销密码"}},[e("el-input",{attrs:{type:t.passwordType,maxlength:4,name:"password"},nativeOn:{input:function(a){return t.changeCodeF(a)}},model:{value:t.formFormatData.formData.password,callback:function(a){t.$set(t.formFormatData.formData,"password",a)},expression:"formFormatData.formData.password"}},[e("template",{slot:"append"},[e("span",{staticClass:"show-pwd",staticStyle:{cursor:"pointer"},on:{click:t.showPwd}},[e("svg-icon",{attrs:{"icon-class":"password"===t.passwordType?"eye":"showpassword"}})],1)])],2),t._v(" "),e("p",{staticClass:"form-help"},[t._v("用于用户自助核销，密码为4位")])],1):t._e()],1)],1)])])])],1):t._e(),t._v(" "),e("footer",{staticClass:"flex-row flex-align-c flex-justify-c wlm-dialog-fixfooter"},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.formFormatSubmit}},[t._v("保存")])],1)]),t._v(" "),e("div",{staticClass:"wlm-table"},[e("div",{staticClass:"wlm-table-hearder-btn"},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){t.dialogTableVisible=!0,t.initChooseUser.closable=!0}}},[t._v("添加店员")])],1),t._v(" "),e("div",{staticClass:"wlm-table-header"},[e("el-form",{staticClass:"retail-form",attrs:{model:t.tableFormatData.userTable.files,size:"small","label-width":"80px","label-position":"right"}},[e("el-form-item",{staticClass:"search",attrs:{label:"店员姓名："}},[e("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"请输入店员姓名"},model:{value:t.tableFormatData.userTable.files.name,callback:function(a){t.$set(t.tableFormatData.userTable.files,"name",a)},expression:"tableFormatData.userTable.files.name"}})],1),t._v(" "),e("el-form-item",{staticClass:"filter-btns",attrs:{label:""}},[e("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:t.filesSerch}},[t._v("筛选")]),t._v(" "),e("el-button",{attrs:{type:"text"},on:{click:t.filesEmpty}},[t._v("清空筛选条件")])],1)],1)],1),t._v(" "),e("div",{staticClass:"wlm-table-content"},[e("el-table",{ref:t.tableFormatData.userTable.key,staticStyle:{width:"100%"},attrs:{data:t.tableFormatData.userTable.tableData},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),e("el-table-column",{attrs:{prop:"date",label:"用户",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return a.row.users?[e("img",{staticClass:"logo",attrs:{src:a.row.users.avatarUrl}}),t._v(" "),e("span",[t._v(" "+t._s(a.row.users.nickName))])]:void 0}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"date",label:"姓名",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("router-link",{attrs:{tag:"span",to:{path:"/user/managementUserEdit",query:{user_id:a.row.users.user_id}}}},[e("span",{staticClass:"pointer"},[t._v(t._s(a.row.name))])])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"name",label:"联系方式",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.mobile))])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"name",label:"所属门店",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return["0"==a.row.type?e("span",[t._v(t._s(a.row.store?a.row.store.name:""))]):t._e(),t._v(" "),"1"==a.row.type?e("span",[t._v("-")]):t._e()]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"name",label:"权限",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._l(a.row.power,function(r,o){return e("span",{key:o},[t._v(t._s("hxorder"===r?"订单核销":"seedata"===r?"查看交易数据":"takenot"===r?"接收下单通知":"-")+" "+t._s(a.row.power.length>=2&&0==o||a.row.power.length-1>o?"-":""))])}),t._v(" "),a.row.power?t._e():e("span",[t._v("-")])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"name",label:"状态","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(e){t.changeTableItem({id:a.row.id,status:a.row.status},t.formFormatData.api.change.status)}},model:{value:a.row.status,callback:function(e){t.$set(a.row,"status",e)},expression:"scope.row.status"}})]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"operation-group"},[e("el-button",{staticClass:"wlm-text",attrs:{type:"text"},on:{click:function(e){t.initChooseUser.closable=!1,t.formFormatDialogEditEvt({id:a.row.id,toggle:"dialogTableVisible"})}}},[t._v("编辑")]),t._v(" "),e("div",{staticClass:"btn-line"}),t._v(" "),e("el-button",{staticClass:"wlm-text",attrs:{type:"text"},on:{click:function(e){t.delTableItem(a.row.id)}}},[t._v("删除")])],1)]}}])})],1),t._v(" "),e("div",{staticClass:"pagination-content flex-row flex-justify-b flex-align-c"},[e("el-row",{staticClass:"pagination-btns"},[e("el-checkbox",{staticClass:"check-all",attrs:{"true-label":"1","false-label":"0"},on:{change:t.toggleSelection},model:{value:t.tableFormatData.userTable.files.checkall,callback:function(a){t.$set(t.tableFormatData.userTable.files,"checkall",a)},expression:"tableFormatData.userTable.files.checkall"}},[t._v("全部")]),t._v(" "),e("el-button",{staticClass:"right-8",attrs:{disabled:t.isGroup,size:"mini"},on:{click:t.delTableList}},[t._v("删除")])],1),t._v(" "),e("el-pagination",{attrs:{disabled:!t.hasTableData,"current-page":t.tableFormatData.userTable.pagination.page,"page-sizes":t.tableFormatData.userTable.pagination.pagesizes,"page-size":t.tableFormatData.userTable.pagination.list_rows,layout:"total, sizes, prev, pager, next, jumper",total:t.hasTableData?t.tableFormatData.userTable.pagination.total:0},on:{"size-change":t.listPageChange,"current-change":t.listPageChange,"update:currentPage":function(a){t.$set(t.tableFormatData.userTable.pagination,"page",a)},"update:pageSize":function(a){t.$set(t.tableFormatData.userTable.pagination,"list_rows",a)}}})],1)],1)])],1)},[],!1,null,"22b0f068",null);d.options.__file="merchantClerkList.vue";a.default=d.exports},ZySA:function(t,a,e){"use strict";var r=e("P2sY"),o=e.n(r),s=(e("jUE0"),{bind:function(t,a){t.addEventListener("click",function(e){var r=o()({},a.value),s=o()({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},r),l=s.ele;if(l){l.style.position="relative",l.style.overflow="hidden";var i=l.getBoundingClientRect(),n=l.querySelector(".waves-ripple");switch(n?n.className="waves-ripple":((n=document.createElement("span")).className="waves-ripple",n.style.height=n.style.width=Math.max(i.width,i.height)+"px",l.appendChild(n)),s.type){case"center":n.style.top=i.height/2-n.offsetHeight/2+"px",n.style.left=i.width/2-n.offsetWidth/2+"px";break;default:n.style.top=(e.pageY-i.top-n.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",n.style.left=(e.pageX-i.left-n.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return n.style.backgroundColor=s.color,n.className="waves-ripple z-active",!1}},!1)}}),l=function(t){t.directive("waves",s)};window.Vue&&(window.waves=s,Vue.use(l)),s.install=l;a.a=s},hJLm:function(t,a,e){"use strict";e.d(a,"b",function(){return l}),e.d(a,"d",function(){return i}),e.d(a,"c",function(){return n}),e.d(a,"a",function(){return c}),e.d(a,"q",function(){return u}),e.d(a,"p",function(){return m}),e.d(a,"s",function(){return f}),e.d(a,"r",function(){return d}),e.d(a,"g",function(){return p}),e.d(a,"h",function(){return b}),e.d(a,"f",function(){return h}),e.d(a,"i",function(){return g}),e.d(a,"n",function(){return v}),e.d(a,"j",function(){return w}),e.d(a,"t",function(){return D}),e.d(a,"k",function(){return _}),e.d(a,"l",function(){return y}),e.d(a,"o",function(){return F}),e.d(a,"m",function(){return k}),e.d(a,"e",function(){return x});var r=e("t3Un"),o=e("Qyje"),s=e.n(o);function l(t){return Object(r.a)({url:"/businessEdit",method:"post",data:s.a.stringify(t)})}function i(t){return Object(r.a)({url:"/businessIndex",method:"post",data:s.a.stringify(t)})}function n(t){return Object(r.a)({url:"/businessGet",method:"post",data:s.a.stringify(t)})}function c(t){return Object(r.a)({url:"/businessDelete",method:"post",data:s.a.stringify(t)})}function u(t){return Object(r.a)({url:"/shopEdit",method:"post",data:s.a.stringify(t)})}function m(t){return Object(r.a)({url:"/shopDelete",method:"post",data:s.a.stringify(t)})}function f(t){return Object(r.a)({url:"/shopIndex",method:"post",data:s.a.stringify(t)})}function d(t){return Object(r.a)({url:"/shopGet",method:"post",data:s.a.stringify(t)})}function p(t){return Object(r.a)({url:"/clerkEdit",method:"post",data:s.a.stringify(t)})}function b(t){return Object(r.a)({url:"/clerkGet",method:"post",data:s.a.stringify(t)})}function h(t){return Object(r.a)({url:"/clerkDelete",method:"post",data:s.a.stringify(t)})}function g(t){return Object(r.a)({url:"/clerkIndex",method:"post",data:s.a.stringify(t)})}function v(t){return Object(r.a)({url:"/selecStore",method:"post",data:s.a.stringify(t)})}function w(t){return Object(r.a)({url:"/clerkStatus",method:"post",data:s.a.stringify(t)})}function D(t){return Object(r.a)({url:"/storeStatus",method:"post",data:s.a.stringify(t)})}function _(t){return Object(r.a)({url:"/getBillDetail",method:"post",data:s.a.stringify(t)})}function y(t){return Object(r.a)({url:"/getBillInfoList",method:"post",data:s.a.stringify(t)})}function F(t){return Object(r.a)({url:"/setBusinessSettlement",method:"post",data:s.a.stringify(t)})}function k(t){return Object(r.a)({url:"/getBusinessSettlement",method:"post",data:s.a.stringify(t)})}function x(t){return Object(r.a)({url:"/businessSort",method:"post",data:s.a.stringify(t)})}},jUE0:function(t,a,e){},jxEf:function(t,a,e){}}]);