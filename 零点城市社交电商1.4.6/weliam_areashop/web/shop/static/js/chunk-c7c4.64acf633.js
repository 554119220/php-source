(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-c7c4"],{"8Ai3":function(e,t,a){"use strict";var o=a("FUfl");a.n(o).a},FUfl:function(e,t,a){},oLv2:function(e,t,a){"use strict";a.r(t);var o=a("sk9p"),n=a.n(o),s=a("hoR8"),i=a("UC6z"),l=a("E5uR"),r=a("9x5b"),c={mixins:[i.a.getters("Table"),i.a.getters("Form")],name:"ManagementPlatform",components:{ShareLink:l.a},computed:{},created:function(){var e=this;this.$nextTick(function(){Object(s.a)().then(function(t){var a=t.data.data,o=void 0===a?[]:a;e.categoryData=o})})},data:function(){return{shareLinkConfig:{current:"weChatQr",params:{qrUrl:"",linkUrl:"",weChatQr:"",appQr:""}},category_array:[],currentIndex:"",currentSort:"",goodsType:{depot:0,hasSale:0,sale:0},myProps:{value:"category_id",label:"name",children:"child"},$index:-1,$type:-1,dialogTableVisible:!1,disabledDateOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},categoryData:[],formFormatData:{key:"userForm",api:{editForm:{api:"",params:{}},submitForm:s.y},formData:{ids:[],uppertime:"",goods_status:10},rules:{}},tableFormatData:{current:"announcement",announcement:{key:"announcement",api:{getList:s.s,delList:s.m},tableData:[],files:{goodsType:"sale",name:"",goods_no:"",category_id:"",ids:[],checkall:"0",Recycle:"0",redirect:"goods_id"},change:{goods_name:{key:"goods_name",api:s.g},goods_down:{key:"goods_down",api:s.o},goods_price:{key:"goods_price",api:s.h},stock_num:{key:"stock_num",api:s.i}},pagination:{page:1,list_rows:10,pagesizes:[10,20,50],total:0}}}}},methods:{handleClipboard:function(e,t){Object(r.a)(e,t)},sharelink:function(e){var t=this;Object(s.q)({goods_id:e}).then(function(e){var a=e.data.data,o=a.weChat_qrcode,n=a.wxApp_qrcode,s=a.weChat_url,i=a.wxApp_url;t.shareLinkConfig.params.qrUrl=s,t.shareLinkConfig.params.linkUrl=i,t.shareLinkConfig.params.weChatQr=o,t.shareLinkConfig.params.appQr=n}),this.$refs.sharelink.toggle()},mouseenter:function(e,t,a){this.$set(this.tableFormatData.announcement.tableData[e.$index],""+a,t)},filesEmptyBefore:function(){this.category_array=[],this.filesEmpty()},categoryChange:function(e){var t=e.slice(-1),a=n()(t,1)[0];this.tableFormatData.announcement.files.category_id=a},changeTableCallBack:function(e){var t=e.event,a=e.params.response.data.data.goods_number;"getList"===t&&(this.goodsType=a)},saveDialog:function(){var e=[];this.tableFormatData.announcement.files.ids.length>0&&this.tableFormatData.announcement.files.ids.map(function(t){e.push(t.goods_id)}),this.formFormatData.formData.ids=e,this.formFormatSubmit(),this.dialogTableVisible=!1,this.clearSelection(),this.filesSerch()},showDialog:function(e,t){e&&(["goods_up"].includes(e)?(this.$type=e,this.dialogTableVisible=!0):(this.$index=e.$index,this.$type=t,this.dialogTableVisible=!0))}}},m=(a("8Ai3"),a("KHd+")),p=Object(m.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"merchandise-management views-container"},[a("share-link",{ref:"sharelink",attrs:{config:e.shareLinkConfig}},[a("template",{slot:"title"},[e._v("-商品")]),e._v(" "),a("template",{slot:"el-form-item"},[a("el-form-item",{attrs:{label:"商品小程序路径"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"270px"},attrs:{readonly:"",placeholder:"请输入内容"},model:{value:e.shareLinkConfig.params.qrUrl,callback:function(t){e.$set(e.shareLinkConfig.params,"qrUrl",t)},expression:"shareLinkConfig.params.qrUrl"}},[a("el-button",{attrs:{slot:"append"},on:{click:function(t){e.handleClipboard(e.shareLinkConfig.params.qrUrl,t)}},slot:"append"},[e._v("复制")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"商品公众号链接"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"270px"},attrs:{readonly:"",placeholder:"请输入内容"},model:{value:e.shareLinkConfig.params.linkUrl,callback:function(t){e.$set(e.shareLinkConfig.params,"linkUrl",t)},expression:"shareLinkConfig.params.linkUrl"}},[a("el-button",{attrs:{slot:"append"},on:{click:function(t){e.handleClipboard(e.shareLinkConfig.params.linkUrl,t)}},slot:"append"},[e._v("复制")])],1)],1)],1)],2),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogTableVisible,"custom-class":"reset-pwd wlm-form-dialog dialog-table"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[e.dialogTableVisible&&e.$type&&"goods_up"!==e.$type?a("div",{staticClass:"wlm-form"},[a("div",{staticClass:"wlm-form-header wlm-dialog-fixheader"},[a("span",{staticClass:"wlm-dialog-inlenr"},[e._v("编辑多规格")])]),e._v(" "),a("el-table",{ref:"specTabel",staticStyle:{width:"100%"},attrs:{data:e.tableFormatData.announcement.tableData[e.$index].sku}},[a("el-table-column",{attrs:{label:"规格名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.title))])]}}])}),e._v(" "),"price"===e.$type?a("el-table-column",{attrs:{label:"售卖价",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"medium"},on:{blur:function(a){e.changeTableItem({goods_id:t.row.goods_id,goods_price:t.row.goods_price,line_price:t.row.line_price,spec_sku_id:t.row.spec_sku_id},e.tableFormatData.announcement.change.goods_price)}},model:{value:t.row.goods_price,callback:function(a){e.$set(t.row,"goods_price",a)},expression:"scope.row.goods_price"}})]}}])}):e._e(),e._v(" "),"price"===e.$type?a("el-table-column",{attrs:{label:"市场价",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"medium"},on:{blur:function(a){e.changeTableItem({goods_id:t.row.goods_id,goods_price:t.row.goods_price,line_price:t.row.line_price,spec_sku_id:t.row.spec_sku_id},e.tableFormatData.announcement.change.goods_price)}},model:{value:t.row.line_price,callback:function(a){e.$set(t.row,"line_price",a)},expression:"scope.row.line_price"}})]}}])}):e._e(),e._v(" "),"num"===e.$type?a("el-table-column",{attrs:{label:"库存",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"medium"},on:{blur:function(a){e.changeTableItem({goods_id:t.row.goods_id,stock_num:t.row.stock_num,spec_sku_id:t.row.spec_sku_id},e.tableFormatData.announcement.change.stock_num)}},model:{value:t.row.stock_num,callback:function(a){e.$set(t.row,"stock_num",a)},expression:"scope.row.stock_num"}})]}}])}):e._e()],1),e._v(" "),a("footer",{staticClass:"flex-row flex-align-c flex-justify-c wlm-dialog-fixfooter"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("关闭")])],1)],1):e._e(),e._v(" "),e.dialogTableVisible&&e.$type&&"goods_up"===e.$type?a("div",{staticClass:"wlm-form"},[a("div",{staticClass:"wlm-form-header wlm-dialog-fixheader"},[a("span",{staticClass:"wlm-dialog-inlenr"},[e._v("批量上架")])]),e._v(" "),a("el-form",{ref:e.formFormatData.key,staticClass:"retail-form",staticStyle:{"margin-top":"20px"},attrs:{model:e.formFormatData.formData,rules:e.formFormatData.rules,size:"small","label-width":"120px","label-position":"right"}},[a("el-form-item",{attrs:{label:"上架时间"}},[a("el-radio-group",{model:{value:e.formFormatData.formData.goods_status,callback:function(t){e.$set(e.formFormatData.formData,"goods_status",t)},expression:"formFormatData.formData.goods_status"}},[a("el-radio",{attrs:{label:10}},[e._v("立即上架")]),e._v(" "),a("el-radio",{attrs:{label:30}},[e._v("设置上架时间")])],1)],1),e._v(" "),30===e.formFormatData.formData.goods_status?a("el-form-item",{attrs:{label:""}},[a("el-date-picker",{attrs:{"picker-options":e.disabledDateOptions,"value-format":"timestamp",type:"datetime",placeholder:"选择日期"},model:{value:e.formFormatData.formData.uppertime,callback:function(t){e.$set(e.formFormatData.formData,"uppertime",t)},expression:"formFormatData.formData.uppertime"}})],1):e._e()],1),e._v(" "),a("footer",{staticClass:"flex-row flex-align-c flex-justify-c wlm-dialog-fixfooter"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.saveDialog}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("关闭")])],1)],1):e._e()]),e._v(" "),a("div",{staticClass:"wlm-table"},[a("div",{staticClass:"wlm-table-hearder-btn"},[a("router-link",{attrs:{tag:"span",to:"/merchandise/merchandiseManagementAdd"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("添加商品")])],1)],1),e._v(" "),a("div",{staticClass:"wlm-table-header"},[a("el-form",{staticClass:"retail-form",attrs:{model:e.tableFormatData.announcement.files,size:"small","label-width":"90px","label-position":"right"}},[a("el-form-item",{staticClass:"filter",attrs:{label:""}},[a("el-form-item",{staticClass:"search",attrs:{label:"商品名称："}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入商品名称"},model:{value:e.tableFormatData.announcement.files.name,callback:function(t){e.$set(e.tableFormatData.announcement.files,"name",t)},expression:"tableFormatData.announcement.files.name"}})],1),e._v(" "),a("el-form-item",{staticClass:"filter",attrs:{label:"商品分类："}},[a("el-cascader",{attrs:{props:e.myProps,options:e.categoryData,"show-all-levels":!1},on:{change:e.categoryChange},model:{value:e.category_array,callback:function(t){e.category_array=t},expression:"category_array"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"filter-btns",attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:e.filesSerch}},[e._v("筛选")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:e.filesEmptyBefore}},[e._v("清空筛选条件")])],1)],1)],1),e._v(" "),a("div",{staticClass:"wlm-table-content"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.filesSerch},model:{value:e.tableFormatData.announcement.files.goodsType,callback:function(t){e.$set(e.tableFormatData.announcement.files,"goodsType",t)},expression:"tableFormatData.announcement.files.goodsType"}},[a("el-tab-pane",{attrs:{label:"售卖中("+e.goodsType.sale+")",name:"sale"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"已售罄("+e.goodsType.hasSale+")",name:"hasSale"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"仓库中("+e.goodsType.depot+")",name:"depot"}})],1),e._v(" "),a("el-table",{ref:e.tableFormatData.announcement.key,staticStyle:{width:"100%"},attrs:{data:e.tableFormatData.announcement.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"商品LOGO",align:"center","min-width":"40"},scopedSlots:e._u([{key:"default",fn:function(e){return Array.isArray(e.row.image)&&e.row.image.length>0?[a("div",{staticClass:"wlm-table-logos"},[a("img",{staticClass:"logo",attrs:{src:e.row.image[0].file_path}})])]:void 0}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"商品名称","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("div",{staticClass:"flex-col"},[a("div",{staticClass:"flex-row flex-align-c",staticStyle:{"margin-bottom":"10px"}},[a("span",{staticStyle:{"white-space":"nowrap","margin-right":"8px"}},[e._v("商品名称: ")]),e._v(" "),a("el-input",{staticStyle:{"margin-right":"10px"},attrs:{size:"mini"},model:{value:t.row.goods_name,callback:function(a){e.$set(t.row,"goods_name",a)},expression:"scope.row.goods_name"}}),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.changeTableItem({goods_id:t.row.goods_id,goods_name:t.row.goods_name},e.tableFormatData.announcement.change.goods_name)}}},[e._v("确定")])],1)]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"pointer ellips_line2",staticStyle:{"max-width":"200px","max-height":"51px",overflow:"hidden"}},[a("span",{on:{mousemove:function(a){e.mouseenter(t,!0,"showEditNameBtn")},mouseout:function(a){e.mouseenter(t,!1,"showEditNameBtn")}}},[e._v(e._s(t.row.goods_name))]),e._v(" "),t.row.showEditNameBtn?a("svg-icon",{attrs:{"icon-class":"editIcon"}}):e._e()],1)])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"商品分类","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.category_data?[e._l(t.row.category_data,function(o,n){return o.name&&t.row.category_data?a("p",{key:n},[e._v(e._s(o.name+": "+(o.child?o.child.length>1?o.child.join("/"):o.child[0]:"")))]):e._e()}),e._v(" "),0==t.row.category_data.length?a("p",[e._v("-")]):e._e()]:void 0}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"价格","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.sku&&t.row.sku[0]?[10==t.row.spec_type?a("el-popover",{attrs:{trigger:"click",placement:"top"}},[a("div",{staticClass:"flex-row flex-align-c",staticStyle:{"margin-bottom":"4px"}},[a("span",{staticStyle:{"white-space":"nowrap","margin-right":"8px"}},[e._v("售卖价: ")]),e._v(" "),a("el-input",{attrs:{size:"mini"},on:{blur:function(a){e.changeTableItem({goods_id:t.row.goods_id,goods_price:t.row.sku[0].goods_price,line_price:t.row.sku[0].line_price},e.tableFormatData.announcement.change.goods_price)}},model:{value:t.row.sku[0].goods_price,callback:function(a){e.$set(t.row.sku[0],"goods_price",a)},expression:"scope.row.sku[0]['goods_price']"}})],1),e._v(" "),a("div",{staticClass:"flex-row flex-align-c"},[a("span",{staticStyle:{"white-space":"nowrap","margin-right":"8px"}},[e._v("市场价: ")]),e._v(" "),a("el-input",{attrs:{size:"mini"},on:{blur:function(a){e.changeTableItem({goods_id:t.row.goods_id,goods_price:t.row.sku[0].goods_price,line_price:t.row.sku[0].line_price},e.tableFormatData.announcement.change.goods_price)}},model:{value:t.row.sku[0].line_price,callback:function(a){e.$set(t.row.sku[0],"line_price",a)},expression:"scope.row.sku[0]['line_price']"}})],1),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[10==t.row.spec_type?a("el-button",{staticClass:"pointer",attrs:{type:"text"}},[a("span",{on:{mousemove:function(a){e.mouseenter(t,!0,"showEditPriceBtn")},mouseout:function(a){e.mouseenter(t,!1,"showEditPriceBtn")}}},[e._v(e._s(t.row.sku[0].goods_price)+" ")]),e._v(" "),t.row.showEditPriceBtn?a("svg-icon",{attrs:{"icon-class":"editIcon"}}):e._e()],1):e._e()],1)]):e._e(),e._v(" "),20==t.row.spec_type?a("el-button",{staticClass:"pointer",attrs:{type:"text",size:"mini"},on:{click:function(a){e.showDialog(t,"price")}}},[a("span",{on:{mousemove:function(a){e.mouseenter(t,!0,"showEditPriceBtn")},mouseout:function(a){e.mouseenter(t,!1,"showEditPriceBtn")}}},[e._v(e._s(t.row.sku[0].goods_price))]),e._v(" "),t.row.showEditPriceBtn?a("svg-icon",{attrs:{"icon-class":"editIcon"}}):e._e()],1):e._e()]:void 0}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"库存","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.sku&&t.row.sku[0]?[10==t.row.spec_type?a("el-popover",{attrs:{trigger:"click",placement:"top"}},[a("div",{staticClass:"flex-row flex-align-c"},[a("span",{staticStyle:{"white-space":"nowrap","margin-right":"8px"}},[e._v("库存: ")]),e._v(" "),a("el-input",{attrs:{size:"mini"},on:{blur:function(a){e.changeTableItem({goods_id:t.row.goods_id,stock_num:t.row.sku[0].stock_num,spec_sku_id:t.row.spec_sku_id},e.tableFormatData.announcement.change.stock_num)}},model:{value:t.row.sku[0].stock_num,callback:function(a){e.$set(t.row.sku[0],"stock_num",a)},expression:"scope.row.sku[0]['stock_num']"}})],1),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[10==t.row.spec_type?a("el-button",{staticClass:"pointer",attrs:{type:"text"}},[a("span",{on:{mousemove:function(a){e.mouseenter(t,!0,"showEditStockBtn")},mouseout:function(a){e.mouseenter(t,!1,"showEditStockBtn")}}},[e._v(e._s(""+t.row.sku[0].stock_num)+" ")]),e._v(" "),t.row.showEditStockBtn?a("svg-icon",{attrs:{"icon-class":"editIcon"}}):e._e()],1):e._e()],1)]):e._e(),e._v(" "),20==t.row.spec_type?a("el-button",{staticClass:"pointer",attrs:{type:"text",size:"mini"},on:{click:function(a){e.showDialog(t,"num")}}},[a("span",{on:{mousemove:function(a){e.mouseenter(t,!0,"showEditStockBtn")},mouseout:function(a){e.mouseenter(t,!1,"showEditStockBtn")}}},[e._v("\r\n                            "+e._s(""+t.row.stock)+" ")]),e._v(" "),t.row.showEditStockBtn?a("svg-icon",{attrs:{"icon-class":"editIcon"}}):e._e()],1):e._e()]:void 0}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"销量","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.goods_sales))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"状态","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["sale"===e.tableFormatData.announcement.files.goodsType?a("span",[e._v("售卖中")]):e._e(),e._v(" "),"hasSale"===e.tableFormatData.announcement.files.goodsType?a("span",[e._v("已售罄")]):e._e(),e._v(" "),"depot"===e.tableFormatData.announcement.files.goodsType?a("span",[e._v("仓库中")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"operation-group"},[a("router-link",{staticClass:"wlm-text",attrs:{tag:"span",to:{path:"/merchandise/merchandiseManagementAdd",query:{id:t.row.goods_id}}}},[a("el-button",{attrs:{type:"text"}},[e._v("编辑")])],1),e._v(" "),a("div",{staticClass:"btn-line"}),e._v(" "),a("el-button",{staticClass:"wlm-text",attrs:{type:"text"},on:{click:function(a){e.sharelink(t.row.goods_id)}}},[e._v("推广")]),e._v(" "),a("div",{staticClass:"btn-line"}),e._v(" "),a("el-button",{staticClass:"wlm-text",attrs:{type:"text"},on:{click:function(a){e.delTableItem(t.row.goods_id)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-content flex-row flex-justify-b flex-align-c"},[a("el-row",{staticClass:"pagination-btns"},[a("el-checkbox",{staticClass:"check-all",attrs:{"true-label":"1","false-label":"0"},on:{change:e.toggleSelection},model:{value:e.tableFormatData.announcement.files.checkall,callback:function(t){e.$set(e.tableFormatData.announcement.files,"checkall",t)},expression:"tableFormatData.announcement.files.checkall"}},[e._v("全部")]),e._v(" "),"depot"==e.tableFormatData.announcement.files.goodsType?a("el-button",{staticClass:"right-8",attrs:{disabled:e.isGroup,size:"mini"},on:{click:function(t){e.showDialog("goods_up")}}},[e._v("批量上架")]):e._e(),e._v(" "),"depot"!==e.tableFormatData.announcement.files.goodsType?a("el-button",{staticClass:"right-8",attrs:{disabled:e.isGroup,size:"mini"},on:{click:function(t){e.changeTableItem({isGroup:!0},e.tableFormatData.announcement.change.goods_down)}}},[e._v("批量下架")]):e._e(),e._v(" "),a("el-button",{staticClass:"right-8",attrs:{disabled:e.isGroup,size:"mini"},on:{click:e.delTableList}},[e._v("删除")])],1),e._v(" "),a("el-pagination",{attrs:{disabled:!e.hasTableData,"current-page":e.tableFormatData.announcement.pagination.page,"page-sizes":e.tableFormatData.announcement.pagination.pagesizes,"page-size":e.tableFormatData.announcement.pagination.list_rows,layout:"total, sizes, prev, pager, next, jumper",total:e.hasTableData?e.tableFormatData.announcement.pagination.total:0},on:{"size-change":e.listPageChange,"current-change":e.listPageChange,"update:currentPage":function(t){e.$set(e.tableFormatData.announcement.pagination,"page",t)},"update:pageSize":function(t){e.$set(e.tableFormatData.announcement.pagination,"list_rows",t)}}})],1)],1)])],1)},[],!1,null,"7fd025f4",null);p.options.__file="merchandiseManagement.vue";t.default=p.exports}}]);