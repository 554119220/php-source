(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3b95"],{"+KkK":function(e,t,a){"use strict";a.r(t);var l=a("wk8/"),i={mixins:[a("UC6z").a.getters("Form")],name:"WeChatMenuChannelAdd",components:{},directives:{},computed:{isFirstMax:function(){return this.formFormatData.formData.menuList.length>=this.firstMax},isSecondMax:function(){return function(e){return this.formFormatData.formData.menuList[e].children.length>=this.secondMax}},hasMenu:function(){return 0===this.formFormatData.formData.menuList.length&&!this.showMenu}},data:function(){return{showMenu:!1,visible:!1,firstMax:3,secondMax:5,formFormatData:{key:["menuBase","menuSetting"],api:{submitForm:l.f},formData:{menuName:"",menuList:[{nickname:"13",type:"1",source:"2",content:{text:"",image:[],audio:[]},link:"",appid:"",page:"",url:"",visible:!1,children:[{nickname:"13",visible:!1,type:"1",source:"2",content:{text:"",image:[],audio:[]},link:"",appid:"",page:"",url:""}]}],nickname:"",password:"",repassword:"",username:""},rules:{menuName:[{required:!0,message:"请输入菜单名称",trigger:"blur"}]}}}},methods:{deletePrimary:function(e){this.formFormatData.formData.menuList.splice(e,1)},deleteSecondary:function(e,t){this.formFormatData.formData.menuList[e].children.splice(t,1)},addMenu:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,l=!1;switch(e){case"first":this.formFormatData.formData.menuList.length<3&&(this.formFormatData.formData.menuList.push({nickname:"13",type:"1",source:"2",content:{text:"",image:[],audio:[]},link:"",appid:"",page:"",url:"",visible:!1,children:[]}),l=!0);break;case"second":this.formFormatData.formData.menuList[t].children.length<5&&(this.formFormatData.formData.menuList[t].children.push({nickname:"13",type:"1",source:"2",content:{text:"",image:[],audio:[]},link:"",appid:"",page:"",url:"",visible:!1}),l=!0)}l||this.$message({message:l?"添加成功：上限不超过"+a+"个":"添加失败：上限不超过"+a+"个",type:l?"success":"error"})}}},n=(a("ChKH"),a("KHd+")),s=Object(n.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wechat-menu-channel views-container"},[e._m(0),e._v(" "),a("div",{staticClass:"wlm-form"},[a("div",{staticClass:"wlm-form-header"},[e._v("菜单名称")]),e._v(" "),a("div",{staticClass:"flex-row",staticStyle:{padding:"10px 20px 50px"}},[a("div",{staticClass:"wlm-form-content"},[a("el-form",{ref:"menuBase",staticClass:"retail-form",attrs:{model:e.formFormatData.formData,rules:e.formFormatData.rules,size:"small","label-width":"140px","label-position":"right"}},[a("el-form-item",{attrs:{label:"菜单名称",prop:"menuName"}},[a("el-input",{model:{value:e.formFormatData.formData.menuName,callback:function(t){e.$set(e.formFormatData.formData,"menuName",t)},expression:"formFormatData.formData.menuName"}})],1)],1)],1)])]),e._v(" "),a("div",{staticClass:"wlm-form"},[a("div",{staticClass:"wlm-form-header"},[e._v("菜单管理")]),e._v(" "),a("div",{staticClass:"flex-row",staticStyle:{padding:"10px 20px 50px"}},[a("div",{staticClass:"pannel__left"},[a("div",{staticClass:"menu-preview flex-col flex-col-reverse"},[a("div",{staticClass:"menu-content flex-row flex-align-c flex-justify-b"},[a("div",{staticClass:"menu-icon flex-row flex-align-c flex-justify-c"},[a("svg-icon",{staticStyle:{width:"30px",height:"30px"},attrs:{"icon-class":"wechatmenu"}})],1),e._v(" "),a("div",{staticClass:"menu-item-box flex-row flex-align-c flex-justify-c scale-grow"},[e.hasMenu?a("span",[e._v("未命名")]):e._l(e.formFormatData.formData.menuList,function(t,l){return a("el-tooltip",{key:l,attrs:{effect:"light","popper-class":"tooltip-menu-item","hide-after":0,disabled:0===t.children.length,placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},e._l(t.children,function(l,i){return a("span",{key:i,style:{width:268/e.formFormatData.formData.menuList.length+"px",height:"50px","box-sizing":"border-box",display:"block","text-align":"center","border-top":(t.children.length>1&&0!==i?"1":"0")+"px solid #ccc","font-size":"14px",padding:"0",cursor:"pointer","line-height":"50px"}},[e._v(e._s(l.nickname||""))])})),e._v(" "),a("el-button",{attrs:{type:"text"}},[e._v(e._s(t.nickname))])],1)})],2)])])]),e._v(" "),a("div",{staticClass:"wlm-form-content",staticStyle:{"padding-top":"0"}},[e.hasMenu?a("el-alert",{staticStyle:{width:"500px",height:"150px"},attrs:{title:"还没有任何菜单",center:"",closable:!1,type:"warning"}},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.showMenu=!0}}},[e._v("添加一级菜单")])],1):e._e(),e._v(" "),e.hasMenu?e._e():a("el-form",{ref:"menuSetting",staticClass:"retail-form",attrs:{model:e.formFormatData.formData,rules:e.formFormatData.rules,size:"small","label-width":"100px","label-position":"right"}},[e._l(e.formFormatData.formData.menuList,function(t,l){return a("el-alert",{key:l,staticStyle:{"margin-bottom":"20px","background-color":"#f3f4f7"},attrs:{title:"",closable:!1,type:"success"}},[a("div",{staticClass:"my-badge",on:{click:function(t){e.deletePrimary(l)}}},[a("i",{staticClass:"el-icon-close"})]),e._v(" "),a("el-form-item",{attrs:{label:"一级菜单名称"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.nickname,callback:function(a){e.$set(t,"nickname",a)},expression:"menuitem.nickname"}}),e._v(" "),a("el-popover",{attrs:{placement:"bottom",trigger:"click"},model:{value:t.visible,callback:function(a){e.$set(t,"visible",a)},expression:"menuitem.visible"}},[a("div",{staticClass:"flex-col",staticStyle:{padding:"20px 30px"}},[a("el-radio-group",{staticStyle:{"margin-bottom":"20px",width:"100%"},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"menuitem.type"}},[a("el-radio",{attrs:{label:"1"}},[e._v("发送消息")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("跳转网页")]),e._v(" "),a("el-radio",{attrs:{label:"3"}},[e._v("小程序")])],1),e._v(" "),1==t.type?a("el-tabs",{staticStyle:{"margin-top":"-10px"},model:{value:t.source,callback:function(a){e.$set(t,"source",a)},expression:"menuitem.source"}},[a("el-tab-pane",{attrs:{label:"文字",name:"2"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请输入内容"},model:{value:t.content.text,callback:function(a){e.$set(t.content,"text",a)},expression:"menuitem.content.text"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"图片",name:"4"}},[e._v("图片")]),e._v(" "),a("el-tab-pane",{attrs:{label:"音频",name:"6"}},[e._v("音频")]),e._v(" "),a("el-tab-pane",{attrs:{label:"小程序",name:"8"}},[e._v("小程序")]),e._v(" "),a("el-tab-pane",{attrs:{label:"其他",name:"10"}},[e._v("其他")])],1):e._e(),e._v(" "),2==t.type?a("el-form-item",{attrs:{label:"跳转网页"}},[a("el-input",{model:{value:t.link,callback:function(a){e.$set(t,"link",a)},expression:"menuitem.link"}},[a("template",{slot:"append"},[e._v("选择链接")])],2)],1):e._e(),e._v(" "),3==t.type?[a("el-form-item",{attrs:{label:"APPID"}},[a("el-input",{model:{value:t.appid,callback:function(a){e.$set(t,"appid",a)},expression:"menuitem.appid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"页面地址"}},[a("el-input",{model:{value:t.page,callback:function(a){e.$set(t,"page",a)},expression:"menuitem.page"}},[a("template",{slot:"append"},[e._v("选择链接")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"URL"}},[a("el-input",{model:{value:t.url,callback:function(a){e.$set(t,"url",a)},expression:"menuitem.url"}},[a("template",{slot:"append"},[e._v("选择链接")])],2)],1)]:e._e()],2),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"text"},on:{click:function(t){e.visible=!e.visible}},slot:"reference"},[e._v("设置菜单动作")])],1),e._v(" "),e._l(t.children,function(t,i){return a("el-form-item",{key:i,staticClass:"wlm-form-child",attrs:{label:"二级菜单名称"}},[a("el-input",{staticStyle:{width:"150px"},model:{value:t.nickname,callback:function(a){e.$set(t,"nickname",a)},expression:"childitem.nickname"}}),e._v(" "),a("el-popover",{attrs:{placement:"bottom",trigger:"click"},model:{value:t.visible,callback:function(a){e.$set(t,"visible",a)},expression:"childitem.visible"}},[a("div",{staticClass:"flex-col",staticStyle:{padding:"15px 20px"}},[a("el-radio-group",{staticStyle:{"margin-bottom":"20px",width:"100%"},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"childitem.type"}},[a("el-radio",{attrs:{label:"1"}},[e._v("发送消息")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("跳转网页")]),e._v(" "),a("el-radio",{attrs:{label:"3"}},[e._v("小程序")])],1),e._v(" "),1==t.type?a("el-tabs",{staticStyle:{"margin-top":"-10px"},model:{value:t.source,callback:function(a){e.$set(t,"source",a)},expression:"childitem.source"}},[a("el-tab-pane",{attrs:{label:"文字",name:"2"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请输入内容"},model:{value:t.content.text,callback:function(a){e.$set(t.content,"text",a)},expression:"childitem.content.text"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"图片",name:"4"}},[e._v("图片")]),e._v(" "),a("el-tab-pane",{attrs:{label:"音频",name:"6"}},[e._v("音频")]),e._v(" "),a("el-tab-pane",{attrs:{label:"小程序",name:"8"}},[e._v("小程序")]),e._v(" "),a("el-tab-pane",{attrs:{label:"其他",name:"10"}},[e._v("其他")])],1):e._e(),e._v(" "),2==t.type?a("el-form-item",{attrs:{label:"跳转网页"}},[a("el-input",{model:{value:t.link,callback:function(a){e.$set(t,"link",a)},expression:"childitem.link"}},[a("template",{slot:"append"},[e._v("选择链接")])],2)],1):e._e(),e._v(" "),3==t.type?[a("el-form-item",{attrs:{label:"APPID"}},[a("el-input",{model:{value:t.appid,callback:function(a){e.$set(t,"appid",a)},expression:"childitem.appid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"页面地址"}},[a("el-input",{model:{value:t.page,callback:function(a){e.$set(t,"page",a)},expression:"childitem.page"}},[a("template",{slot:"append"},[e._v("选择链接")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"URL"}},[a("el-input",{model:{value:t.url,callback:function(a){e.$set(t,"url",a)},expression:"childitem.url"}},[a("template",{slot:"append"},[e._v("选择链接")])],2)],1)]:e._e()],2),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"text"},on:{click:function(a){t.visible=!e.visible}},slot:"reference"},[e._v("设置菜单动作")]),e._v(" "),a("el-button",{staticClass:"color-red",attrs:{slot:"reference",type:"text"},on:{click:function(t){e.deleteSecondary(l,i)}},slot:"reference"},[e._v("删除")])],1)],1)}),e._v(" "),e.isSecondMax(l)?e._e():a("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.addMenu("second",l,5)}}},[e._v("添加二级菜单")])],2)],1)}),e._v(" "),e.isFirstMax?e._e():a("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.addMenu("first")}}},[e._v("添加一级菜单")])],2)],1)])]),e._v(" "),a("div",{staticClass:"wlm-fixed-btn flex-row flex-align-c flex-justify-c"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.formFormatSubmit({router:{type:"replace",path:"/user/managementUser",code:1}})}}},[e._v("保存")])],1)])},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"wlm-form"},[t("div",{staticClass:"wlm-form-notice warning",staticStyle:{margin:"0"}},[t("p",[this._v("由于微信接口延迟，菜单修改后最长需要30分钟更新至公众号，如未及时更新，请取消关注，再重新关注")])])])}],!1,null,"4c44a332",null);s.options.__file="weChatMenuChannelAdd.vue";t.default=s.exports},"6sV3":function(e,t,a){},ChKH:function(e,t,a){"use strict";var l=a("6sV3");a.n(l).a}}]);