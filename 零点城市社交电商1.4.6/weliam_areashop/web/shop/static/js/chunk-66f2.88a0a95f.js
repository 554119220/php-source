(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-66f2"],{"44uQ":function(t,e,i){"use strict";var a=i("ql8k");i.n(a).a},Hx4K:function(t,e,i){"use strict";var a=i("PGS3");i.n(a).a},PGS3:function(t,e,i){},UXNY:function(t,e,i){"use strict";i.r(e);var a=i("x/Cv"),n=i("e45n"),r=i("XfWA"),s=i("wk8/"),o=i("pj2Z"),l={mixins:[i("UC6z").a.getters("Form")],name:"ComeStoreAdd",components:{upload:a.a,BaiduMap:n.a,CitySelect:r.a},directives:{},data:function(){var t=this;return{platformConfig:{type:["image"],initList:[]},formFormatData:{key:"userForm",api:{submitForm:s.f},formData:{nickname:"",password:"",repassword:"",username:"",logo:[]},rules:{nickname:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:function(t,e,i){if(!Object(o.b)(e))return i(new Error("密码格式错误"));i()},trigger:"blur"}],repassword:[{required:!0,message:"请输入确认密码",trigger:"blur"},{validator:function(e,i,a){if(i!==t.formFormatData.formData.password)return a(new Error("两次密码输入不一致"));a()},trigger:"blur"}],username:[{required:!0,message:"请输入用户手机号",trigger:"blur"},{validator:function(t,e,i){if(!Object(o.c)(e))return i(new Error("注册手机号格式不正确"));i()},trigger:"blur"}]}}}},methods:{uploadPlatformChange:function(t){},chooseCity:function(t){},getPoint:function(t){}}},c=(i("uoE2"),i("KHd+")),d=Object(c.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"come-store-add views-container"},[i("div",{staticClass:"wlm-form"},[i("div",{staticClass:"wlm-form-header"},[t._v("添加自提点")]),t._v(" "),i("div",{staticClass:"wlm-form-content"},[i("el-form",{ref:t.formFormatData.key,staticClass:"retail-form",attrs:{model:t.formFormatData.formData,rules:t.formFormatData.rules,size:"small","label-width":"120px","label-position":"right"}},[i("el-form-item",{attrs:{label:"商家名称"}},[i("el-input",{model:{value:t.formFormatData.formData.status,callback:function(e){t.$set(t.formFormatData.formData,"status","string"==typeof e?e.trim():e)},expression:"formFormatData.formData.status"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"自提点名称"}},[i("el-input",{model:{value:t.formFormatData.formData.status,callback:function(e){t.$set(t.formFormatData.formData,"status","string"==typeof e?e.trim():e)},expression:"formFormatData.formData.status"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"自提点图片"}},[i("upload",{ref:"uploadplatform",attrs:{config:t.platformConfig,changeEvt:t.uploadPlatformChange}}),t._v(" "),i("div",{staticClass:"form-help"},[t._v("最多添加10张图片，图片大小200*200")])],1),t._v(" "),i("el-form-item",{staticClass:"city",attrs:{label:"自提点位置",prop:"address"}},[i("div",{staticClass:"flex-row flex-align-c"},[i("city-select",{ref:"cityselect",attrs:{config:{},changeEvt:t.chooseCity}})],1)]),t._v(" "),i("el-form-item",{attrs:{label:"地图定位"}},[i("div",{staticClass:"flex-row flex-align-c"},[i("baidu-map",{attrs:{changeEvt:t.getPoint}})],1)])],1)],1)]),t._v(" "),i("div",{staticClass:"wlm-fixed-btn flex-row flex-align-c flex-justify-c"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.formFormatSubmit({router:{type:"replace",path:"/user/managementUser",code:1}})}}},[t._v("保存")]),t._v(" "),i("router-link",{attrs:{tag:"span",to:"/user/managementUser"}},[i("el-button",{attrs:{size:"small"}},[t._v("返回")])],1)],1)])},[],!1,null,"25bced5c",null);d.options.__file="comeStoreAdd.vue";e.default=d.exports},XfWA:function(t,e,i){"use strict";i("EJiy");var a=i("sk9p"),n=i.n(a),r=i("vDqi"),s=i.n(r),o={mixins:i("UC6z").a.getters("CitySelect"),initData:{initList:[]},mapJson:"/mapInfo"},l=i("p46w"),c=i.n(l),d={mixins:[o.mixins],props:{defaultConfig:{type:Object,default:function(){return o}}},watch:{"config.initList":{handler:function(t,e){if(Array.isArray(t)&&t.length>0){var i=n()(t,3),a=i[0],r=void 0===a?{}:a,s=i[1],o=void 0===s?{}:s,l=i[2],c=void 0===l?{}:l;this.Provincial=r.id,this.cityItem=o.id,this.area=c.id}},immediate:!0,deep:!0}},data:function(){return{loading:!1,mapJson:o.mapJson,province:"",Provincial:"",cityItem:"",cityList:[],area:"",areaList:[],cityName:"",block:""}},methods:{getCityData:function(){var t=this,e=t.mapJson.substr(1,t.mapJson.length-1),i=""+(c.a.get("BASE_API")||"/")+e;s.a.get(i).then(function(e){if(200===e.status){var i=e.data;for(var a in t.province=[],t.cityName=[],t.block=[],i)a.match(/0000$/)?t.province.push({id:a,value:i[a],children:[]}):a.match(/00$/)?t.cityName.push({id:a,value:i[a],children:[]}):t.block.push({id:a,value:i[a]});for(var n in t.province)for(var r in t.cityName)t.province[n].id.slice(0,2)===t.cityName[r].id.slice(0,2)&&t.province[n].children.push(t.cityName[r]);for(var s in t.cityName)for(var o in t.block)t.block[o].id.slice(0,4)===t.cityName[s].id.slice(0,4)&&t.cityName[s].children.push(t.block[o]);t.choseProvince(t.Provincial,t.cityItem,t.area),t.loading=!1}else t.loading=!1}).catch(function(e){t.loading=!1})},choseProvince:function(t){var e=arguments,i=this;for(var a in this.province)t===this.province[a].id&&("810000"!==this.province[a].id&&"820000"!==this.province[a].id?(this.cityList=this.province[a].children,3===arguments.length?function(){var t=Array.prototype.slice.call(e),n=t[1],r=t[2],s=i.province[a].children.findIndex(function(t){return t.id===n});-1!==i.areaIndex&&(i.areaList=i.province[a].children[s].children),i.cityItem=n,i.area=r}():(this.areaList=this.province[a].children[0].children,this.cityItem=this.province[a].children[0].id,this.area=this.province[a].children[0].children[0].id),this.E=this.areaList[0].id,this.output()):(this.cityItem="",this.area="",this.cityList=[],this.areaList=[],this.output()))},choseCity:function(t){for(var e in this.cityName)t===this.cityName[e].id&&(this.areaList=this.cityName[e].children,this.area=this.cityName[e].children[0].id,this.E=this.areaList[0].id,this.output())},choseBlock:function(t){this.E=t,this.output()},output:function(){var t,e=[{id:""+this.Provincial},{id:""+this.cityItem},{id:""+this.area}];(t=console).log.apply(t,e),"[object Function]"===Object.prototype.toString.call(this.changeEvt)&&this.changeEvt(e,this.updateConfig.bindKey)}},created:function(){this.loading=!0,this.getCityData()}},u=(i("44uQ"),i("KHd+")),p=Object(u.a)(d,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"linkage",attrs:{"element-loading-spinner":"el-icon-loading"}},[i("el-select",{staticClass:"el-input-resize--mini address",attrs:{size:"small",placeholder:"省级地区"},on:{change:t.choseProvince},model:{value:t.Provincial,callback:function(e){t.Provincial=e},expression:"Provincial"}},t._l(t.province,function(t){return i("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})})),t._v(" "),i("el-select",{staticClass:"el-input-resize--mini address",attrs:{size:"small",placeholder:"市级地区"},on:{change:t.choseCity},model:{value:t.cityItem,callback:function(e){t.cityItem=e},expression:"cityItem"}},t._l(t.cityList,function(t){return i("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})})),t._v(" "),i("el-select",{staticClass:"el-input-resize--mini address",attrs:{size:"small",placeholder:"区级地区"},on:{change:t.choseBlock},model:{value:t.area,callback:function(e){t.area=e},expression:"area"}},t._l(t.areaList,function(t){return i("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})}))],1)},[],!1,null,"38254fc6",null);p.options.__file="index.vue";e.a=p.exports},e45n:function(t,e,i){"use strict";var a=i("P2sY"),n=i.n(a),r=i("sk9p"),s=i.n(r),o=i("vQy8"),l=i("XJYT"),c={mixins:i("UC6z").a.getters("BaiduMap"),initData:{isEdit:!0,model:"normal",initList:[{lng:116.404288,lat:39.918242}]}},d={data:function(){return{center:{lng:116.404288,lat:39.918242},isShowModel:!1,mainLoing:!1,address:"",resuletPoint:{lng:116.404288,lat:39.918242}}},mixins:[c.mixins],props:{defaultConfig:{type:Object,default:function(){return c}}},components:{baiduMap:o.BaiduMap},computed:{},watch:{resuletPoint:{handler:function(t,e){this.resizePoint(t)},immediate:!1,deep:!0},"config.initList":{handler:function(t,e){Array.isArray(t)&&t.length>0&&this.resizePoint(t)},immediate:!0,deep:!0},isShowModel:{handler:function(t,e){this.$Map&&this.$Marker&&this.updateConfig.initList&&this.updateConfig.isEdit&&(t||this.resizePoint())},immediate:!1,deep:!1}},mounted:function(){},methods:{handler:function(t){t.BMap,t.map;this.mainLoing=!0,this.getUserLocal(this.updateConfig.isEdit,this.center)},serchChange:function(t){this.address=t},serchAdress:function(){this.address&&""!==this.address?this.$LocalSearch&&this.$LocalSearch.search(this.address):Object(l.Message)({message:"请输入搜索地址",type:"error"})},serchResult:function(t){var e=t.Br||t.Ar,i=e[0].lng||e[0].point.lng,a=e[0].lat||e[0].point.lat;this.$Marker.setPosition(new BMap.Point(i,a)),this.$Map.setCenter(new BMap.Point(i,a)),this.resuletPoint=this.$Marker.getPosition(),this.setSerchText(new BMap.Point(this.resuletPoint.lng,this.resuletPoint.lat),"create"),this.output()},mapInit:function(t,e){var i=new BMap.Map("map");this.$Map=i,this.$LocalSearch=new BMap.LocalSearch(i,{renderOptions:{autoViewport:!0}}),this.$Geocoder=new BMap.Geocoder,this.$LocalSearch.setSearchCompleteCallback(this.serchResult),i.centerAndZoom(t,e);var a=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE,enableGeolocation:!0});i.addControl(a),i.enableScrollWheelZoom(),i.enableInertialDragging(),i.enableAutoResize(),i.addControl(new BMap.MapTypeControl({mapTypes:[BMAP_NORMAL_MAP,BMAP_HYBRID_MAP]})),this.setMarke(t)},getUserLocal:function(t,e){var i=this;if(t){var a=this.updateConfig.initList;if(a&&Array.isArray(a)&&a.length>0){var n=s()(a,2),r=n[0],o=n[1];i.mapInit(new BMap.Point(r.value,o.value),15),i.setSerchText(new BMap.Point(r.value,o.value),"create")}else i.mapInit(new BMap.Point(e.lng,e.lat),15),i.setSerchText(new BMap.Point(e.lng,e.lat),"create")}else{(new BMap.Geolocation).getCurrentPosition(function(t){this.getStatus()===BMAP_STATUS_SUCCESS?(e.lng=t.point.lng,e.lat=t.point.lat,i.mapInit(new BMap.Point(t.point.lng,t.point.lat),18),i.setSerchText(new BMap.Point(t.point.lng,t.point.lat),"create")):(Object(l.Message)({message:"请开启浏览器定位功能！",type:"error"}),i.mainLoing=!1,i.uploadTrigger())})}},setMarke:function(t){var e=this.$Map,i=this,a=new BMap.Marker(t,{enableMassClear:!0,enableDragging:!0,raiseOnDrag:!0,title:"请您移动此坐标选择您的坐标",Animation:"BMAP_ANIMATION_BOUNCE"});e.addOverlay(a),a.addEventListener("dragend",function(){var t=a.getPosition();i.setSerchText(t),"normal"===i.updateConfig.model&&i.getPosition()}),this.$Marker=a,this.mainLoing=!1},setSerchText:function(t,e){var i=this;i.$Geocoder.getLocation(new BMap.Point(t.lng,t.lat),function(t){var a=t.addressComponents;"create"!==e&&(i.address=a.province+" "+a.city+" "+a.district+" "+a.street+" "+a.streetNumber)})},uploadTrigger:function(){this.isShowModel=!this.isShowModel},getPosition:function(){this.resuletPoint=this.$Marker.getPosition(),this.output()},resizePoint:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{lng:116.404288,lat:39.918242};if(this.$Map&&this.$Marker)if(Array.isArray(t)&&t.length>0){var e=s()(t,2),i=e[0],a=e[1];this.$Map.setCenter(new BMap.Point(i.value,a.value)),this.$Marker.setPosition(new BMap.Point(i.value,a.value)),this.setSerchText(new BMap.Point(i.value,a.value))}else this.$Map.setCenter(new BMap.Point(t.lng,t.lat)),this.$Marker.setPosition(new BMap.Point(t.lng,t.lat)),this.setSerchText(new BMap.Point(t.lng,t.lat))},output:function(){var t=this;this.$Geocoder.getLocation(new BMap.Point(t.resuletPoint.lng,t.resuletPoint.lat),function(e){var i=e.addressComponents,a=i.province+" "+i.city+" "+i.district+" "+i.street+" "+i.streetNumber,r=n()({address:a},t.resuletPoint);"[object Function]"===Object.prototype.toString.call(t.changeEvt)&&t.changeEvt(r,t.updateConfig.bindKey)})}},destroyed:function(){}},u=(i("Hx4K"),i("KHd+")),p=Object(u.a)(d,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",["dialog"===t.updateConfig.model?i("el-container",[i("el-main",{staticClass:"pad-no"},[i("el-button",{attrs:{size:"small"},on:{click:t.uploadTrigger}},[t._v("选择坐标")])],1)],1):t._e(),t._v(" "),"normal"===t.updateConfig.model?i("el-container",{staticClass:"map--modelbox normal"},[i("el-main",{staticStyle:{overflow:"hidden"}},[i("el-input",{staticClass:"serch",attrs:{placeholder:"请输入内容",size:"medium"},on:{change:t.serchChange},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}},[i("template",{attrs:{icon:"el-icon-search"},slot:"append"},[i("el-button",{on:{click:t.serchAdress}},[t._v("搜索地址")])],1)],2),t._v(" "),i("baidu-map",{staticClass:"bm-view",attrs:{id:"map",center:t.center,ak:"oi86AVnQ0bsKV8rtcQiBFyxlHmdPNY2o"},on:{ready:t.handler}}),t._v(" "),i("span",{staticClass:"font-help"},[t._v("提示：请拖动定位图标选择地址(如果定位地址与当前地址距离较远，请长按鼠标抓取定位图标不放后鼠标滚轮缩放地图定位)")])],1)],1):t._e(),t._v(" "),"dialog"===t.updateConfig.model?i("el-dialog",{attrs:{title:"","append-to-body":!0,visible:t.isShowModel},on:{"update:visible":function(e){t.isShowModel=e}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowModel,expression:"isShowModel"},{name:"loading",rawName:"v-loading",value:t.mainLoing,expression:"mainLoing"}],staticClass:"map--modelbox"},[i("el-container",{staticClass:"map-main"},[i("el-main",[i("el-input",{staticClass:"serch",attrs:{placeholder:"请输入内容",size:"medium"},on:{change:t.serchChange},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}},[i("template",{attrs:{icon:"el-icon-search"},slot:"append"},[i("el-button",{on:{click:t.serchAdress}},[t._v("搜索地址")])],1)],2),t._v(" "),i("baidu-map",{staticClass:"bm-view",attrs:{id:"map",center:t.center,ak:"oi86AVnQ0bsKV8rtcQiBFyxlHmdPNY2o"},on:{ready:t.handler}}),t._v(" "),i("span",{staticClass:"font-help"},[t._v("提示：请拖动定位图标选择地址(如果定位地址与当前地址距离较远，请长按鼠标抓取定位图标不放后鼠标滚轮缩放地图定位)")])],1),t._v(" "),i("el-footer",{staticClass:"footer flex-row flex-align-c flex-justify-b"},[i("div",{staticClass:"flex-row flex-align-c flex-justify-b footer-button"},[i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary"},on:{click:t.getPosition}},[t._v("确认")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"info",plain:""},on:{click:t.uploadTrigger}},[t._v("取消")])],1)])],1)],1)]):t._e()],1)},[],!1,null,"4dfb3d1d",null);p.options.__file="index.vue";e.a=p.exports},gKyT:function(t,e,i){},kbZS:function(t,e,i){"use strict";i.d(e,"a",function(){return s}),i.d(e,"d",function(){return o}),i.d(e,"c",function(){return l}),i.d(e,"b",function(){return c});var a=i("t3Un"),n=i("Qyje"),r=i.n(n);function s(t){var e=t.getwebPath;return Object(a.a)({url:"/m=utility&do=grab_image&token=2302018081011184865072836&url="+e,method:"get",params:{}})}function o(t){return Object(a.a)({url:"/uploadListImg",method:"post",data:r.a.stringify(t)})}function l(t){return Object(a.a)({url:"/outUpload",method:"post",data:r.a.stringify(t)})}function c(t){return Object(a.a)({url:"/orderInput",method:"post",data:t})}},ql8k:function(t,e,i){},uoE2:function(t,e,i){"use strict";var a=i("gKyT");i.n(a).a}}]);