(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-59af"],{ZGLp:function(t,e,a){"use strict";var r=a("x27u");a.n(r).a},hoR8:function(t,e,a){"use strict";a.d(e,"v",function(){return i}),a.d(e,"x",function(){return s}),a.d(e,"H",function(){return u}),a.d(e,"z",function(){return l}),a.d(e,"y",function(){return c}),a.d(e,"A",function(){return d}),a.d(e,"F",function(){return f}),a.d(e,"G",function(){return m}),a.d(e,"u",function(){return p}),a.d(e,"w",function(){return g}),a.d(e,"E",function(){return b}),a.d(e,"B",function(){return h}),a.d(e,"n",function(){return v}),a.d(e,"a",function(){return y}),a.d(e,"h",function(){return _}),a.d(e,"s",function(){return w}),a.d(e,"o",function(){return D}),a.d(e,"l",function(){return j}),a.d(e,"m",function(){return O}),a.d(e,"j",function(){return k}),a.d(e,"i",function(){return x}),a.d(e,"r",function(){return C}),a.d(e,"q",function(){return F}),a.d(e,"p",function(){return S}),a.d(e,"D",function(){return G}),a.d(e,"c",function(){return $}),a.d(e,"d",function(){return I}),a.d(e,"e",function(){return E}),a.d(e,"k",function(){return T}),a.d(e,"g",function(){return L}),a.d(e,"b",function(){return M}),a.d(e,"I",function(){return R}),a.d(e,"C",function(){return V}),a.d(e,"f",function(){return A}),a.d(e,"t",function(){return z});var r=a("t3Un"),o=a("Qyje"),n=a.n(o);function i(t){return Object(r.a)({url:"/goodsclassEdit",method:"post",data:n.a.stringify(t)})}function s(t){return Object(r.a)({url:"/goodsclassIndex",method:"post",data:n.a.stringify(t)})}function u(t){return Object(r.a)({url:"/serviceIndex",method:"post",data:n.a.stringify(t)})}function l(t){return Object(r.a)({url:"/parameterEdit",method:"post",data:n.a.stringify(t)})}function c(t){return Object(r.a)({url:"/parameteGet",method:"post",data:n.a.stringify(t)})}function d(t){return Object(r.a)({url:"/parameterIndex",method:"post",data:n.a.stringify(t)})}function f(t){return Object(r.a)({url:"/serviceEdit",method:"post",data:n.a.stringify(t)})}function m(t){return Object(r.a)({url:"/serviceGet",method:"post",data:n.a.stringify(t)})}function p(t){return Object(r.a)({url:"/goodsclassDelete",method:"post",data:n.a.stringify(t)})}function g(t){return Object(r.a)({url:"/goodsclassGet",method:"post",data:n.a.stringify(t)})}function b(t){return Object(r.a)({url:"/serlistDelete",method:"post",data:n.a.stringify(t)})}function h(t){return Object(r.a)({url:"/parlistDelete",method:"post",data:n.a.stringify(t)})}function v(t){return Object(r.a)({url:"/goodsIndex",method:"post",data:n.a.stringify(t)})}function y(t){return Object(r.a)({url:"/categoryIndex",method:"post",data:n.a.stringify(t)})}function _(t){return Object(r.a)({url:"/goodsAdd",method:"post",data:n.a.stringify(t)})}function w(t){return Object(r.a)({url:"/goodsServeListAll",method:"post",data:n.a.stringify(t)})}function D(t){return Object(r.a)({url:"/goodsParamListAll",method:"post",data:n.a.stringify(t)})}function j(t){return Object(r.a)({url:"/goodsEdit",method:"post",data:n.a.stringify(t)})}function O(t){return Object(r.a)({url:"/goodsGet",method:"post",data:n.a.stringify(t)})}function k(t){return Object(r.a)({url:"/goodsDelivery",method:"post",data:n.a.stringify(t)})}function x(t){return Object(r.a)({url:"/goodsDelete",method:"post",data:n.a.stringify(t)})}function C(t){return Object(r.a)({url:"/goodsRegainDel",method:"post",data:n.a.stringify(t)})}function F(t){return Object(r.a)({url:"/goodsRegain",method:"post",data:n.a.stringify(t)})}function S(t){return Object(r.a)({url:"/goodsRecovery",method:"post",data:n.a.stringify(t)})}function G(t){return Object(r.a)({url:"/reviseStatus",method:"post",data:n.a.stringify(t)})}function $(t){return Object(r.a)({url:"/editGoodsName",method:"post",data:n.a.stringify(t)})}function I(t){return Object(r.a)({url:"/editGoodsPrice",method:"post",data:n.a.stringify(t)})}function E(t){return Object(r.a)({url:"/editStockNum",method:"post",data:n.a.stringify(t)})}function T(t){return Object(r.a)({url:"/goodsDown",method:"post",data:n.a.stringify(t)})}function L(t){return Object(r.a)({url:"/getCommentList",method:"post",data:n.a.stringify(t)})}function M(t){return Object(r.a)({url:"/delComment",method:"post",data:n.a.stringify(t)})}function R(t){return Object(r.a)({url:"/setCommentShow",method:"post",data:n.a.stringify(t)})}function V(t){return Object(r.a)({url:"/replyComment",method:"post",data:n.a.stringify(t)})}function A(t){return Object(r.a)({url:"/getCommentDetail",method:"post",data:n.a.stringify(t)})}function z(t){return Object(r.a)({url:"/goodsUpper",method:"post",data:n.a.stringify(t)})}},slWK:function(t,e,a){"use strict";a.d(e,"k",function(){return i}),a.d(e,"m",function(){return s}),a.d(e,"i",function(){return u}),a.d(e,"j",function(){return l}),a.d(e,"n",function(){return c}),a.d(e,"H",function(){return d}),a.d(e,"G",function(){return f}),a.d(e,"I",function(){return m}),a.d(e,"J",function(){return p}),a.d(e,"l",function(){return g}),a.d(e,"b",function(){return b}),a.d(e,"d",function(){return h}),a.d(e,"A",function(){return v}),a.d(e,"r",function(){return y}),a.d(e,"w",function(){return _}),a.d(e,"z",function(){return w}),a.d(e,"C",function(){return D}),a.d(e,"p",function(){return j}),a.d(e,"t",function(){return O}),a.d(e,"f",function(){return k}),a.d(e,"e",function(){return x}),a.d(e,"h",function(){return C}),a.d(e,"E",function(){return F}),a.d(e,"y",function(){return S}),a.d(e,"D",function(){return G}),a.d(e,"g",function(){return $}),a.d(e,"v",function(){return I}),a.d(e,"a",function(){return E}),a.d(e,"F",function(){return T}),a.d(e,"B",function(){return L}),a.d(e,"u",function(){return M}),a.d(e,"o",function(){return R}),a.d(e,"s",function(){return V}),a.d(e,"c",function(){return A}),a.d(e,"x",function(){return z}),a.d(e,"q",function(){return P});var r=a("t3Un"),o=a("Qyje"),n=a.n(o);function i(t){return Object(r.a)({url:"/couponEditOrAdd",method:"post",data:n.a.stringify(t)})}function s(t){return Object(r.a)({url:"/couponList",method:"post",data:n.a.stringify(t)})}function u(t){return Object(r.a)({url:"/couponDelete",method:"post",data:n.a.stringify(t)})}function l(t){return Object(r.a)({url:"/couponDetail",method:"post",data:n.a.stringify(t)})}function c(t){return Object(r.a)({url:"/couponOp",method:"post",data:n.a.stringify(t)})}function d(t){return Object(r.a)({url:"/smsSave",method:"post",data:n.a.stringify(t)})}function f(t){return Object(r.a)({url:"/smsGet",method:"post",data:n.a.stringify(t)})}function m(t){return Object(r.a)({url:"/smsTplGet",method:"post",data:n.a.stringify(t)})}function p(t){return Object(r.a)({url:"/smsTplSave",method:"post",data:n.a.stringify(t)})}function g(t){return Object(r.a)({url:"/couponInfo",method:"post",data:n.a.stringify(t)})}function b(t){return Object(r.a)({url:"/ReceiveInfoList",method:"post",data:n.a.stringify(t)})}function h(t){return Object(r.a)({url:"/addSpike",method:"post",data:n.a.stringify(t)})}function v(t){return Object(r.a)({url:"/getSpikeList",method:"post",data:n.a.stringify(t)})}function y(t){return Object(r.a)({url:"/delSpikeList",method:"post",data:n.a.stringify(t)})}function _(t){return Object(r.a)({url:"/getEditData",method:"post",data:n.a.stringify(t)})}function w(t){return Object(r.a)({url:"/getMemberCard",method:"post",data:n.a.stringify(t)})}function D(t){return Object(r.a)({url:"/memberAddEdit",method:"post",data:n.a.stringify(t)})}function j(t){return Object(r.a)({url:"/delDataCard",method:"post",data:n.a.stringify(t)})}function O(t){return Object(r.a)({url:"/getCardData",method:"post",data:n.a.stringify(t)})}function k(t){return Object(r.a)({url:"/cardSave",method:"post",data:n.a.stringify(t)})}function x(t){return Object(r.a)({url:"/cardGet",method:"post",data:n.a.stringify(t)})}function C(t){return Object(r.a)({url:"/changeCardSell",method:"post",data:n.a.stringify(t)})}function F(t){return Object(r.a)({url:"/selectedCard",method:"post",data:n.a.stringify(t)})}function S(t){return Object(r.a)({url:"/getMember",method:"post",data:n.a.stringify(t)})}function G(t){return Object(r.a)({url:"/memberUserAddEdit",method:"post",data:n.a.stringify(t)})}function $(t){return Object(r.a)({url:"/changeCancel",method:"post",data:n.a.stringify(t)})}function I(t){return Object(r.a)({url:"/getDataMemberFind",method:"post",data:n.a.stringify(t)})}function E(t){return Object(r.a)({url:"/MemberGoodsStatus",method:"post",data:n.a.stringify(t)})}function T(t){return Object(r.a)({url:"/setMemberGoodsPrice",method:"post",data:n.a.stringify(t)})}function L(t){return Object(r.a)({url:"/importMember",method:"post",data:t})}function M(t){return Object(r.a)({url:"/getCdKeyInfo",method:"post",data:n.a.stringify(t)})}function R(t){return Object(r.a)({url:"/createdCdKey",method:"post",data:n.a.stringify(t)})}function V(t){return Object(r.a)({url:"/destoryCdKey",method:"post",data:n.a.stringify(t)})}function A(t){return Object(r.a)({url:"/addGroups",method:"post",data:n.a.stringify(t)})}function z(t){return Object(r.a)({url:"/getGroupsList",method:"post",data:n.a.stringify(t)})}function P(t){return Object(r.a)({url:"/delGroups",method:"post",data:n.a.stringify(t)})}},te6r:function(t,e,a){"use strict";a.r(e);var r=a("m1cH"),o=a.n(r),n=a("gDS+"),i=a.n(n),s=a("vooH"),u=a("slWK"),l={mixins:[a("UC6z").a.getters("Form")],name:"SpikeMarketingAdd",components:{ChooseGoods:s.a},computed:{getPath:function(){return function(t){return t.includes("https://")||t.includes("http://")?""+t:a("XzFy")("./"+t)}}},data:function(){return{$index:-1,dialogTableVisible:!1,dialogVisibleImg:!1,imgPath:"",goodsName:"",currentRow:[],chooseGoodsConfig:{type:["chooseGoods"],model:"normal",disabled:[{label:"sale_type",value:0,reverse:!0}],initList:[]},platformConfig:{type:["image"],initList:[],isMore:!1,bindKey:{key:"image",model:"img"}},chooseData:[],formFormatData:{key:"userForm",model:{noCreateEdit:!1,bindDialog:"dialogTableVisible"},api:{editForm:{api:u.w,params:{id:""},filters:{choose:{bindInit:["chooseGoodsConfig"]}}},submitForm:u.d},formData:{title:"",span:"",limit:"",time:[],channel:[],is_distribution:1,goods:[]},rules:{}}}},methods:{saveForm:function(){""!==this.couponId&&0!==this.formFormatData.formData.couponData.suit_goods_type?this.$refs.chooseGoods.output():this.formFormatData.formData.suit_goods=[],this.formFormatSubmit({router:{type:"replace",path:"/application/couponMarketing",code:1}})},filtersChange:function(t){var e=this;this.currentRow=t.currentRow;var a=t.displayData;a.map(function(t){t.attr=JSON.parse(i()([].concat(o()(t.sku)))),t.attr.map(function(e){10===t.spec_type?e.spec_id=-1:20===t.spec_type&&(e.spec_id=e.goods_sku_id),e.price="",e.stock="",e.is_use=1})}),a.map(function(t){-1===e.formFormatData.formData.goods.findIndex(function(e){return e.goods_id===t.goods_id})&&e.formFormatData.formData.goods.push(t)})},goodsToogle:function(){this.$refs.chooseGoods.currentRow=this.currentRow,this.$refs.chooseGoods.toggle()},deleteTable:function(t){this.formFormatData.formData.goods.splice(t.$index,1),this.currentRow.splice(t.$index,1)},showDialog:function(t,e,a){t&&(this.$index=t.$index,this.imgPath=e,this.goodsName=a,this.dialogTableVisible=!0)}}},c=(a("ZGLp"),a("KHd+")),d=Object(c.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"spike-marketing-add views-container"},[a("el-dialog",{attrs:{visible:t.dialogVisibleImg,width:"50%","custom-class":"reset-pwd wlm-form-dialog dialog-table"},on:{"update:visible":function(e){t.dialogVisibleImg=e}}},[a("div",{staticClass:"wlm-form"},[a("div",{staticClass:"wlm-form-header wlm-dialog-fixheader"},[a("span",{staticClass:"wlm-dialog-inlenr"},[t._v("活动标签")])]),t._v(" "),a("div",{staticClass:"flex-row flex-justify-c",staticStyle:{margin:"20px 0"}},[a("img",{attrs:{height:"600",src:t.getPath("miaosha.jpg"),alt:""}})])])]),t._v(" "),a("el-dialog",{attrs:{width:"60%",visible:t.dialogTableVisible,"custom-class":"reset-pwd wlm-form-dialog dialog-table"},on:{close:t.resetDialogFormData,"update:visible":function(e){t.dialogTableVisible=e}}},[t.dialogTableVisible?a("div",{staticClass:"wlm-form"},[a("div",{staticClass:"wlm-form-header wlm-dialog-fixheader"},[a("span",{staticClass:"wlm-dialog-inlenr"},[t._v("设置秒杀")])]),t._v(" "),a("el-scrollbar",{attrs:{"wrap-class":"scrollbar-wrapper"}},[a("div",{staticClass:"wlm-form-content"},[a("div",{staticClass:"wlm-dialog-main"},[t.formFormatData.formData.goods[t.$index]?a("div",{staticClass:"wlm-dialog-content"},[a("div",{staticClass:"flex-row flex-align-c",staticStyle:{"margin-bottom":"10px"}},[a("span",{staticStyle:{"margin-right":"10px"}},[t._v("当前商品")]),t._v(" "),a("img",{staticStyle:{margin:"0 6px"},attrs:{height:"50",width:"50",src:t.imgPath,alt:""}}),t._v(" "),a("p",[t._v(t._s(t.goodsName))])]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.formFormatData.formData.goods[t.$index].attr}},[a("el-table-column",{attrs:{prop:"date",label:"商品规格"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"价格"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.goods_price))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"库存"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.stock_num))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"秒杀价"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{staticStyle:{width:"110px"},model:{value:e.row.price,callback:function(a){t.$set(e.row,"price",a)},expression:"scope.row.price"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"秒杀库存"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{staticStyle:{width:"110px"},model:{value:e.row.stock,callback:function(a){t.$set(e.row,"stock",a)},expression:"scope.row.stock"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"是否秒杀"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":2},model:{value:e.row.is_use,callback:function(a){t.$set(e.row,"is_use",a)},expression:"scope.row.is_use"}})]}}])})],1)],1):t._e()])])])],1):t._e(),t._v(" "),a("footer",{staticClass:"flex-row flex-align-c flex-justify-c wlm-dialog-fixfooter"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("确定")])],1)]),t._v(" "),a("div",{staticClass:"wlm-form"},[a("div",{staticClass:"wlm-form-header"},[t._v(t._s((t.formFormatData.api.editForm.params.id?"编辑":"添加")+"秒杀"))]),t._v(" "),a("div",{staticClass:"wlm-form-content"},[a("el-form",{ref:t.formFormatData.key,staticClass:"retail-form",attrs:{disabled:t.$route.query.disabled,model:t.formFormatData.formData,rules:t.formFormatData.rules,size:"small","label-width":"120px","label-position":"right"}},[a("el-form-item",{attrs:{label:"活动名称"}},[a("el-input",{model:{value:t.formFormatData.formData.title,callback:function(e){t.$set(t.formFormatData.formData,"title","string"==typeof e?e.trim():e)},expression:"formFormatData.formData.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"活动标签"}},[a("el-input",{staticStyle:{display:"block"},model:{value:t.formFormatData.formData.span,callback:function(e){t.$set(t.formFormatData.formData,"span",e)},expression:"formFormatData.formData.span"}}),t._v(" "),a("div",[a("span",{staticClass:"form-help"},[t._v("展示在商品详情页 ")]),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialogVisibleImg=!0}}},[t._v("点击查看示例")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"活动时间"}},[a("el-date-picker",{staticStyle:{width:"360px"},attrs:{"value-format":"timestamp",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.formFormatData.formData.time,callback:function(e){t.$set(t.formFormatData.formData,"time",e)},expression:"formFormatData.formData.time"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"活动渠道"}},[a("el-checkbox-group",{model:{value:t.formFormatData.formData.channel,callback:function(e){t.$set(t.formFormatData.formData,"channel",e)},expression:"formFormatData.formData.channel"}},[a("el-checkbox",{attrs:{label:"0"}},[t._v("小程序")]),t._v(" "),a("el-checkbox",{attrs:{label:"1"}},[t._v("H5")]),t._v(" "),a("el-checkbox",{attrs:{label:"2"}},[t._v("公众号")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"每人限购"}},[a("el-input",{staticStyle:{width:"120px"},model:{value:t.formFormatData.formData.limit,callback:function(e){t.$set(t.formFormatData.formData,"limit",e)},expression:"formFormatData.formData.limit"}},[a("template",{slot:"append"},[t._v("件")])],2),t._v(" "),a("div",{staticClass:"form-help"},[t._v("针对一种商品的购买数量")])],1),t._v(" "),a("el-form-item",{attrs:{label:"是否分销"}},[a("el-radio-group",{model:{value:t.formFormatData.formData.is_distribution,callback:function(e){t.$set(t.formFormatData.formData,"is_distribution",e)},expression:"formFormatData.formData.is_distribution"}},[a("el-radio",{attrs:{label:1}},[t._v("分销")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("不分销")])],1),t._v(" "),a("div",{staticClass:"form-help"},[t._v("选择分销，佣金比例按照默认规则")])],1),t._v(" "),a("el-form-item",{attrs:{label:"秒杀商品"}},[a("choose-goods",{ref:"chooseGoods",attrs:{config:t.chooseGoodsConfig,changeEvt:t.filtersChange}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.goodsToogle}},[t._v("秒杀商品")]),t._v(" "),a("div",{staticClass:"form-help"},[t._v("选择参加秒杀的商品")]),t._v(" "),""!=t.formFormatData.formData.goods?a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.formFormatData.formData.goods}},[a("el-table-column",{attrs:{prop:"date",label:"商品"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"flex-row"},[e.row.image&&e.row.image[0]?a("img",{staticClass:"logo",attrs:{src:e.row.image[0].file_path}}):t._e(),t._v(" "),a("div",{staticClass:"inner-text"},[a("p",[t._v(t._s(e.row.goods_name))]),t._v(" "),a("span",[t._v("￥:"+t._s(e.row.attr[0].goods_price))])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"库存"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.stock))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"秒杀设置"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.attr&&-1!=e.row.attr[0].spec_id?a("div",[a("el-button",{attrs:{plain:""},on:{click:function(a){t.showDialog(e,e.row.image[0].file_path,e.row.goods_name)}}},[t._v("设置秒杀价与库存")])],1):t._e(),t._v(" "),e.row.attr&&-1==e.row.attr[0].spec_id?a("div",{staticClass:"flex-row"},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"秒杀价"},model:{value:e.row.attr[0].price,callback:function(a){t.$set(e.row.attr[0],"price",t._n(a))},expression:"scope.row.attr[0]['price']"}}),t._v(" "),a("el-input",{staticStyle:{width:"200px","margin-left":"20px"},attrs:{placeholder:"秒杀库存"},model:{value:e.row.attr[0].stock,callback:function(a){t.$set(e.row.attr[0],"stock",t._n(a))},expression:"scope.row.attr[0]['stock']"}})],1):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"operation-group"},[a("el-button",{staticClass:"wlm-text",attrs:{type:"text"},on:{click:function(a){t.deleteTable(e)}}},[t._v("删除")])],1)]}}])})],1):t._e()],1)],1)],1)]),t._v(" "),a("div",{staticClass:"wlm-fixed-btn flex-row flex-align-c flex-justify-c"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.formFormatSubmit({router:{type:"replace",path:"/application/spikeMarketing",code:1}})}}},[t._v("保存")]),t._v(" "),a("router-link",{attrs:{tag:"span",to:"/application/spikeMarketing"}},[a("el-button",{attrs:{size:"small"}},[t._v("返回")])],1)],1)],1)},[],!1,null,"4975195a",null);d.options.__file="spikeMarketingAdd.vue";e.default=d.exports},x27u:function(t,e,a){}}]);