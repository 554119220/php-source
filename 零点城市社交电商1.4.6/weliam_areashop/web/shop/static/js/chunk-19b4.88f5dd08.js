(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-19b4"],{AvSg:function(t,a,o){"use strict";o.r(a);var r=o("slWK"),e=o("vooH"),n=o("UC6z"),i=o("pj2Z"),u=function(t,a,o){var r=t.message;if(!Array.isArray(a)||Array.isArray(a)&&0===a.length)return o(new Error(r+"！~"));o()},s={mixins:[n.a.getters("Form")],name:"ManagementUserAdd",components:{ChooseGoods:e.a},directives:{},data:function(){var t=this;return{defaultMsg:"",pickerOptions:{disabledDate:function(t){var a=new Date,o=a.getFullYear(),r=a.getMonth()+1,e=a.getDate();return t.getTime()<new Date(o+"/"+r+"/"+e)}},chooseGoodsConfig:{type:["chooseGoods"],initList:[],model:"display",bindKey:{key:"suit_goods",model:"choose"}},formFormatData:{key:["base","use"],api:{editForm:{api:r.d,params:{id:""},redirect:"couponId",filters:{choose:{bindInit:["chooseGoodsConfig"]}}},submitForm:r.e},formData:{couponId:"",couponData:{coupon_type:20,name:"",total_num:"",discount:"",expire_type:10,limit_time:[],max_price_type:0,expire_day:"",rule:1,rule_min_money:"",suit_goods_type:0,get_limit_type:0,limit_num:"",use_desc:"",get_limit_num_type:0},suit_goods:[]},rules:{couponData:{discount:[{required:!0,validator:function(a,o,r){var e=t.formFormatData.formData.couponData.discount;return""===e?r(new Error("请添写优惠内容")):!Object(i.b)(e)||e<=0||e>=10?r(new Error("优惠折扣有误,请修改后提交")):void r()},trigger:"change"}]},suit_goods:[{message:"请选择适用商品",required:!1,validator:u,trigger:"blur"}]}}}},methods:{saveForm:function(){""!==this.couponId&&0!==this.formFormatData.formData.couponData.suit_goods_type?this.$refs.chooseGoods.output():this.formFormatData.formData.suit_goods=[],this.formFormatSubmit({router:{type:"replace",path:"/application/couponMarketing",code:1}})},chooseGoodsChange:function(t){this.formFormatData.formData.suit_goods=[],this.formFormatData.rules.suit_goods=0===t?[{message:"请选择适用商品",required:!1,trigger:"change"}]:[{message:"请选择适用商品",required:!0,validator:u,trigger:"change"}],console.log(this.formFormatData.rules.suit_goods)},infoChange:function(t){this.formFormatData.formData.couponData.use_desc=t},formFormatCallBack:function(t,a,o){if("editForm"===a){var r=o.data.data.couponData.use_desc,e=void 0===r?"":r;this.defaultMsg=e}}}},m=(o("fk2N"),o("KHd+")),l=Object(m.a)(s,function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"serving-merchandise-add views-container"},[o("div",{staticClass:"wlm-form"},[o("div",{staticClass:"wlm-form-header"},[t._v("基本信息")]),t._v(" "),o("div",{staticClass:"wlm-form-content"},[o("el-form",{ref:"base",staticClass:"retail-form",attrs:{model:t.formFormatData.formData,rules:t.formFormatData.rules,size:"small","label-width":"120px","label-position":"right"}},[o("el-form-item",{attrs:{label:"优惠券名称",prop:"couponData.name",rules:[{required:!0,message:"请输入优惠券名称",trigger:"blur"}]}},[o("el-input",{model:{value:t.formFormatData.formData.couponData.name,callback:function(a){t.$set(t.formFormatData.formData.couponData,"name","string"==typeof a?a.trim():a)},expression:"formFormatData.formData.couponData.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"发放总数",prop:"couponData.total_num",rules:[{required:!0,message:"请输入发放总数",trigger:"blur"}]}},[o("el-input",{model:{value:t.formFormatData.formData.couponData.total_num,callback:function(a){t.$set(t.formFormatData.formData.couponData,"total_num","string"==typeof a?a.trim():a)},expression:"formFormatData.formData.couponData.total_num"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"使用时间"}},[o("el-radio-group",{staticClass:"wlm-form-group flex-col no-top",attrs:{disabled:t.isFormEdit},on:{change:function(a){t.$refs.base.validateField("couponData.limit_time")}},model:{value:t.formFormatData.formData.couponData.expire_type,callback:function(a){t.$set(t.formFormatData.formData.couponData,"expire_type",a)},expression:"formFormatData.formData.couponData.expire_type"}},[o("el-radio",{attrs:{label:10}},[o("el-form-item",{staticClass:"inline",attrs:{label:"","label-width":"0",prop:"couponData.limit_time",rules:[{required:10===t.formFormatData.formData.couponData.expire_type,message:"请选择使用时间",trigger:"blur"}]}},[o("el-date-picker",{attrs:{disabled:t.isFormEdit,"picker-options":t.pickerOptions,"value-format":"timestamp",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.formFormatData.formData.couponData.limit_time,callback:function(a){t.$set(t.formFormatData.formData.couponData,"limit_time",a)},expression:"formFormatData.formData.couponData.limit_time"}})],1)],1),t._v(" "),o("el-radio",{attrs:{label:20}},[t._v("领券后当日可用")]),t._v(" "),o("el-radio",{attrs:{label:30}},[t._v("\r\n                            领券后次日起\r\n                            "),o("el-form-item",{staticClass:"inline",attrs:{label:"","label-width":"0",prop:"couponData.expire_day",rules:[{required:30===t.formFormatData.formData.couponData.expire_type,message:"请选择使用时间",trigger:"blur"}]}},[o("el-input",{staticStyle:{width:"80px"},model:{value:t.formFormatData.formData.couponData.expire_day,callback:function(a){t.$set(t.formFormatData.formData.couponData,"expire_day","string"==typeof a?a.trim():a)},expression:"formFormatData.formData.couponData.expire_day"}})],1),t._v("\r\n                            天内可用\r\n                        ")],1)],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"使用门槛"}},[o("el-radio-group",{staticClass:"wlm-form-group",attrs:{disabled:t.isFormEdit},model:{value:t.formFormatData.formData.couponData.rule,callback:function(a){t.$set(t.formFormatData.formData.couponData,"rule",a)},expression:"formFormatData.formData.couponData.rule"}},[o("el-radio",{attrs:{label:1}},[t._v("无门槛")]),t._v(" "),o("el-radio",{attrs:{label:0}},[t._v("有门槛")])],1)],1),t._v(" "),0===t.formFormatData.formData.couponData.rule?o("el-form-item",{attrs:{label:"",prop:"couponData.rule_min_money",rules:[{required:!0,message:"请输入消费门槛",trigger:"blur"}]}},[o("el-input",{attrs:{width:"50"},model:{value:t.formFormatData.formData.couponData.rule_min_money,callback:function(a){t.$set(t.formFormatData.formData.couponData,"rule_min_money",a)},expression:"formFormatData.formData.couponData.rule_min_money"}},[o("template",{slot:"prepend"},[t._v("消费满")]),t._v(" "),o("template",{slot:"append"},[t._v("元")])],2)],1):t._e(),t._v(" "),o("el-form-item",{attrs:{label:"优惠内容",prop:"couponData.discount"}},[o("el-input",{attrs:{disabled:t.isFormEdit,width:"50"},model:{value:t.formFormatData.formData.couponData.discount,callback:function(a){t.$set(t.formFormatData.formData.couponData,"discount",t._n(a))},expression:"formFormatData.formData.couponData.discount"}},[o("template",{slot:"prepend"},[t._v("打")]),t._v(" "),o("template",{slot:"append"},[t._v("折")])],2),t._v(" "),o("p",{staticClass:"form-help"},[t._v("优惠折扣范围 (0~10)")])],1),t._v(" "),o("el-form-item",{attrs:{label:"",prop:"couponData.max_price",rules:[{required:1==t.formFormatData.formData.couponData.max_price_type,message:"请输入最多优惠金额",trigger:"blur"}]}},[o("el-checkbox",{staticStyle:{"margin-right":"10px"},attrs:{disabled:t.isFormEdit,"true-label":1,"false-label":0},model:{value:t.formFormatData.formData.couponData.max_price_type,callback:function(a){t.$set(t.formFormatData.formData.couponData,"max_price_type",a)},expression:"formFormatData.formData.couponData.max_price_type"}},[t._v("最多优惠")]),t._v(" "),o("el-input",{attrs:{disabled:t.isFormEdit,width:"50"},model:{value:t.formFormatData.formData.couponData.max_price,callback:function(a){t.$set(t.formFormatData.formData.couponData,"max_price",a)},expression:"formFormatData.formData.couponData.max_price"}},[o("template",{slot:"append"},[t._v("元")])],2)],1)],1)],1)]),t._v(" "),o("div",{staticClass:"wlm-form"},[o("div",{staticClass:"wlm-form-header"},[t._v("领取使用")]),t._v(" "),o("div",{staticClass:"wlm-form-content"},[o("el-form",{ref:"use",staticClass:"retail-form",attrs:{model:t.formFormatData.formData,rules:t.formFormatData.rules,size:"small","label-width":"120px","label-position":"right"}},[o("el-form-item",{attrs:{label:"适用商品"}},[o("el-radio-group",{staticClass:"wlm-form-group flex-col",on:{change:t.chooseGoodsChange},model:{value:t.formFormatData.formData.couponData.suit_goods_type,callback:function(a){t.$set(t.formFormatData.formData.couponData,"suit_goods_type",a)},expression:"formFormatData.formData.couponData.suit_goods_type"}},[o("el-radio",{attrs:{label:0}},[t._v("\r\n                            全部商品可用\r\n                        ")]),t._v(" "),o("el-radio",{attrs:{label:1}},[t._v("\r\n                            部分商品可用\r\n                        ")]),t._v(" "),o("el-radio",{attrs:{label:2}},[t._v("\r\n                            部分商品不可用\r\n                        ")])],1)],1),t._v(" "),0!==t.formFormatData.formData.couponData.suit_goods_type?o("el-form-item",{attrs:{label:"",prop:"suit_goods"}},[o("choose-goods",{ref:"chooseGoods",attrs:{config:t.chooseGoodsConfig,changeEvt:t.formFormatFiltersChange}})],1):t._e(),t._v(" "),o("el-form-item",{attrs:{label:"领取人限制"}},[o("el-radio-group",{staticClass:"wlm-form-group flex-col",model:{value:t.formFormatData.formData.couponData.get_limit_type,callback:function(a){t.$set(t.formFormatData.formData.couponData,"get_limit_type",a)},expression:"formFormatData.formData.couponData.get_limit_type"}},[o("el-radio",{attrs:{label:0}},[t._v("所有人均可领取")]),t._v(" "),o("el-radio",{attrs:{label:1}},[t._v("会员可领取")])],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"领取次数",prop:"couponData.limit_num",rules:[{required:1===t.formFormatData.formData.couponData.get_limit_num_type,message:"请输入领取次数",trigger:"blur"}]}},[o("el-radio-group",{staticClass:"wlm-form-group flex-col",model:{value:t.formFormatData.formData.couponData.get_limit_num_type,callback:function(a){t.$set(t.formFormatData.formData.couponData,"get_limit_num_type",a)},expression:"formFormatData.formData.couponData.get_limit_num_type"}},[o("el-radio",{attrs:{label:0}},[t._v("不限次数")]),t._v(" "),o("el-radio",{attrs:{label:1}},[t._v("\r\n                            最多领取\r\n                            "),o("el-input",{staticStyle:{width:"50px"},model:{value:t.formFormatData.formData.couponData.limit_num,callback:function(a){t.$set(t.formFormatData.formData.couponData,"limit_num","string"==typeof a?a.trim():a)},expression:"formFormatData.formData.couponData.limit_num"}}),t._v("\r\n                            次\r\n                        ")],1)],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"使用说明"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:4}}})],1)],1)],1)]),t._v(" "),o("div",{staticClass:"wlm-fixed-btn flex-row flex-align-c flex-justify-c"},[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveForm}},[t._v("保存")]),t._v(" "),o("router-link",{attrs:{tag:"span",to:"/application/couponMarketing"}},[o("el-button",{attrs:{size:"small"}},[t._v("返回")])],1)],1)])},[],!1,null,"1ca3d04c",null);l.options.__file="couponMarketingDiscountAdd.vue";a.default=l.exports},fk2N:function(t,a,o){"use strict";var r=o("l24E");o.n(r).a},hoR8:function(t,a,o){"use strict";o.d(a,"v",function(){return i}),o.d(a,"x",function(){return u}),o.d(a,"H",function(){return s}),o.d(a,"z",function(){return m}),o.d(a,"y",function(){return l}),o.d(a,"A",function(){return c}),o.d(a,"F",function(){return f}),o.d(a,"G",function(){return d}),o.d(a,"u",function(){return p}),o.d(a,"w",function(){return D}),o.d(a,"E",function(){return g}),o.d(a,"B",function(){return _}),o.d(a,"n",function(){return b}),o.d(a,"a",function(){return y}),o.d(a,"h",function(){return h}),o.d(a,"s",function(){return v}),o.d(a,"o",function(){return F}),o.d(a,"l",function(){return j}),o.d(a,"m",function(){return x}),o.d(a,"j",function(){return O}),o.d(a,"i",function(){return w}),o.d(a,"r",function(){return k}),o.d(a,"q",function(){return C}),o.d(a,"p",function(){return E}),o.d(a,"D",function(){return G}),o.d(a,"c",function(){return $}),o.d(a,"d",function(){return S}),o.d(a,"e",function(){return q}),o.d(a,"k",function(){return A}),o.d(a,"g",function(){return I}),o.d(a,"b",function(){return L}),o.d(a,"I",function(){return z}),o.d(a,"C",function(){return M}),o.d(a,"f",function(){return R}),o.d(a,"t",function(){return U});var r=o("t3Un"),e=o("Qyje"),n=o.n(e);function i(t){return Object(r.a)({url:"/goodsclassEdit",method:"post",data:n.a.stringify(t)})}function u(t){return Object(r.a)({url:"/goodsclassIndex",method:"post",data:n.a.stringify(t)})}function s(t){return Object(r.a)({url:"/serviceIndex",method:"post",data:n.a.stringify(t)})}function m(t){return Object(r.a)({url:"/parameterEdit",method:"post",data:n.a.stringify(t)})}function l(t){return Object(r.a)({url:"/parameteGet",method:"post",data:n.a.stringify(t)})}function c(t){return Object(r.a)({url:"/parameterIndex",method:"post",data:n.a.stringify(t)})}function f(t){return Object(r.a)({url:"/serviceEdit",method:"post",data:n.a.stringify(t)})}function d(t){return Object(r.a)({url:"/serviceGet",method:"post",data:n.a.stringify(t)})}function p(t){return Object(r.a)({url:"/goodsclassDelete",method:"post",data:n.a.stringify(t)})}function D(t){return Object(r.a)({url:"/goodsclassGet",method:"post",data:n.a.stringify(t)})}function g(t){return Object(r.a)({url:"/serlistDelete",method:"post",data:n.a.stringify(t)})}function _(t){return Object(r.a)({url:"/parlistDelete",method:"post",data:n.a.stringify(t)})}function b(t){return Object(r.a)({url:"/goodsIndex",method:"post",data:n.a.stringify(t)})}function y(t){return Object(r.a)({url:"/categoryIndex",method:"post",data:n.a.stringify(t)})}function h(t){return Object(r.a)({url:"/goodsAdd",method:"post",data:n.a.stringify(t)})}function v(t){return Object(r.a)({url:"/goodsServeListAll",method:"post",data:n.a.stringify(t)})}function F(t){return Object(r.a)({url:"/goodsParamListAll",method:"post",data:n.a.stringify(t)})}function j(t){return Object(r.a)({url:"/goodsEdit",method:"post",data:n.a.stringify(t)})}function x(t){return Object(r.a)({url:"/goodsGet",method:"post",data:n.a.stringify(t)})}function O(t){return Object(r.a)({url:"/goodsDelivery",method:"post",data:n.a.stringify(t)})}function w(t){return Object(r.a)({url:"/goodsDelete",method:"post",data:n.a.stringify(t)})}function k(t){return Object(r.a)({url:"/goodsRegainDel",method:"post",data:n.a.stringify(t)})}function C(t){return Object(r.a)({url:"/goodsRegain",method:"post",data:n.a.stringify(t)})}function E(t){return Object(r.a)({url:"/goodsRecovery",method:"post",data:n.a.stringify(t)})}function G(t){return Object(r.a)({url:"/reviseStatus",method:"post",data:n.a.stringify(t)})}function $(t){return Object(r.a)({url:"/editGoodsName",method:"post",data:n.a.stringify(t)})}function S(t){return Object(r.a)({url:"/editGoodsPrice",method:"post",data:n.a.stringify(t)})}function q(t){return Object(r.a)({url:"/editStockNum",method:"post",data:n.a.stringify(t)})}function A(t){return Object(r.a)({url:"/goodsDown",method:"post",data:n.a.stringify(t)})}function I(t){return Object(r.a)({url:"/getCommentList",method:"post",data:n.a.stringify(t)})}function L(t){return Object(r.a)({url:"/delComment",method:"post",data:n.a.stringify(t)})}function z(t){return Object(r.a)({url:"/setCommentShow",method:"post",data:n.a.stringify(t)})}function M(t){return Object(r.a)({url:"/replyComment",method:"post",data:n.a.stringify(t)})}function R(t){return Object(r.a)({url:"/getCommentDetail",method:"post",data:n.a.stringify(t)})}function U(t){return Object(r.a)({url:"/goodsUpper",method:"post",data:n.a.stringify(t)})}},l24E:function(t,a,o){},slWK:function(t,a,o){"use strict";o.d(a,"e",function(){return i}),o.d(a,"g",function(){return u}),o.d(a,"c",function(){return s}),o.d(a,"d",function(){return m}),o.d(a,"h",function(){return l}),o.d(a,"m",function(){return c}),o.d(a,"l",function(){return f}),o.d(a,"n",function(){return d}),o.d(a,"o",function(){return p}),o.d(a,"f",function(){return D}),o.d(a,"a",function(){return g}),o.d(a,"b",function(){return _}),o.d(a,"k",function(){return b}),o.d(a,"i",function(){return y}),o.d(a,"j",function(){return h});var r=o("t3Un"),e=o("Qyje"),n=o.n(e);function i(t){return Object(r.a)({url:"/couponEditOrAdd",method:"post",data:n.a.stringify(t)})}function u(t){return Object(r.a)({url:"/couponList",method:"post",data:n.a.stringify(t)})}function s(t){return Object(r.a)({url:"/couponDelete",method:"post",data:n.a.stringify(t)})}function m(t){return Object(r.a)({url:"/couponDetail",method:"post",data:n.a.stringify(t)})}function l(t){return Object(r.a)({url:"/couponOp",method:"post",data:n.a.stringify(t)})}function c(t){return Object(r.a)({url:"/smsSave",method:"post",data:n.a.stringify(t)})}function f(t){return Object(r.a)({url:"/smsGet",method:"post",data:n.a.stringify(t)})}function d(t){return Object(r.a)({url:"/smsTplGet",method:"post",data:n.a.stringify(t)})}function p(t){return Object(r.a)({url:"/smsTplSave",method:"post",data:n.a.stringify(t)})}function D(t){return Object(r.a)({url:"/couponInfo",method:"post",data:n.a.stringify(t)})}function g(t){return Object(r.a)({url:"/ReceiveInfoList",method:"post",data:n.a.stringify(t)})}function _(t){return Object(r.a)({url:"/addSpike",method:"post",data:n.a.stringify(t)})}function b(t){return Object(r.a)({url:"/getSpikeList",method:"post",data:n.a.stringify(t)})}function y(t){return Object(r.a)({url:"/delSpikeList",method:"post",data:n.a.stringify(t)})}function h(t){return Object(r.a)({url:"/getEditData",method:"post",data:n.a.stringify(t)})}}}]);