(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-061e"],{CjaD:function(t,e,a){},"K1n/":function(t,e,a){"use strict";a.r(e);var l=a("slWK"),o=a("UC6z"),n=a("E5uR"),s={mixins:[o.a.getters("Table")],name:"CouponMarketing",components:{ShareLink:n.a,couponRender:{template:'<span><slot name="title"></slot><span class="text-danger"><slot name="price"></slot></span><slot name="tail"></slot></span>'}},filters:{numFilter:function(t){var e=parseFloat(t).toFixed(3);return e.substring(0,e.length-1)}},data:function(){return{dialogTableVisible:!1,filters:{addZero:function(t){return t.toFixed(2)}},shareLinkConfig:{api:{getters:l.h},params:{qrUrl:"",linkUrl:"",imgPath:"",op:"spread"}},platformList:[{name:"shang",data:[]}],coupon_status:{1:"进行中",2:"已失效",3:"已停止"},coupon_type:{10:"满减券",20:"折扣券",30:"运费券",40:"随机券"},coupon_price:{10:{textRule:"满",textPrev:"减免",textLast:"元"},20:{textRule:"满",textPrev:"打",textLast:"折"},30:{textRule:"满",textPrev:"减免",textLast:"元"},40:{textRule:"满",textPrev:"范围内随机",textLast:"元"}},coupon_type_path:{10:"/application/couponMarketingFullAdd",20:"/application/couponMarketingDiscountAdd",30:"/application/couponMarketingFreightAdd",40:"/application/couponMarketingRandomAdd"},tableFormatData:{current:"couponmarketing",couponmarketing:{key:"couponmarketing",api:{getList:l.g,delList:l.c},tableData:[],files:{ids:[],name:"",checkall:"0",Recycle:"1",couponType:"0",couponStatus:"0",redirect:"coupon_id"},change:{stop:{name:"停止",key:"stop",api:l.h}},pagination:{pindex:1,list_rows:10,pagesizes:[10,20,50],total:10}}}}},methods:{handleSelect:function(t,e){this.$refs.carousel.setActiveItem(t)},sharelink:function(t){var e=this;Object(l.h)({couponId:t,op:"tg"}).then(function(t){var a=t.data.data;e.shareLinkConfig.params.imgPath=a}),this.shareLinkConfig.params.couponId=t,this.$refs.sharelink.toggle()}}},i=(a("YsgN"),a("KHd+")),r=Object(i.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"coupon-marketing views-container"},[a("share-link",{ref:"sharelink",attrs:{config:t.shareLinkConfig}},[a("template",{slot:"title"},[t._v("-优惠券")])],2),t._v(" "),a("div",{staticClass:"wlm-table no-bg"},[a("div",{staticClass:"wlm-table-content"},[a("el-carousel",{ref:"carousel",staticClass:"wlm-carousel",attrs:{arrow:"never",autoplay:!1,"indicator-position":"none",trigger:"click",height:"130px"}},t._l(t.platformList,function(e){return a("el-carousel-item",{key:e.name,attrs:{name:e.name}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"plugin-item flex-row"},[a("div",{staticClass:"flex-col flex-justify-b scale-grow",staticStyle:{position:"relative"}},[a("div",[a("div",{staticClass:"flex-row flex-justify-b"},[a("div",{staticClass:"item-title"},[t._v("满减券")]),t._v(" "),a("div",[a("router-link",{attrs:{tag:"span",to:"/application/couponMarketingFullAdd"}},[a("el-button",{attrs:{type:"primary",size:"small"}},[t._v("立即创建")])],1)],1)])]),t._v(" "),a("div",{staticClass:"item-text"},[t._v("满足优惠条件立享减免")])])])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"plugin-item flex-row"},[a("div",{staticClass:"flex-col flex-justify-b scale-grow",staticStyle:{position:"relative"}},[a("div",[a("div",{staticClass:"flex-row flex-justify-b"},[a("div",{staticClass:"item-title"},[t._v("折扣券")]),t._v(" "),a("div",[a("router-link",{attrs:{tag:"span",to:"/application/couponMarketingDiscountAdd"}},[a("el-button",{attrs:{type:"primary",size:"small"}},[t._v("立即创建")])],1)],1)])]),t._v(" "),a("div",{staticClass:"item-text"},[t._v("满足折扣立享折扣")])])])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"plugin-item flex-row"},[a("div",{staticClass:"flex-col flex-justify-b scale-grow",staticStyle:{position:"relative"}},[a("div",[a("div",{staticClass:"flex-row flex-justify-b"},[a("div",{staticClass:"item-title"},[t._v("运费券")]),t._v(" "),a("div",[a("router-link",{attrs:{tag:"span",to:"/application/couponMarketingFreightAdd"}},[a("el-button",{attrs:{type:"primary",size:"small"}},[t._v("立即创建")])],1)],1)])]),t._v(" "),a("div",{staticClass:"item-text"},[t._v("满足条件立享减免运费")])])])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"plugin-item flex-row"},[a("div",{staticClass:"flex-col flex-justify-b scale-grow",staticStyle:{position:"relative"}},[a("div",[a("div",{staticClass:"flex-row flex-justify-b"},[a("div",{staticClass:"item-title"},[t._v("随机券")]),t._v(" "),a("div",[a("router-link",{attrs:{tag:"span",to:"/application/couponMarketingRandomAdd"}},[a("el-button",{attrs:{type:"primary",size:"small"}},[t._v("立即创建")])],1)],1)])]),t._v(" "),a("div",{staticClass:"item-text"},[t._v("获得金额随机的优惠券")])])])])],1)],1)}))],1)]),t._v(" "),a("div",{staticClass:"wlm-table"},[a("div",{staticClass:"wlm-table-header"},[a("el-form",{staticClass:"retail-form",attrs:{model:t.tableFormatData.couponmarketing.files,size:"small","label-width":"100px","label-position":"right"}},[a("el-form-item",{staticClass:"filter",attrs:{label:""}},[a("el-form-item",{staticClass:"search",attrs:{label:"优惠券名称："}},[a("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"请输入优惠券名称"},model:{value:t.tableFormatData.couponmarketing.files.name,callback:function(e){t.$set(t.tableFormatData.couponmarketing.files,"name",e)},expression:"tableFormatData.couponmarketing.files.name"}})],1),t._v(" "),a("el-form-item",{staticClass:"search",attrs:{label:"优惠券类型："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.tableFormatData.couponmarketing.files.couponType,callback:function(e){t.$set(t.tableFormatData.couponmarketing.files,"couponType",e)},expression:"tableFormatData.couponmarketing.files.couponType"}},t._l([{lable:"全部",value:"0"},{lable:"满减券",value:"10"},{lable:"折扣券",value:"20"},{lable:"运费券",value:"30"},{lable:"随机券",value:"40"}],function(t){return a("el-option",{key:t.value,attrs:{label:t.lable,value:t.value}})}))],1)],1),t._v(" "),a("el-form-item",{staticClass:"filter-btns",attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:t.filesSerch}},[t._v("筛选")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:t.filesEmpty}},[t._v("清空筛选条件")])],1)],1)],1),t._v(" "),a("div",{staticClass:"wlm-table-content"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.filesSerch},model:{value:t.tableFormatData.couponmarketing.files.couponStatus,callback:function(e){t.$set(t.tableFormatData.couponmarketing.files,"couponStatus",e)},expression:"tableFormatData.couponmarketing.files.couponStatus"}},[a("el-tab-pane",{attrs:{label:"全部",name:"0"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"进行中",name:"1"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"已失效",name:"2"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"已停止",name:"3"}})],1),t._v(" "),a("el-table",{ref:t.tableFormatData.couponmarketing.key,staticStyle:{width:"100%"},attrs:{data:t.tableFormatData.couponmarketing.tableData},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"优惠券名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v(t._s(e.row.name))]),t._v(" "),a("div",{staticClass:"wlm-table-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("p",[t._v(t._s(e.row.name))])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"优惠券类型","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.coupon_type[""+e.row.coupon_type]))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"优惠券内容","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[a("couponRender",[e.row.coupon_type?a("template",{slot:"title"},[t._v("\r\n                                        "+t._s((0===e.row.rule?""+t.coupon_price[""+e.row.coupon_type].textRule+e.row.rule_min_money+"元":"")+" "+t.coupon_price[""+e.row.coupon_type].textPrev)+"\r\n                                    ")]):t._e(),t._v(" "),a("template",{slot:"price"},[t._v("\r\n                                        "+t._s(40===e.row.coupon_type?e.row.min+" - "+e.row.max:20===e.row.coupon_type?e.row.discount:e.row.reduce_price)+"\r\n                                    ")]),t._v(" "),e.row.coupon_type?a("template",{slot:"tail"},[t._v("\r\n                                        "+t._s(t.coupon_price[""+e.row.coupon_type].textLast)+"\r\n                                    ")]):t._e()],2)],1),t._v(" "),a("div",{staticClass:"wlm-table-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("couponRender",[e.row.coupon_type?a("template",{slot:"title"},[t._v("\r\n                                        "+t._s((0===e.row.rule?""+t.coupon_price[""+e.row.coupon_type].textRule+e.row.rule_min_money+"元":"")+" "+t.coupon_price[""+e.row.coupon_type].textPrev)+"\r\n                                    ")]):t._e(),t._v(" "),a("template",{slot:"price"},[t._v("\r\n                                        "+t._s(40===e.row.coupon_type?e.row.min+" - "+e.row.max:20===e.row.coupon_type?e.row.discount:e.row.reduce_price)+"\r\n                                    ")]),t._v(" "),e.row.coupon_type?a("template",{slot:"tail"},[t._v("\r\n                                        "+t._s(t.coupon_price[""+e.row.coupon_type].textLast)+"\r\n                                    ")]):t._e()],2)],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"总数/已领取","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.total_num+"/"+e.row.receive_num))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"已使用","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.useCount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.coupon_status[""+e.row.status]))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"支付金额","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"text-danger"},[t._v(t._s(e.row.turnover))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"客单价","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.unitPrice?a("span",{staticClass:"text-danger"},[t._v(t._s(t._f("numFilter")(e.row.unitPrice)))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"120",label:"操作","header-align":"center",align:"center",width:"290"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"operation-group"},[a("router-link",{staticClass:"wlm-text",attrs:{tag:"div",to:{path:"/application/couponMarketingRecords",query:{couponId:e.row.coupon_id}}}},[a("el-button",{attrs:{type:"text",size:"small"}},[t._v("效果数据")])],1),t._v(" "),a("div",{staticClass:"btn-line"}),t._v(" "),3!==e.row.status?a("el-button",{staticClass:"wlm-text",attrs:{type:"text"},on:{click:function(a){t.changeTableItem({couponId:e.row.coupon_id,op:"stop"},t.tableFormatData.couponmarketing.change.stop)}}},[t._v("停止")]):t._e(),t._v(" "),3===e.row.status?a("el-button",{staticClass:"wlm-text text-danger",attrs:{type:"text"},on:{click:function(a){t.changeTableItem({couponId:e.row.coupon_id,op:"go"},t.tableFormatData.couponmarketing.change.stop)}}},[t._v("已停止")]):t._e(),t._v(" "),a("div",{staticClass:"btn-line"}),t._v(" "),a("router-link",{staticClass:"wlm-text",attrs:{tag:"div",to:{path:t.coupon_type_path[""+e.row.coupon_type],query:{couponId:e.row.coupon_id}}}},[a("el-button",{attrs:{type:"text"}},[t._v("编辑")])],1),t._v(" "),a("div",{staticClass:"btn-line"}),t._v(" "),a("el-button",{staticClass:"wlm-text",attrs:{type:"text"},on:{click:function(a){t.sharelink(e.row.coupon_id)}}},[t._v("推广")])],1)]}}])})],1),t._v(" "),a("div",{staticClass:"pagination-content flex-row flex-justify-b flex-align-c"},[a("el-row",{staticClass:"pagination-btns"},[a("el-checkbox",{staticClass:"check-all",attrs:{"true-label":"1","false-label":"0"},on:{change:t.toggleSelection},model:{value:t.tableFormatData.couponmarketing.files.checkall,callback:function(e){t.$set(t.tableFormatData.couponmarketing.files,"checkall",e)},expression:"tableFormatData.couponmarketing.files.checkall"}},[t._v("全部")]),t._v(" "),a("el-button",{staticClass:"right-8",attrs:{disabled:t.isGroup,size:"mini"},on:{click:t.delTableList}},[t._v("删除")])],1),t._v(" "),a("el-pagination",{attrs:{disabled:!t.hasTableData,"current-page":t.tableFormatData.couponmarketing.pagination.page,"page-sizes":t.tableFormatData.couponmarketing.pagination.pagesizes,"page-size":t.tableFormatData.couponmarketing.pagination.list_rows,layout:"total, sizes, prev, pager, next, jumper",total:t.hasTableData?t.tableFormatData.couponmarketing.pagination.total:0},on:{"size-change":t.listPageChange,"current-change":t.listPageChange,"update:currentPage":function(e){t.$set(t.tableFormatData.couponmarketing.pagination,"page",e)},"update:pageSize":function(e){t.$set(t.tableFormatData.couponmarketing.pagination,"list_rows",e)}}})],1)],1)])],1)},[],!1,null,"9a201dfe",null);r.options.__file="couponMarketing.vue";e.default=r.exports},YsgN:function(t,e,a){"use strict";var l=a("CjaD");a.n(l).a}}]);