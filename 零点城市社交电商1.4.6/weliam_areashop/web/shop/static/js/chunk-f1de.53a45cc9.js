(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f1de"],{"/DRj":function(t,a,e){"use strict";e.r(a);var i=e("bfoT"),o={mixins:[e("UC6z").a.getters("Form")],name:"RemoteStorage",components:{},directives:{},computed:{isOpend:function(){return!!this.open},uploadReady:function(){return this.upload},loginQr:function(){return!!this.qrcode},isMask:function(){return!!this.mask}},data:function(){return{step:1,formLoading:!1,open:!1,upload:!1,qrCancel:!1,loginReady:!1,loginToggel:!0,qrcode:null,mask:null,formFormatData:{key:["publish"],api:{editForm:{api:i.d,params:{always:!0}}},formData:{edition:"-",name:"",new_edition:"-",qr_code:"",update_time:0},rules:{}}}},created:function(){this.formLoading=!0},methods:{loginQrSubmit:function(){},loginQrCode:function(){var t=this;this.loginReady=!0,this.loginToggel=!1,this.qrCancel=!1,this.mask=!1,Object(i.j)().then(function(a){var e=a.data.data.qrcode;e&&(t.qrcode=e,t.getLoginInfo())})},getLoginInfo:function(){var t=this;Object(i.i)().then(function(a){var e=a.data,o=e.code;0!==e.data.status?0===o?t.mask=!0:t.qrCancel||t.getLoginInfo():(t.upload=!0,Object(i.h)().then(function(a){var e=a.data,o=e.code,s=e.data.version,n=e.msg;t.qrCancel||(1===o?(t.formFormatData.formData.new_edition=s,Object(i.e)().then(function(a){var e=a.data,i=e.code,o=e.data,s=o.code,n=o.data.qrcode,r=o.msg;1===i&&0===s?(t.qrcode=n,t.step=2,t.$message.success(r)):t.$message.error(r),t.upload=!1}).catch(function(){t.upload=!1})):t.$message.error(n))}).catch(function(){t.upload=!1}))})},formFormatCallBack:function(t,a,e){var i=this;if("editForm"===a){this.formLoading=!1;var o=e.data.data.name,s=void 0===o?"":o;this.open=s,this.isOpend||this.$confirm("您还未完善小程序设置，请先完善信息后再查看~!","消息",{confirmButtonText:"确定",showCancelButton:!1,type:"warning"}).then(function(){i.$router.push({path:"/channel/weChatAppletsChannel"})}).catch(function(t){})}},loginQrCancel:function(){this.loginToggel=!0,this.loginReady=!1,this.qrCancel=!0}},destroyed:function(){this.qrCancel=!0}},s=(e("O6mx"),e("KHd+")),n=Object(s.a)(o,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"remote-storage views-container"},[t._m(0),t._v(" "),e("section",{staticClass:"flex-row flex-warp form-group"},[e("el-row",[e("el-col",{attrs:{span:12}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.formLoading,expression:"formLoading"}],staticClass:"wlm-form",staticStyle:{"margin-right":"20px","padding-bottom":"50px"}},[e("div",{staticClass:"wlm-form-header flex-row flex-justify-b"},[e("p",[t._v("线上版本"),e("span",{staticClass:"sub-title"},[t._v("版本号:"+t._s(t.formFormatData.formData.edition))])])]),t._v(" "),e("div",{staticClass:"wlm-form-content"},[t.isOpend?e("el-form",{ref:t.formFormatData.key,staticClass:"retail-form",attrs:{model:t.formFormatData.formData,rules:t.formFormatData.rules,size:"small","label-width":"120px","label-position":"right"}},[e("el-form-item",{attrs:{label:"小程序名称"}},[e("span",[t._v(t._s(t.formFormatData.formData.name))])]),t._v(" "),e("el-form-item",{attrs:{label:"提交时间"}},[t.formFormatData.formData.update_time?e("span",[t._v(t._s(t._f("parseTime")(t.formFormatData.formData.update_time,"{y}-{m}-{d} {h}:{i}:{s}")))]):t._e()]),t._v(" "),e("el-form-item",{attrs:{label:""}},[t.formFormatData.formData.qr_code?e("img",{staticClass:"qr-online",attrs:{src:t.formFormatData.formData.qr_code}}):t._e()])],1):t._e()],1)])]),t._v(" "),e("el-col",{attrs:{span:12}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.formLoading,expression:"formLoading"}],staticClass:"wlm-form",staticStyle:{"margin-left":"20px","padding-bottom":"70px"}},[e("div",{staticClass:"wlm-form-header flex-row flex-justify-b"},[e("p",[t._v("最新版本"),e("span",{staticClass:"sub-title"},[t._v("版本号:"+t._s(t.formFormatData.formData.new_edition))])])]),t._v(" "),e("div",{staticClass:"wlm-form-content"},[t.isOpend?e("el-steps",{attrs:{active:t.step,"align-center":""}},[e("el-step",{attrs:{title:"扫码登陆",description:"扫描二维码登录开发者工具"}}),t._v(" "),e("el-step",{attrs:{title:"提交小程序",description:"提交最新版本小程序代码"}})],1):t._e(),t._v(" "),t.isOpend?e("div",{staticClass:"qr-code"},[t.loginReady?[e("div",{staticClass:"img-box"},[t.isMask?e("div",{staticClass:"mask",on:{click:t.loginQrCode}},[t._v("点击刷新")]):t._e(),t._v(" "),t.uploadReady?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.uploadReady,expression:"uploadReady"}],staticClass:"loading"}):t._e(),t._v(" "),t.loginQr?e("img",{attrs:{src:""+this.qrcode}}):t._e(),t._v(" "),t.loginQr?t._e():e("img",{attrs:{alt:""}}),t._v(" "),t.loginReady&&!t.uploadReady&&2!=t.step?e("p",[t._v("扫描二维码登录开发者工具")]):t._e(),t._v(" "),t.uploadReady?e("p",[t._v("您的代码正在上传，请耐心等待")]):t._e(),t._v(" "),2==t.step?e("p",[t._v("扫码预览版本，如无问题可提交审核")]):t._e()])]:t._e(),t._v(" "),t.loginToggel?e("el-button",{staticClass:"flex-row flex-justify-c flex-align-c",staticStyle:{margin:"0 auto"},attrs:{size:"small",type:"primary"},on:{click:t.loginQrCode}},[e("svg-icon",{staticStyle:{"margin-right":"5px"},attrs:{"icon-class":"qrcode"}}),t._v(" "),e("span",[t._v("扫码登陆")])],1):t._e(),t._v(" "),2==t.step?e("el-button",{staticClass:"flex-row flex-justify-c flex-align-c",staticStyle:{margin:"20px auto 0"},attrs:{size:"small",type:"primary"}},[e("a",{staticStyle:{padding:"0 10px",margin:"0 -10px"},attrs:{href:"https://mp.weixin.qq.com/cgi-bin/loginpage?t=wxm2-login&lang=zh_CN",title:"提交审核",target:"_blank"}},[t._v("提交审核")])]):t._e(),t._v(" "),t.loginToggel||t.uploadReady||2==t.step?t._e():e("el-button",{staticClass:"flex-row flex-justify-c flex-align-c",staticStyle:{margin:"20px auto 0"},attrs:{size:"small",plain:""},on:{click:t.loginQrCancel}},[t._v("取消")])],2):t._e()],1)])])],1)],1)])},[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"wlm-form"},[a("div",{staticClass:"wlm-form-header-radio"},[a("div",{staticClass:"wlm-form-notice warning",staticStyle:{"margin-left":"-41px","margin-top":"-10px"}},[a("div",[this._v("\r\n                    温情提示：发布小程序之前请先完善小程序信息，修改跳转小程序需重新发布方可生效。\r\n                ")])])])])}],!1,null,null,null);n.options.__file="weChatAppletsChannelPublish.vue";a.default=n.exports},O6mx:function(t,a,e){"use strict";var i=e("UVnX");e.n(i).a},UVnX:function(t,a,e){}}]);