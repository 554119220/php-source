<?php
 class OrdersController extends BaseController { public function orderdetail() { goto NH_VZ; NH_VZ: $id = intval($this->GPC["\151\144"]); goto XrxcW; ghoo4: $item["\x67\157\157\144\163\156\x61\x6d\x65"] = $detail[0]["\164\x69\x74\x6c\145"]; goto Wlqhp; XrxcW: $sql = "\x53\x45\x4c\x45\103\x54\40\xa\x61\56\x75\x73\x65\x72\x6e\x61\155\145\54\x61\x2e\155\x6f\x62\151\x6c\145\x2c\157\x2e\151\144\54\157\56\x77\x65\151\x64\x2c\12\x6f\56\x6f\162\144\145\x72\x73\x6e\54\x6f\x2e\x72\145\155\x61\162\x6b\x2c\x6f\56\155\x65\155\142\x65\x72\x69\x64\54\157\x2e\x6f\x72\144\x65\x72\x70\162\151\143\x65\x2c\157\56\x70\141\x79\164\171\x70\145\54\157\56\152\151\146\x65\156\54\x6f\56\x74\x72\141\156\163\x69\144\54\157\56\x63\x72\x65\141\x74\x65\x74\x69\x6d\x65\54\x61\56\x70\x72\x6f\166\x69\156\143\x65\x2c\141\56\x63\x69\164\x79\54\x61\56\144\151\163\164\x72\151\143\x74\54\141\56\141\144\x64\x72\x65\163\x73\54\x6f\x2e\x73\x74\141\x74\165\163\54\157\x2e\x70\x61\x72\x65\x6e\x74\61\54\157\56\160\x61\162\x65\x6e\x74\62\x2c\157\56\x70\x61\x72\x65\156\164\63\54\157\56\x72\145\155\141\x72\x6b\x2c\157\56\x63\x6f\155\155\151\x73\151\x6f\156\x31\54\x6f\x2e\143\x6f\x6d\x6d\x69\x73\x69\157\x6e\x32\x2c\x6f\56\143\157\155\x6d\x69\163\151\157\x6e\63\x2c\x6f\56\x74\x6f\164\x61\x6c\54\x6f\56\x79\x75\156\x66\145\x69\x2c\x6d\x2e\x6e\151\x63\153\x6e\x61\x6d\145\54\155\56\157\160\x65\x6e\151\x64\54\x6f\56\x65\170\x70\162\x65\x73\163\143\157\x6d\x2c\x6f\56\x65\170\x70\162\x65\x73\x73\x73\156\x2c\157\x2e\146\141\150\165\x6f\164\151\155\145\54\x6f\56\163\150\157\x75\x68\165\x6f\164\151\155\x65\x20\106\x52\x4f\115\40" . tablename("\167\147\137\146\145\x6e\x78\x69\141\157\x5f\157\x72\x64\x65\x72") . "\x20\x61\x73\x20\x6f\40\114\x45\106\124\x20\112\x4f\111\x4e\40" . tablename("\x77\147\137\146\x65\x6e\170\x69\141\157\137\155\x65\155\x62\x65\162") . "\x20\x41\x53\40\155\40\x4f\x4e\40\157\56\155\x65\155\142\x65\162\151\x64\75\155\56\x69\x64\40\x4c\x45\106\124\40\x4a\x4f\111\116\x20" . tablename("\x77\147\x5f\x66\145\x6e\x78\151\141\157\x5f\155\x65\155\x62\145\x72\137\141\144\144\162\145\x73\163") . "\x20\101\123\x20\141\x20\117\x4e\x20\x6f\x2e\x61\x64\144\x72\145\163\163\x69\x64\75\x61\56\x69\144\x20\167\150\145\x72\145\40\x6f\x2e\151\144\x3d\72\151\144\40\141\156\144\x20\x6f\56\x77\145\x69\x64\75\72\x77\x65\x69\x64"; goto Txhe1; B_g5b: tg8_S: goto VkZSN; Sk9pq: message("\346\x8a\xb1\346\xad\x89\xef\274\x8c\xe8\xae\242\345\x8d\225\344\xb8\215\xe5\xad\x98\345\x9c\250\x21", referer(), "\145\x72\162\x6f\x72"); goto BeQFn; Txhe1: $item = pdo_fetch($sql, array("\72\151\x64" => $id, "\x3a\167\x65\x69\x64" => $this->W["\x75\x6e\x69\x61\143\151\x64"])); goto qdcx2; QE0vH: if (!(!empty($item["\160\x61\162\145\156\164\x31"]) || !empty($item["\x70\x61\162\145\156\x74\x32"]) || !empty($item["\160\x61\162\x65\x6e\x74\63"]))) { goto Rqaas; } goto tx9il; dRobY: TLXa9: goto QE0vH; Tkddj: if (!checksubmit("\x63\x6f\156\146\x69\x72\x6d\163\x65\156\x64")) { goto nqCvk; } goto VnEre; BeQFn: xvwgp: goto Tkddj; Wlqhp: if (!empty($item)) { goto xvwgp; } goto Sk9pq; nSgtw: $this->_cancelsend($id, $item); goto B_g5b; t_7fm: X5_sg: goto QxaCp; qHSAj: $data["\x69\164\x65\x6d"] = $item; goto XGKfH; tx9il: $membernicknames = $this->MemberModel->getList(["\151\144" => [$item["\160\x61\162\145\156\x74\x31"], $item["\x70\141\162\x65\x6e\x74\62"], $item["\x70\x61\x72\x65\x6e\164\x31"]]], ["\x69\144", "\156\151\x63\153\156\x61\155\x65"]); goto Wyajw; QxaCp: Rqaas: goto qHSAj; c1sAO: $this->_cancelorder($item); goto dRobY; XdPvM: if (!checksubmit("\x63\x61\x6e\143\x65\x6c\163\x65\156\144")) { goto tg8_S; } goto nSgtw; zj5rP: $this->assign($data); goto C3LDF; C3LDF: $this->display(); goto U67ru; VkZSN: if (!checksubmit("\x63\x61\156\x63\145\x6c\157\162\144\x65\x72")) { goto TLXa9; } goto c1sAO; wL3cU: nqCvk: goto XdPvM; Wyajw: foreach ($membernicknames as $key => $value) { goto h9l4H; kSZ6k: MJG_h: goto YXvMG; jyzd3: xBkyU: goto GL7QO; XwAao: hRv_O: goto JESgC; GL7QO: $item["\160\141\x72\145\156\x74\x32"] = $value["\x6e\x69\x63\153\x6e\x61\155\145"]; goto YE3Aj; snhr1: goto TrfOu; goto kSZ6k; H_aLM: TrfOu: goto tWZvT; JESgC: $item["\x70\x61\162\145\x6e\164\x33"] = $value["\x6e\x69\x63\x6b\156\141\x6d\145"]; goto H_aLM; zz0fX: if ($item["\160\x61\x72\145\x6e\x74\x32"] == $value["\151\144"]) { goto xBkyU; } goto mChiG; mChiG: if ($item["\x70\x61\162\x65\156\164\63"] == $value["\151\x64"]) { goto hRv_O; } goto snhr1; YXvMG: $item["\x70\141\x72\145\156\x74\61"] = $value["\x6e\151\x63\x6b\x6e\141\155\145"]; goto s8nPt; tWZvT: OaLYP: goto heVro; YE3Aj: goto TrfOu; goto XwAao; s8nPt: goto TrfOu; goto jyzd3; h9l4H: if ($item["\160\x61\x72\145\x6e\x74\x31"] == $value["\151\144"]) { goto MJG_h; } goto zz0fX; heVro: } goto t_7fm; qdcx2: $detail = $this->OrderDetailModel->getList(["\x6f\x72\x64\x65\x72\137\151\x64" => $id], "\52"); goto ghoo4; XGKfH: $data["\144\145\164\x61\x69\x6c"] = $detail; goto zj5rP; VnEre: $this->_confirmsend($id, $item); goto wL3cU; U67ru: } private function _cancelorder($item) { goto gFreO; HqT8g: Gwc8o: goto fwvID; j08hY: if (!($update_order && $update_commission)) { goto sSKNb; } goto Q6VxY; HDKpX: message("\xe8\xae\242\xe5\x8d\225\345\217\x96\xe6\266\x88\346\223\215\xe4\275\x9c\346\x88\x90\345\x8a\x9f\357\274\201", referer(), "\x73\165\143\x63\145\x73\x73"); goto YNV_3; hhU3W: pdo_commit(); goto RGBRC; RGBRC: uDSaP: goto j08hY; H4EZU: J2pxA: goto kMYQ7; vJo8j: $update_order = pdo_update("\x77\x67\137\146\145\156\x78\x69\x61\x6f\137\157\x72\144\145\162", array("\163\164\x61\x74\x75\x73" => "\55\x31"), array("\x69\x64" => $item["\151\x64"])); goto P2prM; fwvID: IMweW: goto BTdwi; W2fce: if (!($this->module["\143\x6f\156\146\x69\147"]["\x78\x69\141\x6a\x69\x72\145\x6e\163\x68\x75"] > 0)) { goto IMweW; } goto eaUid; BTdwi: sSKNb: goto HDKpX; lxtvh: Doxdv: goto NHtcA; Q6VxY: if (empty($this->module["\x63\x6f\156\x66\151\147"]["\x71\x75\170\151\x61\x6f\x64\x69\156\x67\x64\x61\156"])) { goto J2pxA; } goto MK579; eEt0b: BJ02I: goto K05hE; Eo1uo: goto uDSaP; goto xb_SV; alZbj: $update_commission = true; goto cGchg; umS55: $jifen = $this->module["\143\x6f\x6e\146\151\147"]["\x78\x69\x61\x6a\x69\x72\145\156\163\x68\x75"] + 0; goto HqT8g; kMYQ7: $this->_quxiaoSanji($item); goto W2fce; cGchg: goto Doxdv; goto eEt0b; gFreO: pdo_begin(); goto vJo8j; MK579: $this->site->sendQuXiaoFaHuo($this->module["\x63\157\156\x66\x69\x67"]["\x71\x75\170\151\x61\157\x64\x69\x6e\147\144\141\156"], $this->W["\165\x6e\151\141\x63\151\x64"], $item); goto H4EZU; xb_SV: aUMe3: goto hhU3W; vg2st: pdo_rollback(); goto Eo1uo; NHtcA: if ($update_order && $update_commission) { goto aUMe3; } goto vg2st; P2prM: if ($item["\160\141\162\x65\156\164\61"] && $item["\143\x6f\155\155\x69\163\x69\x6f\x6e\x31"] > 0 || $item["\160\x61\162\x65\156\164\x32"] && $item["\x63\x6f\155\x6d\x69\163\151\x6f\x6e\x32"] > 0 || $item["\x70\141\162\x65\156\x74\x33"] && $item["\143\157\155\155\151\163\151\x6f\x6e\x33"] > 0) { goto BJ02I; } goto alZbj; K05hE: $update_commission = pdo_update("\x77\x67\x5f\x66\145\x6e\170\151\141\157\x5f\x63\x6f\x6d\155\151\x73\x73\x69\x6f\156", array("\163\x74\141\x74\165\163" => 2, "\x66\x61\x68\x75\157\x73\150\151\x6a\151\x61\156" => 0, "\165\x70\144\141\164\x65\x5f\164\151\x6d\x65" => time()), array("\157\162\x64\145\x72\163\156" => $item["\x6f\x72\x64\x65\x72\x73\156"])); goto lxtvh; eaUid: if (!($item["\x78\x69\141\x6a\x69\x5f\x6f\156\145\137\144\x69\x6e\147\x64\141\156"] == 1)) { goto Gwc8o; } goto umS55; YNV_3: } private function _cancelsend($id, $item) { goto gNB9p; LxN8a: goto PhbIM; goto I7ZAi; LRUs8: message("\xe5\x8f\226\346\xb6\210\xe5\217\221\xe8\xb4\247\xe6\x93\x8d\xe4\275\234\xe5\xa4\261\xe8\264\245", referer(), "\x66\x61\x69\x6c"); goto LlR2r; tsUOD: $update_order = pdo_update("\167\x67\137\x66\x65\x6e\x78\x69\x61\157\x5f\157\x72\144\x65\162", array("\x73\x74\x61\x74\165\163" => 1), array("\151\x64" => $id)); goto KxYY1; ePGOt: $update_commission = true; goto LxN8a; gNB9p: pdo_begin(); goto tsUOD; LlR2r: goto dPDBH; goto vIH1J; I7ZAi: G9ksv: goto g1awH; vIH1J: OhBCB: goto ZohrB; nbd_O: message("\345\x8f\226\xe6\xb6\210\xe5\217\x91\350\264\xa7\xe6\x93\215\xe4\xbd\234\346\x88\220\xe5\212\237\357\274\x81", referer(), "\x73\x75\143\x63\x65\x73\x73"); goto GubF1; g1awH: $update_commission = pdo_update("\x77\147\x5f\x66\x65\156\x78\151\141\157\x5f\x63\157\x6d\x6d\151\163\x73\151\157\156", array("\x66\141\x68\165\x6f\x73\x68\151\x6a\151\141\x6e" => 0, "\x75\x70\x64\x61\164\145\137\164\x69\x6d\145" => time()), array("\157\162\144\145\162\x73\x6e" => $item["\x6f\162\144\145\162\x73\156"])); goto rRZWs; cV9ET: dPDBH: goto nbd_O; rRZWs: PhbIM: goto ILvIN; dwoGP: pdo_rollback(); goto LRUs8; ZohrB: pdo_commit(); goto cV9ET; KxYY1: if ($item["\x70\x61\162\x65\x6e\x74\x31"] && $item["\x63\x6f\x6d\x6d\x69\x73\151\157\x6e\61"] > 0 || $item["\160\141\x72\145\x6e\x74\x32"] && $item["\x63\x6f\x6d\x6d\151\163\151\157\156\x32"] > 0 || $item["\160\x61\x72\145\x6e\164\63"] && $item["\x63\157\x6d\x6d\x69\163\151\157\156\x33"] > 0) { goto G9ksv; } goto ePGOt; ILvIN: if ($update_order && $update_commission) { goto OhBCB; } goto dwoGP; GubF1: } private function _confirmsend($id, $item) { goto F2IvA; F2IvA: if (!(!empty($this->GPC["\x69\x73\145\170\160\x72\x65\x73\x73"]) && empty($this->GPC["\x65\x78\160\162\x65\163\x73\x73\x6e"]))) { goto JsK6D; } goto CO2Nt; YWJxz: pdo_commit(); goto hgIFQ; yQWMR: message("\345\217\x91\350\xb4\xa7\346\223\215\344\xbd\234\345\xa4\261\350\264\xa5", referer(), "\x66\141\151\x6c"); goto lg4wA; yi4mH: eT8xV: goto JxM_U; c3Mqi: JsK6D: goto PHGoV; tThLm: Znpgr: goto vc2iW; PHGoV: pdo_begin(); goto W2S7H; lg4wA: goto jbJ5l; goto mHFa9; owaY_: pdo_rollback(); goto yQWMR; ueuGK: if ($item["\160\141\x72\145\156\164\61"] && $item["\x63\157\155\x6d\x69\x73\151\x6f\x6e\x31"] > 0 || $item["\x70\x61\162\145\156\x74\x32"] && $item["\143\x6f\x6d\155\151\x73\151\x6f\156\62"] > 0 || $item["\x70\141\x72\x65\156\164\63"] && $item["\143\157\155\155\151\x73\151\x6f\x6e\63"] > 0) { goto iNkHN; } goto aP4mI; CtuN2: $dizhiinfo = $item["\165\163\145\x72\x6e\141\x6d\x65"] . $item["\x6d\x6f\142\x69\154\x65"] . $item["\160\x72\x6f\166\x69\x6e\x63\145"] . $item["\143\151\x74\171"] . $item["\144\151\163\164\162\151\143\x74"] . $item["\141\144\x64\162\145\x73\x73"]; goto O1XXO; vc2iW: if ($update_order && $update_commission) { goto VqHp0; } goto owaY_; MPren: if (empty($this->module["\143\x6f\156\146\151\x67"]["\x66\x61\150\x75\x6f\x74\x6f\156\x67\172\150\151"])) { goto eT8xV; } goto CtuN2; JxM_U: message("\345\217\x91\xe8\xb4\xa7\346\223\x8d\344\xbd\x9c\346\210\x90\xe5\212\x9f\xef\xbc\201", referer(), "\163\165\143\143\x65\x73\x73"); goto csxJp; W2S7H: $update_order = pdo_update("\x77\147\137\x66\145\156\x78\151\141\157\137\157\162\144\145\x72", array("\163\164\141\x74\165\163" => 2, "\x65\170\x70\x72\x65\163\163\x63\157\155" => $this->GPC["\x65\170\x70\x72\145\163\x73\143\157\x6d"], "\145\x78\x70\162\x65\163\x73\x73\156" => $this->GPC["\145\170\160\162\x65\x73\163\163\x6e"], "\146\141\x68\x75\157\x74\151\155\x65" => time()), array("\x69\144" => $id)); goto ueuGK; aP4mI: $update_commission = true; goto YYx17; CO2Nt: message("\350\xaf\267\350\276\x93\345\x85\xa5\xe5\xbf\253\351\200\x92\345\x8d\x95\345\x8f\267\357\274\x81"); goto c3Mqi; hgIFQ: jbJ5l: goto MPren; YYx17: goto Znpgr; goto Pz5Xd; wl6Ic: $update_commission = pdo_update("\167\147\137\146\145\156\170\151\141\157\137\143\x6f\x6d\155\151\163\163\151\157\156", array("\x66\x61\x68\165\x6f\x73\150\151\152\x69\x61\x6e" => time()), array("\x6f\x72\144\x65\162\163\x6e" => $item["\x6f\x72\x64\x65\162\x73\x6e"])); goto tThLm; Pz5Xd: iNkHN: goto wl6Ic; O1XXO: $this->site->fahuotongzhi($item["\157\x70\x65\156\151\x64"], $this->W["\165\x6e\x69\x61\x63\151\144"], $this->module["\143\157\x6e\x66\151\x67"]["\x66\x61\x68\x75\x6f\x74\x6f\156\147\172\150\151"], $this->GPC["\145\x78\160\x72\x65\163\163\x63\x6f\155"], $this->GPC["\x65\170\x70\162\145\163\x73\163\156"], $item["\147\x6f\157\144\x73\156\x61\x6d\x65"], $item["\164\157\164\141\x6c"], $dizhiinfo); goto yi4mH; mHFa9: VqHp0: goto YWJxz; csxJp: } public function addmarket() { goto CnuoZ; ovLWJ: $this->OrderDetailModel->update(["\151\x64" => $id], ["\162\145\155\141\x72\153" => $market]); goto FUiK9; FUiK9: $this->ajaxReturn(0, ''); goto Gxg8E; CnuoZ: $id = intval($_GET["\151\144"]); goto VeJd3; VeJd3: $market = trim($_GET["\155\141\162\153\145\x74"]); goto ovLWJ; Gxg8E: } private function _quxiaoSanji($order) { goto Z19vI; qsQq6: if (!($this->site->configs["\143\157\156\x66\x69\147"]["\170\x69\141\x6a\x69\x6a\x69\146\145\x6e"] > 0 && $order["\152\x69\146\145\x6e"])) { goto DF5H_; } goto k1z8K; w41G6: $this->addJifen($order["\155\x65\x6d\x62\145\x72\x69\144"], -$order["\x6a\151\x66\145\156"], "\350\207\252\345\267\xb1\345\x8f\x96\xe6\266\210\xe8\xae\xa2\345\x8d\225" . $order["\157\x72\x64\145\162\163\x6e"] . "\345\207\x8f\345\260\221\xe7\247\257\345\x88\206" . $order["\152\151\x66\x65\156"], [], $order["\x77\x65\x69\144"]); goto u_ytg; Ex1ag: $jifen3 = intval($jifen2 * $this->site->configs["\x63\157\x6e\x66\x69\147"]["\170\x69\x61\152\151\x6a\x69\146\x65\156"] / 100); goto DW_W7; k1z8K: $parent1 = $order["\160\x61\x72\x65\156\x74\61"]; goto q5kG_; S0vqU: ezf3D: goto NIZpm; JYGFL: $level = $this->site->configs["\143\x6f\x6e\146\x69\147"]["\x6c\x65\166\x65\x6c"]; goto qsQq6; SyeND: $parent2 = $order["\160\x61\162\x65\156\164\62"]; goto SzeJu; NIZpm: if (!($parent3 && $jifen3 > 0 && $level > 2)) { goto kqqn2; } goto gEu9q; q5kG_: $jifen1 = intval($order["\152\x69\x66\x65\156"] * $this->site->configs["\143\x6f\156\x66\x69\147"]["\x78\151\141\152\151\x6a\x69\x66\145\x6e"] / 100); goto SyeND; gEu9q: $this->addJifen($parent3, -$jifen3, "\350\256\242\345\x8d\x95\72" . $order["\157\x72\144\x65\162\x73\x6e"], [], $order["\x77\145\151\x64"]); goto oDeZi; G95Tp: if (!($parent1 && $jifen1 > 0)) { goto Z0mP_; } goto ErQfH; oDeZi: kqqn2: goto G95Tp; DW_W7: if (!($parent2 && $jifen2 > 0 && $level > 1)) { goto ezf3D; } goto eS30H; Lqm9r: $parent3 = $order["\x70\141\x72\145\x6e\x74\x33"]; goto Ex1ag; aLZnY: if (!$order["\x6a\x69\146\x65\x6e"]) { goto yJUDP; } goto w41G6; eS30H: $this->addJifen($parent2, -$jifen2, "\350\256\xa2\xe5\x8d\x95\x3a" . $order["\x6f\x72\144\x65\162\x73\x6e"], [], $order["\x77\145\x69\x64"]); goto S0vqU; Z19vI: pdo_update("\167\147\137\146\145\156\x78\x69\141\x6f\x5f\155\x65\x6d\x62\145\162", ["\143\x6f\x6e\x73\x75\155\x65\x20\x2d\x3d" => $order["\x6f\162\144\145\x72\160\162\151\143\145"], "\157\162\x64\145\x72\137\x6e\165\x6d\40\55\75" => 1], ["\151\144" => $order["\155\145\x6d\x62\x65\162\x69\x64"], "\157\162\x64\145\162\x5f\156\x75\x6d\x20\x3e\x3d" => 1, "\143\x6f\x6e\163\165\155\145\40\76\75" => $order["\157\162\x64\x65\162\x70\x72\x69\143\145"]]); goto aLZnY; SzeJu: $jifen2 = intval($jifen1 * $this->site->configs["\143\x6f\x6e\146\151\x67"]["\x78\151\x61\152\151\x6a\151\146\145\156"] / 100); goto Lqm9r; lnXE8: DF5H_: goto vSWSB; u_ytg: yJUDP: goto JYGFL; Efhcl: Z0mP_: goto lnXE8; ErQfH: $this->addJifen($parent1, -$jifen1, "\xe8\256\xa2\345\x8d\225\72" . $order["\x6f\x72\x64\x65\x72\x73\156"], [], $order["\167\145\x69\144"]); goto Efhcl; vSWSB: } }