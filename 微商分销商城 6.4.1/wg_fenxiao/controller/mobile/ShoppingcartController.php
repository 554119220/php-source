<?php
 class ShoppingcartController extends MobileBaseController { public function index() { goto RbYnO; XRjyo: $where = ["\163\x74\x61\162\164\x20\x3c" => time(), "\x65\156\x64\40\x3e" => time(), "\x67\x6f\157\x64\163\x5f\x69\x64" => $goods_ids, "\164\x79\x70\x65" => 1]; goto yOijj; BspAj: $data["\172\150\145\153\x6f\x75"] = $this->userInfo["\172\x68\145\x6b\157\165"]; goto aIuTH; PfzR8: $goods_ids = array_unique($goods_ids); goto yaYg6; I46xd: $data["\154\x69\163\x74"] = $list; goto XFieG; aIuTH: $data["\154\x65\x76\145\x6c\156\x61\x6d\145"] = $this->userInfo["\x6c\145\x76\145\x6c\156\x61\155\145"]; goto Cualq; hSV7n: foreach ($list as $value) { goto wQp3r; A8CBI: if (!$value["\164\171\160\145"]) { goto MZy7g; } goto DY6tQ; wQp3r: $goods_ids[] = $value["\147\157\x6f\144\163\x5f\151\144"]; goto A8CBI; JRywi: MZy7g: goto Rq6dg; DY6tQ: $goods_types[] = $value["\x74\171\x70\x65"]; goto JRywi; Rq6dg: TjeMS: goto LIQQW; LIQQW: } goto yhoRm; P8yIT: lkOVR: goto PcLuR; yaYg6: $goods_info = $this->GoodsModel->getList(["\151\x64" => $goods_ids, "\x73\x74\x61\x74\x75\163" => 1], ["\151\144", "\x67\157\x6f\x64\163\x6e\x61\x6d\145", "\155\x61\x72\x6b\x65\164\x70\162\x69\143\x65", "\164\150\165\155\x62"]); goto BOB9b; XFieG: $data["\x61\x64\166\163"] = $this->AdvModel->getList(["\x77\145\x69\144" => $this->W["\x75\x6e\x69\141\x63\151\x64"], "\x65\x6e\x61\142\154\x65\x64" => 1, "\x74\171\160\145" => 8], "\x2a", "\x64\151\x73\x70\x6c\x61\x79\x6f\x72\144\145\162\40\141\163\x63"); goto mC3Qs; HFZdl: if (!$goods_types) { goto lkOVR; } goto aoEVh; yhoRm: XeVgK: goto PfzR8; T54C4: $this->display(); goto MtrPU; mC3Qs: $this->assign($data); goto T54C4; dsoLY: $goods_ids = []; goto BspAj; PcLuR: foreach ($list as &$cart) { goto uZQrw; SLXwk: $cart["\x72\145\x6d\141\151\x6e"] = 0; goto E0u8J; VthZK: $cart["\164\x79\x70\145\137\x69\x6e\146\x6f"] = $goods_types[$cart["\164\x79\160\x65"]]; goto o0sDY; uZQrw: $cart["\x64\145\x74\141\x69\154"] = $goods_info[$cart["\x67\157\x6f\x64\163\x5f\151\144"]]; goto xwjaY; s8USf: $cart["\172\150\145\153\x6f\x75"] = $zhekou[$cart["\x67\x6f\157\144\x73\x5f\x69\x64"]]["\x7a\150\x65\153\x6f\x75"] && $zhekou[$cart["\147\x6f\x6f\x64\x73\x5f\x69\x64"]]["\x7a\150\145\153\x6f\165"] > 0 ? $zhekou[$cart["\147\x6f\157\144\x73\x5f\x69\x64"]]["\x7a\x68\145\153\157\x75"] : 10; goto xDR_k; UZepx: goto Jua9B; goto Iig2A; Z7X8J: if ($zhekou[$cart["\x67\157\x6f\144\163\137\151\144"]]) { goto TlvVt; } goto uHZpR; o0sDY: $cart["\x72\145\155\x61\x69\x6e"] = $cart["\x74\171\160\145\137\151\x6e\146\x6f"]["\141\x6d\x6f\165\156\164\x5f\x74\157\164\x61\x6c"] - $cart["\x74\171\160\x65\x5f\151\x6e\x66\157"]["\141\x6d\157\x75\x6e\164\x5f\163\145\154\x6c"]; goto O9P1s; BYA11: N0VFX: goto TM7CL; xwjaY: if (!$goods_types[$cart["\164\x79\x70\x65"]]) { goto jtTY2; } goto VthZK; Iig2A: TlvVt: goto s8USf; O9P1s: if (!($cart["\164\x79\160\145\137\x69\x6e\x66\x6f"]["\x64\145\154"] == 1)) { goto yw1kr; } goto SLXwk; E0u8J: yw1kr: goto q70Ud; q70Ud: jtTY2: goto Z7X8J; uHZpR: $cart["\x7a\150\145\153\x6f\165"] = $data["\x7a\150\145\x6b\157\165"]; goto UZepx; xDR_k: Jua9B: goto BYA11; TM7CL: } goto pKn2W; XnkWp: hxVmA: goto I46xd; EykI3: $zhekou = $this->arrayIndex($zhekou, "\147\x6f\x6f\x64\163\x5f\151\144"); goto HFZdl; yOijj: $zhekou = $this->GouModel->getList($where); goto EykI3; BOB9b: $goods_info = $this->arrayIndex($goods_info, "\151\144"); goto XRjyo; pKn2W: uTnU4: goto XnkWp; RbYnO: $data["\164\151\164\x6c\x65"] = "\xe8\xb4\xad\xe7\211\xa9\xe8\xbd\246"; goto g9wXN; g9wXN: $data["\x73\x68\157\x70\x6e\x61\x6d\145"] = $this->site->configs["\143\157\x6e\146\x69\x67"]["\x73\150\157\160\x6e\141\155\x65"]; goto RP_1Q; aoEVh: $goods_types = array_unique($goods_types); goto h3naH; JtGio: $goods_types = $this->arrayIndex($goods_types, "\x69\144"); goto P8yIT; RP_1Q: $list = $this->getShoppingCartInfo(); goto dsoLY; Cualq: if (!$list) { goto hxVmA; } goto hSV7n; h3naH: $goods_types = $this->GoodsTypeModel->getList(["\x69\144" => $goods_types], "\52"); goto JtGio; MtrPU: } public function ajaxAdd() { goto iqicp; Vqbnc: $this->ajaxReturn(104, "\345\217\x82\xe6\225\xb0\351\224\x99\xe8\xaf\xaf"); goto xQGAu; bZjD9: if (!($need_amount > $goods_type["\x61\x6d\x6f\x75\156\164\137\164\x6f\164\141\x6c"] - $goods_type["\141\155\x6f\165\x6e\164\x5f\x73\145\154\x6c"])) { goto aONAn; } goto ESd4y; HbJFB: if ($goods_type) { goto ztULG; } goto AOpB0; HQcYm: if (!(!$data["\x67\x6f\x6f\144\x73\137\151\144"] || $data["\141\155\157\165\x6e\x74"] <= 0 || !$data["\164\171\160\x65"])) { goto ZsKcP; } goto FBo4I; SfyVi: $need_amount = $data["\141\155\x6f\x75\156\x74"]; goto ucpyu; f_Nav: $data["\141\x6d\x6f\x75\156\x74"] = (int) $_POST["\x61\155\x6f\165\x6e\x74"]; goto HQcYm; iqicp: if ($this->uid) { goto njjS3; } goto TWnPn; TWnPn: $this->ajaxReturn(300, "\xe8\257\267\xe6\x82\250\xe5\234\250\xe5\276\256\344\xbf\241\xe7\253\xaf\347\x99\xbb\xe5\275\x95"); goto yRrEV; jCncI: Oj9Jq: goto Txx1i; ic4Ge: aONAn: goto Bt1xd; AOpB0: $this->ajaxReturn(102, "\345\225\206\345\223\x81\xe4\270\215\xe5\xad\x98\xe5\x9c\250"); goto SbGsz; oBRIq: $this->ajaxReturn(0, "\xe6\xb7\273\345\x8a\240\xe6\210\220\xe5\212\237"); goto n6QL0; hY1OV: if ($inc) { goto Oj9Jq; } goto SfyVi; AGrcp: $inc = $_POST["\146\x72\x6f\x6d"] ? false : true; goto X2RGZ; eq5PP: $data["\x67\x6f\157\x64\163\x5f\x69\x64"] = (int) $_POST["\x67\x6f\x6f\144\163\x5f\151\144"]; goto h0WSW; ZXPYh: if (!$result) { goto stWOJ; } goto oBRIq; SbGsz: ztULG: goto hY1OV; X2RGZ: $goods_type = $this->GoodsTypeModel->getOne(["\x69\x64" => $data["\x74\171\160\x65"], "\x67\157\157\x64\163\137\x69\144" => $data["\147\157\x6f\144\163\137\x69\x64"]], ["\x61\155\x6f\165\x6e\164\x5f\x74\157\164\x61\154", "\x61\155\157\165\x6e\x74\x5f\x73\145\x6c\154"]); goto HbJFB; n6QL0: stWOJ: goto Vqbnc; FBo4I: $this->ajaxReturn(101, "\xe5\x8f\x82\346\x95\xb0\xe9\224\231\350\xaf\257"); goto G8R8p; Txx1i: $cart = $this->ShoppingCartModel->getOne(["\165\x69\144" => $this->uid, "\147\x6f\157\x64\163\137\151\144" => $data["\147\157\157\x64\x73\137\x69\x64"], "\x74\x79\x70\x65" => $data["\x74\171\160\x65"]]); goto QFvbl; G8R8p: ZsKcP: goto AGrcp; HuD9L: NZyWp: goto bZjD9; QFvbl: $need_amount = (int) $cart["\141\155\157\x75\x6e\164"] + $data["\141\x6d\157\165\x6e\164"]; goto HuD9L; yRrEV: njjS3: goto eq5PP; ucpyu: goto NZyWp; goto jCncI; ESd4y: $this->ajaxReturn(103, "\345\272\223\345\xad\x98\344\270\x8d\xe8\266\263"); goto ic4Ge; Bt1xd: $result = $this->updateShoppingCart($data, $inc); goto ZXPYh; h0WSW: $data["\164\171\160\x65"] = (int) $_POST["\x74\x79\x70\145"]; goto f_Nav; xQGAu: } public function ajaxDel() { goto HB5zY; tEVJW: $this->ajaxReturn(102, "\xe5\x8f\202\xe6\x95\260\351\x94\231\xe8\257\xaf"); goto DvFCQ; jAyIt: $this->ajaxReturn(300, "\xe8\257\267\xe6\202\xa8\345\234\250\xe5\276\xae\xe4\xbf\xa1\xe7\xab\xaf\xe7\x99\273\xe5\275\x95"); goto VDf3M; jIDjx: $result = $this->ShoppingCartModel->del(["\165\151\x64" => $this->uid, "\x69\x64\40\x49\x4e" => $id]); goto FNcak; KyIgF: $id = trim($_POST["\151\144"]); goto lwBdp; VDf3M: vxZLh: goto KyIgF; HB5zY: if ($this->uid) { goto vxZLh; } goto jAyIt; gFTOh: if (!$id) { goto n8__V; } goto jIDjx; lwBdp: $id = explode("\x7c", $id); goto gFTOh; FsmqY: n8__V: goto tEVJW; nSDgw: $this->ajaxReturn(0, "\x6f\x6b"); goto VhKH3; VhKH3: hot1u: goto FsmqY; FNcak: if (!$result) { goto hot1u; } goto nSDgw; DvFCQ: } }