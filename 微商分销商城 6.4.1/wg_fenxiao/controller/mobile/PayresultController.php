<?php
 class PayresultController extends BaseController { public $settings; public function index($params) { goto PMUiU; ob9oH: JGDnp: goto et3E2; skwjb: return 400; goto vHR4Y; RWHYK: return 104; goto uitjR; MlnuR: if (!$this->_checkSign($order, $params) && $params["\x6f\x75\x74\x5f\x74\x72\x61\144\x65\x5f\x6e\x6f"]) { goto ZjE2l; } goto NFOQI; e_AuX: $this->sendSellerPush($uniacid, $this->settings["\x73\145\154\x6c\145\x72"], $this->settings["\144\151\156\x67\x64\x61\x6e\x73\x68\x65\156\147\x63\150\x65\x6e\x67"], $order, $order_detail[0], $user_info); goto ob9oH; mmMPI: $jifen_info[2] = $jifen2; goto OlZ4E; Qi76Z: $this->settings = $this->getSettings($order["\x77\x65\151\144"]); goto UYZQz; uekfx: $this->CommissionModel->add($data); goto g6afJ; HC7Jv: $virtual_goods = true; goto Ib1Sg; x5zX_: u827O: goto d88RP; D11VO: if (0) { goto JuGDD; } goto MlnuR; tcIln: if (!$this->settings["\147\x6f\x75\155\x61\x69\163\141\x6e\x6a\x69"]) { goto aD3L9; } goto c3bR8; qYjv3: dX3o0: goto mu8QR; WEXqb: $jifen2 = intval($jifen1 * $this->settings["\x78\x69\141\152\x69\x6a\151\146\x65\156"] / 100); goto mQBwf; gaftF: $order_detail = $this->OrderDetailModel->getList(["\x6f\x72\x64\145\x72\137\151\x64" => $order["\151\144"]], ["\151\144", "\x67\x6f\157\144\x73\137\x69\144", "\164\x69\x74\x6c\145", "\x70\162\151\x63\x65", "\141\155\x6f\x75\156\164", "\x74\171\x70\x65\x5f\x74\151\x74\x6c\145", "\164\x79\160\145\137\x69\144", "\147\157\x6f\x64\x73\x74\171\160\145", "\147\x6f\x6f\144\163\x70\x61\x73\163\x74\171\x70\x65"]); goto YQ0E2; xZW5h: $data = ["\167\x65\151\x64" => $order["\167\x65\151\x64"], "\x75\151\144" => $parent3, "\157\162\144\145\x72\163\156" => $order["\157\x72\144\145\162\163\156"], "\x70" => 3, "\x6d\x6f\156\145\171" => $compute["\143\157\x6d\x6d\151\163\x69\x6f\x6e\x33"], "\143\x72\x65\141\164\145\164\x69\x6d\x65" => time(), "\x66\141\x68\x75\x6f\163\x68\x69\x6a\x69\x61\x6e" => $fahuoshijian]; goto uekfx; uitjR: sn8W9: goto WIv2Q; EMAWv: ZjE2l: goto IvEhh; XOv9o: if (!$this->settings["\x67\x6f\165\155\141\x69\x73\141\x6e\152\x69"]) { goto TJaDv; } goto SaHBu; aU_0g: xmV5l: goto LKR9R; l2HL_: gCTM3: goto CBRGt; sIQdT: $compute = $this->compute_commision($order, $order_detail); goto lXwbb; V3Brp: rukjv: goto X24LA; PMUiU: if ($params) { goto QH7cq; } goto skwjb; LFjnr: $this->OrderModel->begin(); goto K0taZ; IvEhh: return 399; goto GY163; c1_GD: return 103; goto cyOM_; WIv2Q: $this->OrderModel->commit(); goto uXYn_; hikHt: if (!(!$result || $result <= 0)) { goto sn8W9; } goto ShNpd; kylyn: $user_info = $this->MemberModel->getOne(["\151\x64" => $order["\x6d\145\x6d\142\x65\x72\151\x64"]]); goto KcYMT; Wdm7S: return 102; goto v3Z6c; Aw1Ne: if (!($order["\x73\164\x61\164\165\163"] != 0)) { goto NZJ07; } goto Wdm7S; Met4H: $user_info["\x69\163\141\x67\145\x6e\x74"] = $this->_editIsAgent($user_info); goto f7cFD; w1GGI: aD3L9: goto RA0FS; J5jYL: JuGDD: goto VnBhC; iq4Nh: $jifen_info = []; goto NxWjg; OlZ4E: $this->addJifen($parent2, $jifen2, "\xe8\xae\xa2\345\x8d\225\72" . $order["\x6f\x72\x64\x65\162\x73\x6e"], [], $uniacid); goto V3Brp; YQ0E2: if ($order_detail) { goto WU__J; } goto c1_GD; aG9o7: if (!($parent1 && $compute["\143\157\x6d\155\151\163\x69\157\156\x31"])) { goto ejdIH; } goto j4slX; x4BPs: if (!$params["\x74\151\144"]) { goto UZgn7; } goto ENavD; PE7vb: return 101; goto TyPaK; zI1J4: $this->CommissionModel->add($data); goto IJmZ5; QBOZB: oGOcV: goto MoXaA; CenBt: Fc0PF: goto IMnR8; QQhN6: $order = $this->OrderModel->getOne(["\157\x72\x64\x65\162\x73\x6e" => $params["\157\165\164\x5f\164\x72\141\x64\145\x5f\x6e\x6f"]], "\x2a"); goto x5zX_; AQDxb: sCtNU: goto K6jwL; IkLwW: JbcKk: goto F1lZG; IMnR8: $parent1 = $order["\160\141\162\145\x6e\164\x31"]; goto dEATt; lXwbb: if (!$compute) { goto gCTM3; } goto yQnF4; CBRGt: return 0; goto aU_0g; XBxbE: $params["\164\162\x61\x6e\x73\x61\143\x74\151\x6f\x6e\137\x69\144"] = $params["\x74\162\x61\x6e\163\x61\143\x74\151\157\x6e\137\151\x64"] ? $params["\x74\162\x61\156\163\x61\x63\x74\151\157\x6e\137\x69\x64"] : $params["\x74\141\x67"]["\164\x72\141\156\x73\141\143\x74\151\157\156\x5f\151\144"]; goto QULAg; tv2uL: $fahuoshijian = 0; goto uAWXq; K6jwL: if (!($user_info["\157\x72\x64\x65\x72\137\156\x75\155"] == 1 && $this->settings["\170\x69\x61\x6a\151\162\x65\156\x73\x68\x75"])) { goto oGOcV; } goto dG8mU; mQBwf: $jifen3 = intval($jifen2 * $this->settings["\170\151\x61\152\151\x6a\x69\146\145\x6e"] / 100); goto EbmXQ; BkrOE: $data = ["\167\x65\151\144" => $order["\167\145\x69\x64"], "\x75\x69\144" => $parent2, "\157\x72\x64\x65\x72\x73\156" => $order["\x6f\x72\144\x65\162\163\x6e"], "\160" => 2, "\155\157\x6e\x65\171" => $compute["\143\157\x6d\155\151\163\x69\x6f\x6e\62"], "\143\162\x65\x61\164\x65\164\151\155\145" => time(), "\x66\x61\150\x75\x6f\x73\x68\x69\152\151\141\x6e" => $fahuoshijian]; goto zI1J4; TyPaK: Ar7gp: goto Aw1Ne; K0taZ: $goods_ids = []; goto ImupH; dG8mU: $jifen1 += $this->settings["\170\x69\141\152\151\162\145\156\x73\x68\x75"]; goto QBOZB; f7cFD: ABWMH: goto A1lP7; NFOQI: goto LMOy3; goto J5jYL; ZccBZ: $this->CommissionModel->add($data); goto XOv9o; cyOM_: WU__J: goto HC7Jv; Peu7I: $coupon_id = isset($params["\x63\141\x72\144\137\151\144"]) ? $params["\x63\141\x72\x64\x5f\151\144"] : 0; goto XBxbE; MoXaA: if (!($parent1 && $jifen1 > 0)) { goto FvBQ8; } goto Hz1bv; mu8QR: L2oj_: goto Q9Tdn; r8z7S: wTT4d: goto kcBtZ; vuplA: if (!($parent2 && $compute["\x63\157\155\x6d\151\x73\151\157\156\62"])) { goto L2oj_; } goto BkrOE; Ib1Sg: $user_info = $this->MemberModel->getOne(["\x69\x64" => $order["\155\x65\x6d\x62\145\162\151\x64"]]); goto LFjnr; X9nmB: return 0; goto CenBt; Q9Tdn: if (!($parent3 && $compute["\x63\157\155\155\151\163\x69\157\x6e\63"])) { goto ZYQeL; } goto xZW5h; uAWXq: if (!$virtual_goods) { goto J7V17; } goto lnR7f; lSOsb: sG6Ta: goto sIQdT; wwfm9: J7V17: goto Peu7I; GY163: LMOy3: goto B_Pwn; EbmXQ: if (!($parent2 && $jifen2 > 0 && $level > 1)) { goto rukjv; } goto mmMPI; RA0FS: if (!(!empty($this->settings["\163\x65\154\x6c\x65\x72"]) && !empty($this->settings["\144\151\156\147\144\141\156\x73\150\145\156\147\143\150\x65\156\147"]))) { goto JGDnp; } goto e_AuX; lXS4l: if (!($params["\146\x72\x6f\155"] == "\x72\x65\x74\x75\x72\156")) { goto JbcKk; } goto uu2w4; gLtSl: load()->model("\155\x63"); goto wdQja; dEATt: $parent2 = $order["\x70\141\162\x65\156\x74\62"]; goto OKMaH; UYZQz: $level = $this->settings["\154\x65\x76\x65\x6c"]; goto NpBp_; lnR7f: $fahuoshijian = time(); goto wwfm9; e_ipK: $this->addJifen($parent1, $jifen1, "\350\xae\xa2\xe5\215\x95\x3a" . $order["\157\x72\x64\145\x72\163\x6e"], [], $uniacid); goto TLqkp; OKMaH: $parent3 = $order["\x70\x61\x72\x65\156\164\x33"]; goto iq4Nh; CGLxj: mc_credit_update($uid, "\143\162\145\144\151\x74\61", $order["\152\151\146\145\x6e"], array(0, "\xe8\xb4\xad\xe4\xb9\xb0\xe5\225\x86\xe5\223\201\345\242\x9e\xe5\212\240\347\247\257\345\x88\x86" . $order["\152\x69\x66\145\x6e"])); goto tcIln; KkQ2y: if ($order) { goto u827O; } goto QQhN6; j4slX: $data = ["\167\x65\x69\x64" => $order["\x77\x65\151\144"], "\165\151\144" => $parent1, "\x6f\x72\144\145\x72\163\x6e" => $order["\157\x72\144\145\162\x73\156"], "\x70" => 1, "\x6d\x6f\156\x65\x79" => $compute["\x63\157\155\155\x69\163\151\x6f\156\x31"], "\143\162\145\x61\x74\145\164\x69\x6d\x65" => time(), "\146\141\150\x75\x6f\x73\150\x69\152\x69\x61\x6e" => $fahuoshijian]; goto ZccBZ; NpBp_: if ($order) { goto Ar7gp; } goto PE7vb; AQPmu: TJaDv: goto FRApA; QULAg: $result = $this->OrderModel->update(["\157\162\x64\x65\162\x73\156" => $params["\157\x75\164\137\x74\x72\141\144\145\137\x6e\x6f"], "\x73\x74\141\x74\x75\163" => 0], ["\x73\164\x61\x74\165\x73" => $virtual_goods ? 3 : 1, "\172\150\x69\146\x75\164\x69\155\145" => time(), "\x70\141\x79\x74\x79\x70\145" => "\x77\145\x63\x68\x61\164", "\x74\x72\141\156\x73\x69\144" => $params["\x74\x72\x61\156\163\x61\143\164\x69\x6f\x6e\137\x69\144"], "\x66\141\x68\x75\x6f\x74\x69\155\x65" => $fahuoshijian, "\x73\x68\157\165\x68\165\x6f\x74\151\155\x65" => $fahuoshijian, "\143\157\165\x70\x6f\156\137\151\144" => $coupon_id, "\162\145\x61\x6c\137\x70\x61\171" => $params["\143\141\x72\144\137\146\145\145"] ? $params["\143\141\162\144\137\146\145\x65"] : 0]); goto hikHt; F1lZG: UZgn7: goto A8nbz; jVCCk: $this->addJifen($parent3, $jifen3, "\350\xae\242\xe5\215\x95\x3a" . $order["\x6f\162\x64\145\162\x73\156"], [], $uniacid); goto AQDxb; yQnF4: $this->OrderModel->update(["\x69\x64" => $order["\x69\x64"]], $compute); goto aG9o7; YBeLD: $jifen_info[3] = $jifen3; goto jVCCk; c3bR8: $this->sendMyPaySuccessPush($user_info, $this->settings["\x67\x6f\165\155\x61\x69\163\x61\156\152\x69"], $order, $uniacid, $order["\x6a\x69\x66\145\x6e"]); goto w1GGI; ShNpd: $this->OrderModel->rollback(); goto RWHYK; ENavD: $order = $this->OrderModel->getOne(["\157\162\x64\145\162\163\156" => $params["\x74\151\144"]], "\x2a"); goto lXS4l; IJmZ5: if (!$this->settings["\x67\157\x75\x6d\x61\x69\163\141\156\152\151"]) { goto dX3o0; } goto t4CNu; NxWjg: if (!($this->settings["\170\x69\141\152\x69\x6a\151\x66\145\x6e"] > 0 && $order["\x6a\151\x66\x65\x6e"])) { goto sG6Ta; } goto yEK9I; d88RP: $uniacid = $order["\167\145\x69\144"]; goto D11VO; ELUQ6: M057I: goto tv2uL; t4CNu: $this->sendSanJiGouMai($user_info, $parent2, $this->settings["\x67\157\x75\155\x61\151\163\x61\x6e\152\151"], $order, $uniacid, (int) $jifen_info[2], $data["\x6d\157\156\145\x79"], 2, $this->settings["\x71\x75\145\162\145\x6e\x73\x68\x6f\x75\150\165\157"]); goto qYjv3; KcYMT: if (!$level) { goto ABWMH; } goto Met4H; Hz1bv: $jifen_info[1] = $jifen1; goto e_ipK; A8nbz: if (!($params["\x6f\x75\164\x5f\x74\x72\141\144\145\x5f\156\x6f"] || $order)) { goto xmV5l; } goto N05De; X24LA: if (!($parent3 && $jifen3 > 0 && $level > 2)) { goto sCtNU; } goto YBeLD; uu2w4: message('', $this->createMobileUrl("\x6d\x79\x6f\162\x64\145\x72")); goto IkLwW; Mv1vq: $order = []; goto x4BPs; vHR4Y: QH7cq: goto Mv1vq; N05De: $where["\x6f\162\x64\145\162\137\x6e\157"] = $params["\x6f\165\164\137\x74\x72\141\x64\145\x5f\156\x6f"]; goto KkQ2y; kcBtZ: ZYQeL: goto l2HL_; g6afJ: if (!$this->settings["\x67\x6f\x75\155\x61\151\x73\x61\156\152\151"]) { goto wTT4d; } goto TbiMk; v3Z6c: NZJ07: goto gaftF; VnBhC: goto LMOy3; goto EMAWv; A1lP7: $this->addJifen($order["\x6d\x65\x6d\x62\x65\x72\x69\x64"], $order["\x6a\x69\x66\145\x6e"], "\xe8\xae\xa2\345\215\225\x3a" . $order["\157\x72\144\x65\162\163\x6e"], $user_info, $uniacid); goto gLtSl; SaHBu: $this->sendSanJiGouMai($user_info, $parent1, $this->settings["\x67\x6f\165\x6d\x61\x69\163\x61\156\152\x69"], $order, $uniacid, (int) $jifen_info[1], $data["\155\157\156\x65\x79"], 1, $this->settings["\x71\x75\145\x72\145\x6e\x73\150\x6f\x75\150\165\157"]); goto AQPmu; TbiMk: $this->sendSanJiGouMai($user_info, $parent3, $this->settings["\x67\x6f\165\x6d\141\151\163\x61\x6e\152\151"], $order, $uniacid, (int) $jifen_info[3], $data["\155\157\156\145\171"], 3, $this->settings["\161\165\x65\162\x65\156\163\x68\x6f\165\150\165\157"]); goto r8z7S; yEK9I: $jifen1 = intval($order["\x6a\151\x66\x65\x6e"] * $this->settings["\x78\x69\141\x6a\x69\152\x69\146\145\156"] / 100); goto WEXqb; ImupH: foreach ($order_detail as $detail) { goto hKdIL; DhE6u: $this->GoodsModel->update(["\151\144" => $detail["\x67\x6f\x6f\x64\163\x5f\x69\144"]], ["\x73\x65\x6c\154\x5f\x74\x6f\x74\x61\x6c\40\x2b\75" => $detail["\x61\x6d\x6f\165\x6e\164"]]); goto Df0BI; wN22n: $msg = "\xe5\x8d\241\xe5\257\x86\xe7\274\xba\350\264\247\350\xaf\267\xe8\xa1\xa5\xe8\xb4\247\40" . $detail["\x74\151\x74\x6c\x65"] . "\x5b\151\x64\x3a" . $detail["\147\157\x6f\x64\x73\137\x69\x64"] . "\135\40\55\40" . $detail["\164\x79\160\145\x5f\164\151\x74\x6c\145"]; goto nTbsW; gGSo0: goto SeAcF; goto xewqO; hKdIL: if (!$detail["\164\x79\160\x65\x5f\151\x64"]) { goto UhHvZ; } goto vEQtv; YKaBh: if ($detail["\x67\x6f\157\x64\163\164\171\160\x65"] != 1) { goto vqu1u; } goto xVjzA; gpkmT: $list = $this->PasswdsModel->getList(["\157\162\144\145\162\x5f\x64\x65\164\x61\151\154\137\x69\x64" => $detail["\x69\144"]], ["\x63\x6f\144\145"]); goto M23A_; Iomw1: SeAcF: goto tIQ37; aIhAs: $virtual_goods = false; goto Iomw1; Df0BI: UhHvZ: goto YKaBh; nTbsW: $custom = array("\x6d\x73\x67\x74\171\x70\145" => "\164\x65\170\x74", "\164\145\170\x74" => array("\x63\157\x6e\164\x65\156\164" => urlencode($msg)), "\164\157\x75\163\145\x72" => $this->settings["\x73\x65\x6c\154\x65\162"]); goto ROeE0; sNc7A: $result = $this->PasswdsModel->query($sql); goto k7AWf; xewqO: vqu1u: goto aIhAs; YEPTx: iHuoT: goto gpkmT; GBgJM: $acc = self::getWeAccount($uniacid); goto H83kA; H83kA: $acc->sendCustomNotice($custom); goto s0ie_; esoOt: goto uHIfh; goto YEPTx; tIQ37: VrBD8: goto zrLvf; QHN0J: $custom = array("\155\163\147\x74\x79\x70\x65" => "\x74\145\170\164", "\164\x65\170\x74" => array("\x63\157\x6e\x74\x65\x6e\x74" => urlencode($msg)), "\164\x6f\165\x73\145\162" => $user_info["\157\160\x65\156\151\144"]); goto GBgJM; sr11k: wb0KR: goto gCExL; M23A_: $str = ''; goto UmeML; Z19Kr: $msg = "\345\x8d\241\xe5\257\x86\347\274\272\xe8\xb4\247\xe8\xaf\267\xe8\201\224\347\xb3\xbb\345\x95\206\346\210\267\350\241\xa5\350\xb4\247\357\274\x9a" . $this->settings["\164\145\154"]; goto svKDo; sAMN6: if (!$url["\x67\x6f\157\144\163\x6c\x69\141\x6e\x6a\151\x65"]) { goto wb0KR; } goto Abe00; UmeML: foreach ($list as $code) { $str .= $code["\143\157\x64\145"] . "\15\12"; i6X_F: } goto mmUAc; AdfnV: $this->OrderDetailModel->update(["\x69\x64" => $detail["\151\144"]], ["\162\145\155\x61\162\x6b" => $str]); goto kipzp; mmUAc: XgVL9: goto AdfnV; svKDo: $custom = array("\x6d\163\147\x74\x79\160\145" => "\x74\x65\170\164", "\164\x65\170\x74" => array("\143\x6f\x6e\x74\x65\156\164" => urlencode($msg)), "\x74\157\x75\x73\145\x72" => $user_info["\157\x70\145\x6e\151\x64"]); goto JHpXU; kipzp: $url = $this->GoodsAttributeModel->getOne(["\x67\157\157\144\163\137\151\x64" => $detail["\147\x6f\157\x64\x73\x5f\x69\x64"]], ["\x67\x6f\157\144\x73\154\x69\141\x6e\152\x69\145", "\x67\x6f\157\144\163\x6c\151\141\156\152\151\145\x73\150\165\157\x6d\x69\156\147"]); goto Xz01j; ROeE0: $acc = self::getWeAccount($uniacid); goto NS3Ib; NS3Ib: $acc->sendCustomNotice($custom); goto esoOt; cty8_: $msg .= "\15\xa\xe9\223\xbe\xe6\216\xa5\xe4\270\xba\357\274\x9a" . $url["\147\x6f\157\144\163\154\x69\141\156\152\151\x65"]; goto OreDc; gCExL: if (!$url["\x67\157\157\144\163\154\151\141\156\152\151\x65"]) { goto Jb7hg; } goto cty8_; xVjzA: $sql = "\125\x50\104\101\x54\x45\40" . tablename("\x77\147\x5f\x66\145\x6e\x78\151\141\x6f\x5f\x70\x61\x73\x73\167\x64\x73") . "\40\x53\x45\x54\x20\x60\x75\x69\x64\140\x3d\47" . $order["\x6d\145\155\x62\x65\162\151\x64"] . "\47\x2c\140\163\164\x61\x74\x75\x73\140\x3d\61\x2c\x60\157\162\144\145\162\x5f\x64\x65\164\141\151\x6c\137\x69\144\x60\x3d\x27" . $detail["\151\144"] . "\47\x2c\x60\x75\x70\144\x61\164\145\x5f\164\151\x6d\145\140\x3d\x27" . time() . "\x27\40\127\110\105\x52\x45\x20\140\164\171\160\145\x60\x3d" . $detail["\x67\157\157\144\163\x70\141\163\x73\164\171\160\x65"] . "\x20\101\116\104\40\x73\x74\x61\164\165\163\75\x30\40\154\151\x6d\x69\164\40" . $detail["\x61\155\x6f\165\x6e\164"]; goto sNc7A; Xz01j: $msg = "\346\x82\xa8\350\xb4\xad\xe4\xb9\xb0\xe7\232\x84\xe5\x95\206\345\223\x81\345\x8d\241\345\257\206\344\270\272\357\274\x9a\xd\xa" . rtrim(trim($str), "\x7c"); goto sAMN6; vEQtv: $goods_ids[] = $detail["\x67\157\157\x64\x73\137\x69\x64"]; goto EeFeR; k7AWf: if ($result) { goto iHuoT; } goto Z19Kr; EeFeR: $this->GoodsTypeModel->update(["\x69\144" => $detail["\164\x79\x70\x65\x5f\x69\144"]], ["\x61\155\157\x75\156\x74\137\x73\145\154\154\40\x2b\75" => $detail["\141\x6d\157\165\x6e\x74"]]); goto DhE6u; Abe00: $msg .= "\15\12\xe6\225\231\347\250\x8b\xe6\210\x96\350\xaf\xb4\346\230\x8e\xe4\xb8\272\xef\xbc\x9a" . $url["\x67\x6f\157\x64\x73\154\x69\141\156\x6a\151\x65\163\x68\x75\x6f\x6d\151\x6e\147"]; goto sr11k; a2YaR: $acc->sendCustomNotice($custom); goto wN22n; JHpXU: $acc = self::getWeAccount($uniacid); goto a2YaR; OreDc: Jb7hg: goto QHN0J; s0ie_: uHIfh: goto gGSo0; zrLvf: } goto ELUQ6; FRApA: ejdIH: goto vuplA; B_Pwn: $params["\x6f\x75\164\x5f\164\162\141\144\x65\x5f\x6e\157"] = $order["\x6f\162\x64\x65\162\163\x6e"]; goto Qi76Z; TLqkp: FvBQ8: goto lSOsb; wdQja: $uid = mc_openid2uid($user_info["\x6f\160\145\156\x69\144"]); goto CGLxj; LKR9R: return 400; goto KPX3W; et3E2: if ($level) { goto Fc0PF; } goto X9nmB; uXYn_: $this->MemberModel->update(["\x69\144" => $order["\155\145\x6d\142\145\x72\151\144"]], ["\143\x6f\x6e\163\165\155\145\x20\53\x3d" => $order["\x6f\162\x64\145\162\160\x72\151\x63\145"], "\x6f\162\x64\145\162\x5f\x6e\x75\x6d\40\x2b\x3d" => 1]); goto kylyn; KPX3W: } private function _editIsAgent($user_info) { goto hWBSV; ftTko: i1_Vz: goto pqOcm; sFAg0: return true; goto syCeG; lEqkq: $curr_order_num = $user_info["\157\162\x64\145\162\x5f\x6e\165\x6d"]; goto l73ra; fw6YC: if ($condition == 3) { goto dqhdU; } goto LF6NR; GxP7X: zc9gu: goto pDlkM; hWBSV: $condition = $this->settings["\144\x61\151\154\x69\x74\x69\141\x6f\x6a\151\141\x6e"]; goto sUiNt; sUiNt: if ($user_info["\x69\163\x61\147\x65\x6e\x74"] == 0) { goto zc9gu; } goto Uku3L; LF6NR: goto yI509; goto okKNC; AtJ8A: pgMW4: goto fyFzp; Phmtc: return true; goto ftTko; EwHOM: if (!($curr_order_num >= $need_order_num)) { goto pgMW4; } goto wdd0U; d6p4d: MGHCV: goto sFAg0; pqOcm: yI509: goto nAYSS; fyFzp: goto yI509; goto NFkbu; PgfW7: $this->MemberModel->update(["\x69\144" => $user_info["\x69\x64"]], ["\151\x73\141\x67\x65\156\164" => 1, "\141\147\145\x6e\164\164\151\x6d\145" => time()]); goto Phmtc; okKNC: wPOwu: goto lEqkq; n4oci: return true; goto AtJ8A; u3dWT: $need_money = $this->settings["\147\x6f\165\x6d\x61\x69\161\151\x61\x6e\163\150\x75"]; goto xz39m; Uku3L: if ($user_info["\x69\x73\141\147\145\156\164"] == 1) { goto MGHCV; } goto Q_d11; l73ra: $need_order_num = $this->settings["\x67\x6f\165\x6d\x61\x69\x64\141\156\163\x68\x75"]; goto EwHOM; xz39m: if (!($user_info["\143\157\156\163\x75\x6d\x65"] >= $need_money)) { goto i1_Vz; } goto PgfW7; pDlkM: if ($condition == 2) { goto wPOwu; } goto fw6YC; J7On6: goto LMjM6; goto d6p4d; Q_d11: goto LMjM6; goto GxP7X; syCeG: LMjM6: goto dMpbg; NFkbu: dqhdU: goto u3dWT; nAYSS: return false; goto J7On6; wdd0U: $this->MemberModel->update(["\x69\x64" => $user_info["\151\144"]], ["\x69\x73\x61\147\145\x6e\164" => 1, "\141\x67\x65\x6e\x74\x74\x69\155\145" => time()]); goto n4oci; dMpbg: } private function compute_commision($order, $order_detail, $goods_attrs = array()) { goto yvwuQ; efcHr: J_Go9: goto HYSwV; f4iiz: $goods_attrs = $this->arrayIndex($goods_attrs, "\x67\x6f\157\144\x73\x5f\x69\x64"); goto cmPJH; bnigC: U28Sf: goto PhYMy; PhYMy: return ["\x63\157\x6d\155\x69\163\151\x6f\x6e\137\x74\x69\x6d\x65" => time(), "\143\x6f\x6d\x6d\x69\163\x69\x6f\156\61" => $commision1, "\x63\x6f\155\x6d\151\163\151\157\x6e\62" => $commision2, "\x63\157\x6d\155\151\x73\151\157\x6e\63" => $commision3]; goto BHrZs; VjzAz: foreach ($order_detail as &$detail) { goto zeDMY; JFZcM: $goods_total[$detail["\x67\x6f\x6f\x64\163\137\x69\144"]] += $detail["\143\x6f\x6d\155\x69\x73\x69\157\156\61"] + $detail["\x63\x6f\155\x6d\151\x73\151\x6f\156\62"] + $detail["\x63\x6f\x6d\155\x69\x73\151\x6f\x6e\x33"]; goto VeqSJ; J16wx: PgQcu: goto wb0D6; OHpXV: $detail["\x63\x6f\155\x6d\x69\163\x69\x6f\x6e\61"] = number_format($detail["\x63\157\x6d\x6d\151\163\x69\x6f\x6e\61"], 2, "\56", ''); goto o8Tzu; GuFP5: $goods_commision[$detail["\x69\x64"]]["\143\157\x6d\x6d\151\x73\151\x6f\156\x31"] += $detail["\143\x6f\x6d\x6d\x69\x73\x69\x6f\156\x31"]; goto VyUUB; O4Dx6: $this->crontab_log("\x63\x6f\x6d\160\165\x74\145\x5f\143\157\155\155\151\163\151\157\x6e\x3a\xe5\x95\x86\xe5\223\x81\xe4\xbd\xa3\xe9\207\x91\111\x44\357\274\x9a" . $detail["\147\157\157\144\x73\137\x69\144"] . "\344\275\xa3\351\x87\221\345\205\263\351\227\255"); goto PfBYb; SorBN: $detail["\x67\x6f\157\144\163\x5f\x69\156\146\157"] = $goods_info; goto AkX4e; KAfhL: $commision2 += $detail["\x63\157\155\155\x69\163\x69\157\x6e\62"]; goto CMrYY; w7C0L: $detail["\x63\157\155\x6d\x69\163\151\157\x6e\62"] = $detail["\x70\x72\x69\143\x65"] * $goods_info["\171\x6f\x6e\x67\x6a\151\x6e\x32"] * $detail["\141\155\157\x75\x6e\164"] / 100; goto DeM3c; N4BgE: $goods_commision[$detail["\x69\144"]]["\x63\157\155\155\151\x73\151\157\156\x33"] += $detail["\143\157\155\155\x69\x73\151\x6f\156\x33"]; goto JFZcM; DeM3c: $detail["\143\x6f\x6d\155\151\x73\151\157\156\63"] = $detail["\x70\162\151\143\145"] * $goods_info["\171\x6f\x6e\x67\x6a\151\156\63"] * $detail["\141\155\157\165\x6e\x74"] / 100; goto YZ_GD; OWIVg: goto N9SOy; goto hpU3P; PfBYb: $detail["\143\157\155\x6d\151\x73\151\x6f\x6e\x31"] = $detail["\143\x6f\x6d\x6d\151\x73\x69\157\x6e\62"] = $detail["\143\x6f\155\x6d\x69\x73\x69\x6f\156\x33"] = 0; goto fwOOC; d4KDm: $detail["\143\x6f\155\x6d\x69\x73\x69\x6f\156\62"] = $detail["\x70\162\151\143\x65"] * $this->settings["\x65\x72\152\151\x79\x6f\x6e\147\152\151\156"] * $detail["\141\x6d\x6f\x75\156\164"] / 100; goto yUN5J; Le5QG: $detail["\x63\x6f\155\x6d\x69\163\x69\x6f\x6e\x33"] = $goods_info["\171\x6f\x6e\147\x6a\151\156\63"] * $detail["\x61\x6d\157\x75\x6e\164"]; goto L0mMg; YZ_GD: N9SOy: goto OHpXV; EoIle: if ($goods_info["\x64\x75\x6c\151\171\x6f\156\x67\152\151\x6e"] == 1) { goto x1rln; } goto r7bUP; VyUUB: $goods_commision[$detail["\151\144"]]["\143\157\155\x6d\x69\163\151\157\156\62"] += $detail["\143\157\x6d\155\151\x73\x69\x6f\x6e\x32"]; goto N4BgE; s5cLX: Xtzbq: goto GuFP5; L0mMg: goto N9SOy; goto Vwebf; yUN5J: $detail["\143\157\x6d\155\x69\x73\151\157\156\63"] = $detail["\x70\x72\151\x63\x65"] * $this->settings["\163\x61\x6e\x6a\151\171\157\156\147\152\x69\156"] * $detail["\x61\155\x6f\165\156\164"] / 100; goto OWIVg; AkX4e: if ($goods_info["\146\145\156\x78\151\141\x6f"]) { goto BaWsC; } goto O4Dx6; zeDMY: $goods_info = $goods_attrs[$detail["\x67\157\157\144\x73\137\x69\144"]]; goto SorBN; VeqSJ: $commision1 += $detail["\x63\157\x6d\155\151\x73\151\x6f\156\x31"]; goto KAfhL; B8JlT: $detail["\x63\157\x6d\x6d\151\163\x69\157\x6e\61"] = $detail["\x70\162\x69\143\145"] * $this->settings["\171\x69\152\x69\171\x6f\x6e\147\152\151\x6e"] * $detail["\141\x6d\157\x75\156\x74"] / 100; goto d4KDm; AORQ6: $detail["\143\x6f\x6d\155\x69\x73\x69\x6f\156\61"] = $goods_info["\171\x6f\x6e\147\152\x69\x6e\61"] * $detail["\x61\x6d\x6f\x75\x6e\164"]; goto O0zFl; hE1O8: $detail["\x63\157\155\155\151\x73\x69\157\x6e\x33"] = number_format($detail["\x63\x6f\155\x6d\151\163\151\x6f\156\x33"], 2, "\56", ''); goto zTzNc; xUo4J: BaWsC: goto lMbQP; r7bUP: if ($goods_info["\144\165\x6c\x69\x79\x6f\156\147\152\151\156"] == 2) { goto HKU5u; } goto B8JlT; CMrYY: $commision3 += $detail["\143\x6f\155\x6d\x69\163\x69\157\156\x33"]; goto J16wx; tnAFl: goto PgQcu; goto l2e90; l2e90: uo_Wm: goto EoIle; zTzNc: $this->crontab_log("\x63\157\x6d\160\x75\164\x65\x5f\x63\157\x6d\x6d\x69\x73\151\x6f\x6e\72" . $detail["\147\x6f\157\144\x73\x5f\x69\x6e\146\x6f"]["\144\165\x6c\151\171\x6f\156\147\152\151\156"] . "\345\x95\x86\345\x93\201\344\275\243\xe9\207\x91\111\x44\357\xbc\x9a" . $detail["\x67\x6f\x6f\144\163\137\151\x64"] . "\55" . $detail["\x63\157\x6d\155\x69\x73\151\157\x6e\x31"] . "\x2d" . $detail["\x63\x6f\155\x6d\x69\x73\x69\x6f\156\x32"] . "\x2d" . $detail["\143\157\x6d\155\x69\x73\151\x6f\x6e\63"]); goto s5cLX; fwOOC: goto Xtzbq; goto xUo4J; lMbQP: if (!($goods_info["\172\x6f\156\x67\171\157\x6e\147\152\151\x6e"] > 0 && $goods_info["\171\x6f\156\x67\x6a\x69\x6e\x5f\165\x73\x65\144"] >= $goods_info["\x7a\157\x6e\147\171\157\x6e\147\x6a\151\x6e"])) { goto uo_Wm; } goto dPKb4; dPKb4: $this->crontab_log("\x63\x6f\x6d\x70\165\x74\x65\x5f\x63\x6f\155\155\151\163\151\157\156\72\345\225\206\345\223\x81\xe4\275\xa3\351\x87\221\x49\x44\xef\274\232" . $detail["\147\x6f\x6f\144\x73\137\x69\144"] . "\xe4\275\243\351\207\221\xe5\xb7\xb2\347\224\xa8\xe5\256\x8c" . $goods_info["\171\157\156\x67\x6a\x69\x6e\137\165\163\x65\144"] . "\76" . $goods_info["\172\x6f\156\147\x79\x6f\x6e\147\152\151\156"]); goto tnAFl; O0zFl: $detail["\x63\157\155\155\x69\163\x69\157\156\62"] = $goods_info["\171\157\x6e\x67\x6a\151\x6e\x32"] * $detail["\x61\155\x6f\x75\156\x74"]; goto Le5QG; hpU3P: x1rln: goto AORQ6; GpGfd: $detail["\143\x6f\x6d\x6d\151\163\x69\157\156\61"] = $detail["\x70\162\151\143\145"] * $goods_info["\171\157\x6e\147\x6a\151\x6e\x31"] * $detail["\x61\155\157\165\x6e\x74"] / 100; goto w7C0L; o8Tzu: $detail["\x63\157\155\x6d\x69\x73\151\157\156\x32"] = number_format($detail["\143\x6f\155\x6d\151\163\151\157\x6e\62"], 2, "\56", ''); goto hE1O8; Vwebf: HKU5u: goto GpGfd; wb0D6: } goto efcHr; ORcfO: foreach ($order_detail as $detail) { $goods_ids[] = $detail["\147\157\157\x64\x73\x5f\151\144"]; pjNL3: } goto I6FwK; g8hO4: $goods_ids = array_unique($goods_ids); goto mKPEC; yvwuQ: if (!($order["\x70\x61\162\145\156\x74\61"] == 0 && $order["\x70\141\162\x65\156\164\x32"] == 0 && $order["\160\x61\x72\x65\x6e\164\63"] == 0)) { goto DRjPT; } goto YcmCQ; z2w5N: MKsZl: goto bnigC; amH5G: if ($goods_attrs) { goto Ur4LL; } goto BGTvX; mKPEC: $goods_attrs = $this->GoodsAttributeModel->getList(["\x67\x6f\157\x64\163\137\151\x64" => $goods_ids], ["\147\x6f\157\x64\x73\x5f\x69\x64", "\172\x6f\x6e\x67\x79\x6f\156\147\152\151\x6e", "\171\157\156\147\x6a\x69\156\137\x75\x73\145\144", "\x64\x75\154\151\x79\157\156\x67\x6a\151\x6e", "\171\x6f\x6e\147\x6a\151\x6e\x31", "\x79\x6f\156\147\x6a\151\156\62", "\x79\x6f\156\x67\x6a\151\156\63", "\146\x65\x6e\170\x69\x61\x6f"]); goto f4iiz; YcmCQ: return ["\143\157\155\155\151\163\151\x6f\156\137\x74\151\155\x65" => time(), "\143\157\155\x6d\151\x73\151\157\156\x31" => 0, "\x63\157\155\155\x69\163\151\x6f\x6e\62" => 0, "\143\x6f\155\155\151\x73\151\157\x6e\x33" => 0]; goto MDC8x; D4aYB: $goods_commision = []; goto AZlbO; LHm5G: foreach ($goods_total as $g_id => $value) { goto ndaLb; koSDH: $this->GoodsAttributeModel->update(["\x67\157\x6f\x64\x73\137\x69\144" => $g_id], ["\171\157\156\147\152\x69\x6e\137\x75\163\145\144\40\x2b\75" => $value]); goto yRQtv; ndaLb: if (!($value > 0)) { goto fyo9o; } goto koSDH; yRQtv: fyo9o: goto F2gxw; F2gxw: qyUab: goto VdHqh; VdHqh: } goto z2w5N; MDC8x: DRjPT: goto amH5G; kXesZ: ZLBG5: goto LHm5G; AZlbO: $goods_total = []; goto VjzAz; cmPJH: Ur4LL: goto dZAh4; BGTvX: $goods_ids = []; goto ORcfO; ZJitX: if (!($commision1 > 0 || $commision2 > 0 || $commision3 > 0)) { goto U28Sf; } goto hQ9nG; hQ9nG: foreach ($order_detail as $value) { goto MZjrO; FuAzp: $this->OrderDetailModel->update(["\x69\144" => $value["\151\144"]], ["\143\x6f\x6d\x6d\x69\163\151\x6f\x6e\x31" => $goods_commision[$value["\x69\x64"]]["\x63\157\x6d\x6d\x69\163\151\157\x6e\61"], "\x63\x6f\155\x6d\x69\163\151\157\x6e\x32" => $goods_commision[$value["\151\x64"]]["\143\157\x6d\x6d\x69\x73\151\157\x6e\62"], "\x63\157\155\155\151\x73\151\157\156\x33" => $goods_commision[$value["\151\144"]]["\x63\157\x6d\155\x69\x73\x69\157\156\63"]]); goto kX77Y; MZjrO: if (!($goods_commision[$value["\151\x64"]]["\x63\157\155\x6d\x69\163\151\157\x6e\61"] > 0 || $goods_commision[$value["\x69\144"]]["\143\x6f\x6d\x6d\x69\163\x69\157\156\62"] > 0 || $goods_commision[$value["\151\144"]]["\143\157\x6d\x6d\151\x73\x69\x6f\156\x33"] > 0)) { goto aPF9_; } goto FuAzp; kX77Y: aPF9_: goto z1l68; z1l68: aIJQS: goto FQPZd; FQPZd: } goto kXesZ; dZAh4: $commision1 = $commision2 = $commision3 = 0; goto D4aYB; HYSwV: $this->crontab_log("\143\157\x6d\160\165\164\145\x5f\x63\157\155\x6d\x69\x73\151\157\x6e\x3a\344\xbd\xa3\xe9\x87\221\x3a" . $commision1 . "\174" . $commision2 . "\x7c" . $commision3); goto ZJitX; I6FwK: DBiwW: goto g8hO4; BHrZs: } private function _checkSign($order, $get) { goto TvKVv; rcLiX: $facilitator_setting = uni_setting($wechat["\163\145\162\166\x69\x63\x65"], array("\160\141\171\x6d\145\156\x74")); goto wWHUk; c_N6b: fTlz1: goto lvaR0; Ls_U_: goto MxPiX; goto yn7l3; d8mH2: ksort($get); goto PmyNF; TvKVv: $setting = uni_setting($order["\167\x65\x69\144"], array("\160\141\x79\155\145\x6e\x74")); goto vKEx4; vKEx4: $wechat = $setting["\160\x61\x79\155\x65\x6e\164"]["\x77\145\143\150\141\x74"]; goto hoYR0; K742v: dD7g0: goto Lhzmt; PmyNF: $string1 = ''; goto wQJ2y; aDdQR: bgQal: goto c_N6b; Lhzmt: if (intval($wechat["\163\x77\151\x74\143\x68"]) == 3) { goto WYvFB; } goto fd6sy; DhYf3: $sign = strtoupper(md5($string1 . "\x6b\x65\171\75{$wechat["\x73\x69\147\156\x6b\145\171"]}")); goto tAAjx; fd6sy: $wechat["\163\x69\147\x6e\x6b\x65\x79"] = $wechat["\166\145\x72\x73\151\x6f\x6e"] == 1 ? $wechat["\x6b\145\x79"] : $wechat["\163\151\x67\x6e\x6b\x65\171"]; goto Ls_U_; lvaR0: return false; goto TO1mV; wWHUk: $wechat["\163\151\147\x6e\x6b\145\171"] = $facilitator_setting["\160\141\x79\x6d\x65\156\164"]["\167\x65\143\150\x61\x74\137\146\141\x63\x69\154\x69\164\141\x74\x6f\162"]["\x73\x69\x67\x6e\x6b\145\171"]; goto mUrEg; wQJ2y: foreach ($get as $k => $v) { goto glBXT; glBXT: if (!($v != '' && $k != "\x73\x69\147\156")) { goto ZDq7a; } goto Z_jes; d37l0: d_ALn: goto XNnz5; Ucu1i: ZDq7a: goto d37l0; Z_jes: $string1 .= "{$k}\x3d{$v}\46"; goto Ucu1i; XNnz5: } goto K742v; mUrEg: MxPiX: goto DhYf3; tAAjx: if (!($sign == $get["\x73\151\x67\156"])) { goto bgQal; } goto dc774; hoYR0: if (empty($wechat)) { goto fTlz1; } goto d8mH2; yn7l3: WYvFB: goto rcLiX; dc774: return true; goto aDdQR; TO1mV: } }