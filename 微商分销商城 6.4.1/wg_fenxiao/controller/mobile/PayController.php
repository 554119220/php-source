<?php
 class PayController extends MobileBaseController { public $size = 10; public function index() { goto t6EHq; eUjD_: $data["\146\141\x73\164\x5f\155\145\156\165"] = false; goto Pa3Zj; Pa3Zj: $data["\161\x72\137\143\x6f\144\145"] = $this->module["\143\x6f\x6e\146\x69\x67"]["\161\x72\x5f\x63\x6f\x64\x65"]; goto h4XCE; S4bk6: $this->display(); goto yigJ6; h4XCE: $data["\x75\x73\145\162"] = $this->MemberModel->getOne(["\x69\144" => $this->uid]); goto EV__2; EV__2: $this->assign($data); goto S4bk6; t6EHq: $data["\164\x69\x74\154\x65"] = "\xe9\207\x91\xe9\242\x9d\xe6\217\x90\xe7\x8e\xb0"; goto eUjD_; yigJ6: } public function pay() { goto dT1iY; Ss0mU: $this->RedPackModel->update(["\x69\144" => $redpack_id], ["\163\164\x61\164\165\163" => 2, "\163\145\x6e\x64\x5f\x6c\151\163\x74\x69\x64" => $result["\163\145\x6e\144\137\x6c\151\163\164\151\x64"], "\145\162\162\137\x63\157\144\x65" => $send_pack["\145\x72\162\x5f\x63\157\144\145"], "\x65\x72\x72\137\143\157\x64\145\x5f\144\145\163" => $send_pack["\x65\x72\x72\137\143\157\144\145\x5f\144\x65\163"]]); goto lc3uU; dT1iY: if ($this->uid) { goto TggFA; } goto eTagk; AfUt3: TggFA: goto wIYGl; msLiA: $this->ajaxReturn(404, "\346\217\220\347\x8e\xb0\xe5\244\261\xe8\264\xa5\x33"); goto RA_F9; Dhygn: return false; goto QmZ7B; lc3uU: goto WA_vi; goto JlOlt; UI5Oz: if (!($users && in_array($this->uid, $users))) { goto rruH1; } goto kUQ5J; j2fbC: $money_fen = $money * 100; goto Pm4xr; uDSar: $this->ajaxReturn(403, "\xe6\217\220\347\216\xb0\xe5\xa4\261\350\xb4\xa5\62"); goto iORpm; uE54D: $this->ajaxReturn(0, ''); goto lrIKJ; SzMYz: $user = $this->MemberModel->getOne(["\151\x64" => $this->uid]); goto rfUnl; kUQ5J: $this->ajaxReturn(400, "\351\207\x91\xe9\xa2\x9d\xe5\x86\273\xe7\273\223"); goto TXTSy; uQttZ: $this->ajaxReturn(402, "\xe6\x8f\220\347\x8e\xb0\xe5\244\261\xe8\xb4\xa5\x31"); goto js3If; oPLgb: if ($red_pack_update) { goto Urp4D; } goto Fru0M; wIYGl: $users = $this->module["\143\157\x6e\x66\x69\147"]["\156\x6f\150\157\156\x67\x62\x61\x6f"]; goto gHueC; J5Q4v: if ($redpack_id) { goto BEBne; } goto uQttZ; gHueC: $users = str_replace("\xef\274\214", "\54", $users); goto ZYdJA; lrIKJ: WA_vi: goto msLiA; oLiLa: $config = $this->site->configs; goto hfD5C; JlOlt: Gdtue: goto dc571; TXTSy: rruH1: goto iSRSD; cl06d: $billno = substr($this->getOrderId() . date("\x79\155\x64\x48\x69\163") . random(2, 1), 0, 28); goto SQOnD; iSRSD: $money = floatval($_POST["\155\x6f\156\x65\x79"]); goto yzQPw; dc571: $red_pack_update = $this->RedPackModel->update(["\151\144" => $redpack_id], ["\163\x74\141\164\x75\163" => 1, "\163\145\x6e\x64\x5f\154\151\163\164\x69\144" => $result["\x73\145\x6e\x64\x5f\154\151\x73\164\x69\x64"]]); goto oPLgb; hfD5C: $send_pack = $this->RedPackModel->sendRedPackNew($user["\157\160\145\x6e\x69\144"], $config, $money_fen, $this->W["\x77\145\x69\x64"], $billno); goto fpzpf; vrZjz: AOI8N: goto SzMYz; eTagk: $this->ajaxReturn(300, "\350\257\xb7\346\202\250\xe5\234\250\xe5\276\xae\xe4\xbf\241\xe7\253\xaf\347\231\xbb\345\xbd\225"); goto AfUt3; Pm4xr: if (!($money_fen < 100)) { goto AOI8N; } goto IFDnE; SQOnD: $data = ["\167\145\151\x64" => $this->W["\167\x65\x69\144"], "\165\x69\x64" => $this->uid, "\x62\151\154\x6c\156\x6f" => $billno, "\155\x6f\156\145\171" => $money, "\143\x72\145\x61\x74\145\x5f\164\x69\x6d\x65" => time()]; goto AEDIf; rfUnl: if (!($money > $user["\x63\x6f\x6d\155\151\x73\163\151\x6f\156"] - $user["\x63\x6f\155\x6d\151\163\x73\151\157\156\137\160\x61\x79"])) { goto Iak8q; } goto i1Vvb; V7kvW: if ($send_pack["\x65\x72\162\137\x63\x6f\144\x65"] == "\x53\x55\103\x43\x45\123\123") { goto Gdtue; } goto Ss0mU; FEK80: Iak8q: goto MJeyv; yzQPw: $money = number_format($money, 2, "\x2e", ''); goto j2fbC; fpzpf: $result = unserialize($send_pack["\x72\x65\164\x75\x72\x6e\x5f\155\163\x67"]); goto V7kvW; ZYdJA: $users = explode("\54", $users); goto UI5Oz; i1Vvb: $this->ajaxReturn(400, "\xe9\207\221\xe9\242\x9d\351\224\x99\xe8\257\257"); goto FEK80; IFDnE: $this->ajaxReturn(399, "\xe6\234\x80\344\275\216\xe6\217\220\xe7\x8e\260\xe9\x87\221\xe9\xa2\235\x20\61\40\xe5\x85\203"); goto vrZjz; iORpm: jcT1U: goto oLiLa; cYhh2: $this->ajaxReturn(401, "\346\257\x8f\346\xac\241\346\234\x80\xe5\244\x9a\xe6\217\220\xe7\216\xb0\x32\x30\x30\xe5\x85\x83"); goto Tm13f; Fru0M: $this->crontab_log("\x64\x6f\x52\145\x73\x75\x6c\x74\x52\x65\x64\x50\x61\143\x6b\x20\x75\160\x64\141\x74\x65\40\162\x65\x64\x20\160\141\x63\153\x20\x66\x61\x69\x6c\x20\x69\144\x3a" . $redpack_id . "\54\144\141\x74\x61\x3a" . var_export($result, true), "\x65\162\162\x6f\162"); goto Dhygn; jfuiB: $update_commision = $this->MemberModel->update(["\151\144" => $this->uid, "\143\x6f\155\155\151\163\163\x69\x6f\156\40\x3e\75" => number_format($user["\x63\157\x6d\155\x69\163\x73\x69\157\156\x5f\160\141\171"], 2, "\56", '') + $money], ["\x63\157\x6d\x6d\x69\x73\x73\151\157\x6e\x5f\160\141\x79\40\x2b\75" => $money]); goto XNVRr; MJeyv: if (!($money > 200)) { goto AX7ce; } goto cYhh2; js3If: BEBne: goto jfuiB; QmZ7B: Urp4D: goto uE54D; AEDIf: $redpack_id = $this->RedPackModel->add($data); goto J5Q4v; XNVRr: if ($update_commision) { goto jcT1U; } goto uDSar; Tm13f: AX7ce: goto cl06d; RA_F9: } private function getOrderId() { $randNo = sprintf("\45\60\64\x64", rand(1, 1000)); return date("\131\x6d\144\x48\151\x73") . $randNo; } }