<?php
 namespace app\api\service; use Imagick; use ImagickDraw; use think\Controller; class Image { public function getRemoteImage($url, $save_dir = '', $filename = '', $type = 0) { goto h06QE; GQA12: file_put_contents($save_dir . $filename, $img); goto u0yLT; RTrf9: hhYDW: goto GQA12; prlM2: ob_start(); goto MLQW2; iw2TQ: $ch = curl_init(); goto vP4iG; U1esH: curl_setopt($ch, CURLOPT_URL, $url); goto w5a13; pfLdQ: curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout); goto uGYXy; h06QE: if ($type) { goto nZrEr; } goto prlM2; u0yLT: return $filename; goto pjbo9; gt_7q: goto hhYDW; goto On641; vP4iG: $timeout = 5; goto U1esH; JOkUg: $img = ob_get_contents(); goto CoX7z; uGYXy: $img = curl_exec($ch); goto RNJiy; On641: nZrEr: goto iw2TQ; RNJiy: curl_close($ch); goto RTrf9; w5a13: curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); goto pfLdQ; MLQW2: readfile($url); goto JOkUg; CoX7z: ob_end_clean(); goto gt_7q; pjbo9: } public function getCircleImage($url, $path = "\x2e\57") { goto qsppA; POG1W: $y++; goto XbdTH; qfxPe: $w = $wh[0]; goto gCG_R; VmPI2: $savePath = $path . uniqid() . "\x2e\x70\156\x67"; goto Aqp0o; DOWF4: $transparent = imagecolorallocatealpha($newpic, 0, 0, 0, 127); goto q8agX; D9vJk: $newpic = imagecreatetruecolor($w, $h); goto CJZSD; n4FLX: $x++; goto iGqHn; CJZSD: imagealphablending($newpic, false); goto DOWF4; tcZTR: unlink($url); goto uYPL0; XbdTH: goto Un3FO; goto oc6tZ; uYPL0: return $savePath; goto GI0r_; MWLVN: lj8JE: goto uxfLV; iGqHn: goto AOfDe; goto yDtsC; QUt3P: goto Y0ZMQ; goto MWLVN; qsppA: $original_path = $url; goto VmPI2; TYEZI: $wh = getimagesize($url); goto qfxPe; yDtsC: FQLBM: goto UixCI; UixCI: imagesavealpha($newpic, true); goto L9e_H; CQGf7: Y0ZMQ: goto Ieic_; n9Mwf: if ($_x * $_x + $_y * $_y < $r * $r) { goto lj8JE; } goto wCpwU; Aqp0o: $src = imagecreatefromstring(file_get_contents($original_path)); goto TYEZI; oc6tZ: WpmIa: goto IWnT7; n0tWh: $_x = $x - $w / 2; goto L8UIW; tL0Ya: AOfDe: goto Vl0ze; Wtmh4: $c = imagecolorat($src, $x, $y); goto n0tWh; j0KGz: imagedestroy($newpic); goto iromn; L8UIW: $_y = $y - $h / 2; goto n9Mwf; q3TEY: if (!($y < $h)) { goto WpmIa; } goto Wtmh4; CUT1M: Un3FO: goto q3TEY; q8agX: $r = $w / 2; goto iQTb0; EAaXr: $y = 0; goto CUT1M; gCG_R: $h = $wh[1]; goto D9vJk; iromn: imagedestroy($src); goto tcZTR; wCpwU: imagesetpixel($newpic, $x, $y, $transparent); goto QUt3P; uxfLV: imagesetpixel($newpic, $x, $y, $c); goto CQGf7; iQTb0: $x = 0; goto tL0Ya; Ieic_: XsB3u: goto POG1W; IWnT7: J6WyS: goto n4FLX; Vl0ze: if (!($x < $w)) { goto FQLBM; } goto EAaXr; L9e_H: imagepng($newpic, $savePath); goto j0KGz; GI0r_: } }