<?php
 namespace app\api\service; use app\api\model\User as UserModel; use app\api\model\Order as OrderModel; class User { public static function shareCondition($uid) { goto bZvgx; skuuM: $condition = 2; goto v1gTl; ei_U6: goto kzKa4; goto HWjIY; v1gTl: goto kzKa4; goto go5LD; bZvgx: $user = UserModel::get($uid); goto vcB0H; xF1K0: $firsPay = OrderModel::where(["\165\156\151\x61\x63\x69\x64" => session("\165\x6e\x69\x61\143\151\144"), "\165\163\x65\162\x5f\151\144" => $uid, "\151\x73\137\x64\x65\154\145\x74\x65" => 0, "\x69\x73\137\x72\145\x66\165\156\144" => 0, "\163\x74\141\164\x75\163" => 1])->count(); goto NORxC; go5LD: R1eYI: goto IQ06B; M2Vch: goto kzKa4; goto cQYqB; ZazK2: if ($firsOrder <= 1) { goto l9yV7; } goto DhXPz; cQYqB: l9yV7: goto skuuM; vcB0H: $condition = 0; goto vzj1M; HWjIY: IwADu: goto YjpD7; htVlB: kzKa4: goto Ojue7; Ojue7: return $condition; goto iZm9J; YjpD7: $condition = 1; goto M2Vch; vzj1M: $firsOrder = OrderModel::countUserOrder($uid); goto xF1K0; IQ06B: $condition = 3; goto htVlB; DhXPz: if ($firsPay <= 1) { goto R1eYI; } goto ei_U6; NORxC: if ($user["\x70\141\x72\145\156\x74\x5f\165\x73\145\162\x5f\151\x64"] == null) { goto IwADu; } goto ZazK2; iZm9J: } public function countDistributors() { goto sFg5V; voP4o: $second = $third = []; goto XoeqW; wKcED: P3Xly: goto Psdh1; sFg5V: $uid = Token::getCurrentUid(); goto KPDzV; F3coA: foreach ($second as $k => $v) { goto O07hS; my8W6: Dbm2h: goto GjTF7; q9F18: $thirdCount = count($third); goto my8W6; O07hS: $third = UserModel::getUserByParentId($v["\x69\x64"]); goto q9F18; GjTF7: } goto wKcED; KPDzV: $first = UserModel::where(["\165\156\x69\x61\143\151\x64" => session("\x75\x6e\x69\141\143\x69\x64"), "\x70\x61\162\x65\x6e\164\x5f\x69\144" => $uid, "\151\163\x5f\144\145\154\x65\164\145" => 0])->field("\151\144\x2c\x61\166\x61\164\x61\162\54\156\151\143\153\156\141\x6d\145\x2c\x62\151\x6e\x64\x5f\x74\151\x6d\145")->select(); goto DQF4Q; DQF4Q: $firstCount = count($first); goto voP4o; F053b: return $count; goto vtDEa; Psdh1: $count = $firstCount + $secondCount + $thirdCount; goto F053b; XoeqW: $secondCount = $thirdCount = 0; goto BRoR_; q7Nd6: FXb7N: goto F3coA; BRoR_: foreach ($first as $key => $value) { goto PKy21; HjDy2: yNIwl: goto ZMSQS; yGI61: $secondCount = count($second); goto HjDy2; PKy21: $second = UserModel::getUserByParentId($value["\151\x64"]); goto yGI61; ZMSQS: } goto q7Nd6; vtDEa: } public function getDistributors() { goto j4BMo; IRuaF: vgJcY: goto V2xAc; imcAG: $second = $third = []; goto JEceD; iye70: $first = UserModel::where(["\165\156\x69\141\143\151\x64" => session("\x75\x6e\151\141\x63\x69\x64"), "\160\x61\x72\x65\x6e\x74\137\151\x64" => $uid, "\151\x73\137\144\145\154\145\164\x65" => 0])->field("\x69\x64\x2c\x61\x76\141\x74\141\x72\x2c\x6e\151\143\x6b\156\141\x6d\145\x2c\142\x69\156\x64\x5f\x74\x69\155\145")->order("\x62\151\x6e\144\x5f\164\151\x6d\x65", "\144\145\x73\x63")->select(); goto imcAG; V2xAc: foreach ($second as $k => $v) { goto GIOkf; gg7AK: $third = UserModel::getUserByParentId($v["\151\144"]); goto dbqAr; GIOkf: $v["\x74\x6f\x74\141\154\137\x6f\x72\x64\x65\162"] = OrderModel::countUserOrder($v["\x69\144"]); goto m93mI; m93mI: $v["\164\x6f\164\141\x6c\137\160\x61\171"] = OrderModel::countUserPay($v["\x69\144"]); goto gg7AK; dbqAr: XxBJh: goto q7aGj; q7aGj: } goto Lf_d0; j4BMo: $uid = Token::getCurrentUid(); goto iye70; Lf_d0: mnzan: goto F6LZx; TX1yP: OEURk: goto jD8O8; JEceD: foreach ($first as $key => $value) { goto rRPvp; rRPvp: $value["\x74\x6f\164\x61\154\137\157\x72\144\x65\x72"] = OrderModel::countUserOrder($value["\x69\x64"]); goto HjYt5; NAJsC: IQj_J: goto kGg4_; HjYt5: $value["\x74\157\164\x61\154\137\x70\x61\x79"] = OrderModel::countUserPay($value["\x69\144"]); goto Kz7a4; Kz7a4: $second = UserModel::getUserByParentId($value["\x69\144"]); goto NAJsC; kGg4_: } goto IRuaF; ASYHC: return $dis; goto aIJSy; jD8O8: $dis = ["\x66\151\x72\x73\164" => $first, "\163\145\x63\157\156\x64" => $second, "\164\150\x69\162\x64" => $third]; goto ASYHC; F6LZx: foreach ($third as $kk => $vv) { goto jT6VM; jT6VM: $vv["\164\157\x74\141\154\137\157\162\144\x65\x72"] = OrderModel::countUserOrder($vv["\151\144"]); goto rMzxL; rMzxL: $vv["\164\157\x74\141\x6c\x5f\160\141\x79"] = OrderModel::countUserPay($vv["\151\x64"]); goto tqCqv; tqCqv: kdnFH: goto fb1aj; fb1aj: } goto TX1yP; aIJSy: } public function getShareOrder() { goto kBNXr; vlFTY: $thirdIdIds = implode("\x2c", $thirdId); goto aFlbN; s1JzX: $secondIds = implode("\x2c", $secondId); goto GGK2O; aFlbN: $thirdOrder = OrderModel::getOrderInUid($thirdIdIds); goto vv3uC; y7KUL: $firstIds = implode("\54", $firstId); goto dq8Lh; ebyG4: zWBqv: goto zwlVj; XL7Qu: C39Ub: goto AI91e; GGK2O: $secondOrder = OrderModel::getOrderInUid($secondIds); goto nm7kQ; hCmGT: if (empty($secondId)) { goto OOMsS; } goto s1JzX; LheWo: eTSOq: goto xQyfC; xQyfC: if (empty($firstId)) { goto C39Ub; } goto y7KUL; vv3uC: SjXmu: goto p2zJy; Euvo6: foreach ($dis["\x66\x69\162\x73\164"] as $key => $value) { $firstId[$key] = $value["\151\x64"]; frOUK: } goto LheWo; kBNXr: $dis = self::getDistributors(); goto iqRin; A0pXH: J0i0H: goto hCmGT; zwlVj: if (empty($thirdId)) { goto SjXmu; } goto vlFTY; p0qik: return $order; goto PObt8; FUT0m: foreach ($dis["\x74\x68\x69\x72\x64"] as $key => $value) { $thirdId[$key] = $value["\151\144"]; MBYr_: } goto ebyG4; p2zJy: $order = array_merge_recursive($firstOrder, $secondOrder, $thirdOrder); goto p0qik; iqRin: $firstId = $secondId = $thirdId = $firstOrder = $secondOrder = $thirdOrder = []; goto Euvo6; AI91e: foreach ($dis["\163\x65\x63\157\x6e\144"] as $key => $value) { $secondId[$key] = $value["\x69\144"]; d2mXP: } goto A0pXH; dq8Lh: $firstOrder = OrderModel::getOrderInUid($firstIds); goto XL7Qu; nm7kQ: OOMsS: goto FUT0m; PObt8: } public function shareOrderAmount() { goto QJUa0; lfeQv: p1WQy: goto b0hAk; QJUa0: $order = self::getShareOrder(); goto Jxue3; eXQ_a: return $money; goto k3wR3; HTqRH: $money = 0; goto Yy3Ve; rfm66: foreach ($order as $key => $value) { goto mS4xW; qDaab: $express[] = $value["\x65\170\160\x72\145\x73\x73\137\160\162\151\x63\145"]; goto Z0nov; Z0nov: $delivery[] = $value["\144\x65\154\151\x76\145\162\171\137\160\162\x69\x63\145"]; goto pggwu; pggwu: wSav9: goto qTCZk; mS4xW: $amount[] = $value["\157\x5f\x61\155\x6f\165\x6e\164"]; goto qDaab; qTCZk: } goto lfeQv; Hkgul: if (!($money < 0)) { goto w5s6Z; } goto HTqRH; Jxue3: $amount = $express = $delivery = []; goto rfm66; Yy3Ve: w5s6Z: goto eXQ_a; b0hAk: $money = array_sum($amount) - array_sum($express) - array_sum($delivery); goto Hkgul; k3wR3: } }