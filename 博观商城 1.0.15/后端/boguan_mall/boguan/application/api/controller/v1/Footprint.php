<?php
 namespace app\api\controller\v1; use app\api\model\Footprint as FootprintModel; use app\api\controller\BaseController; use app\api\service\Token as TokenService; use app\api\model\Content as ContentModel; use app\api\model\Product as ProductModel; use app\api\service\Product as ProductService; use app\api\model\Collect; use app\api\model\ContentCollect; class Footprint extends BaseController { public function delFootprint($id = 0, $type = 0) { goto zygEM; uyld0: $result = $footprint->save(); goto gaFVJ; uI18I: $where = "\x63\157\156\x74\145\156\164\x5f\151\x64\40\x3d\40{$id}"; goto GdNER; dMejf: $where = "\x70\x72\x6f\144\165\143\164\x5f\151\144\40\75\40{$id}"; goto Qiwq9; XGjD4: return ["\155\x73\x67" => "\xe8\257\267\xe6\214\x87\345\256\232\xe8\xb6\xb3\xe8\xbf\271\xe7\261\xbb\xe5\236\213", "\145\162\162\157\x72\x43\x6f\144\145" => 0]; goto g_XcZ; mLekx: CWeIB: goto dMejf; XcQRZ: R9JPJ: goto SwLoQ; y1G2U: AZtMX: goto XfjK4; qP_N9: o2um1: goto HRobr; GdNER: goto NaHqN; goto mLekx; SwLoQ: if (!($type == 0 || $type == '')) { goto pesFj; } goto XGjD4; nzvPG: return ["\x6d\x73\x67" => "\350\xb6\xb3\350\xbf\271\344\xb8\x8d\345\xad\x98\345\234\250\xe6\210\226\xe5\267\262\xe5\210\xa0\351\231\xa4", "\145\162\162\157\162\x43\x6f\144\145" => 0]; goto qP_N9; tVrT5: if ($type == 1) { goto CWeIB; } goto uI18I; s75W2: return ["\155\x73\x67" => "\347\xbd\x91\xe7\273\x9c\345\xbc\202\xe5\xb8\xb8", "\145\x72\x72\x6f\x72\x43\x6f\144\x65" => 0]; goto Oe2lX; Cd231: return ["\x6d\x73\x67" => "\xe5\210\240\351\x99\xa4\xe6\210\220\345\212\x9f", "\x65\x72\162\x6f\x72\x43\x6f\x64\x65" => 1]; goto y1G2U; ibBI5: if (!empty($footprint)) { goto o2um1; } goto nzvPG; Oe2lX: goto AZtMX; goto UiEIa; zygEM: if (!($id == 0 || $id == '')) { goto R9JPJ; } goto dqQJF; g_XcZ: pesFj: goto tVrT5; UiEIa: CZfsI: goto Cd231; dqQJF: return ["\x6d\163\147" => "\350\257\267\346\214\x87\345\256\x9a\xe8\xb6\263\350\277\xb9\151\144", "\x65\x72\x72\x6f\x72\x43\x6f\144\145" => 0]; goto XcQRZ; HRobr: $footprint->is_delete = 1; goto uyld0; p0B1O: $uid = TokenService::getCurrentUid(); goto PXxgR; gaFVJ: if ($result) { goto CZfsI; } goto s75W2; Qiwq9: NaHqN: goto p0B1O; PXxgR: $footprint = FootprintModel::where(["\x75\x6e\x69\141\143\151\x64" => session("\x75\x6e\151\141\x63\151\144"), "\x74\x79\x70\145" => $type, "\165\x73\x65\162\137\x69\x64" => $uid, "\x69\163\x5f\x64\x65\x6c\145\164\x65" => 0])->where($where)->find(); goto ibBI5; XfjK4: } public function getFootprint($type = 1, $page = 0, $size = 12) { goto xEsgS; fFCbR: $footprintDays = FootprintModel::getFootprintDays($type, $uid, $page, $size); goto hlDce; hbXYq: $contentSum = FootprintModel::where(["\x75\x6e\151\x61\x63\x69\144" => session("\165\156\x69\x61\143\x69\144"), "\165\163\x65\x72\x5f\151\x64" => $uid, "\x74\x79\x70\x65" => 2, "\x69\163\x5f\x64\x65\x6c\145\164\x65" => 0])->count(); goto eEjNu; Bjyek: return ["\155\x73\x67" => "\xe8\216\xb7\xe5\x8f\226\xe5\xa4\xb1\xe8\xb4\245", "\145\x72\162\x6f\162\x43\x6f\x64\x65" => 0]; goto jDdmC; R2aTr: $footprint = FootprintModel::getFootprintData($uid, $type, $footprintDays); goto aO2V8; xEsgS: $uid = TokenService::getCurrentUid(); goto fFCbR; aO2V8: $productSum = FootprintModel::where(["\165\x6e\x69\141\143\151\144" => session("\165\156\151\x61\x63\151\144"), "\165\x73\x65\162\x5f\x69\x64" => $uid, "\x74\x79\160\x65" => 1, "\x69\x73\137\144\x65\x6c\145\164\145" => 0])->count(); goto hbXYq; hlDce: if (!empty($footprintDays)) { goto Lcm3i; } goto Bjyek; eEjNu: return ["\155\x73\x67" => "\xe8\x8e\267\345\x8f\226\346\x88\220\xe5\x8a\237", "\144\141\164\141" => $footprint, "\x70\x72\x6f\x64\165\143\164" => $productSum, "\143\x6f\x6e\164\x65\156\x74" => $contentSum, "\145\x72\162\157\x72\x43\x6f\x64\x65" => 1]; goto G7D7h; jDdmC: Lcm3i: goto R2aTr; G7D7h: } }