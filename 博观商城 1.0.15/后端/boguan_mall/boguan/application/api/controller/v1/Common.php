<?php
 namespace app\api\controller\v1; use app\api\controller\BaseController; use app\api\model\Product as ProductModel; use app\api\service\Product as ProductService; use app\api\model\Content as ContentModel; class Common extends BaseController { public function search($keyword = '', $page = 0, $size = 12) { goto ctEgq; hnmnY: xXcj4: goto ubW6B; SXbl5: $wheres["\x73\164\x61\x74\x75\163"] = 1; goto IsVx4; irhEF: $where["\x73\x74\x61\x74\x75\163"] = 1; goto iOrSR; LBw47: $product = ProductModel::where($where)->field("\x69\144\54\160\x72\151\143\145\54\157\137\160\162\x69\143\145\54\156\x61\155\x65\54\x74\x68\165\155\142\54\163\165\155\155\x61\x72\171\x2c\x69\x73\137\x61\x74\164\162")->order($order)->paginate($size, true, ["\161\x75\145\x72\171" => $setWhere]); goto oOw58; jQOwI: return ["\x6d\163\x67" => "\346\x9a\202\xe6\x97\240\346\225\xb0\346\215\xae", "\x64\141\164\141" => [], "\145\162\x72\x6f\162\x43\157\144\145" => 0]; goto o6nbf; ctEgq: if ($keyword) { goto xXcj4; } goto Z4BPW; Z3BLp: if ($product->isEmpty()) { goto ZHPYP; } goto w3OLq; Z4BPW: return ["\155\x73\147" => "\xe5\205\xb3\xe9\224\xae\350\xaf\x8d\xe4\xb8\215\xe8\203\275\xe4\xb8\xba\xe7\251\xba", "\145\x72\x72\x6f\162\103\157\x64\145" => 0]; goto hnmnY; K5Btt: return ["\x6d\x73\147" => "\350\216\xb7\345\217\x96\346\210\220\345\212\x9f", "\144\141\x74\x61" => ["\x70\x72\x6f\144\165\x63\x74" => $product, "\x63\157\156\164\x65\x6e\164" => $content], "\145\162\162\x6f\162\x43\157\x64\145" => 1]; goto C9BaW; LfJnR: foreach ($product as $key => $value) { $product[$key]["\x76\151\160\137\160\162\151\x63\145"] = $productService->getProductVipPrice($value["\x69\144"], $value["\x70\162\x69\x63\145"], $value["\x69\163\137\141\x74\164\162"]); iQEDa: } goto RlFsb; RlFsb: JAUR0: goto nTnvA; i_5Q3: $wheres["\x75\x6e\151\x61\x63\x69\x64"] = session("\165\x6e\x69\141\x63\151\144"); goto SXbl5; qdDO0: $where["\x75\156\151\141\143\151\144"] = session("\x75\156\x69\x61\143\151\144"); goto irhEF; oOw58: $content = ContentModel::where($wheres)->field("\151\144\54\164\x69\164\154\x65\x2c\151\x6d\x61\147\x65\54\166\151\x65\167\x73\x2c\x63\x72\145\x61\164\x65\x5f\164\151\155\145")->order($order)->paginate($size, true, ["\x71\x75\145\162\x79" => $setWhere]); goto tUyQ1; o6nbf: duzZm: goto Z3BLp; ubW6B: $where["\156\141\x6d\145"] = ["\154\x69\153\145", "\x25{$keyword}\45"]; goto qdDO0; IsVx4: $setWhere["\x6b\145\x79\167\x6f\162\x64"] = $keyword; goto hMyJ3; tUyQ1: if (!($product->isEmpty() && $content->isEmpty())) { goto duzZm; } goto jQOwI; iOrSR: $wheres["\x74\151\164\x6c\145"] = ["\154\151\153\145", "\x25{$keyword}\x25"]; goto i_5Q3; nTnvA: ZHPYP: goto K5Btt; Gekva: $order = "\x63\x72\145\141\164\x65\137\x74\x69\x6d\x65\x20\144\x65\x73\x63"; goto LBw47; w3OLq: $productService = new ProductService(); goto LfJnR; hMyJ3: $setWhere["\x70\x61\x67\x65"] = $page; goto Gekva; C9BaW: } }