<?php
 namespace app\api\controller\v1; use app\api\model\User as UserModel; use app\api\model\UserAddress; use app\api\validate\AddressNew; use app\api\service\Token as TokenService; use app\lib\exception\SuccessMessage; use app\lib\exception\UserException; use app\api\controller\BaseController; class Address extends BaseController { protected $beforeActionList = array("\143\x68\145\x63\x6b\120\162\151\x6d\141\162\171\x53\143\x6f\160\145" => array("\157\156\x6c\171" => "\143\x72\x65\x61\164\x65\117\x72\x55\160\x64\141\164\x65\x41\x64\144\162\x65\163\x73\x2c\x67\145\x74\x55\x73\x65\162\101\144\x64\x72\145\163\x73")); public function getAddressDetail($addressId = 0) { goto IVD7I; Ndv6F: dUxGn: goto FJvJb; z2155: return ["\155\163\147" => "\xe8\xaf\xb7\346\x8c\x87\xe5\xae\x9a\xe5\x9c\260\xe5\235\200\151\144", "\x65\162\162\157\162\103\x6f\144\145" => 0]; goto XnjOH; ZyxBS: return ["\x6d\163\x67" => "\xe8\x8e\xb7\345\217\x96\345\xa4\261\350\264\xa5", "\145\x72\162\x6f\162\x43\157\144\145" => 0]; goto Ndv6F; LAoEb: if (!empty($userAddress)) { goto dUxGn; } goto ZyxBS; IVD7I: if (!($addressId == 0 || $addressId == '')) { goto EmD8r; } goto z2155; XnjOH: EmD8r: goto CuQKa; N4uAs: $userAddress = UserAddress::where("\165\x6e\151\x61\x63\x69\144", session("\x75\156\x69\x61\x63\x69\x64"))->where(["\x75\x73\x65\162\137\x69\x64" => $uid, "\151\163\137\144\145\154\x65\x74\x65" => 0])->field("\151\x64\54\156\x61\x6d\145\54\x70\150\x6f\x6e\145\54\160\162\x6f\x76\x69\156\143\145\x2c\x63\x69\164\x79\54\x63\157\165\x6e\x74\162\171\54\144\145\x74\x61\x69\x6c\54\154\157\156\147\x69\164\165\x64\x65\54\x6c\x61\x74\151\x74\165\x64\145")->find($addressId); goto LAoEb; FJvJb: return ["\155\x73\x67" => "\350\x8e\xb7\345\217\x96\346\210\220\345\x8a\x9f", "\144\141\x74\x61" => $userAddress, "\x65\162\x72\157\x72\x43\157\144\x65" => 1]; goto gTnkX; CuQKa: $uid = TokenService::getCurrentUid(); goto N4uAs; gTnkX: } public function getDefaultAddress() { goto vg_b2; BU2QV: return ["\155\x73\147" => "\xe8\216\267\345\x8f\x96\xe6\x88\220\345\x8a\x9f", "\x64\141\x74\141" => $userAddress, "\x65\162\162\x6f\x72\103\157\x64\145" => 1]; goto eroUM; LGOma: $userAddress = UserAddress::where("\x75\156\x69\x61\x63\151\x64", session("\165\x6e\x69\x61\143\x69\x64"))->where(["\165\163\x65\162\137\x69\144" => $uid, "\x69\163\137\144\x65\154\145\x74\145" => 0, "\151\163\x5f\144\x65\146\x61\165\x6c\164" => 1])->find(); goto M84Xd; M84Xd: if ($userAddress) { goto OdNQc; } goto m9m6M; v6wpW: OdNQc: goto vPHj0; vPHj0: $userAddress->hidden(["\x75\163\145\x72\x5f\151\x64", "\151\163\x5f\x64\145\154\x65\x74\x65", "\x63\x72\145\141\164\145\137\x74\x69\x6d\145"]); goto BU2QV; vg_b2: $uid = TokenService::getCurrentUid(); goto LGOma; m9m6M: return ["\x6d\163\147" => "\350\216\267\345\x8f\x96\345\244\xb1\350\264\245", "\x65\x72\x72\157\162\x43\x6f\x64\145" => 0]; goto v6wpW; eroUM: } public function defaultAddress() { goto m1Izr; bGWK2: return ["\155\163\x67" => "\345\x9c\260\xe5\x9d\x80\xe4\270\215\345\xad\230\345\x9c\xa8", "\x65\x72\162\157\x72\103\x6f\144\x65" => 0]; goto VmYgI; XU7Pe: MkUgv: goto bZeYP; JGM_J: $data["\x69\x73\x5f\x64\x65\146\141\165\154\x74"] = 1; goto IgUUm; KqdeA: goto XkmUw; goto XU7Pe; hTUcY: foreach ($address as $k => $v) { goto BpV7e; a21i2: Tq547: goto mDBng; BpV7e: $post = ["\151\x64" => $v["\x69\144"], "\x75\x73\x65\x72\x5f\151\144" => $uid, "\x69\163\x5f\144\x65\146\x61\x75\x6c\164" => 0]; goto E5Pt8; E5Pt8: UserAddress::update($post); goto a21i2; mDBng: } goto TYh_s; IgUUm: $result = UserAddress::update($data); goto F29ko; nSAas: return ["\155\x73\147" => "\350\256\276\xe7\275\xae\345\xa4\261\xe8\264\245", "\145\162\162\x6f\162\x43\157\144\x65" => 0]; goto KqdeA; S5VSj: $uid = TokenService::getCurrentUid(); goto ea9jA; ea9jA: $userAddress = UserAddress::where("\x75\156\x69\x61\x63\151\144", session("\165\156\151\141\x63\x69\144"))->where(["\165\x73\145\162\x5f\x69\x64" => $uid, "\x69\163\137\144\x65\x6c\x65\164\x65" => 0])->find($data["\141\144\144\x72\145\x73\x73\111\144"]); goto C26iz; XUtoM: if (empty($address)) { goto nvmV5; } goto hTUcY; akYn3: $res = $validate->scene("\x64\145\x6c")->check($data); goto SVZzd; TbnSN: $data["\151\x64"] = $data["\141\144\x64\x72\145\x73\163\x49\144"]; goto cdIMR; SVZzd: if ($res) { goto ArTPQ; } goto eTTsu; m1Izr: $data = input("\x70\157\x73\164\x2e"); goto IMLAI; kyOEd: $address = UserAddress::where("\165\156\x69\141\x63\151\144", session("\x75\156\151\x61\143\x69\144"))->where(["\165\x73\145\x72\137\x69\144" => $uid, "\151\163\x5f\x64\x65\154\145\164\145" => 0])->select(); goto XUtoM; F29ko: if ($result !== false) { goto MkUgv; } goto nSAas; TYh_s: COTFe: goto TWoYK; eTTsu: return ["\155\x73\x67" => $validate->getError(), "\x65\162\162\x6f\162\103\157\x64\x65" => 0]; goto X4gKw; X4gKw: ArTPQ: goto S5VSj; C26iz: if ($userAddress) { goto ngQ1j; } goto bGWK2; cdIMR: unset($data["\141\x64\144\162\x65\x73\x73\111\x64"]); goto JGM_J; TWoYK: nvmV5: goto TbnSN; bZeYP: return ["\155\x73\147" => "\350\xae\276\xe7\xbd\xae\xe6\210\x90\xe5\x8a\x9f", "\145\162\x72\x6f\x72\103\157\144\145" => 1]; goto ckauZ; IMLAI: $validate = \think\Loader::validate("\101\144\x64\x72\145\163\x73\116\145\x77"); goto akYn3; VmYgI: ngQ1j: goto kyOEd; ckauZ: XkmUw: goto aE82D; aE82D: } public function delAddress() { goto oi74p; Z5Sqj: CiLdO: goto fq5MA; zFaEn: $post["\151\x64"] = $data["\141\144\x64\x72\145\x73\x73\111\144"]; goto Uqi9I; W1DIU: $result = UserAddress::update($post); goto dM1fp; fq5MA: return ["\155\163\147" => "\xe5\x88\xa0\xe9\x99\xa4\346\x88\220\345\212\237", "\x65\x72\x72\x6f\x72\x43\157\144\x65" => 1]; goto zJWgG; yuUY4: $res = $validate->scene("\x64\x65\154")->check($data); goto JrAjO; Uqi9I: $post["\151\x73\x5f\x64\145\x6c\x65\x74\145"] = 1; goto W1DIU; zJWgG: tDFxm: goto uYc3e; wlcPA: $validate = \think\Loader::validate("\101\x64\x64\x72\x65\x73\x73\x4e\145\x77"); goto yuUY4; dM1fp: if ($result !== false) { goto CiLdO; } goto ywUVR; JrAjO: if ($res) { goto gSV1S; } goto mAtNC; IVnOZ: gSV1S: goto zFaEn; mAtNC: return ["\x6d\x73\147" => $validate->getError(), "\145\x72\162\x6f\162\103\x6f\x64\145" => 0]; goto IVnOZ; ywUVR: return ["\x6d\163\147" => "\xe5\210\xa0\xe9\x99\xa4\345\xa4\261\350\xb4\xa5", "\x65\162\162\x6f\162\x43\x6f\144\x65" => 0]; goto f3Wqz; f3Wqz: goto tDFxm; goto Z5Sqj; oi74p: $data = input("\160\157\x73\164\x2e"); goto wlcPA; uYc3e: } public function addAddress() { goto pmIGC; z8uZl: pOQuS: goto vCPis; z3zGa: $result = UserAddress::create($data); goto adXN5; vCPis: return ["\155\x73\x67" => "\xe6\267\xbb\xe5\212\xa0\xe6\210\x90\345\x8a\x9f", "\x65\162\162\157\x72\x43\x6f\144\145" => 1]; goto y5Wwo; wlvwd: $data["\x75\163\145\x72\x5f\x69\x64"] = $uid; goto NtbwS; X0r_a: return ["\155\x73\x67" => $validate->getError(), "\x65\x72\x72\157\x72\x43\x6f\144\145" => 0]; goto NIaiH; qbLhx: return ["\x6d\163\x67" => "\xe6\267\xbb\xe5\212\240\xe5\244\261\350\xb4\245", "\x65\x72\x72\x6f\162\x43\157\144\145" => 0]; goto ZxpLL; pycDQ: if ($res) { goto SQLlz; } goto X0r_a; ZxpLL: goto YKVsV; goto z8uZl; pmIGC: $data = input("\160\x6f\x73\x74\x2e"); goto dcIYh; NtbwS: $data["\x75\x6e\151\x61\143\151\x64"] = session("\x75\x6e\x69\141\143\x69\x64"); goto z3zGa; TYTAm: $res = $validate->scene("\141\x64\x64")->check($data); goto pycDQ; NIaiH: SQLlz: goto x8NSD; dcIYh: $validate = \think\Loader::validate("\101\144\x64\162\x65\x73\x73\116\145\x77"); goto TYTAm; x8NSD: $uid = TokenService::getCurrentUid(); goto wlvwd; adXN5: if ($result) { goto pOQuS; } goto qbLhx; y5Wwo: YKVsV: goto WViYu; WViYu: } public function editAddress() { goto KE4aZ; Jn81y: $data["\x69\144"] = $data["\x61\144\x64\162\145\x73\x73\x49\144"]; goto AQX4_; P3EMD: if ($address) { goto F77DN; } goto D66Bi; ZKU2s: eK0CA: goto eIeQM; Jiuf6: goto foplL; goto gqG94; AQX4_: unset($data["\x61\x64\144\x72\x65\163\x73\x49\x64"]); goto J68A8; KE4aZ: $data = input("\160\157\x73\x74\x2e"); goto ezuX3; YNdIQ: return ["\155\163\147" => "\344\xbf\256\xe6\224\xb9\345\xa4\261\xe8\264\xa5", "\x65\x72\x72\x6f\x72\103\x6f\144\145" => 0]; goto Jiuf6; ezuX3: $validate = \think\Loader::validate("\101\x64\144\x72\x65\x73\x73\116\145\167"); goto hyLQo; jUZpx: foplL: goto TIEWa; juWG9: if ($result !== false) { goto OCRLK; } goto YNdIQ; kcKxf: F77DN: goto Jn81y; gqG94: OCRLK: goto qL7N0; qL7N0: return ["\x6d\163\147" => "\xe4\xbf\256\xe6\x94\xb9\346\210\220\345\212\x9f", "\145\x72\x72\x6f\162\x43\x6f\144\x65" => 1]; goto jUZpx; J68A8: $result = UserAddress::update($data); goto juWG9; dyVdt: if ($res) { goto eK0CA; } goto R7iMY; eIeQM: $uid = TokenService::getCurrentUid(); goto Y3F2Q; Y3F2Q: $address = UserAddress::where("\165\x6e\151\x61\x63\x69\144", session("\165\x6e\151\x61\x63\x69\144"))->where(["\x75\163\x65\x72\x5f\151\144" => $uid, "\x69\x73\x5f\x64\145\x6c\x65\x74\x65" => 0])->find($data["\x61\x64\x64\162\x65\163\x73\x49\144"]); goto P3EMD; R7iMY: return ["\155\163\x67" => $validate->getError(), "\145\x72\162\x6f\162\103\x6f\x64\145" => 0]; goto ZKU2s; hyLQo: $res = $validate->scene("\x65\144\x69\164")->check($data); goto dyVdt; D66Bi: return ["\155\163\x67" => "\345\234\260\345\x9d\x80\344\270\215\345\255\230\345\x9c\xa8", "\145\x72\x72\157\162\103\x6f\x64\145" => 0]; goto kcKxf; TIEWa: } public function getUserAddress() { goto K6bbj; akIax: $userAddress = UserAddress::where("\165\x6e\151\x61\143\x69\x64", session("\x75\x6e\151\141\x63\x69\144"))->where(["\165\163\145\x72\x5f\151\x64" => $uid, "\x69\x73\x5f\144\145\154\x65\164\145" => 0])->order("\151\x73\137\144\145\x66\x61\x75\x6c\x74", "\x64\145\163\x63")->order("\143\162\x65\x61\x74\x65\137\x74\x69\x6d\x65", "\144\x65\x73\x63")->select(); goto IIXVD; K6bbj: $uid = TokenService::getCurrentUid(); goto akIax; lr3yZ: return ["\x6d\x73\147" => "\xe8\x8e\267\xe5\x8f\226\xe6\x88\x90\345\x8a\237", "\144\x61\x74\x61" => $userAddress, "\x65\162\162\x6f\162\103\x6f\144\x65" => 1]; goto O73CC; IIXVD: if (!$userAddress->isEmpty()) { goto KDKo9; } goto a7VnZ; a7VnZ: return ["\155\163\x67" => "\350\216\xb7\xe5\x8f\x96\xe5\xa4\xb1\350\xb4\245", "\145\162\x72\157\162\x43\x6f\x64\x65" => 0]; goto YpH17; YpH17: KDKo9: goto lr3yZ; O73CC: } }