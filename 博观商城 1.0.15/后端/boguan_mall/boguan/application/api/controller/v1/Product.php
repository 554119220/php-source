<?php
 namespace app\api\controller\v1; use app\api\model\UserCoupon; use app\api\validate\Count; use app\api\model\Product as ProductModel; use app\api\service\Product as ProductService; use app\lib\exception\ProductException; use app\api\controller\BaseController; use app\api\service\Token as TokenService; use app\api\model\Collect as CollectModel; use app\api\model\Cart as CartModel; use app\api\model\User as UserModel; use app\api\model\AttrValue as AttrValueModel; use think\Request; use app\api\model\Coupon as CouponModel; use app\api\model\Footprint as FootprintModel; use think\db\Expression; class Product extends BaseController { public function __construct(Request $request = null) { parent::__construct($request); ProductModel::updateStock(); } public function getCouponPriceInProduct() { goto HyfSt; gAuVR: if (!(!isset($data["\160\x72\x6f\144\x75\x63\x74"]) || empty($data["\160\x72\x6f\144\165\143\x74"]))) { goto MsPD2; } goto ldcIA; LrqY_: if (!($data["\151\163\x5f\143\157\x75\x70\157\156"] == "\60" || $data["\143\157\165\x70\157\156\x49\x64"] == '')) { goto u8sbN; } goto YUHDZ; NOk0k: return ["\x6d\163\147" => "\xe5\217\202\xe6\225\260\xe9\224\x99\xe8\257\xaf", "\145\162\x72\157\162\x43\x6f\144\x65" => 0]; goto FiFYS; xV_4X: $productService = new ProductService(); goto PhdeB; aM3eG: if (!empty($data)) { goto fvqxi; } goto NOk0k; YUHDZ: return ["\x6d\163\147" => "\350\257\267\351\200\x89\346\213\xa9\xe4\274\x98\xe6\x83\240\xe5\210\xb8", "\145\x72\162\157\x72\x43\157\144\145" => 0]; goto uj8Lj; ldcIA: return ["\x6d\163\147" => "\346\x9a\x82\346\227\xa0\345\217\xaf\xe8\264\255\344\271\xb0\345\225\x86\xe5\x93\201", "\145\x72\162\x6f\162\103\x6f\144\145" => 0]; goto zptsb; BbGNk: return ["\155\x73\147" => "\xe8\216\267\345\217\x96\xe6\x88\x90\345\212\x9f", "\x64\141\x74\x61" => $result, "\145\x72\162\157\x72\103\157\144\x65" => 1]; goto apR2K; HyfSt: $data = input("\160\157\x73\x74\x2e"); goto aM3eG; zptsb: MsPD2: goto LrqY_; PhdeB: $result = $productService->getCouponPriceInProduct($data); goto BbGNk; FiFYS: fvqxi: goto gAuVR; uj8Lj: u8sbN: goto xV_4X; apR2K: } public function checkProductIsCanBuy() { goto kna_r; mq3f4: return ["\155\163\x67" => "\345\x8f\202\xe6\x95\260\xe9\x94\x99\xe8\xaf\257", "\145\162\x72\157\162\103\x6f\144\x65" => 0]; goto x1lA_; qbAEV: return $result; goto gqQHT; zYaBI: $productService = new ProductService(); goto HoMTd; kna_r: $data = input("\160\157\x73\x74\56"); goto OwcBj; OrkAO: O6KSN: goto zYaBI; ZMfQe: return ["\x6d\x73\x67" => "\xe8\257\267\351\200\x89\xe6\213\xa9\xe4\xb8\x80\344\xb8\xaa\xe5\x8f\x91\350\xb4\247\xe6\x96\271\xe5\274\x8f", "\x65\x72\x72\157\162\103\157\x64\145" => 0]; goto OrkAO; HoMTd: $result = ["\x64\x61\x74\141" => $productService->checkSendType($data), "\x65\x72\162\x6f\162\103\157\144\145" => 1]; goto qbAEV; AcBkC: if (!(!isset($data["\x6f\162\144\x65\x72\x5f\x74\171\x70\145"]) || $data["\x6f\162\144\145\x72\x5f\x74\171\160\x65"] == '')) { goto O6KSN; } goto ZMfQe; x1lA_: tajIH: goto AcBkC; OwcBj: if (!empty($data)) { goto tajIH; } goto mq3f4; gqQHT: } public function getProductsCoupon() { goto SJedM; ROmvs: $coupon = CouponModel::all($couponIds); goto UK5Gz; pwCw9: return ["\144\141\x74\x61" => $coupon, "\x65\162\x72\x6f\x72\103\x6f\x64\145" => 1]; goto L4j7I; e39H1: return ["\x6d\163\147" => "\xe5\217\x82\xe6\x95\260\xe9\224\x99\350\xaf\xaf", "\145\162\x72\157\x72\103\x6f\144\145" => 0]; goto wkB50; czldU: $couponIds = []; goto n4TpI; S4pWZ: Zfe_f: goto ROmvs; QZ9kW: $uid = TokenService::getCurrentUid(); goto m0iBU; YWk1o: if ($data) { goto rX0D9; } goto e39H1; SJedM: $productService = new ProductService(); goto rBYBf; UK5Gz: foreach ($coupon as $key => $value) { goto JvcF0; JvcF0: $getUserCoupon = UserCoupon::where(["\x75\x6e\x69\x61\143\151\x64" => session("\165\x6e\151\141\x63\x69\144"), "\165\x73\145\x72\x5f\x69\x64" => $uid, "\x63\157\165\x70\x6f\156\137\151\x64" => $value["\x69\144"], "\151\x73\x5f\165\x73\x65" => 0, "\163\164\141\164\165\163" => 1])->find(); goto uiY_B; gYj3L: $coupon[$key]["\145\x6e\x64\137\x74\x69\155\x65"] = date("\x59\x2d\155\55\x64", $getUserCoupon["\145\156\144\137\x74\151\x6d\x65"]); goto i80dS; uiY_B: $coupon[$key]["\163\164\141\x72\x74\137\164\151\155\145"] = date("\x59\55\155\55\144", $getUserCoupon["\163\164\x61\x72\164\x5f\164\x69\155\x65"]); goto gYj3L; i80dS: z3cjg: goto QvY_X; QvY_X: } goto RWxPS; n4TpI: foreach ($userCoupon as $key => $value) { goto lWNTj; Yv25d: $couponIds[] = $value["\143\x6f\x75\160\157\156\137\x69\144"]; goto U5feK; Mb3yE: AlCIK: goto kUHcY; gwBde: $sub_price = $productService->getCouponPriceInProduct($post); goto y2ZYX; y2ZYX: if (!($sub_price > 0)) { goto EG_Io; } goto Yv25d; U5feK: EG_Io: goto Mb3yE; lWNTj: $post = ["\151\163\x5f\143\157\x75\160\x6f\x6e" => 1, "\x63\x6f\165\160\x6f\156\111\x64" => $value["\143\157\165\x70\157\156\137\151\x64"], "\x70\162\157\x64\x75\143\164" => $data["\160\162\x6f\x64\165\143\x74"]]; goto gwBde; kUHcY: } goto HZT7Y; wkB50: rX0D9: goto QZ9kW; QWFTR: if (!empty($couponIds)) { goto Zfe_f; } goto jZ4Np; zeWQ8: $userCoupon = CouponModel::getCouponByUid($uid, $canUseWhere); goto czldU; RWxPS: B3aJR: goto pwCw9; jZ4Np: return ["\155\x73\x67" => "\xe6\232\x82\xe6\227\240\345\217\xaf\347\x94\250\xe4\xbc\x98\xe6\x83\240\345\210\270", "\145\162\x72\x6f\x72\x43\157\x64\145" => 0]; goto S4pWZ; rBYBf: $data = input("\x70\x6f\163\164\x2e"); goto YWk1o; HZT7Y: YBIFr: goto QWFTR; m0iBU: $canUseWhere = "\163\164\x61\164\x75\x73\x20\x3d\x20\61\40\x61\x6e\x64\40\x69\163\x5f\x75\x73\145\40\75\x20\60"; goto zeWQ8; L4j7I: } public function getProductShareImage($productId = 0) { goto pzdao; MXcpH: Hnd6f: goto ln813; NW0qV: if (!($shareImage != '')) { goto IbiCy; } goto QAVn1; I3osT: return ["\x6d\x73\147" => "\xe8\216\xb7\xe5\x8f\226\xe5\244\261\350\264\245", "\x65\162\x72\157\x72\103\x6f\144\x65" => 0]; goto o5BWo; ln813: $productService = new ProductService(); goto HMbEJ; O1mcj: return ["\x6d\163\147" => "\xe8\xaf\267\346\214\x87\345\xae\x9a\345\225\206\345\x93\201\151\x64", "\x65\162\x72\157\x72\x43\x6f\x64\x65" => 0]; goto MXcpH; pzdao: if (!($productId == 0)) { goto Hnd6f; } goto O1mcj; HMbEJ: $shareImage = $productService->getProductShareQrCode($productId); goto NW0qV; kFiEO: IbiCy: goto I3osT; QAVn1: return ["\155\163\147" => "\xe8\x8e\267\xe5\217\226\xe6\210\220\345\212\237", "\144\141\x74\141" => $shareImage, "\145\x72\x72\157\162\103\x6f\x64\145" => 1]; goto kFiEO; o5BWo: } public function getIntegralExchange() { goto YcIjs; b0AYj: $data = input("\x70\x6f\x73\164\56"); goto BJz9_; YcIjs: $productService = new ProductService(); goto b0AYj; BJz9_: if ($data) { goto Kc6K7; } goto p_CQv; p_CQv: return ["\155\x73\x67" => "\345\217\x82\xe6\x95\xb0\xe9\224\231\350\xaf\257", "\145\x72\162\157\x72\x43\157\x64\x65" => 0]; goto aGRgp; pcMCT: $result = $productService->integralExchange($data); goto iZXFD; aGRgp: Kc6K7: goto pcMCT; iZXFD: return $result; goto ySu3v; ySu3v: } public function getProductByUserGuess() { goto B7gXX; Uw61J: $guessProduct = []; goto t8nMj; yml6Z: XoYNf: goto s42bW; rY4cp: $cateIdArr = implode("\x2c", $cateIdsArr); goto fKumR; fKumR: $where = "\x63\x61\164\145\137\151\144\x20\x69\156\50{$cateIdArr}\x29"; goto h75C_; xvbmR: iZH1D: goto yml6Z; lWeVx: jkd9o: goto Dt_b0; luEtC: foreach ($footprint as $k => $v) { goto rpBfr; rpBfr: $products = ProductModel::where(["\x75\x6e\151\141\x63\x69\x64" => session("\165\x6e\151\x61\x63\151\x64"), "\x69\163\137\x64\145\154\145\x74\x65" => 0])->field("\x63\x61\164\x65\137\x69\144")->find($v["\160\162\x6f\x64\165\x63\164\x5f\151\144"]); goto quq6T; j4_a0: EvJhh: goto mS4LC; lYsgq: $cateIds[] = $products["\x63\x61\164\145\x5f\151\144"]; goto j4_a0; mS4LC: HfD43: goto IYyJ7; quq6T: if (!$products) { goto EvJhh; } goto lYsgq; IYyJ7: } goto Oe19h; B7gXX: $uid = TokenService::getCurrentUid(); goto orRm2; g2LEg: return ["\155\x73\147" => "\xe8\x8e\xb7\xe5\217\226\346\x88\220\345\x8a\x9f", "\144\141\164\141" => $guessProduct, "\145\x72\x72\157\x72\x43\157\144\145" => 1]; goto K4lNy; EGg0A: $guessProductId = implode("\54", $guessProductIds); goto Uw61J; oilJp: $allProductIds = []; goto nv2og; r7gYZ: if (empty($guessProduct)) { goto iZH1D; } goto PPt3P; VXOoy: $number = 10; goto nrqO0; tfyJU: if (!($number > 10)) { goto jHQdE; } goto VXOoy; orRm2: $cart = CartModel::where(["\165\x73\145\x72\x5f\x69\144" => $uid])->select(); goto fEeRC; Oxf8x: p0yEa: goto XLcTU; nv2og: foreach ($allProduct as $index => $item) { $allProductIds[$item["\151\144"]] = $item["\151\144"]; F2Ud7: } goto Oxf8x; SPvxD: $guessProductIds = array_rand($allProductIds, $number); goto VzFXY; p52mQ: erH7j: goto IWInF; z99r3: foreach ($cart as $key => $value) { goto fZRwc; fgVNv: $cateId[] = $product["\x63\x61\x74\x65\137\x69\144"]; goto SwxpN; KfBKz: if (!$product) { goto jnmUz; } goto fgVNv; SwxpN: jnmUz: goto HhE3s; HhE3s: h1BEE: goto u7OcQ; fZRwc: $product = ProductModel::where(["\x75\156\x69\x61\143\x69\144" => session("\x75\x6e\151\x61\143\x69\x64"), "\x69\163\x5f\x64\x65\154\145\x74\145" => 0])->field("\143\141\164\145\x5f\x69\144")->find($value["\160\162\157\144\165\143\x74\137\151\144"]); goto KfBKz; u7OcQ: } goto p52mQ; CPqfg: if ($footprint->isEmpty()) { goto jkd9o; } goto luEtC; OMy4P: $allProduct = ProductModel::where($where)->where(["\x75\x6e\x69\x61\143\151\144" => session("\165\156\x69\141\x63\151\x64"), "\151\x73\x5f\144\x65\x6c\x65\x74\x65" => 0])->field("\151\x64")->order("\x63\162\x65\141\164\x65\137\164\151\155\145", "\144\145\163\143")->select(); goto oilJp; IWInF: veXml: goto CPqfg; QmGyc: foreach ($guessProduct as $key => $value) { $guessProduct[$key]["\x76\x69\160\137\x70\162\x69\143\x65"] = $productService->getProductVipPrice($value["\x69\144"], $value["\x70\162\151\x63\145"], $value["\x69\x73\137\x61\164\x74\x72"]); s0755: } goto cZRxq; SdngK: e3WAz: goto g2LEg; t8nMj: if (!$guessProductId) { goto XoYNf; } goto pqPiE; VzFXY: shuffle($guessProductIds); goto EGg0A; vqR_7: $guessProduct = ProductModel::where($wheres)->where(["\165\156\151\141\143\151\144" => session("\165\x6e\x69\141\x63\x69\144"), "\163\164\141\164\x75\163" => 1, "\151\x73\x5f\x64\145\154\x65\164\x65" => 0])->field("\x69\x64\x2c\x70\x72\151\x63\145\54\x6f\137\160\162\151\x63\145\54\x6e\x61\x6d\145\x2c\x74\x68\x75\155\142\x2c\163\165\155\155\141\162\171\x2c\x69\x73\137\x61\164\x74\162")->order($exp)->select(); goto r7gYZ; h90iB: array_unique($cateIdsArr); goto rY4cp; cZRxq: rgEiH: goto xvbmR; pqPiE: $wheres = "\x69\x64\x20\x69\156\50{$guessProductId}\x29"; goto TnsaL; s42bW: if (!empty($guessProduct)) { goto e3WAz; } goto kPmBZ; XLcTU: $number = count($allProductIds); goto tfyJU; GGYCH: $cateId = $cateIds = []; goto N4vMn; lTjuo: if ($cart->isEmpty()) { goto veXml; } goto z99r3; nrqO0: jHQdE: goto SPvxD; Oe19h: QAeE2: goto lWeVx; N4vMn: $where = 1; goto lTjuo; TnsaL: $exp = new Expression("\x66\151\x65\x6c\144\50\x69\x64\54{$guessProductId}\x29"); goto vqR_7; h75C_: A9xYq: goto OMy4P; HN9Yv: if (empty($cateIdsArr)) { goto A9xYq; } goto h90iB; kPmBZ: return ["\155\163\x67" => "\346\x9a\202\xe6\x97\240\346\x95\xb0\xe6\215\xae", "\144\x61\164\141" => [], "\x65\x72\162\x6f\162\x43\x6f\144\x65" => 0]; goto SdngK; fEeRC: $footprint = FootprintModel::where(["\x75\156\x69\141\x63\x69\x64" => session("\x75\x6e\151\x61\x63\x69\144"), "\x75\x73\145\x72\x5f\151\144" => $uid, "\164\x79\x70\x65" => 1])->select(); goto GGYCH; Dt_b0: $cateIdsArr = array_merge($cateId, $cateIds); goto HN9Yv; PPt3P: $productService = new ProductService(); goto QmGyc; K4lNy: } public function getFreightPrice() { goto PAVyC; o4Ldx: return $result; goto Deu7V; J8VmN: $data = input("\x70\157\163\x74\56"); goto fkzH8; F_WQl: $result = $productService->getFreightPrice($data); goto o4Ldx; PAVyC: $productService = new ProductService(); goto J8VmN; TeTPO: kJjob: goto F_WQl; S2wZD: return ["\155\x73\x67" => "\xe5\217\202\346\225\260\xe9\224\x99\xe8\xaf\257", "\145\162\162\157\162\103\x6f\x64\x65" => 0]; goto TeTPO; fkzH8: if ($data) { goto kJjob; } goto S2wZD; Deu7V: } public function getProductPrice() { goto Z4mkk; kyQur: Lb5DU: goto XKI2h; g34Zb: $userInfo = UserModel::getUserLevel(); goto w1V4z; wAn5i: return ["\155\x73\x67" => "\345\xbd\x93\345\x89\x8d\345\x95\206\xe5\223\201\346\234\211\345\244\x9a\350\xa7\204\xe6\240\274\xef\xbc\214\xe8\xaf\267\xe8\xbe\223\xe5\x85\xa5\350\xa7\x84\xe6\240\274\xe5\x80\xbc", "\145\162\x72\157\162\103\157\x64\x65" => 0]; goto pHPmG; wVv3T: hhhI9: goto efLV_; wF7kb: $post["\x76\x69\x70\x5f\160\x72\151\143\145"] = $productService->getAttrVipPrice($data["\160\x72\x6f\x64\x75\143\164\x49\x64"], $attr_id_list, $attrValue["\x70\162\151\x63\x65"], $userInfo["\166\x69\160\x5f\x69\144"]); goto gxUQZ; XKI2h: $attr_id_list = isset($data["\x61\x74\164\x72\x5f\x69\144\x5f\x6c\x69\163\164"]) ? $data["\x61\164\164\162\137\151\144\137\x6c\x69\x73\x74"] : ''; goto G8rzF; uw9y9: return ["\x6d\163\x67" => "\350\216\267\xe5\217\x96\xe5\244\261\xe8\264\xa5", "\145\x72\x72\157\x72\x43\157\x64\145" => 0]; goto y9apC; hTcoJ: $post["\x76\x69\160\137\160\x72\x69\x63\x65"] = $productService->getNotAttrVipPrice($data["\x70\x72\x6f\144\x75\143\x74\111\x64"], $product["\160\x72\151\143\x65"], $userInfo["\x76\x69\x70\x5f\151\x64"]); goto L9NkI; YsKeE: goto mHsXp; goto uCyET; NZeio: mHsXp: goto jtdNh; r4S7K: return ["\155\163\147" => "\xe8\216\xb7\xe5\x8f\226\xe6\x88\x90\345\212\x9f", "\x64\141\164\141" => $post, "\145\162\162\157\162\103\x6f\x64\x65" => 1]; goto wVv3T; InMUt: nC7nh: goto rNrog; PRiuU: if ($product["\151\163\x5f\141\164\x74\162"] == 1 && $attr_id_list == '') { goto TlGr3; } goto dhTNM; Ant2D: On7Py: goto cbPm2; uCyET: TlGr3: goto wAn5i; rNrog: return ["\x6d\x73\147" => "\xe5\275\223\xe5\x89\215\345\225\x86\345\x93\201\346\262\241\xe6\234\211\345\xa4\x9a\350\247\x84\xe6\240\xbc", "\x65\x72\162\x6f\162\103\x6f\x64\145" => 0]; goto NZeio; KiaPy: $key = implode("\54", $attr_id_list); goto eG5HI; jYZX2: OgJXz: goto irCA8; y9apC: goto hhhI9; goto rScCR; jtdNh: $productService = new ProductService(); goto g34Zb; agGbr: $post["\x70\162\x69\x63\x65"] = $product["\x70\x72\x69\143\145"]; goto hTcoJ; gxUQZ: t7IQJ: goto CjVqn; rl5Fz: if (!$product) { goto OgJXz; } goto PRiuU; CjVqn: if ($post) { goto MMb3w; } goto uw9y9; tY0wj: DYhNz: goto KiaPy; irCA8: return ["\155\x73\x67" => "\xe5\225\x86\xe5\223\x81\344\270\215\345\xad\x98\xe5\234\250\xe6\210\x96\345\xb7\262\344\270\x8b\346\x9e\266", "\145\162\x72\x6f\x72\x43\157\x64\x65" => 0]; goto YsKeE; E3Hh2: $attr_id_list = json_encode($attr_id_list, true); goto NKK89; ovU1U: return ["\x6d\163\147" => "\xe8\xaf\xb7\xe6\x8c\x87\345\xae\x9a\xe5\225\206\xe5\223\x81\x69\144", "\x65\x72\162\157\162\x43\157\144\x65" => 0]; goto kyQur; L9NkI: goto t7IQJ; goto tY0wj; NKK89: $post["\x70\x72\151\x63\145"] = $attrValue["\x70\162\x69\143\x65"]; goto wF7kb; tfDaG: goto mHsXp; goto jYZX2; xHnuu: if (!(!isset($data["\160\162\157\x64\165\x63\x74\111\x64"]) || $data["\160\162\x6f\144\165\x63\164\111\x64"] == '')) { goto Lb5DU; } goto ovU1U; ZRXnC: return ["\x6d\163\x67" => "\x61\x74\x74\x72\137\x69\144\x5f\x6c\151\x73\164\344\270\xba\xe6\x95\xb0\xe7\273\204", "\145\162\x72\157\162\103\157\x64\145" => 0]; goto Ant2D; w1V4z: if ($attr_id_list) { goto DYhNz; } goto agGbr; Z4mkk: $data = input("\160\157\163\x74\56"); goto xHnuu; pHPmG: goto mHsXp; goto InMUt; dhTNM: if ($product["\151\163\x5f\x61\x74\164\162"] == 0 && $attr_id_list) { goto nC7nh; } goto tfDaG; G8rzF: if (!(!is_array($attr_id_list) && $attr_id_list != '')) { goto On7Py; } goto ZRXnC; rScCR: MMb3w: goto r4S7K; eG5HI: $attrValue = AttrValueModel::where("\165\156\151\x61\x63\x69\144", session("\x75\x6e\x69\141\x63\151\144"))->where(["\x70\x72\157\144\x75\x63\164\137\x69\144" => $data["\160\162\157\x64\x75\143\x74\111\x64"], "\x6b\145\x79" => $key])->find(); goto E3Hh2; cbPm2: $product = ProductModel::where("\x75\156\x69\x61\x63\x69\x64", session("\165\x6e\x69\x61\143\151\x64"))->where(["\163\164\x61\x74\165\163" => 1, "\x69\x73\x5f\144\145\x6c\145\x74\x65" => 0])->find($data["\160\162\x6f\x64\165\x63\164\111\144"]); goto rl5Fz; efLV_: } public function getProductAttrInfo() { goto EM84J; zYx6g: HBDTU: goto ovyAb; nhvz8: if ($result) { goto gPAHM; } goto vpPD7; TYcDG: if ($attr) { goto HBDTU; } goto iI8bt; UbGdJ: $attr = $productService->getAttrInfo($data["\x70\162\x6f\x64\x75\143\x74\137\151\144"], $attr_id_list); goto TYcDG; VmxV9: $validate = \think\Loader::validate("\103\141\162\164"); goto PFmW0; EM84J: $data = input("\160\157\x73\x74\x2e"); goto VmxV9; PFmW0: $result = $validate->scene("\x61\164\164\162")->check($data); goto nhvz8; oXOT8: $attr_id_list = isset($data["\x61\x74\164\x72\x5f\151\x64\x5f\154\x69\x73\x74"]) ? json_encode($data["\141\x74\x74\162\x5f\151\x64\137\x6c\x69\163\164"]) : ''; goto UbGdJ; TmZeD: goto JaHUQ; goto zYx6g; btdv1: gPAHM: goto gz_vW; gz_vW: $productService = new ProductService(); goto oXOT8; iI8bt: return ["\x6d\x73\x67" => "\350\x8e\267\xe5\x8f\226\xe5\xa4\xb1\xe8\264\xa5", "\x65\162\162\157\x72\x43\157\144\145" => 0]; goto TmZeD; l5N70: JaHUQ: goto jgKKZ; vpPD7: return ["\155\x73\x67" => $validate->getError(), "\x65\162\x72\x6f\162\x43\157\144\x65" => 0]; goto btdv1; ovyAb: return ["\x6d\x73\x67" => "\350\216\xb7\345\x8f\x96\xe6\210\x90\xe5\x8a\237", "\x64\141\164\141" => $attr, "\145\x72\162\157\x72\x43\157\144\145" => 1]; goto l5N70; jgKKZ: } public function collectProduct($productId = 0) { goto X73Ym; PUUMx: $data["\x70\162\x6f\x64\165\143\x74\x5f\151\144"] = $productId; goto ES1zw; clGZq: CyxO3: goto mqsUU; RIdHg: return ["\155\x73\147" => "\xe7\xbd\x91\347\xbb\234\345\xbc\202\345\xb8\xb8", "\x65\x72\x72\x6f\x72\103\x6f\144\145" => 0]; goto XLjFG; CdirU: if ($result) { goto D4Txl; } goto RIdHg; mqsUU: $uid = TokenService::getCurrentUid(); goto PuLvp; G2Ut0: return ["\x6d\163\147" => "\347\xbd\x91\xe7\xbb\234\345\xbc\202\345\xb8\xb8", "\145\162\162\157\162\103\157\144\x65" => 0]; goto kSK_M; b2TGB: $product = ProductModel::where("\x75\x6e\x69\141\143\x69\144", session("\x75\x6e\x69\141\x63\x69\x64"))->find($productId); goto GJief; kSK_M: goto r5abC; goto yrnNu; A9VOB: dribF: goto b2TGB; L2S_Y: return ["\x6d\x73\x67" => "\345\xb7\xb2\346\x94\xb6\350\227\x8f", "\144\141\164\141" => ["\151\163\x5f\143\x6f\154\154\145\143\x74" => 1], "\x65\162\162\x6f\162\x43\x6f\x64\145" => 1]; goto m9EtI; X73Ym: if (!($productId == 0 || $productId == '')) { goto dribF; } goto iJ8kk; d3HXH: $result = $collect->delete(); goto S3CX3; ES1zw: $data["\x75\156\x69\141\x63\151\x64"] = session("\x75\x6e\x69\141\x63\151\144"); goto gLlcQ; JDJlZ: r5abC: goto bZNgM; Ollz1: $data["\x75\163\145\162\x5f\151\x64"] = $uid; goto PUUMx; f5P6y: if ($collect) { goto fzyUW; } goto Ollz1; ekSG0: return ["\x6d\163\x67" => "\345\225\x86\xe5\223\x81\344\xb8\215\345\255\230\xe5\x9c\xa8\xe6\210\x96\xe5\267\xb2\344\xb8\213\xe6\x9e\266", "\x65\x72\162\157\x72\103\x6f\144\145" => 0]; goto clGZq; kPS98: goto v7_jY; goto Px4xH; Px4xH: fzyUW: goto d3HXH; yrnNu: NIGEq: goto uG1kW; iJ8kk: return ["\155\163\147" => "\xe8\xaf\xb7\xe6\x8c\x87\xe5\xae\x9a\xe5\225\x86\xe5\223\201\151\x64", "\x65\x72\x72\x6f\162\x43\x6f\144\x65" => 0]; goto A9VOB; GJief: if (!empty($product)) { goto CyxO3; } goto ekSG0; XLjFG: goto MWqg5; goto g0sHx; PuLvp: $collect = CollectModel::where("\x75\x6e\x69\141\143\151\144", session("\165\x6e\151\141\143\151\x64"))->where(["\165\x73\x65\162\x5f\x69\x64" => $uid, "\x70\x72\x6f\x64\x75\143\164\x5f\x69\144" => $productId])->find(); goto f5P6y; S3CX3: if ($result) { goto NIGEq; } goto G2Ut0; m9EtI: MWqg5: goto kPS98; g0sHx: D4Txl: goto L2S_Y; bZNgM: v7_jY: goto UNNfZ; uG1kW: return ["\155\x73\x67" => "\345\267\262\345\x8f\x96\xe6\266\x88\346\224\266\350\227\217", "\x64\x61\x74\x61" => ["\x69\x73\x5f\143\x6f\x6c\x6c\145\x63\164" => 0], "\145\x72\x72\x6f\x72\103\157\x64\x65" => 1]; goto JDJlZ; gLlcQ: $result = CollectModel::create($data); goto CdirU; UNNfZ: } public function getRecent($count = 16) { goto N3MXC; rFa0a: if (!$products) { goto yQSNN; } goto RRk50; qIj5L: goto v2OWv; goto w2K7Y; mqwLG: throw new ProductException(); goto KIO_d; w2K7Y: yQSNN: goto mqwLG; KIO_d: v2OWv: goto NlGiJ; vPSuY: $products = ProductModel::getMostRecent($count); goto OX809; RRk50: return $products; goto qIj5L; N3MXC: (new Count())->goCheck(); goto vPSuY; OX809: $products = $products->hidden(["\163\165\x6d\155\x61\x72\171"]); goto rFa0a; NlGiJ: } public function getAllInCategory($page = 0, $size = 15) { goto hbHfZ; hbHfZ: $data = input("\x67\x65\164\x2e"); goto NkmQv; FxJsb: VVTRa: goto vnkqR; NkmQv: if (!(!isset($data["\x63\141\164\x65\x49\144"]) || $data["\143\141\164\145\111\x64"] == 0 || $data["\x63\x61\164\145\x49\144"] == '')) { goto VVTRa; } goto Pb34I; qb8rq: if ($products) { goto GsITQ; } goto JrhLv; Dxozd: return $products; goto C1ECm; vnkqR: $products = ProductModel::getProductsByCategoryID($data["\143\141\x74\x65\x49\144"], $page, $size); goto qb8rq; JrhLv: return ["\155\x73\147" => "\xe8\x8e\267\xe5\217\x96\xe5\xa4\261\xe8\xb4\245", "\145\162\x72\x6f\x72\x43\157\144\145" => 0]; goto a9wsS; Pb34I: return ["\x6d\x73\x67" => "\346\x9c\xaa\346\x8c\x87\xe5\xae\x9a\xe5\x88\x86\347\xb1\273\151\x64", "\x65\162\x72\157\162\103\x6f\144\x65" => 0]; goto FxJsb; a9wsS: GsITQ: goto Dxozd; C1ECm: } public function getOne($productId = 0) { goto suf1N; k4eAh: if (!$product) { goto hR1BZ; } goto LT9tD; j8ehK: hR1BZ: goto UZj1x; UZj1x: return ["\x6d\163\x67" => "\350\x8e\xb7\345\217\226\xe5\244\261\xe8\264\xa5", "\x65\x72\162\x6f\x72\x43\x6f\144\x65" => 0]; goto aIB55; suf1N: if (!($productId == 0 || $productId == '')) { goto s3NkU; } goto k8nwz; XVA6D: goto pjOhI; goto j8ehK; k8nwz: return ["\x6d\x73\x67" => "\xe8\257\xb7\346\x8c\x87\345\xae\x9a\345\225\206\xe5\223\201\x69\144", "\x65\x72\162\x6f\x72\103\157\144\145" => 0]; goto koOE_; aIB55: pjOhI: goto kFa2P; koOE_: s3NkU: goto TQ3Au; LT9tD: return ["\155\x73\147" => "\350\216\xb7\xe5\217\226\346\210\220\345\212\x9f", "\x64\141\164\x61" => $product, "\x65\x72\162\157\162\103\157\x64\x65" => 1]; goto XVA6D; TQ3Au: $product = ProductModel::getProductDetail($productId); goto k4eAh; kFa2P: } }