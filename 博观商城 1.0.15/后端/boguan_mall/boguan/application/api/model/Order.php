<?php
 namespace app\api\model; class Order extends BaseModel { protected $visible = array("\151\x64", "\165\163\145\162\137\151\x64", "\x6f\x72\x64\x65\x72\x5f\x6e\x6f", "\x70\x61\x72\145\156\164\x5f\151\x64", "\165\x73\x65\x72\x69\156\x66\x6f", "\163\x6e\x61\160\137\x69\x6d\x67", "\x73\x6e\x61\x70\137\156\x61\x6d\x65", "\x73\x6e\141\160\x5f\151\x6e\x66\x6f", "\x64\151\x73\143\157\165\x6e\164", "\157\137\x61\155\157\165\156\x74", "\155\145\163\x73\141\x67\x65", "\x73\145\x6e\x64\x5f\164\171\160\x65", "\145\x78\x70\162\x65\163\163\x5f\160\162\151\x63\145", "\145\170\x70\162\145\x73\163", "\x65\170\x70\x72\x65\x73\x73\x5f\156\157", "\143\162\145\141\x74\145\137\x74\x69\155\x65", "\x73\x74\141\164\x75\163", "\x69\163\x5f\x63\141\156\143\x65\x6c", "\157\x72\144\145\x72\137\164\171\160\x65", "\x70\151\x63\x6b\137\164\151\155\145", "\160\x69\143\153\137\151\156\x66\157", "\x64\x65\x6c\x69\166\145\x72\x79\x5f\x74\x69\155\x65", "\x64\145\154\151\x76\x65\162\x79\x5f\160\162\151\x63\x65", "\160\x69\x63\x6b\x5f\x74\x65\x6c", "\x70\151\143\x6b\x5f\x6e\141\155\x65", "\x72\x65\x6d\x61\162\153", "\x75\156\x69\x61\x63\x69\144", "\x6f\166\145\x72\144\x75\145", "\x69\x73\137\143\x68\141\156\147\145", "\x63\150\141\156\147\x65\x5f\160\162\151\x63\x65", "\154\x6f\156\147\151\164\165\144\x65", "\154\x61\x74\151\164\165\144\x65", "\x63\154\x65\162\153\x5f\x63\x6f\x64\145", "\143\157\x75\x70\x6f\x6e\x5f\160\162\x69\x63\145", "\143\154\x65\162\x6b\137\x69\x64", "\143\x6c\145\162\153\137\x63\157\x64\x65", "\x69\163\x5f\x73\145\156\x64", "\x63\154\145\162\153\x5f\x74\x69\155\145", "\x6f\154\144\x5f\157\x72\144\x65\162\x5f\156\x6f", "\151\x73\137\162\x65\146\165\156\144"); protected $autoWriteTimestamp = true; public static function getSummaryByUser($uid, $page = 1, $size = 15) { $data = self::where("\165\x73\x65\x72\x5f\x69\144", "\75", $uid)->where("\151\163\x5f\144\x65\154\145\x74\145", "\x3d", "\60")->where("\x69\163\x5f\142\x6f\x6f\153\151\x6e\147", "\x3d", "\61")->where("\151\163\137\160\141\151\144\x5f\x73\x75\142", "\x3d", "\61")->order("\x63\x72\145\141\164\x65\x5f\164\x69\155\x65\x20\x64\145\163\143")->paginate($size, true, ["\160\141\147\x65" => $page]); return $data; } public function getSnapInfoAttr($value) { goto YfeZD; e6bNQ: return null; goto DfyS5; xgJNh: return json_decode($value, true); goto bSqHw; DfyS5: XoHuL: goto xgJNh; YfeZD: if (!empty($value)) { goto XoHuL; } goto e6bNQ; bSqHw: } public function getUserInfoAttr($value) { goto u3lBF; u3lBF: if (!empty($value)) { goto XQZZT; } goto c_TjU; ttl87: XQZZT: goto RYIVC; c_TjU: return null; goto ttl87; RYIVC: return json_decode($value, true); goto PGBqf; PGBqf: } public function getPickInfoAttr($value) { goto mehXr; nCntH: return json_decode($value, true); goto BmNRL; mehXr: if (!empty($value)) { goto GKwfY; } goto io1uH; MoCaL: GKwfY: goto nCntH; io1uH: return null; goto MoCaL; BmNRL: } public static function getSummary($uid) { $data = self::where("\x75\x73\145\x72\137\x69\x64", "\75", $uid)->where("\x69\x73\137\144\x65\154\x65\164\145", "\x3d", "\x30")->where("\x69\x73\x5f\142\157\157\x6b\x69\x6e\x67", "\75", "\61")->where("\151\163\137\160\x61\151\144\x5f\x73\x75\x62", "\75", "\x31")->where("\163\164\141\164\165\163", "\75", "\60")->order("\x63\x72\x65\141\164\x65\137\164\x69\155\x65\40\x64\145\x73\x63")->limit(1)->find(); return $data; } public static function getOrderInUid($uid) { goto wnjuN; wQodU: if (empty($order)) { goto JDZqy; } goto fYEJO; XlpjR: $order = self::where(["\x75\156\151\141\x63\x69\x64" => session("\165\156\151\141\x63\x69\144"), "\x69\x73\137\144\145\154\x65\x74\x65" => 0, "\x69\163\137\143\x61\156\x63\145\x6c" => 0, "\x69\x73\137\x72\x65\146\165\x6e\144" => 0])->where($where)->select()->toArray(); goto wQodU; Rhodu: JDZqy: goto dJ4sv; oKTLP: nQCkB: goto Rhodu; dJ4sv: return $order; goto VMUPy; fYEJO: foreach ($order as $key => $value) { $order[$key]["\165\163\145\x72"] = User::field("\x61\x76\x61\x74\141\x72\x2c\156\x69\x63\x6b\156\141\x6d\145")->find($value["\165\x73\145\162\137\x69\144"]); gIjY5: } goto oKTLP; wnjuN: $where = "\165\163\145\162\x5f\x69\x64\x20\x69\156\50{$uid}\x29"; goto XlpjR; VMUPy: } public static function countUserOrder($uid) { $count = self::where(["\165\156\x69\141\x63\x69\144" => session("\x75\156\151\x61\143\151\144"), "\165\163\145\162\137\x69\144" => $uid, "\x69\163\x5f\144\145\154\x65\x74\x65" => 0, "\x69\x73\x5f\143\141\156\x63\145\x6c" => 0, "\x69\x73\137\162\x65\146\165\156\144" => 0])->count(); return $count; } public static function countUserPay($uid) { goto OTgST; Jx6KJ: $sum = $o_amount - $express_price; goto pzXKc; pzXKc: return $sum; goto ICkj4; OTgST: $o_amount = self::where(["\165\156\151\141\143\151\144" => session("\165\156\x69\141\143\151\x64"), "\x75\163\145\x72\x5f\151\144" => $uid, "\x69\x73\137\x64\x65\154\x65\x74\x65" => 0, "\151\x73\137\x63\141\156\143\145\154" => 0, "\151\163\137\x72\145\146\165\x6e\144" => 0])->where("\163\164\x61\x74\x75\163", "\x3e", "\60")->sum("\x6f\x5f\141\155\157\165\x6e\164"); goto PAVUP; PAVUP: $express_price = self::where(["\165\156\151\x61\x63\x69\144" => session("\165\156\151\x61\143\x69\x64"), "\x75\x73\145\162\x5f\x69\144" => $uid, "\151\x73\137\x64\145\x6c\x65\164\145" => 0, "\x69\163\137\x63\141\x6e\x63\x65\154" => 0, "\151\163\137\162\145\146\165\x6e\x64" => 0])->where("\163\x74\x61\164\165\163", "\x3e", "\x30")->sum("\145\170\160\162\145\163\x73\x5f\x70\162\x69\143\x65"); goto Jx6KJ; ICkj4: } public static function countUserAllStatus($uid) { goto vg8Jc; vg8Jc: $where0 = "\163\164\x61\x74\165\163\40\x3d\x20\60"; goto aaGsk; i4h_B: $where3 = "\151\163\x5f\143\157\156\146\151\x72\x6d\40\x3d\40\x31\40\141\156\x64\40\163\x74\x61\164\165\163\x20\x3d\x20\x33"; goto nFQkM; nFQkM: $status = ["\x61\x6c\x6c" => self::where("\x75\156\x69\x61\x63\x69\x64", session("\x75\x6e\151\141\143\x69\x64"))->where(["\165\163\145\x72\137\x69\x64" => $uid, "\151\x73\x5f\144\x65\154\145\164\x65" => 0, "\151\163\x5f\x63\x61\x6e\x63\x65\x6c" => 0])->count(), "\x73\x74\141\164\165\x73\x5f\60" => self::where("\165\x6e\151\x61\x63\151\x64", session("\x75\156\151\141\143\x69\144"))->where(["\165\163\x65\162\x5f\151\144" => $uid, "\x69\x73\137\144\145\154\x65\164\145" => 0, "\151\x73\x5f\143\x61\156\143\145\x6c" => 0])->where($where0)->count(), "\x73\164\141\164\x75\x73\137\61" => self::where("\x75\156\151\x61\143\151\x64", session("\165\x6e\x69\141\x63\x69\x64"))->where(["\x75\x73\145\x72\x5f\151\144" => $uid, "\151\163\137\x64\x65\154\x65\x74\145" => 0, "\151\163\x5f\143\141\x6e\x63\145\x6c" => 0])->where($where1)->count(), "\x73\x74\141\x74\165\163\x5f\x32" => self::where("\x75\156\151\141\143\x69\x64", session("\165\156\x69\x61\x63\x69\x64"))->where(["\x75\x73\x65\162\137\x69\x64" => $uid, "\151\163\x5f\x64\x65\x6c\x65\164\145" => 0, "\x69\x73\x5f\x63\141\156\x63\145\x6c" => 0])->where($where2)->count(), "\x73\x74\x61\x74\x75\163\x5f\63" => self::where("\165\x6e\151\141\x63\x69\144", session("\x75\x6e\151\141\143\151\x64"))->where(["\x75\x73\x65\x72\x5f\151\x64" => $uid, "\151\163\137\144\x65\x6c\145\164\145" => 0, "\151\x73\x5f\x63\x61\x6e\143\x65\154" => 0])->where($where3)->count()]; goto aoe6G; aaGsk: $where1 = "\x73\164\x61\x74\165\x73\40\x3d\x20\61\40\x61\156\144\40\151\163\x5f\163\145\x6e\144\x20\75\40\x30"; goto D1fkb; D1fkb: $where2 = "\151\163\x5f\x63\157\x6e\x66\x69\162\155\40\x3d\x20\60\40\141\156\x64\40\151\x73\x5f\163\145\x6e\144\x20\x3d\40\61\x20\141\156\144\40\163\x74\141\164\165\x73\x20\75\40\x32"; goto i4h_B; aoe6G: return $status; goto lae3K; lae3K: } }