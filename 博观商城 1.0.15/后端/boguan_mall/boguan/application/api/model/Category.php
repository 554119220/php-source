<?php
 namespace app\api\model; use app\api\model\Category as CategoryModel; class Category extends BaseModel { protected $hidden = array("\x64\145\154\145\x74\x65\137\x74\x69\155\145", "\143\x72\x65\x61\164\x65\137\x74\x69\155\x65", "\x75\160\x64\x61\x74\145\137\x74\151\155\145"); public function getLinkAttr($value) { goto WWBg4; lHL46: return json_decode($value); goto yxNI1; WWBg4: if (!empty($value)) { goto PdFwe; } goto rBcPF; fKjEr: PdFwe: goto lHL46; rBcPF: return null; goto fKjEr; yxNI1: } public function getIconAttr($value) { goto eawvN; yICDx: ipcdW: goto T4az7; VjkAC: return null; goto zuRbs; eawvN: if (!empty($value)) { goto EfBET; } goto VjkAC; zuRbs: EfBET: goto a5fPc; GdhoJ: $value = str_replace("\x2f\x2f", "\x68\x74\x74\x70\x73\x3a\x2f\x2f", $value); goto yICDx; a5fPc: if (!(strpos($value, "\x2f\x2f") == 0)) { goto ipcdW; } goto GdhoJ; T4az7: return $value; goto UI_U9; UI_U9: } public static function getCategoriesByParentId($parentId = 0) { goto f3ilp; OGXfk: return $categories; goto aGTBu; aAmr2: $categories = self::where("\165\x6e\x69\141\x63\x69\x64", session("\165\x6e\151\x61\x63\151\x64"))->where($where)->order("\163\157\162\x74", "\x64\x65\x73\x63")->field("\151\144\54\x70\x61\x72\145\156\x74\137\151\x64\54\156\x61\155\145\54\151\x63\x6f\x6e\54\x73\157\x72\x74\x2c\151\155\141\147\145\x2c\154\151\156\x6b")->select(); goto OGXfk; f3ilp: $where = "\160\x61\x72\x65\x6e\164\x5f\x69\x64\x20\x69\156\50{$parentId}\51\x20\x61\156\144\x20\x73\164\141\164\x75\163\40\x3d\40\61"; goto aAmr2; aGTBu: } public static function getCategoryChildByParentId($parentId = 0) { goto XrW9s; IghIh: KmzzC: goto FdOdD; qDBrD: if (empty($categories)) { goto KmzzC; } goto eZtSa; i3cZt: VbYuu: goto IghIh; XrW9s: $categories = self::getCategoriesByParentId($parentId); goto qDBrD; eZtSa: foreach ($categories as $key => $value) { goto SSOpR; E0HtH: FJ7UJ: goto IcOB0; SSOpR: $parentIds = getChildCate($value["\151\x64"]); goto Q6RnV; Q6RnV: $where = "\160\x61\x72\145\x6e\164\x5f\151\144\x20\x69\x6e\50{$parentIds}\x29\40\x61\x6e\x64\x20\x73\x74\141\x74\x75\x73\x20\x3d\x20\x31"; goto rGBem; rGBem: $categories[$key]["\163\145\x63\157\x6e\144"] = self::where("\x75\156\151\141\143\151\144", session("\x75\x6e\x69\141\x63\x69\x64"))->where($where)->order("\x73\x6f\162\164", "\144\x65\x73\x63")->field("\x69\x64\54\160\x61\162\x65\156\164\x5f\151\x64\x2c\156\141\x6d\145\x2c\x69\x63\157\156\x2c\163\x6f\162\x74\x2c\151\155\x61\x67\145\54\154\151\x6e\x6b")->select(); goto E0HtH; IcOB0: } goto i3cZt; FdOdD: return $categories; goto Ct42S; Ct42S: } public static function getCategoryThirdByParentId($parentId = 0) { goto nLFBJ; BoCoJ: veQdH: goto l0txV; phRLd: if (empty($categories)) { goto veQdH; } goto M1Apn; l0txV: return $categories; goto sk096; nLFBJ: $categories = self::getCategoriesByParentId($parentId); goto phRLd; p9HkZ: foreach ($categories as $key => $value) { goto ueOnp; ueOnp: $second = self::where($where)->where("\160\141\162\145\x6e\164\x5f\151\144", "\75", $value["\151\144"])->order("\x73\157\162\x74", "\x64\145\x73\x63")->field($field)->select(); goto OD6yN; GhGzw: cm8eN: goto uq027; OD6yN: foreach ($second as $k => $v) { $second[$k]["\164\x68\151\162\x64"] = self::where($where)->where("\x70\x61\162\145\x6e\164\x5f\x69\144", "\75", $v["\x69\144"])->order("\x73\157\162\164", "\144\x65\x73\x63")->field($field)->select(); akMVh: } goto lqznj; n1y99: $categories[$key]["\163\x65\x63\157\156\144"] = $second; goto GhGzw; lqznj: zR9wa: goto n1y99; uq027: } goto Ezkvh; dYL70: $where = ["\165\156\x69\x61\143\x69\144" => session("\165\x6e\151\x61\143\x69\144"), "\163\x74\x61\164\x75\x73" => 1]; goto p9HkZ; M1Apn: $field = "\151\144\54\160\x61\x72\145\156\164\x5f\151\x64\54\156\141\155\145\x2c\151\143\x6f\x6e\54\163\157\162\164\54\151\155\x61\x67\145\x2c\154\x69\x6e\x6b"; goto dYL70; Ezkvh: uYL_W: goto BoCoJ; sk096: } public static function getCategoryChildId($parentId) { goto xRVN4; fhPR1: $parentId = implode("\54", $cateIds); goto Zr1nf; xRVN4: $isHaveChild = CategoryModel::where("\165\156\151\x61\x63\151\144", session("\x75\x6e\151\141\143\151\x64"))->where("\x70\141\162\x65\156\164\x5f\x69\x64", "\75", $parentId)->select(); goto FpV13; FpV13: if (!$isHaveChild) { goto wLcd2; } goto VfYV0; ZfsCd: foreach ($isHaveChild as $k => $v) { $cateIds[] = $v["\151\144"]; SjwOv: } goto Jr8OL; Zr1nf: wLcd2: goto OCXNb; RiLVc: array_push($cateIds, $parentId); goto fhPR1; OCXNb: return $parentId; goto yGmVY; VfYV0: $cateIds = []; goto ZfsCd; Jr8OL: zYKJw: goto RiLVc; yGmVY: } }