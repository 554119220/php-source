<?php
 namespace app\api\model; use app\api\service\Order as OrderService; use think\Db; use think\Exception; class Withdraw extends BaseModel { public static function withdrawSubmit($uid, $data, $setting) { goto zY9nv; dvDIt: goto vRUAy; goto iBI8t; bD5xy: return ["\155\163\147" => "\350\266\x85\345\207\xba\xe4\273\212\346\227\xa5\346\x8f\220\347\x8e\xb0\xe4\270\212\351\231\x90" . $setting["\x64\x61\171\x5f\x77\x69\x74\x68\x64\x72\141\x77"] . "\345\x85\203", "\x65\x72\162\157\162\x43\157\144\145" => 0]; goto o0brL; CDwYa: try { goto EJDlt; xF1yt: $post["\x6f\162\x64\x65\162\137\x6e\157"] = $orderService->createOrderNo(); goto zvSYc; AFXxq: $user->save(); goto Y3MF9; wdpWQ: if (!($res !== false)) { goto Kkh5A; } goto RxwOp; RxwOp: $user->share_money -= $data["\155\157\156\145\x79"]; goto AFXxq; Y3MF9: Kkh5A: goto E_e_7; EJDlt: $orderService = new OrderService(); goto xF1yt; E_e_7: Db::commit(); goto emafs; emafs: return ["\x6d\163\147" => "\346\x8f\220\xe4\272\xa4\346\210\220\345\x8a\237", "\145\x72\x72\x6f\162\103\157\x64\x65" => 1]; goto XSrKk; zvSYc: $res = self::create($post); goto wdpWQ; XSrKk: } catch (Exception $e) { Db::rollback(); return ["\x6d\163\x67" => "\xe6\217\x90\xe4\xba\xa4\345\xa4\xb1\350\264\xa5", "\x65\x72\x72\157\162\x43\x6f\x64\x65" => 0]; } goto iBg1U; Xe_Ni: if ($setting["\x72\141\x74\x65"] == null || $setting["\x72\x61\x74\x65"] == 0) { goto QSceI; } goto TMGNI; jeFkn: if (!isset($data["\146\157\x72\x6d\x49\144"])) { goto lGH0t; } goto Tnsgq; ldupI: $post["\x72\x61\x74\x65"] = null; goto ZkAnD; thKn1: $post["\x72\x61\164\145"] = $setting["\162\141\x74\x65"]; goto GRslE; UnIv9: $post["\165\x73\145\162\137\x69\x64"] = $uid; goto ooqxE; q7qej: $post["\x6e\141\155\145"] = $data["\x62\x61\156\153\137\156\x61\155\x65"]; goto TNIBc; r5fm3: $post["\165\x6e\x69\x61\x63\151\x64"] = session("\165\x6e\x69\x61\143\x69\144"); goto xHG3H; xHG3H: Db::startTrans(); goto CDwYa; yGuTx: $post["\x61\x63\x63\x6f\x75\x6e\x74"] = $data["\142\141\x6e\153\x5f\141\143\143\157\x75\156\164"]; goto m6cGz; zZSwv: $dayWithdraw = self::where(["\165\156\x69\141\143\x69\x64" => session("\x75\156\x69\x61\x63\x69\x64"), "\x75\x73\x65\x72\137\x69\144" => $uid])->where("\x73\164\x61\x74\x75\x73", "\74\76", 2)->whereTime("\143\x72\x65\141\x74\x65\137\x74\151\155\145", "\x64")->sum("\155\157\156\x65\x79"); goto seNzP; ldjTw: goto vRUAy; goto V0vEP; iBI8t: OXT66: goto q7qej; ooqxE: $post["\x6d\157\156\x65\171"] = $data["\x6d\x6f\156\x65\171"]; goto W4jct; qe4cZ: if ($data["\x74\171\160\x65"] == "\63") { goto OXT66; } goto ldjTw; nAu_0: QSceI: goto PTlgQ; QLUZ5: if (!($post["\141\x6d\x6f\165\156\164"] < 0.01)) { goto DnBVG; } goto hfyt4; V0vEP: OW6_3: goto IJ58r; BtU0Z: $user = User::get($uid); goto BrK8a; TMGNI: $rate = $setting["\162\141\164\145"] / 100; goto W15eH; EQH52: $post["\x61\x63\143\x6f\165\x6e\164"] = $data["\x61\x63\143\157\165\156\164"]; goto dvDIt; PMRFw: Rh9k3: goto zZSwv; prtB1: if ($data["\x74\171\x70\x65"] == "\62") { goto OW6_3; } goto qe4cZ; o0brL: REdeD: goto BtU0Z; r35LW: Trgnl: goto UnIv9; BrK8a: if (!($user["\x73\150\141\x72\x65\137\155\x6f\156\x65\x79"] < $data["\155\x6f\x6e\145\171"])) { goto Trgnl; } goto utmsW; GRslE: goto RC6U0; goto nAu_0; ZkAnD: RC6U0: goto prtB1; TNIBc: $post["\142\x61\156\x6b"] = $data["\142\141\156\153"]; goto yGuTx; utmsW: return ["\x6d\x73\x67" => "\xe5\217\257\xe6\217\x90\xe7\x8e\260\344\275\231\351\242\235\xe4\xb8\215\350\xb6\xb3", "\145\x72\x72\x6f\162\x43\x6f\144\145" => 0]; goto r35LW; W15eH: $post["\x61\x6d\x6f\165\156\x74"] = doubleval(sprintf("\x25\56\62\x66", $data["\155\157\156\x65\x79"] * $rate)); goto thKn1; zY9nv: if (!($data["\x6d\157\156\145\171"] < $setting["\x6d\151\156\x5f\x77\x69\x74\x68\144\162\x61\167"] && $setting["\155\151\x6e\x5f\x77\151\x74\x68\144\162\141\x77"] > 0)) { goto Rh9k3; } goto TrrEV; IJ58r: $post["\156\x61\x6d\x65"] = $data["\156\141\x6d\145"]; goto EQH52; W4jct: $post["\167\151\164\x68\x64\x72\x61\x77\137\x74\x79\160\145"] = $data["\x74\171\160\145"]; goto Xe_Ni; hfyt4: return ["\155\163\x67" => "\345\210\xb0\xe8\xb4\xa6\xe9\207\x91\xe9\xa2\235\xe4\270\215\350\203\xbd\xe5\xb0\221\344\xba\x8e\60\x2e\x30\61", "\145\162\162\x6f\x72\103\157\144\145" => 0]; goto hStTo; PTlgQ: $post["\141\x6d\157\165\156\164"] = $data["\155\157\156\145\171"]; goto ldupI; hStTo: DnBVG: goto r5fm3; sSlG8: lGH0t: goto QLUZ5; TrrEV: return ["\x6d\x73\x67" => "\xe9\207\x91\xe9\xa2\x9d\344\270\x8d\xe8\x83\275\345\xb0\x91\xe4\272\216\346\x9c\x80\xe4\xbd\x8e\xe6\217\x90\xe7\216\xb0\351\207\221\xe9\242\235" . $setting["\x6d\151\x6e\x5f\167\x69\164\150\144\162\141\167"] . "\xe5\x85\203", "\x65\162\x72\x6f\162\x43\x6f\x64\x65" => 0]; goto PMRFw; Tnsgq: $post["\x70\162\145\160\x61\171\x5f\151\144"] = $data["\146\x6f\162\x6d\x49\x64"]; goto sSlG8; m6cGz: vRUAy: goto jeFkn; seNzP: if (!($setting["\144\x61\171\x5f\167\x69\164\x68\x64\x72\x61\167"] > 0 && $dayWithdraw > $setting["\x64\141\171\x5f\x77\151\164\150\144\x72\x61\167"])) { goto REdeD; } goto bD5xy; iBg1U: } public static function getAllWithdraw($uid, $page, $size) { $withdraw = self::where(["\165\156\151\x61\143\151\x64" => session("\x75\156\151\x61\143\151\x64"), "\165\x73\145\x72\137\151\x64" => $uid])->order("\x63\x72\145\141\164\x65\137\x74\151\155\145", "\144\x65\x73\x63")->paginate($size, true, ["\160\141\147\x65" => $page]); return $withdraw; } public static function sumUserWaitPay($uid) { $sum = self::where(["\x75\156\x69\141\x63\151\x64" => session("\x75\x6e\151\141\143\151\x64"), "\x75\x73\145\162\x5f\151\144" => $uid, "\163\164\x61\x74\165\163" => 0])->sum("\141\x6d\x6f\x75\156\x74"); return $sum; } public static function sumUserWithdraw($uid) { $sum = self::where(["\x75\x6e\151\x61\143\151\x64" => session("\165\156\x69\x61\x63\151\144"), "\x75\163\145\x72\x5f\151\x64" => $uid, "\163\164\141\164\x75\x73" => 1])->sum("\141\155\157\165\156\164"); return $sum; } }