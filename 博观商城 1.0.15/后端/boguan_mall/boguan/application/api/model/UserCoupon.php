<?php
 namespace app\api\model; class UserCoupon extends BaseModel { public function coupon() { return $this->hasOne("\x43\157\165\160\x6f\156", "\x69\144", "\x63\157\x75\160\x6f\156\x5f\x69\144")->field("\x69\x64\54\x63\x61\164\145\x5f\151\144\x2c\x70\162\157\x64\165\143\x74\x5f\151\x64\54\156\x61\155\x65\x2c\x74\171\x70\145\x2c\x6d\x69\x6e\x5f\160\162\x69\x63\145\x2c\163\165\x62\x5f\x70\162\x69\143\145\x2c\144\151\163\143\x6f\165\156\164\54\151\x73\x5f\152\x6f\151\156\54\x72\x65\155\141\x72\153\x2c\141\160\x70\154\171\x2c\x72\x65\x63\145\x69\166\x65\x5f\x6c\x69\x6d\151\x74\x2c\x73\145\x6e\x64\137\x6e\165\155\54\x73\x75\x6d"); } public static function getUserCoupon($uid, $couponId) { goto gD8sX; d7nWO: return $userCoupon; goto Suz1Z; gD8sX: User::checkCoupon(); goto CGVaT; CGVaT: $userCoupon = self::where(["\x75\156\151\x61\143\151\144" => session("\165\156\x69\141\x63\151\x64"), "\165\x73\145\162\x5f\x69\x64" => $uid, "\143\x6f\165\160\157\x6e\137\151\x64" => $couponId, "\151\x73\137\165\x73\145" => 0, "\163\164\141\x74\x75\163" => 1])->find(); goto d7nWO; Suz1Z: } public static function updateUserCouponUsed($uid, $couponId) { goto KMqEg; wKJtj: $coupon->is_use = 1; goto XON_A; LSFpz: if (!$coupon) { goto F6aBV; } goto wKJtj; KMqEg: $coupon = self::where(["\165\156\151\141\143\x69\x64" => session("\165\156\151\141\143\151\x64"), "\x75\x73\x65\x72\x5f\x69\144" => $uid, "\x63\x6f\165\x70\157\x6e\x5f\151\144" => $couponId, "\151\163\x5f\165\x73\145" => 0, "\163\x74\x61\x74\x75\x73" => 1])->find(); goto LSFpz; ifP9O: F6aBV: goto LtQT3; XON_A: $coupon->save(); goto ifP9O; LtQT3: } public static function updateUserCouponUnused($uid, $couponId) { goto V504h; M6cYA: if (!$coupon) { goto KNhR8; } goto V67IE; V67IE: $coupon->is_use = 0; goto kLS9w; kLS9w: $coupon->save(); goto w0k17; w0k17: KNhR8: goto fk3LI; V504h: $coupon = self::where(["\165\x6e\151\x61\x63\151\x64" => session("\165\x6e\x69\x61\143\151\144"), "\x75\163\145\x72\137\x69\x64" => $uid, "\x63\157\x75\x70\157\x6e\137\151\144" => $couponId, "\x69\x73\137\x75\x73\145" => 1, "\x73\x74\141\164\x75\x73" => 1])->find(); goto M6cYA; fk3LI: } }