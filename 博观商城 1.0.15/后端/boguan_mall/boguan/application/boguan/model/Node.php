<?php
 namespace app\boguan\model; class Node extends BaseModel { public function getNodeId($data) { goto RQxT3; IMxZc: $nodeIds = []; goto R6j6U; U1Z5w: if (!is_array($arrData)) { goto R0RxB; } goto FdfjY; FdfjY: foreach ($arrData as $key => $value) { goto HWw9w; dmAbM: $nodeIds[] = $this->getChild($node["\x69\144"]); goto qnv60; GJzpI: $node = self::where("\151\144", "\x3d", $value)->find(); goto dmAbM; qnv60: d5mBM: goto scodx; scodx: n4fuy: goto vTjgv; HWw9w: if (!($value != '')) { goto d5mBM; } goto GJzpI; vTjgv: } goto endGK; UY9tx: $arrData = array_unique($arrData); goto IMxZc; rh5ky: R0RxB: goto fWoBd; R6j6U: $node = ''; goto U1Z5w; UoE3K: $node = implode("\x2c", array_unique(explode("\x2c", implode("\54", $nodeIds)))); goto rh5ky; fWoBd: return $node; goto Mvoix; RQxT3: $arrData = explode("\54", $data); goto UY9tx; endGK: mPQpQ: goto UoE3K; Mvoix: } public function getChild($id) { goto RcO5B; gSHY_: array_push($nid, $id); goto iTtrg; k0VB1: LFPFo: goto Pq8lA; k8Tik: Bsh9f: goto tfr0G; zFYmv: foreach ($child as $k => $v) { $nid[] = self::getChild($v["\151\x64"]); DL_3O: } goto vdbaL; vdbaL: rH41Q: goto gSHY_; hWA3c: goto LFPFo; goto k8Tik; tfr0G: $nid = []; goto zFYmv; neNYC: if (!$child->isEmpty()) { goto Bsh9f; } goto Z56Lg; Z56Lg: return $id; goto hWA3c; RcO5B: $child = self::where("\x70\x61\162\145\156\x74\137\x69\144\40\75" . $id)->select(); goto neNYC; iTtrg: $nid = implode("\x2c", $nid); goto ei6Cl; ei6Cl: return $nid; goto k0VB1; Pq8lA: } public function setNode() { goto pj4hT; sqCkY: return $node; goto woyLb; uhMJn: foreach ($node as $key => $value) { goto yyjhA; Bz4Fl: Ved_W: goto Cnidz; d2Rn1: unset($value["\156\157\144\145\137\x6e\141\x6d\x65"]); goto Bz4Fl; rUBvk: KMNAH: goto tcawt; bQ4a5: $node[$key]["\156\141\x6d\x65"] = $value["\x6e\157\144\x65\x5f\156\141\155\x65"]; goto EgZpE; yyjhA: if (!($value["\x6c\145\x76\145\154"] == 4)) { goto KMNAH; } goto Mb2Hj; Mb2Hj: unset($node[$key]); goto rUBvk; tcawt: $node[$key]["\160\x61\x72\145\x6e\x74\x49\x64"] = $value["\x70\x61\x72\145\156\164\137\151\144"]; goto bQ4a5; EgZpE: unset($value["\160\141\162\145\156\x74\x5f\x69\x64"]); goto d2Rn1; Cnidz: } goto U_wR0; pj4hT: $node = self::field("\x69\144\54\160\x61\162\145\x6e\164\137\x69\144\54\x6e\157\144\x65\137\x6e\x61\x6d\x65\54\154\145\x76\x65\154")->order("\x6c\x65\x76\145\154", "\141\x73\x63")->select(); goto uhMJn; U_wR0: ZhFy2: goto O69hX; O69hX: $node = json_encode($node, JSON_UNESCAPED_UNICODE); goto sqCkY; woyLb: } public function getAllNode() { goto ac4Id; aE2dQ: return $data; goto CsCVZ; ac4Id: $node = self::order("\163\x6f\162\164", "\x61\163\x63")->select()->toArray(); goto bFmHz; bFmHz: $data = self::buildTrees($node); goto aE2dQ; CsCVZ: } public function buildTrees($data, $parentId) { goto p_1z3; mHYFs: return $treeNodes; goto gYpUc; r2Ys9: foreach ($data as $key => $value) { goto kP1kD; GOVUI: TjDjM: goto q2IhT; x8qsM: $value["\x63\x68\x69\154\144"] = self::buildTrees($data, $value["\151\144"]); goto ZYaiq; kP1kD: if (!($value["\x70\x61\x72\145\156\164\x5f\151\144"] == $parentId)) { goto TjDjM; } goto x8qsM; ZYaiq: $treeNodes[] = $value; goto GOVUI; q2IhT: JuZ7x: goto nl_Nx; nl_Nx: } goto jkurM; jkurM: dK7GQ: goto mHYFs; p_1z3: $treeNodes = array(); goto r2Ys9; gYpUc: } public function getActions($where) { return $this->field("\143\157\156\x74\162\157\154\x5f\156\141\x6d\x65\x2c\x61\x63\x74\151\157\x6e\x5f\156\x61\x6d\145")->where($where)->select(); } public function getMenu($nodeStr = '') { goto y9s_C; BBWmb: eJ3Sn: goto sOpLC; MmILS: $where = "\151\x73\137\155\145\156\165\40\x3d\x20\61\40\x61\x6e\144\x20\151\x64\40\151\156\x28" . $nodeStr . "\x29"; goto B22nc; ehTU7: $menu = prepareMenu($result); goto Y3Pu0; hXfk4: $result = $this->where($where)->order("\163\x6f\x72\x74", "\141\x73\143")->select(); goto ehTU7; B22nc: goto NAzfy; goto BBWmb; h7xUV: if (session("\167\x65\67") || "\52" == $nodeStr) { goto eJ3Sn; } goto MmILS; Y3Pu0: return $menu; goto ZXefb; mu27V: NAzfy: goto hXfk4; LY_Cn: return []; goto SNGyy; sOpLC: $where = "\x69\163\x5f\x6d\x65\156\165\x20\75\x20\61"; goto mu27V; SNGyy: L9IZm: goto h7xUV; y9s_C: if (!(empty($nodeStr) && !session("\x77\145\x37"))) { goto L9IZm; } goto LY_Cn; ZXefb: } }