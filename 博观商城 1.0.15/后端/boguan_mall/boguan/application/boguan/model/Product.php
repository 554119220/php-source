<?php
 namespace app\boguan\model; use app\boguan\model\AttrGroup as AttrGroupModel; use app\boguan\model\AttrValue as AttrValueModel; use app\boguan\model\Attr as AttrModel; class Product extends BaseModel { public function category() { return $this->hasOne("\x43\x61\x74\145\x67\157\x72\171", "\151\x64", "\143\141\164\145\137\151\x64")->field("\151\x64\x2c\156\x61\x6d\x65"); } public function getIntegralAttr($value) { goto QqAnI; PMV26: return json_decode($value, true); goto PWEPZ; QqAnI: if (!empty($value)) { goto DTRFe; } goto mrNae; DSUTd: DTRFe: goto PMV26; mrNae: return null; goto DSUTd; PWEPZ: } public function getSendTypeAttr($value) { goto btS2V; G0dTL: return null; goto q8tRj; btS2V: if (!empty($value)) { goto muu0Q; } goto G0dTL; Ik2A_: return json_decode($value, true); goto FNpw9; q8tRj: muu0Q: goto Ik2A_; FNpw9: } public function getPromiseAttr($value) { goto N8lth; O8M3v: oPMzE: goto JmOEn; JmOEn: return explode("\x2c", $value); goto Ll497; N8lth: if (!empty($value)) { goto oPMzE; } goto lmVzX; lmVzX: return null; goto O8M3v; Ll497: } public function getImageAttr($value) { goto Kb0hB; HZeat: Ph0wi: goto jQKGc; jQKGc: return json_decode($value, true); goto pq2HW; Kb0hB: if (!empty($value)) { goto Ph0wi; } goto eC0Wp; eC0Wp: return null; goto HZeat; pq2HW: } public static function updateStock() { goto pNfKA; t0dAz: foreach ($product as $key => $value) { goto NVZeW; NVZeW: $stock = getProductStock($value["\x69\144"]); goto u2zaU; u2zaU: self::update(["\x69\x64" => $value["\x69\144"], "\164\x6f\164\141\x6c\x5f\163\x74\157\x63\153" => $stock]); goto DMGLa; DMGLa: nzWrN: goto y31Xe; y31Xe: } goto ABQZT; ABQZT: lO07h: goto Zsf0G; pNfKA: $product = self::all(); goto t0dAz; Zsf0G: } public function getAttrGroup($productId) { goto EzBOC; s14HI: $attrGroupArr = []; goto Yp9Un; sPpNI: FU7O2: goto IWGQ7; EzBOC: $attrGroup = AttrGroupModel::where(["\160\x72\x6f\144\165\x63\164\137\151\144" => $productId])->order("\x69\144", "\141\x73\x63")->select(); goto s14HI; IWGQ7: return $attrGroupArr; goto AjvmK; Yp9Un: foreach ($attrGroup as $key => $value) { goto zr07y; zr07y: $attrGroupArr[$key]["\x6e\141\155\145"] = $value["\x67\x72\157\165\160\x5f\x6e\141\x6d\145"]; goto yMqOk; fDH9P: AZXtj: goto WyyM_; WyyM_: $attrGroupArr[$key]["\141\162\x72"] = $attrName; goto qmqWA; OZYf_: foreach ($attr as $k => $v) { $attrName[] = $v["\x61\x74\x74\x72\x5f\x6e\x61\x6d\145"]; Iz8Wu: } goto fDH9P; DFwsE: $attr = AttrModel::where(["\x70\162\157\144\x75\143\x74\x5f\x69\x64" => $productId, "\147\x72\x6f\x75\160\x5f\x69\x64" => $value["\x69\x64"]])->order("\151\x64", "\141\x73\143")->select(); goto Iq2JL; yMqOk: $attrGroupArr[$key]["\x61\x72\x72"] = []; goto DFwsE; qmqWA: C5mJc: goto qZ33K; Iq2JL: $attrName = []; goto OZYf_; qZ33K: } goto sPpNI; AjvmK: } public function getAttrValue($productId) { goto DwBtr; qHVpK: return $attrValueArr; goto rmmDd; ACG4L: foreach ($attrValue as $key => $value) { goto qjOUJ; wvUVf: WbWaK: goto cgdcD; tQ2h4: $attrValueArr[$key]["\x73\164\157\x63\153"] = $value["\x73\x74\157\143\x6b"]; goto dYBOB; ZgV29: $attrValueArr[$key]["\x69\x64"] = implode("\55", $setAttrName); goto sp8N9; RazhB: $setAttrName = []; goto ZWEAB; gSVyp: w0mUs: goto jkZ67; jkZ67: $attrValueArr[$key]["\141\x74\164\162\137\151\144"] = $value["\x69\x64"]; goto ZgV29; sp8N9: $attrValueArr[$key]["\151\x6d\147"] = $value["\151\x6d\141\147\145"]; goto JMrYX; dYBOB: $attrValueArr[$key]["\167\145\x69\x67\x68\x74"] = $value["\x77\145\151\x67\150\164"]; goto m98L6; JMrYX: $attrValueArr[$key]["\160\162\x69\x63\x65"] = $value["\x70\x72\x69\x63\x65"]; goto tQ2h4; San8K: $attrValueArr[$key]["\x62\x61\162\143\x6f\144\x65"] = $value["\x62\141\162\137\143\x6f\x64\x65"] ? $value["\142\141\162\x5f\x63\157\x64\145"] : ''; goto wvUVf; m98L6: $attrValueArr[$key]["\143\157\x64\x65"] = $value["\156\x6f"] ? $value["\x6e\x6f"] : ''; goto San8K; qjOUJ: $keys = explode("\54", $value["\153\x65\x79"]); goto RazhB; ZWEAB: foreach ($keys as $k => $v) { goto ml8MW; ml8MW: $getAttrName = AttrModel::get($v); goto D9VFd; uQ2Za: YZNvU: goto Gdqpb; D9VFd: $setAttrName[] = $getAttrName["\141\164\164\x72\137\156\141\155\x65"]; goto uQ2Za; Gdqpb: } goto gSVyp; cgdcD: } goto vUNtW; DwBtr: $attrValue = AttrValueModel::where(["\160\162\157\x64\165\x63\x74\137\x69\144" => $productId])->order("\x69\x64", "\x61\x73\x63")->select(); goto b9Z13; vUNtW: plcbd: goto qHVpK; b9Z13: $attrValueArr = []; goto ACG4L; rmmDd: } public function getAttrValueAndVipSetting($productId) { goto Z9r2s; zluYD: return $attrValueArr; goto CR1Lm; OvzS2: foreach ($attrValue as $key => $value) { goto IHC2O; LqVPa: qIXJN: goto fFwiz; b5x3D: if (empty($setting)) { goto S6qZF; } goto eoVuh; IHC2O: $keys = explode("\54", $value["\x6b\x65\x79"]); goto FChzP; fFwiz: $attrValueArr[$key]["\x69\144"] = implode("\x2d", $setAttrName); goto fidmT; eoVuh: foreach ($setting as $kk => $vv) { $attrValueArr[$key]["\154\145\166\145\154\x5f" . $vv["\x76\151\160\137\x69\x64"]] = $vv["\166\x69\x70\x5f\x70\162\151\143\x65"]; LuDOu: } goto D1hJO; BkXyT: vPbrn: goto SoZzD; FChzP: $setAttrName = []; goto AlaRg; D1hJO: p5U82: goto LeiWT; iz0Wl: $attrValueArr[$key]["\160\162\x69\143\145"] = $value["\x70\x72\151\143\145"]; goto XOo5t; fidmT: $attrValueArr[$key]["\x69\x6d\x67"] = $value["\151\x6d\x61\147\145"]; goto iz0Wl; LeiWT: S6qZF: goto BkXyT; XOo5t: $setting = json_decode($value["\163\145\164\x74\x69\x6e\147"], true); goto b5x3D; AlaRg: foreach ($keys as $k => $v) { goto SU9a5; SU9a5: $getAttrName = AttrModel::get($v); goto iWeVM; aiVlG: lSL0F: goto tf_QY; iWeVM: $setAttrName[] = $getAttrName["\141\x74\164\x72\137\156\x61\155\x65"]; goto aiVlG; tf_QY: } goto LqVPa; SoZzD: } goto ove05; ove05: Zyklh: goto zluYD; ZcWwc: $attrValueArr = []; goto OvzS2; Z9r2s: $attrValue = AttrValueModel::where(["\160\162\x6f\144\x75\143\164\137\151\144" => $productId])->order("\x69\x64", "\141\x73\x63")->select(); goto ZcWwc; CR1Lm: } public function addAttr($productId, $attrGroupArr = array(), $attrValueArr = array()) { goto wdtkN; uQEi0: return true; goto ePDRV; wdtkN: $attrGroupModel = new AttrGroupModel(); goto gtyhq; KD4pr: MDfsp: goto uQEi0; uVvNc: foreach ($attrValueArr as $key => $value) { goto aDMR2; F4EUR: AttrValueModel::create($setAttrValue); goto XFERq; YrC7k: B9P_4: goto pQax1; U1iPJ: $attrValueIds = []; goto V_V2s; mpp8H: $setAttrValue["\167\x65\151\x67\x68\x74"] = $value["\x77\x65\151\x67\150\x74"]; goto F4EUR; lAsIb: $setAttrValue["\160\162\x6f\x64\165\143\x74\x5f\151\144"] = $productId; goto DCUKD; j81pB: $setAttrValue["\x70\162\151\x63\145"] = $value["\x70\x72\151\143\145"]; goto Va4Ac; FJe4R: $setAttrValue["\153\145\x79"] = implode("\54", $attrValueIds); goto c1ZpC; aDMR2: $keys = explode("\x2d", $value["\x69\144"]); goto U1iPJ; uLoHQ: if ($isHaveAttrValue) { goto RXhY1; } goto CNWA8; CNWA8: $setAttrValue["\165\156\151\141\143\151\x64"] = session("\165\x6e\151\141\x63\x69\144"); goto lAsIb; KhE0E: fNoc6: goto FJe4R; ajufW: $setAttrValue["\163\164\157\x63\x6b"] = $value["\x73\164\x6f\x63\153"]; goto j81pB; l5l4B: $setAttrValue["\156\x6f"] = $value["\x63\157\144\145"]; goto mpp8H; Va4Ac: $setAttrValue["\x62\x61\162\x5f\x63\157\x64\145"] = $value["\142\141\x72\143\x6f\x64\x65"]; goto l5l4B; DCUKD: $setAttrValue["\x69\155\x61\147\145"] = $value["\x69\x6d\147"]; goto ajufW; V_V2s: foreach ($keys as $k => $v) { goto udTGg; ZQ6Xy: KHRvm: goto bcEt6; udTGg: $getAttrValue = AttrModel::where(["\x70\x72\157\x64\x75\x63\164\x5f\x69\x64" => $productId, "\x61\x74\164\x72\x5f\156\x61\155\145" => $v])->find(); goto DShDc; DShDc: $attrValueIds[] = $getAttrValue["\x69\144"]; goto ZQ6Xy; bcEt6: } goto KhE0E; XFERq: RXhY1: goto YrC7k; c1ZpC: $isHaveAttrValue = AttrValueModel::where(["\x70\x72\x6f\144\165\143\164\x5f\151\x64" => $productId, "\x6b\145\x79" => $setAttrValue["\x6b\145\171"]])->find(); goto uLoHQ; pQax1: } goto KD4pr; gtyhq: $attr["\x63\x72\x65\141\x74\x65\137\x74\x69\155\145"] = time(); goto b7ubA; b7ubA: foreach ($attrGroupArr as $key => $value) { goto hPlbd; oxIuA: foreach ($value["\x61\x72\162"] as $k => $v) { goto Z2U6e; SLZLA: Jjcru: goto gbKEB; QGnov: if ($isHaveAttr) { goto Jjcru; } goto gf2Ji; gbKEB: VYNta: goto Ms7F6; gf2Ji: $attr["\x75\x6e\x69\141\x63\151\x64"] = session("\165\x6e\151\x61\143\x69\x64"); goto r_rdQ; Z2U6e: $isHaveAttr = AttrModel::where(["\x70\x72\x6f\144\x75\143\164\137\x69\144" => $productId, "\x61\164\164\x72\137\156\x61\155\145" => $v, "\147\x72\157\165\160\137\x69\144" => $attr["\x67\x72\x6f\165\160\137\151\x64"]])->find(); goto QGnov; NnkMv: $attr["\x61\x74\x74\162\x5f\x6e\141\155\145"] = $v; goto hoorD; r_rdQ: $attr["\160\162\157\144\165\x63\164\x5f\151\x64"] = $productId; goto NnkMv; hoorD: AttrModel::create($attr); goto SLZLA; Ms7F6: } goto FxjN3; UtqwV: $attr["\x67\162\157\165\160\137\x69\x64"] = $attrGroupModel->insertGetId($group); goto DMrS9; s00H_: if ($isHaveAttrGroup) { goto WP83k; } goto ot41s; BED2z: jvpDw: goto T3DfI; ot41s: $group["\x75\156\x69\141\x63\x69\x64"] = session("\165\x6e\x69\x61\x63\x69\144"); goto OGn5a; DMrS9: WP83k: goto oxIuA; OGn5a: $group["\x70\162\157\144\x75\143\x74\x5f\x69\x64"] = $productId; goto izQEY; hPlbd: $isHaveAttrGroup = AttrGroupModel::where(["\160\x72\x6f\x64\x75\143\164\x5f\151\x64" => $productId, "\147\x72\x6f\165\160\x5f\156\141\155\x65" => $value["\156\x61\155\x65"]])->find(); goto s00H_; izQEY: $group["\147\162\157\165\x70\137\x6e\141\x6d\145"] = $value["\x6e\141\155\x65"]; goto UtqwV; FxjN3: IGD0v: goto BED2z; T3DfI: } goto SOzhI; SOzhI: IseBC: goto uVvNc; ePDRV: } public function editAttr($productId, $attrGroupArr = array(), $attrValueArr = array()) { goto DoW2w; jS23_: return true; goto j0iQs; DpQSI: ezucA: goto jS23_; u5EKZ: $OldAttrValue = $this->getAttrValue($productId); goto fOl2R; OsLJX: foreach ($OldAttrValue as $k => $v) { $OldAttrValueArr[$v["\x69\x64"]] = $v; v0kwy: } goto ZLG_0; K43MH: $OldAttrGroup = AttrGroupModel::where(["\x70\162\157\144\x75\x63\x74\x5f\x69\x64" => $productId])->select()->toArray(); goto Dit23; o_k0E: sE4hi: goto ptoe8; DoW2w: $attrGroupModel = new AttrGroupModel(); goto K43MH; r6ZHd: TBfOI: goto Hp_XW; RhRyN: foreach ($attrValueArr as $key => $value) { goto jPD8t; ylcUy: $setAttrValue["\160\162\157\x64\165\143\x74\x5f\151\144"] = $productId; goto mghjF; tCX09: if (array_key_exists($tmp_key, $OldAttrValueArr)) { goto L50Ve; } goto NOPBH; rFuK5: b9l5G: goto DQJpE; NOPBH: unset($setAttrValue["\151\144"]); goto LA5Kr; X3GNr: $tmp_key = $value["\x69\144"]; goto tCX09; vO2xr: II1uy: goto j5XfQ; ukC44: $setAttrValue["\x77\x65\x69\147\x68\164"] = $value["\x77\x65\x69\147\x68\164"]; goto X3GNr; FSXkb: $setAttrValue["\x70\x72\x69\143\x65"] = $value["\x70\162\151\x63\x65"]; goto pfwz2; JrCDo: $setAttrValue["\151\144"] = $OldAttrValueArr[$tmp_key]["\141\164\x74\162\x5f\151\x64"]; goto FX1o1; AjusG: $setAttrValue["\x73\x74\x6f\143\153"] = $value["\163\x74\157\x63\x6b"]; goto FSXkb; cAjjc: $setAttrValue["\156\x6f"] = $value["\x63\x6f\144\x65"]; goto ukC44; B99t1: Mv04a: goto vO2xr; TWwq2: unset($OldAttrValueArr[$tmp_key]); goto B99t1; DQJpE: $setAttrValue["\153\x65\171"] = implode("\54", $attrValueIds); goto oDl9E; FX1o1: AttrValueModel::update($setAttrValue); goto TWwq2; mghjF: $setAttrValue["\151\x6d\141\147\x65"] = $value["\151\x6d\x67"]; goto AjusG; wm70C: goto Mv04a; goto XSw2I; oDl9E: $setAttrValue["\x75\x6e\151\x61\143\151\144"] = session("\x75\156\x69\141\x63\x69\x64"); goto ylcUy; pfwz2: $setAttrValue["\x62\x61\x72\x5f\x63\157\x64\x65"] = $value["\x62\x61\x72\143\x6f\x64\x65"]; goto cAjjc; XSw2I: L50Ve: goto JrCDo; LA5Kr: AttrValueModel::create($setAttrValue); goto wm70C; jPD8t: $keys = explode("\55", $value["\x69\144"]); goto Tve6M; Tve6M: $attrValueIds = []; goto EcXIb; EcXIb: foreach ($keys as $k => $v) { goto QlTJZ; QlTJZ: $getAttrValue = AttrModel::where(["\160\162\x6f\144\x75\143\x74\137\151\x64" => $productId, "\x61\x74\x74\162\137\x6e\x61\155\x65" => $v])->find(); goto BE4To; aBsax: RGfDV: goto Lp2pC; BE4To: $attrValueIds[] = $getAttrValue["\x69\x64"]; goto aBsax; Lp2pC: } goto rFuK5; j5XfQ: } goto wsq1B; Bc5N4: $OldAttrGroupArr = $OldAttrArr = []; goto TETDZ; ptoe8: foreach ($OldAttr as $k => $v) { $OldAttrArr[$v["\x61\164\164\x72\x5f\156\141\155\145"]] = $v; k0s4a: } goto SFBTG; Dit23: $OldAttr = AttrModel::where(["\x70\x72\x6f\x64\x75\143\x74\x5f\x69\x64" => $productId])->select()->toArray(); goto h5s3J; TETDZ: foreach ($OldAttrGroup as $key => $value) { $OldAttrGroupArr[$value["\147\162\x6f\165\x70\137\x6e\141\155\x65"]] = $value; z0tS0: } goto o_k0E; eJdrL: foreach ($attrGroupArr as $k => $v) { goto OeKek; jBxnn: CQa_j: goto YdsvK; i2E2d: $group_id = $OldAttrGroupArr[$v["\x6e\141\x6d\145"]]["\x69\144"]; goto rFsT9; OeKek: $group["\x75\156\151\x61\x63\x69\144"] = session("\x75\x6e\151\141\x63\x69\x64"); goto RQe0m; YdsvK: i15lq: goto GRcYD; wkDUE: $group["\x67\162\x6f\x75\x70\137\156\x61\x6d\x65"] = $v["\x6e\141\155\x65"]; goto pFUkw; QUVx1: aY0jz: goto i2E2d; rFsT9: unset($OldAttrGroupArr[$v["\156\141\155\145"]]); goto BWXas; JYYCF: goto AlOLO; goto QUVx1; pFUkw: if (array_key_exists($v["\156\x61\155\x65"], $OldAttrGroupArr)) { goto aY0jz; } goto BkC7i; BkC7i: $group_id = $attrGroupModel->insertGetId($group); goto JYYCF; ARkvK: foreach ($v["\141\x72\162"] as $kk => $vv) { goto k7Een; qqjsE: if (array_key_exists($vv, $OldAttrArr)) { goto HUly7; } goto q3hA5; k7Een: $attr["\165\156\151\x61\143\x69\x64"] = session("\x75\156\x69\x61\x63\151\x64"); goto QHTLi; QSdcr: HUly7: goto MBagz; S5ZUR: BzP1t: goto hheop; LdJE_: azRo_: goto S5ZUR; MBagz: unset($OldAttrArr[$vv]); goto LdJE_; q3hA5: $attr["\x61\164\164\x72\137\x6e\141\x6d\x65"] = $vv; goto wxlHM; QHTLi: $attr["\160\x72\x6f\x64\165\x63\164\x5f\151\144"] = $productId; goto iNmda; iNmda: $attr["\x67\x72\x6f\x75\160\x5f\x69\144"] = $group_id; goto qqjsE; wxlHM: AttrModel::create($attr); goto AQkwn; AQkwn: goto azRo_; goto QSdcr; hheop: } goto jBxnn; BWXas: AlOLO: goto ARkvK; RQe0m: $group["\x70\x72\x6f\x64\165\143\164\x5f\x69\144"] = $productId; goto wkDUE; GRcYD: } goto r6ZHd; G_KTS: ZIrx1: goto P8Ykt; dIVbb: UKUJC: goto u5EKZ; fOl2R: $OldAttrValueArr = []; goto OsLJX; ZLG_0: joyLl: goto RhRyN; P8Ykt: foreach ($OldAttrArr as $k => $v) { AttrModel::destroy($v["\151\x64"]); siR0r: } goto dIVbb; wsq1B: Ivxoc: goto af1J4; SFBTG: ZcE2S: goto eJdrL; af1J4: foreach ($OldAttrValueArr as $k => $v) { AttrValueModel::destroy($v["\141\164\x74\x72\x5f\x69\x64"]); fuEKn: } goto DpQSI; Hp_XW: foreach ($OldAttrGroupArr as $k => $v) { AttrGroupModel::destroy($v["\x69\144"]); hJXK0: } goto G_KTS; h5s3J: $attr["\143\162\x65\141\164\x65\137\x74\151\x6d\145"] = time(); goto Bc5N4; j0iQs: } private function getGroupAttr($groupId) { goto r576F; kXolH: $attrName = implode("\55", $attrName); goto h5mdK; r576F: $AttrList = AttrModel::where(["\x67\x72\x6f\165\x70\x5f\x69\x64" => $groupId])->select(); goto PJAxm; h5mdK: return $attrName; goto xFdmK; PJAxm: $attrName = []; goto e19Jv; pSzFk: axSRI: goto kXolH; e19Jv: foreach ($AttrList as $key => $value) { $attrName[$key] = $value["\x61\164\164\x72\137\x6e\x61\x6d\145"]; m6TGx: } goto pSzFk; xFdmK: } public function delAttr($productId) { goto Iq2X1; uaJS2: AttrValueModel::where("\x70\162\157\x64\x75\x63\x74\x5f\x69\144", "\75", $productId)->delete(); goto TIIya; mCwGQ: foreach ($attrGroup as $key => $value) { goto zrLjS; b0Y20: J7Cya: goto oPXDc; zrLjS: AttrModel::where("\160\162\157\x64\165\143\164\137\151\x64", "\x3d", $productId)->delete(); goto ncRcC; ncRcC: AttrGroupModel::destroy($value["\x69\x64"]); goto b0Y20; oPXDc: } goto ARNaY; K9RUO: return true; goto Utztt; DaFTa: if (empty($attrGroup)) { goto DfDtI; } goto mCwGQ; Iq2X1: $attrGroup = AttrGroupModel::where("\160\162\157\x64\x75\x63\164\137\x69\144", "\x3d", $productId)->select(); goto DaFTa; ARNaY: eDXhn: goto uaJS2; TIIya: DfDtI: goto K9RUO; Utztt: } public static function getAllSoldOutProduct() { goto n33rj; dG4_Y: foreach ($product as $key => $value) { goto HLi8M; Rnydr: J_dLO: goto lMIh5; vSqYk: if (!($stock > 0)) { goto J_dLO; } goto dYpt3; lMIh5: o6GHs: goto QrK0u; dYpt3: unset($product[$key]); goto Rnydr; HLi8M: $stock = getProductStock($value["\151\x64"]); goto vSqYk; QrK0u: } goto BGetL; DKLu8: return $product; goto DE1VW; BGetL: EWzTZ: goto DKLu8; n33rj: $product = self::where(["\x75\156\x69\141\x63\151\x64" => session("\165\x6e\x69\x61\x63\151\144"), "\x69\x73\x5f\x64\145\x6c\x65\164\145" => 0, "\163\164\141\x74\x75\163" => 1])->select(); goto dG4_Y; DE1VW: } public static function getProductTop5() { $product = self::where(["\x75\156\151\x61\x63\151\144" => session("\165\156\151\141\143\151\x64"), "\151\163\137\144\x65\x6c\x65\164\145" => 0, "\163\x74\x61\x74\165\163" => 1])->order("\163\141\x6c\145\163", "\x64\x65\x73\x63")->limit(0, 5)->select(); return $product; } public static function getProductListByCategory() { goto sRHcD; Vkoy2: foreach ($allCategory as $kk => $value) { goto dmr_J; WbzbH: $cateData["\x6c\145\166\145\x6c"] = 3; goto gawxC; u51ge: $cateData["\x6c\145\x76\x65\x6c"] = 2; goto z6XEx; j2BqO: NotYS: goto l82IL; lFiZy: $cateData["\x70\141\162\145\156\x74\x49\144"] = $value["\160\141\162\x65\x6e\x74\137\x69\x64"]; goto yfuFj; P9BxT: Poo13: goto u51ge; dmr_J: $cateData["\151\x64"] = $value["\x69\144"]; goto JFfTr; hgyh1: $data["\x63\x61\164\x65\147\x6f\x72\x79"][$kk] = $cateData; goto j2BqO; Mb2ik: if ($level2) { goto Poo13; } goto WbzbH; yfuFj: $level2 = Category::where(["\165\x6e\x69\141\143\x69\x64" => session("\x75\x6e\x69\141\x63\x69\x64"), "\151\163\x5f\x64\x65\x6c\145\164\x65" => 0, "\x73\x74\x61\x74\165\x73" => 1, "\160\x61\162\145\x6e\x74\x5f\151\144" => $value["\151\x64"]])->order("\143\162\145\x61\x74\145\137\x74\x69\155\x65", "\144\145\163\143")->find(); goto BuEGf; gawxC: goto QX7PF; goto FOuVY; JFfTr: $cateData["\156\x61\x6d\145"] = $value["\x6e\141\x6d\x65"]; goto lFiZy; FOuVY: gDbaL: goto X_nEB; z6XEx: QX7PF: goto hgyh1; BuEGf: if ($value["\x70\141\162\145\156\164\x5f\151\144"] == 0) { goto gDbaL; } goto Mb2ik; f93lB: goto QX7PF; goto P9BxT; X_nEB: $cateData["\x6c\145\166\x65\154"] = 1; goto f93lB; l82IL: } goto ItOpE; IuLZI: $allCategory = Category::where(["\165\156\x69\141\x63\151\144" => session("\165\x6e\x69\x61\143\151\x64"), "\151\163\137\x64\145\x6c\x65\164\x65" => 0, "\163\164\141\x74\x75\163" => 1])->select(); goto Vkoy2; ItOpE: KPfSB: goto ZyhmO; ZyhmO: return $data; goto XquK2; Bjaeq: GVQbr: goto qG7gI; vutH0: $data = []; goto EiaT9; EiaT9: $product = self::where(["\x75\x6e\151\141\143\151\x64" => session("\165\x6e\x69\141\143\151\x64"), "\163\x74\x61\x74\165\x73" => 1, "\x69\x73\x5f\x64\145\x6c\145\x74\145" => 0])->field("\x69\144\54\156\141\155\x65\54\143\141\x74\145\137\151\144\x2c\143\x61\164\145\137\x69\144\40\141\163\x20\143\154\141\x5f\x69\144\x2c\x70\162\x69\x63\x65\x2c\164\x68\x75\x6d\x62\40\x61\x73\40\x69\x6d\147")->order("\143\162\x65\x61\164\x65\x5f\164\x69\155\145", "\144\145\163\x63")->select(); goto Gm8ez; sRHcD: $category = Category::where(["\x75\x6e\151\141\x63\151\x64" => session("\165\x6e\x69\x61\143\151\x64"), "\151\x73\x5f\x64\145\x6c\x65\164\x65" => 0, "\x73\164\x61\x74\x75\x73" => 1])->select(); goto vutH0; qG7gI: $data["\160\x72\157\144\165\x63\x74"] = $product; goto IuLZI; Gm8ez: foreach ($product as $k => $v) { goto Lj4Ht; tEzMA: $product[$k]["\143\154\x61\163\163\x69\146\171"] = $cate["\x6e\x61\155\145"]; goto VuAlz; Lj4Ht: $cate = Category::get($v["\x63\141\x74\x65\137\x69\x64"]); goto tEzMA; vcF3o: qyNG2: goto jWHIY; FGeus: $product[$k]["\160\162\x69\x63\x65\126\151\x70"] = "\346\x9a\x82\346\x97\xa0"; goto vcF3o; VuAlz: $product[$k]["\160\x72\x69\143\145\105\x78"] = "\346\x9a\202\xe6\x97\xa0"; goto FGeus; jWHIY: } goto Bjaeq; XquK2: } private static function getProductByWhere($where) { $product = self::where(["\x75\156\151\x61\143\x69\144" => session("\165\156\151\x61\143\151\144"), "\x73\164\x61\164\165\x73" => 1, "\151\x73\137\x64\145\154\x65\164\x65" => 0])->where($where)->field("\151\144\x2c\x6e\x61\x6d\x65\54\x63\141\x74\145\x5f\x69\144\54\143\141\164\145\137\x69\x64\x20\141\x73\40\x63\154\x61\137\151\x64\x2c\x70\162\x69\x63\x65\x2c\164\150\x75\x6d\x62\40\141\163\x20\x69\x6d\147")->order("\143\x72\145\x61\164\x65\137\x74\x69\155\145", "\144\145\x73\x63")->select()->toArray(); return $product; } public static function getProductCategoryParentName($cateId) { goto ZlZty; iyQk_: wcjFm: goto LzFZa; LzFZa: Ajvnd: goto IqSMx; H5LW8: $parent_name = self::getProductCategoryParentName($category["\160\x61\x72\145\156\164\137\x69\144"]); goto nsi7g; fYt07: if (!$category) { goto Ajvnd; } goto d2BJR; kBgbw: $category = Category::get($cateId); goto fYt07; IqSMx: return $name; goto H0cL6; zZnxs: $name .= "\x2c" . $parent_name; goto iyQk_; ZlZty: $name = ''; goto kBgbw; nsi7g: if (!isset($parent_name)) { goto wcjFm; } goto zZnxs; d2BJR: $name .= $category["\x6e\x61\x6d\145"]; goto H5LW8; H0cL6: } }