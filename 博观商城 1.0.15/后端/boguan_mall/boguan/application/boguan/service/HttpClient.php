<?php
 namespace app\boguan\service; class HttpClient { var $host; var $port; var $path; var $method; var $postdata = ''; var $cookies = array(); var $referer; var $accept = "\x74\145\170\164\57\170\x6d\x6c\54\x61\x70\x70\154\151\x63\141\164\x69\157\x6e\x2f\x78\x6d\154\x2c\x61\x70\x70\x6c\151\x63\141\x74\151\x6f\x6e\x2f\x78\x68\164\155\154\x2b\170\x6d\x6c\x2c\x74\x65\170\164\57\150\x74\x6d\x6c\x2c\x74\145\x78\x74\x2f\160\x6c\141\x69\156\x2c\151\x6d\141\x67\x65\57\160\156\147\54\151\155\x61\147\x65\57\152\160\x65\x67\x2c\x69\x6d\141\x67\x65\57\147\151\146\x2c\x2a\57\52"; var $accept_encoding = "\147\x7a\151\160"; var $accept_language = "\x65\156\55\165\x73"; var $user_agent = "\x49\x6e\143\165\164\151\x6f\40\x48\x74\x74\x70\103\x6c\151\x65\x6e\x74\x20\x76\x30\56\71"; var $timeout = 20; var $use_gzip = true; var $persist_cookies = true; var $persist_referers = true; var $debug = false; var $handle_redirects = true; var $max_redirects = 5; var $headers_only = false; var $username; var $password; var $status; var $headers = array(); var $content = ''; var $errormsg; var $redirect_count = 0; var $cookie_host = ''; function __construct($host, $port = 80) { $this->host = $host; $this->port = $port; } function get($path, $data = false) { goto Q3Rvc; ahJZs: qc2li: goto XtCFY; NKnne: $this->method = "\x47\105\124"; goto PEHk9; Q3Rvc: $this->path = $path; goto NKnne; PEHk9: if (!$data) { goto qc2li; } goto eBRqw; eBRqw: $this->path .= "\77" . $this->buildQueryString($data); goto ahJZs; XtCFY: return $this->doRequest(); goto MqRn1; MqRn1: } function post($path, $data) { goto u4T7R; cmZsa: $this->method = "\x50\117\123\124"; goto WDWK1; WDWK1: $this->postdata = $this->buildQueryString($data); goto WheM4; u4T7R: $this->path = $path; goto cmZsa; WheM4: return $this->doRequest(); goto Rcqp2; Rcqp2: } function buildQueryString($data) { goto Rx12n; c3f0g: $querystring = $data; goto cnfKD; cnfKD: goto KBNGJ; goto mrnyB; mrnyB: qR1hz: goto DxvvW; D3wP3: KBNGJ: goto hoUeW; hoUeW: return $querystring; goto Ufk2z; DxvvW: foreach ($data as $key => $val) { goto cUO43; ZOkgh: oRz_e: goto cbCez; cUO43: if (is_array($val)) { goto gcpml; } goto LukbN; rr7Iw: gcpml: goto HJdEz; LukbN: $querystring .= urlencode($key) . "\x3d" . urlencode($val) . "\46"; goto zwHT3; HJdEz: foreach ($val as $val2) { $querystring .= urlencode($key) . "\x3d" . urlencode($val2) . "\46"; WnMCE: } goto jcMPi; zwHT3: goto mZ3nt; goto rr7Iw; jcMPi: Pb1Ws: goto JTBLM; JTBLM: mZ3nt: goto ZOkgh; cbCez: } goto NF5ea; pHbrd: $querystring = substr($querystring, 0, -1); goto D3wP3; Rx12n: $querystring = ''; goto QXCJt; NF5ea: JV16V: goto pHbrd; QXCJt: if (is_array($data)) { goto qR1hz; } goto c3f0g; Ufk2z: } function doRequest() { goto Nksjh; QMRCn: $this->headers[$key][] = $val; goto QUWgV; StiNT: foreach ($cookies as $cookie) { goto WN3W4; WN3W4: if (!preg_match("\x2f\x28\133\x5e\x3d\135\53\x29\75\x28\133\136\x3b\x5d\x2b\x29\x3b\57", $cookie, $m)) { goto H5kJW; } goto XWLWi; a3GYl: bSNXL: goto ZvKT1; XWLWi: $this->cookies[$m[1]] = $m[2]; goto ZK2Ux; ZK2Ux: H5kJW: goto a3GYl; ZvKT1: } goto bglIx; v6dh3: $status_string = $m[3]; goto IyDTv; BIkIE: Q37eA: goto TP1l5; jYQ1h: goto qwxZJ; goto e4hBt; ynWLo: return $this->get($url["\x70\141\164\x68"]); goto SyNTo; EhsWP: if (isset($this->headers[$key])) { goto h1Caz; } goto xpV6G; eV1uy: $this->status = $m[2]; goto v6dh3; uBL5N: if (!($this->persist_cookies && isset($this->headers["\163\x65\164\x2d\x63\157\x6f\x6b\x69\145"]) && $this->host == $this->cookie_host)) { goto wBuf0; } goto Ea2qR; dQkph: goto qwxZJ; goto MdZQM; WMz8m: $location = isset($this->headers["\x6c\157\143\141\164\151\x6f\x6e"]) ? $this->headers["\x6c\157\143\141\164\x69\x6f\156"] : ''; goto yXmnb; a4BRn: Nc4ZM: goto j44np; hNuyX: qwxZJ: goto t6llY; upNe_: goto eEvsq; goto iPJjA; hRm9O: fclose($fp); goto rnxSe; hCLGc: fwrite($fp, $request); goto niOue; J1eWb: if (!($location || $uri)) { goto ZEr8M; } goto KrK0g; SePcA: $atStart = true; goto hNuyX; c2XOb: xlrdG: goto Z3uWc; e4hBt: odb00: goto hRm9O; ofLrI: if (!$inHeaders) { goto Nc4ZM; } goto yHhPx; SIByE: if (is_array($this->headers[$key])) { goto Lgl7Z; } goto ZS6Tp; j44np: $this->content .= $line; goto jYQ1h; LfOEr: $inHeaders = true; goto SePcA; ufIdu: goto qwxZJ; goto a4BRn; BDQLY: $this->redirect_count = 0; goto BLtf4; wbk8q: x9haA: goto uBL5N; xlSel: noAtD: goto tVldM; xVRDo: return false; goto IzyBr; ZRObc: $this->errormsg = ''; goto LfOEr; V2AND: $inHeaders = false; goto DF5ZX; yXmnb: $uri = isset($this->headers["\x75\162\x69"]) ? $this->headers["\x75\162\x69"] : ''; goto J1eWb; b6ymp: switch ($errno) { case -3: $this->errormsg = "\123\x6f\x63\153\145\164\40\143\x72\x65\141\164\151\x6f\156\x20\146\x61\151\x6c\145\144\x20\50\55\x33\x29"; case -4: $this->errormsg = "\x44\116\123\40\x6c\x6f\157\x6b\x75\160\x20\146\141\151\154\x75\x72\145\40\50\55\x34\51"; case -5: $this->errormsg = "\x43\x6f\156\156\145\x63\x74\151\157\156\x20\162\x65\x66\x75\163\x65\x64\x20\157\162\40\x74\151\x6d\145\144\40\157\165\164\x20\x28\x2d\65\x29"; default: goto m8ME1; fwC8r: $this->debug($this->errormsg); goto ODVul; zUtMn: $this->errormsg .= "\40" . $errstr; goto fwC8r; m8ME1: $this->errormsg = "\x43\157\156\156\x65\143\164\x69\x6f\156\x20\146\x61\151\154\145\x64\x20\x28" . $errno . "\x29"; goto zUtMn; ODVul: } goto vAjbV; G9_EL: goto qwxZJ; goto SBm0Y; x0EV3: goto odb00; goto y0xFG; Nsehi: if (!(++$this->redirect_count >= $this->max_redirects)) { goto RbC88; } goto Tbui3; UJ0oi: $this->cookie_host = $this->host; goto qwFPP; HcQ5N: $atStart = false; goto sRRTO; rnxSe: if (!(isset($this->headers["\x63\x6f\x6e\164\x65\156\164\x2d\x65\x6e\x63\x6f\x64\x69\x6e\x67"]) && $this->headers["\143\x6f\x6e\x74\x65\156\164\x2d\x65\x6e\143\x6f\144\x69\x6e\x67"] == "\147\172\151\x70")) { goto x9haA; } goto d1wd9; KZins: $line = fgets($fp, 4096); goto FCpJy; WKvae: h1Caz: goto SIByE; Tbui3: $this->errormsg = "\116\x75\155\142\145\162\40\x6f\146\x20\x72\x65\x64\x69\x72\x65\x63\164\x73\x20\145\170\143\145\x65\x64\145\x64\40\155\141\170\x69\155\165\155\40\x28" . $this->max_redirects . "\x29"; goto gJYFb; y0xFG: K4k0S: goto hI7EU; gJYFb: $this->debug($this->errormsg); goto BDQLY; oFdOU: if (!$this->persist_referers) { goto noAtD; } goto IiIT_; Ea2qR: $cookies = $this->headers["\x73\145\164\x2d\143\157\x6f\153\151\145"]; goto tHjMy; VLwf1: imvfh: goto xVRDo; SBm0Y: on2QB: goto ofLrI; x3y_n: goto m1ZxC; goto WKvae; C9RrQ: $this->referer = $this->getRequestURL(); goto xlSel; IiIT_: $this->debug("\x50\x65\162\x73\x69\x73\164\151\x6e\x67\x20\162\145\146\145\x72\145\x72\72\40" . $this->getRequestURL()); goto C9RrQ; SyNTo: ZEr8M: goto c2XOb; qwFPP: wBuf0: goto oFdOU; cdNx7: $key = strtolower(trim($m[1])); goto OCtDx; PzTwD: socket_set_timeout($fp, $this->timeout); goto sc21x; P68db: return false; goto BIkIE; iPJjA: Lgl7Z: goto QMRCn; QUWgV: eEvsq: goto ncgED; xpV6G: $this->headers[$key] = $val; goto x3y_n; t6llY: if (feof($fp)) { goto odb00; } goto KZins; ynNFe: $this->errormsg = "\x53\x74\x61\164\x75\163\40\x63\157\x64\x65\x20\154\x69\x6e\x65\x20\x69\156\x76\141\x6c\x69\144\x3a\x20" . htmlentities($line); goto kX_NJ; pggML: $this->content = substr($this->content, 10); goto cIjHf; ZS6Tp: $this->headers[$key] = array($this->headers[$key], $val); goto upNe_; kX_NJ: $this->debug($this->errormsg); goto P68db; dZ6fV: jkg8g: goto StiNT; yHhPx: if (!(trim($line) == '')) { goto BYmSs; } goto V2AND; TP1l5: $http_version = $m[1]; goto eV1uy; ncgED: m1ZxC: goto ufIdu; iEvFx: BYmSs: goto oknhq; oknhq: if (preg_match("\57\50\x5b\x5e\x3a\135\x2b\51\72\x5c\163\52\x28\56\52\51\57", $line, $m)) { goto P_KxO; } goto dQkph; bglIx: pq4Pj: goto UJ0oi; sc21x: $request = $this->buildRequest(); goto NYSsl; MdZQM: P_KxO: goto cdNx7; tVldM: if (!$this->handle_redirects) { goto xlrdG; } goto Nsehi; jfiiC: if (!$this->headers_only) { goto K4k0S; } goto x0EV3; XK556: $cookies = array($cookies); goto dZ6fV; d1wd9: $this->debug("\103\x6f\156\164\145\156\164\40\x69\x73\x20\147\x7a\151\160\40\145\156\x63\157\x64\x65\144\x2c\x20\x75\156\x7a\x69\160\x70\x69\x6e\x67\x20\x69\164"); goto pggML; R68zY: $this->content = ''; goto ZRObc; FCpJy: if (!$atStart) { goto on2QB; } goto HcQ5N; niOue: $this->headers = array(); goto R68zY; IzyBr: YwuWm: goto PzTwD; cIjHf: $this->content = gzinflate($this->content); goto wbk8q; hI7EU: goto qwxZJ; goto iEvFx; IyDTv: $this->debug(trim($line)); goto G9_EL; NYSsl: $this->debug("\x52\x65\161\x75\x65\163\164", $request); goto hCLGc; OCtDx: $val = trim($m[2]); goto EhsWP; KrK0g: $url = parse_url($location . $uri); goto ynWLo; tHjMy: if (is_array($cookies)) { goto jkg8g; } goto XK556; sRRTO: if (preg_match("\57\110\x54\124\120\134\57\50\134\144\x5c\56\x5c\144\x29\134\163\52\x28\134\x64\53\x29\x5c\x73\x2a\50\x2e\x2a\x29\x2f", $line, $m)) { goto Q37eA; } goto ynNFe; w14NQ: RbC88: goto WMz8m; Z3uWc: return true; goto J0Zt8; DF5ZX: $this->debug("\122\x65\x63\145\151\x76\x65\144\x20\x48\x65\x61\144\x65\x72\x73", $this->headers); goto jfiiC; vAjbV: hLjJk: goto VLwf1; Nksjh: if ($fp = @fsockopen($this->host, $this->port, $errno, $errstr, $this->timeout)) { goto YwuWm; } goto b6ymp; BLtf4: return false; goto w14NQ; J0Zt8: } function buildRequest() { goto SxOCi; ibSv4: ZfNVX: goto OqfSD; j7Yac: if (!$this->postdata) { goto Xhsqq; } goto zimwq; dg1yZ: $headers[] = "{$this->method}\x20{$this->path}\40\x48\x54\x54\x50\x2f\x31\56\x30"; goto C4Yds; ixGk2: oKBzp: goto TVFIW; XOozJ: $headers[] = "\125\163\x65\x72\x2d\101\147\x65\156\x74\x3a\40{$this->user_agent}"; goto w6T_N; kYuPH: if (!$this->cookies) { goto ZfNVX; } goto mOaXu; Ijeed: TN7q4: goto kYuPH; PGdZc: if (!$this->use_gzip) { goto oKBzp; } goto tzpPE; pofu5: $headers[] = $cookie; goto ibSv4; OqfSD: if (!($this->username && $this->password)) { goto IlD12; } goto TaJgu; C4Yds: $headers[] = "\x48\157\x73\164\72\40{$this->host}"; goto XOozJ; dDT7o: Xhsqq: goto cvpj_; SxOCi: $headers = array(); goto dg1yZ; Um0Gd: foreach ($this->cookies as $key => $value) { $cookie .= "{$key}\75{$value}\x3b\x20"; fkxeq: } goto tIwr6; Msstz: $headers[] = "\x52\x65\146\145\162\145\162\72\x20{$this->referer}"; goto Ijeed; w6T_N: $headers[] = "\101\x63\x63\145\x70\164\x3a\x20{$this->accept}"; goto PGdZc; cvpj_: $request = implode("\15\12", $headers) . "\xd\12\15\xa" . $this->postdata; goto ENwFJ; LmRNk: if (!$this->referer) { goto TN7q4; } goto Msstz; TaJgu: $headers[] = "\101\165\x74\150\x6f\x72\151\172\x61\x74\x69\x6f\x6e\72\x20\x42\101\x53\x49\x43\x20" . base64_encode($this->username . "\x3a" . $this->password); goto eu5sO; TVFIW: $headers[] = "\x41\143\x63\x65\160\x74\x2d\x6c\141\156\x67\165\141\147\145\72\x20{$this->accept_language}"; goto LmRNk; ENwFJ: return $request; goto foZiF; mOaXu: $cookie = "\103\x6f\157\153\151\145\x3a\x20"; goto Um0Gd; zimwq: $headers[] = "\103\x6f\156\164\x65\156\x74\x2d\x54\x79\x70\145\x3a\40\x61\160\x70\x6c\x69\143\141\x74\x69\157\x6e\57\170\55\167\x77\x77\55\x66\157\x72\155\x2d\165\x72\154\145\156\x63\x6f\144\x65\144"; goto X2Ts0; tzpPE: $headers[] = "\x41\143\143\145\x70\x74\x2d\x65\x6e\x63\x6f\144\151\156\147\x3a\40{$this->accept_encoding}"; goto ixGk2; eu5sO: IlD12: goto j7Yac; X2Ts0: $headers[] = "\x43\x6f\156\x74\x65\156\x74\x2d\x4c\x65\156\147\x74\150\72\40" . strlen($this->postdata); goto dDT7o; tIwr6: gzAat: goto pofu5; foZiF: } function getStatus() { return $this->status; } function getContent() { return $this->content; } function getHeaders() { return $this->headers; } function getHeader($header) { goto NFcaX; k2EHy: goto jz9H6; goto zRFOZ; Vq_2y: jz9H6: goto TIgzJ; NFcaX: $header = strtolower($header); goto RqkhQ; AcXsm: return false; goto k2EHy; zRFOZ: iXptK: goto AIFxw; RqkhQ: if (isset($this->headers[$header])) { goto iXptK; } goto AcXsm; AIFxw: return $this->headers[$header]; goto Vq_2y; TIgzJ: } function getError() { return $this->errormsg; } function getCookies() { return $this->cookies; } function getRequestURL() { goto avASR; v_70a: sLR9x: goto UKOcz; avASR: $url = "\150\164\x74\x70\72\x2f\x2f" . $this->host; goto eVFVg; UKOcz: $url .= $this->path; goto sBoUG; sBoUG: return $url; goto JGh2I; BIZM3: $url .= "\72" . $this->port; goto v_70a; eVFVg: if (!($this->port != 80)) { goto sLR9x; } goto BIZM3; JGh2I: } function setUserAgent($string) { $this->user_agent = $string; } function setAuthorization($username, $password) { $this->username = $username; $this->password = $password; } function setCookies($array) { $this->cookies = $array; } function useGzip($boolean) { $this->use_gzip = $boolean; } function setPersistCookies($boolean) { $this->persist_cookies = $boolean; } function setPersistReferers($boolean) { $this->persist_referers = $boolean; } function setHandleRedirects($boolean) { $this->handle_redirects = $boolean; } function setMaxRedirects($num) { $this->max_redirects = $num; } function setHeadersOnly($boolean) { $this->headers_only = $boolean; } function setDebug($boolean) { $this->debug = $boolean; } function quickGet($url) { goto sfx3R; kd3ef: $port = isset($bits["\x70\157\162\164"]) ? $bits["\x70\157\x72\x74"] : 80; goto u4Zwn; FHUNX: $client = new HttpClient($host, $port); goto bVKOO; D0pnS: NpCnP: goto N5Kzg; u4Zwn: $path = isset($bits["\x70\x61\164\150"]) ? $bits["\x70\x61\x74\150"] : "\57"; goto pK5Ok; U0MvT: $host = $bits["\150\157\163\164"]; goto kd3ef; JPcF3: goto a1lj3; goto D0pnS; V6N1b: $path .= "\77" . $bits["\x71\x75\145\162\x79"]; goto wYrBU; N5Kzg: return false; goto xJDuo; xJDuo: a1lj3: goto gGWmQ; VPtSc: return $client->getContent(); goto JPcF3; sfx3R: $bits = parse_url($url); goto U0MvT; wYrBU: IVs36: goto FHUNX; pK5Ok: if (!isset($bits["\161\165\145\x72\171"])) { goto IVs36; } goto V6N1b; bVKOO: if (!$client->get($path)) { goto NpCnP; } goto VPtSc; gGWmQ: } function quickPost($url, $data) { goto p6pcV; OJmIy: return $client->getContent(); goto JPTRP; pjiCU: $host = $bits["\x68\x6f\x73\164"]; goto wA8Gd; JPTRP: goto AR18c; goto u6B2R; PyZTE: $path = isset($bits["\x70\x61\x74\150"]) ? $bits["\160\x61\164\150"] : "\57"; goto CKBUM; CKBUM: $client = new HttpClient($host, $port); goto dbAdO; u6B2R: XxXcR: goto QUQXU; BnNAi: AR18c: goto ePIOT; p6pcV: $bits = parse_url($url); goto pjiCU; dbAdO: if (!$client->post($path, $data)) { goto XxXcR; } goto OJmIy; wA8Gd: $port = isset($bits["\x70\x6f\x72\x74"]) ? $bits["\160\157\x72\x74"] : 80; goto PyZTE; QUQXU: return false; goto BnNAi; ePIOT: } function debug($msg, $object = false) { goto tgAOx; WH0sO: iraem: goto vS_UH; hh4UQ: print "\74\57\x64\x69\166\x3e"; goto WH0sO; Ni3dB: print_r($object); goto OkntN; ZDKv5: if (!$object) { goto rpNtc; } goto F2tve; jliCL: print "\x3c\x70\162\x65\76" . $content . "\x3c\x2f\160\x72\145\76"; goto Xrqf1; Xrqf1: rpNtc: goto hh4UQ; OkntN: $content = htmlentities(ob_get_contents()); goto y1bnY; GldPx: print "\x3c\144\151\166\x20\x73\164\171\154\x65\75\x22\x62\x6f\162\x64\x65\162\72\x20\x31\x70\x78\x20\x73\x6f\x6c\x69\x64\40\x72\x65\x64\73\x20\x70\x61\x64\144\x69\x6e\x67\x3a\40\60\56\x35\145\155\73\40\155\141\162\x67\x69\156\72\40\60\56\65\x65\155\73\x22\76\x3c\x73\x74\162\x6f\x6e\x67\76\x48\164\164\160\103\154\151\x65\156\x74\x20\104\x65\x62\x75\147\x3a\74\57\x73\164\x72\x6f\x6e\x67\76\x20" . $msg; goto ZDKv5; F2tve: ob_start(); goto Ni3dB; y1bnY: ob_end_clean(); goto jliCL; tgAOx: if (!$this->debug) { goto iraem; } goto GldPx; vS_UH: } }