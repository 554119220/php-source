<?php
 namespace app\boguan\controller\platform; use app\boguan\controller\Platform; use app\boguan\model\Content as ContentModel; use app\boguan\model\ContentCate as ContentCateModel; use app\boguan\service\Image as ImageService; class Content extends Platform { public function index() { goto Ln7xL; MjiZ0: $nid = implode("\54", $nid); goto ZFEOC; xSoqp: FMhN2: goto MjiZ0; yBevu: $where["\x74\x69\164\154\145"] = ["\x6c\151\x6b\x65", "\x25{$keyword}\x25"]; goto rDU8a; qHWBB: if (!$parent_id) { goto iClr4; } goto amQr6; gV0ED: $keyword = input("\153\x65\x79\x77\157\x72\x64"); goto bB5bk; bB5bk: $where = []; goto qHWBB; i7LsY: tV4GT: goto Vz41k; Ln7xL: $parent_id = input("\160\141\x72\x65\156\164\137\x69\x64"); goto gV0ED; zaxvU: return $this->fetch(); goto EW0_e; Vz41k: iClr4: goto yBevu; G9oF_: $this->assign(["\143\x6f\156\164\145\156\164" => $content, "\160\x61\x67\145" => $page, "\143\x61\x74\x65\147\x6f\162\171" => $category]); goto zaxvU; CFv_q: if (!$child) { goto tV4GT; } goto BVWDr; HCQq9: $category = ContentCateModel::getAllCate(); goto G9oF_; dslv8: $setWhere["\x6b\x65\171\x77\157\x72\x64"] = $keyword; goto LFOge; ZFEOC: if ($nid) { goto Qw4O7; } goto GU18J; sb0wm: $where["\x63\x61\164\145\137\151\x64"] = ["\x69\156", $cateChildIds]; goto i7LsY; J904q: q3hgC: goto sb0wm; wxxWH: Qw4O7: goto xpQtS; LFOge: $content = ContentModel::with("\x63\141\164\x65\147\x6f\x72\x79")->where($where)->where(["\165\156\151\x61\x63\151\x64" => $this->uniacid])->order("\143\x72\145\x61\164\145\137\x74\151\155\x65", "\144\x65\163\x63")->paginate(12, false, ["\x71\165\145\162\171" => $setWhere]); goto rawtj; rawtj: $page = $content->render(); goto HCQq9; xpQtS: $cateChildIds = $parent_id . "\54" . $nid; goto J904q; DM_xI: goto q3hgC; goto wxxWH; GU18J: $cateChildIds = $parent_id; goto DM_xI; rDU8a: $setWhere["\160\141\x72\x65\x6e\x74\x5f\151\x64"] = $parent_id; goto dslv8; l2hGH: foreach ($child as $k => $v) { $nid[] = $v["\x69\x64"]; kKMYS: } goto xSoqp; amQr6: $child = ContentCateModel::where("\x70\141\x72\145\156\x74\x5f\151\144\40\75" . $parent_id)->select(); goto CFv_q; BVWDr: $nid = []; goto l2hGH; EW0_e: } public function add() { goto lNtvD; SLkdp: $data["\151\x6d\141\x67\x65"] = ImageService::resizeImage($data["\x69\155\141\x67\145"]); goto PSJzs; LkWbW: $data["\151\x6d\x61\x67\145"] = input("\160\x6f\x73\x74\56\151\155\x61\147\145"); goto FMgs7; rpfVF: if (!($data["\x74\151\164\x6c\145"] == '')) { goto KyWfg; } goto QxUXW; NCYBs: V0DCe: goto SCBuY; VB7H0: $result = ContentModel::create($data); goto ix8fb; SCBuY: dT3vL: goto nxIkJ; PSJzs: $data["\165\156\151\141\x63\151\144"] = $this->uniacid; goto VB7H0; QxUXW: return json(["\155\163\x67" => "\xe8\xaf\xb7\345\241\253\345\206\231\346\xa0\207\351\242\230", "\145\x72\162\x6f\x72\103\157\144\x65" => 0]); goto bfnaW; HdIhz: goto V0DCe; goto hIErZ; CQ9vL: if (!request()->isAjax()) { goto dT3vL; } goto j0oOE; bfnaW: KyWfg: goto zft2y; hIErZ: pVkOd: goto FrSfz; HFZYx: yFAwa: goto HVxip; msCYk: return json(["\x6d\163\147" => "\xe8\x87\xb3\345\260\221\xe9\200\211\346\x8b\xa9\xe4\xb8\200\345\xbc\xa0\xe5\233\276\xe7\211\207", "\145\x72\x72\x6f\162\103\157\x64\145" => 0]); goto LWa_2; nxIkJ: $this->assign(["\143\141\x74\145" => $cate, "\x69\155\x61\147\145\114\x69\163\164" => $imageList]); goto GjFwW; FMgs7: $data["\143\x6f\x6e\164\x65\156\164"] = $data["\145\x64\151\x74\157\162\126\141\154\x75\x65"]; goto pEIj3; lHfBZ: return json(["\155\163\147" => "\xe6\xb7\273\345\212\xa0\xe5\244\xb1\xe8\264\245", "\145\162\x72\157\162\x43\157\x64\145" => 0]); goto HdIhz; GjFwW: return $this->fetch(); goto l8Alv; j0oOE: $data = input("\160\x6f\163\164\56\x64\x61\x74\141\57\141"); goto LkWbW; ix8fb: if ($result !== false) { goto pVkOd; } goto lHfBZ; pEIj3: unset($data["\145\x64\151\164\157\x72\126\x61\154\x75\x65"]); goto rpfVF; zft2y: if (!($data["\x63\x61\x74\x65\x5f\x69\144"] == '')) { goto yFAwa; } goto vP1UV; uJCmD: $cate = ContentCateModel::getAllCate(); goto CQ9vL; LWa_2: aRDbx: goto SLkdp; vP1UV: return json(["\155\x73\147" => "\xe8\257\267\xe9\x80\211\346\x8b\xa9\xe6\x89\x80\345\261\x9e\xe5\x88\206\347\xb1\273", "\145\162\162\157\x72\x43\x6f\144\x65" => 0]); goto HFZYx; lNtvD: $imageList = json_encode($this->imageList()); goto uJCmD; FrSfz: return json(["\x6d\x73\x67" => "\346\xb7\273\345\x8a\xa0\346\210\220\345\212\x9f", "\145\x72\162\157\162\x43\x6f\144\145" => 1]); goto NCYBs; HVxip: if (!($data["\151\155\141\x67\x65"] == '')) { goto aRDbx; } goto msCYk; l8Alv: } public function edit() { goto D2UDI; D2UDI: $id = input("\151\144"); goto hoMA0; a4CmJ: $data["\x69\x6d\x61\x67\145"] = ImageService::resizeImage($data["\151\155\141\x67\x65"]); goto nemZh; f0vU2: if (!($data["\164\x69\x74\154\145"] == '')) { goto lCX8t; } goto gJYwF; S785e: Wu5CT: goto V9cFx; qdgue: $data["\x63\157\156\164\x65\x6e\164"] = $data["\145\x64\151\164\157\162\126\141\x6c\x75\x65"]; goto xEvir; O0uIR: lCX8t: goto YFGq8; PX3mL: return json(["\155\x73\147" => "\350\xaf\xb7\xe9\x80\211\xe6\x8b\xa9\xe6\x89\x80\345\261\236\xe5\210\x86\xe7\261\xbb", "\x65\x72\162\x6f\162\x43\x6f\144\145" => 0]); goto QgrDo; hoMA0: $content = ContentModel::get($id); goto dpFS1; dpFS1: $imageList = json_encode($this->imageList()); goto X07_s; Q18vF: l_iN2: goto pR2JO; ZgAjX: goto l_iN2; goto S785e; nemZh: $result = ContentModel::update($data); goto hER5t; oteJh: $data = input("\160\x6f\x73\164\x2e\x64\x61\164\141\57\x61"); goto qdgue; pR2JO: K3s5Z: goto oH5nU; wZ9zj: if (!request()->isAjax()) { goto K3s5Z; } goto oteJh; NDhdp: if (!($data["\151\155\x61\x67\x65"] == '')) { goto KlRK9; } goto qcJeL; qcJeL: return json(["\x6d\163\x67" => "\350\207\263\345\260\x91\xe9\200\211\xe6\x8b\xa9\344\270\200\345\xbc\240\xe5\x9b\276\xe7\211\x87", "\x65\x72\x72\157\x72\103\157\x64\145" => 0]); goto USryK; O67Hk: return json(["\x6d\163\147" => "\xe4\xbf\xae\346\224\xb9\xe5\244\xb1\350\xb4\xa5", "\145\162\x72\x6f\162\103\x6f\144\145" => 0]); goto ZgAjX; QgrDo: nzpOG: goto NDhdp; USryK: KlRK9: goto a4CmJ; YFGq8: if (!($data["\x63\141\164\145\137\x69\x64"] == '')) { goto nzpOG; } goto PX3mL; V9cFx: return json(["\155\x73\x67" => "\344\277\xae\xe6\224\xb9\346\x88\220\xe5\212\237", "\145\x72\162\157\162\x43\157\x64\x65" => 1]); goto Q18vF; xEvir: unset($data["\x65\x64\x69\164\157\162\x56\141\x6c\x75\145"]); goto f0vU2; oH5nU: $this->assign(["\x63\157\156\x74\x65\156\164" => $content, "\x63\x61\164\x65" => $cate, "\151\155\x61\x67\x65\114\151\x73\x74" => $imageList]); goto l26wL; gJYwF: return json(["\x6d\x73\x67" => "\350\xaf\xb7\xe5\241\253\xe5\206\231\xe6\xa0\x87\351\242\x98", "\x65\x72\x72\x6f\162\103\x6f\144\x65" => 0]); goto O0uIR; hER5t: if ($result !== false) { goto Wu5CT; } goto O67Hk; X07_s: $cate = ContentCateModel::getAllCate(); goto wZ9zj; l26wL: return $this->fetch(); goto UjZMk; UjZMk: } public function updateBannerStatus() { goto erLAF; erLAF: if (!request()->isAjax()) { goto lmi5x; } goto uxPk_; sP9uH: return json(["\x6d\x73\x67" => "\xe4\xbf\xae\346\224\271\xe6\x88\220\345\212\x9f", "\x75\x72\x6c" => url(''), "\145\162\x72\157\162\x43\x6f\x64\x65" => 1]); goto XGsy7; XcvrO: lmi5x: goto XxbMm; uxPk_: $data = input("\160\157\x73\164\x2e"); goto tKQ2x; tKQ2x: if (!($data["\x69\144"] == '')) { goto hyTbA; } goto mEBRv; XGsy7: wVzuB: goto XcvrO; mEBRv: return json(["\155\x73\147" => "\142\x61\156\x6e\x65\x72\xe4\xb8\x8d\xe5\xad\230\xe5\x9c\xa8", "\145\x72\162\x6f\x72\x43\157\144\x65" => 0]); goto QhuHL; Ulsva: $result = ContentModel::update($data); goto xbAXA; yVLDs: eQb0N: goto sP9uH; mdG0P: goto wVzuB; goto yVLDs; QhuHL: hyTbA: goto Ulsva; xbAXA: if ($result !== false) { goto eQb0N; } goto CtHHB; CtHHB: return json(["\155\163\147" => "\xe4\xbf\xae\xe6\224\271\xe5\244\261\xe8\264\245", "\145\x72\x72\x6f\x72\x43\157\x64\145" => 0]); goto mdG0P; XxbMm: } public function del() { goto Aec2g; W7vt4: return json(["\x6d\163\x67" => "\345\210\240\xe9\231\xa4\xe5\244\261\xe8\264\xa5", "\145\x72\162\157\162\x43\157\144\x65" => 0]); goto OoFwz; JQhQC: return json(["\155\x73\x67" => "\xe5\x88\xa0\351\x99\xa4\346\x88\x90\xe5\x8a\237", "\145\162\x72\157\162\x43\157\x64\145" => 1]); goto NdWAU; h3l75: UM1b3: goto gHU2t; pV9HV: return json(["\155\163\x67" => "\x69\x64\xe4\270\x8d\xe5\255\x98\xe5\x9c\xa8", "\145\x72\162\x6f\162\x43\x6f\144\x65" => 0]); goto hif_T; fT3Yz: if (!($id == '')) { goto Py_e1; } goto pV9HV; OoFwz: goto Dyl6u; goto Kow6_; Kow6_: vCcGJ: goto JQhQC; bGv6u: $result = ContentModel::destroy($id); goto pBmHq; pBmHq: if ($result !== false) { goto vCcGJ; } goto W7vt4; hif_T: Py_e1: goto bGv6u; NdWAU: Dyl6u: goto h3l75; Aec2g: if (!request()->isAjax()) { goto UM1b3; } goto xatX2; xatX2: $id = input("\151\x64"); goto fT3Yz; gHU2t: } public function batch() { goto B2uS0; d3225: prFEA: goto eQAuY; s2C83: if ($result !== false) { goto kY4uk; } goto XAdFD; w2KNl: $data = input("\160\157\163\x74\x2e"); goto zLHHd; xo22k: goto cu3Hf; goto rk8Cg; B2uS0: if (!request()->isAjax()) { goto prFEA; } goto w2KNl; hUpDM: return json(["\x6d\163\x67" => "\xe6\x93\x8d\xe4\275\x9c\346\x88\220\xe5\212\x9f", "\x65\x72\x72\157\x72\x43\x6f\144\145" => 1]); goto Geka2; VyAwk: return json(["\155\163\x67" => "\xe8\x87\xb3\xe5\xb0\221\351\200\x89\xe6\213\xa9\344\xb8\x80\xe9\xa1\xb9", "\145\162\162\x6f\162\103\157\x64\x65" => 0]); goto xo22k; zLHHd: $result = true; goto XGboA; XAdFD: return json(["\155\x73\147" => "\xe6\x93\215\344\275\x9c\xe5\244\xb1\350\264\245", "\x65\x72\x72\157\162\103\157\144\145" => 0]); goto oF0Rh; rk8Cg: GJ3ce: goto VbukI; rxM7m: kY4uk: goto hUpDM; eQAuY: return $this->fetch(); goto gba_Y; XLJkL: yaj3Z: goto s2C83; Geka2: IJgIx: goto aQHe4; XGboA: if (isset($data["\x69\144\x73"]) && !empty($data["\151\144\x73"])) { goto GJ3ce; } goto VyAwk; oF0Rh: goto IJgIx; goto rxM7m; aQHe4: cu3Hf: goto d3225; VbukI: foreach ($data["\151\x64\x73"] as $key => $value) { $result = ContentModel::destroy($value); FAFxi: } goto XLJkL; gba_Y: } public function sort() { goto P7WAd; P7WAd: if (!request()->isAjax()) { goto UFGu3; } goto bDXgG; gRrtQ: goto npfNg; goto Zeo9X; PhDtv: $data = ["\x69\144" => $id, "\163\157\x72\x74" => $sort]; goto BuYEF; Zeo9X: Tyq0W: goto L6RFR; bDXgG: $sort = input("\163\x6f\x72\x74"); goto AXfBW; SqR4w: if ($result !== false) { goto Tyq0W; } goto kkKws; AXfBW: $id = input("\x69\144"); goto PhDtv; mVRxJ: npfNg: goto NhJGU; kkKws: return json(["\155\163\x67" => "\xe6\216\x92\345\272\x8f\xe5\xa4\xb1\350\264\xa5", "\x65\162\162\157\x72\103\157\144\x65" => 0]); goto gRrtQ; L6RFR: return json(["\x6d\x73\147" => "\346\x8e\x92\xe5\xba\x8f\xe6\210\x90\xe5\212\237", "\x65\x72\162\x6f\x72\103\157\x64\x65" => 1]); goto mVRxJ; NhJGU: UFGu3: goto bUq9M; BuYEF: $result = ContentModel::update($data); goto SqR4w; bUq9M: } }