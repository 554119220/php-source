<?php
 namespace app\boguan\controller\platform; use app\boguan\controller\Platform; use app\boguan\model\Admin as AdminModel; use app\boguan\model\Role as RoleModel; use app\boguan\model\User as UserModel; use app\boguan\model\Order as OrderModel; use app\boguan\service\Official as OfficialService; use app\boguan\model\PublicSettings; use app\boguan\model\PublicUser as PublicUserModel; class Admin extends Platform { public function index() { goto i501t; xmoAT: $setWhere = ["\153\145\x79\167\157\162\x64" => $keyword]; goto grXgC; QuGaS: WwQVe: goto Jl31n; XG20e: return $this->fetch(); goto cM92K; TDhXG: $where["\x6e\151\x63\x6b\x6e\x61\155\145"] = ["\154\151\x6b\145", "\45{$keyword}\45"]; goto e0ZTG; MjojS: $this->assign(["\143\x6c\145\x72\x6b" => $user, "\160\141\147\145" => $page]); goto XG20e; e0ZTG: $where["\x75\156\x69\x61\x63\x69\144"] = $this->uniacid; goto xmoAT; Jl31n: $page = $user->render(); goto MjojS; grXgC: $user = UserModel::where("\141\x76\141\x74\141\x72", "\74\x3e", '')->where($where)->where("\151\x73\x5f\143\x6c\145\162\153\x20\75\40\x31\x20\x6f\x72\x20\151\163\137\x6d\157\x62\151\x6c\145\40\75\x31")->order("\x63\x6c\x65\x72\x6b\137\164\x69\155\x65", "\144\145\163\143")->paginate(12, false, ["\x71\x75\x65\162\171" => $setWhere]); goto fUB4r; fUB4r: foreach ($user as $key => $value) { goto XkLwW; vSGVu: $user[$key]["\143\x6c\145\x72\x6b\x5f\157\x72\x64\x65\162"] = $clerkData["\x63\157\x75\156\164"]; goto H7557; XkLwW: $clerkData = OrderModel::countClerkOrder($value["\151\x64"]); goto vSGVu; WdPPH: K3GkB: goto Slvoh; H7557: $user[$key]["\143\x6c\x65\162\153\x5f\x61\155\157\x75\156\x74"] = $clerkData["\163\165\x6d"]; goto WdPPH; Slvoh: } goto QuGaS; i501t: $keyword = input("\x6b\x65\x79\x77\x6f\x72\x64"); goto TDhXG; cM92K: } public function add() { goto v3F2W; aQqnl: $data["\x72\157\x6c\145\x5f\x69\144"] = $role[0]; goto kuGj_; UHKGC: $this->assign(["\x75\163\x65\x72\111\156\x66\x6f" => $userInfo, "\x72\x6f\x6c\x65" => $role]); goto XgebH; pRTIi: GzXil: goto W2bAR; Z0d00: $data["\143\x6c\x65\x72\153\137\x74\x69\x6d\145"] = time(); goto FANn6; BUYBp: if (!(isset($data["\157\146\x66\151\x63\151\x61\x6c\137\x69\x64"]) && $data["\157\146\x66\151\143\x69\141\x6c\x5f\x69\x64"] != '')) { goto mauWP; } goto JEVAf; FvqfJ: return json(["\x6d\x73\x67" => "\xe6\267\xbb\345\x8a\240\345\244\xb1\350\264\245", "\145\x72\x72\x6f\x72\x43\157\x64\145" => 0]); goto aFwT8; Jo2T6: if (!(!isset($data["\x75\x73\x65\x72\137\x69\144"]) || $data["\165\x73\x65\x72\x5f\x69\x64"] == '')) { goto R2SBR; } goto tVoVG; b1aIB: z8T_p: goto UHKGC; m9hmi: n6FZ_: goto VBzUS; S2whX: return json(["\x6d\x73\x67" => "\xe8\xaf\245\xe5\xbe\256\344\xbf\xa1\xe7\224\250\xe6\210\xb7\345\267\xb2\xe9\x85\x8d\xe7\xbd\256\350\247\222\350\x89\262", "\145\x72\162\157\x72\x43\157\144\145" => 0]); goto TiRMs; tVoVG: return json(["\155\x73\x67" => "\xe8\xaf\xb7\xe9\200\211\346\213\251\345\276\256\xe4\277\241\347\x94\xa8\346\210\267", "\x65\x72\162\157\162\x43\x6f\x64\145" => 0]); goto s8Gp5; iXiao: if (!($user["\151\163\137\143\154\x65\x72\x6b"] == 1 || $user["\151\163\x5f\x6d\x6f\142\x69\x6c\x65"] == 1)) { goto h3_QV; } goto S2whX; VBzUS: $userInfo = json_encode($data, JSON_UNESCAPED_UNICODE); goto X2kDB; vI4p8: $userData = UserModel::where(["\x75\x6e\151\x61\x63\x69\144" => session("\165\x6e\x69\x61\143\151\x64"), "\151\x73\137\143\154\x65\162\153" => 0, "\151\x73\x5f\x6d\157\x62\x69\x6c\145" => 0])->where("\141\166\141\164\x61\x72", "\74\x3e", '')->order("\x63\162\145\141\164\x65\x5f\x74\151\155\x65", "\x64\x65\x73\143")->select(); goto CNUOP; UC5wJ: $data = input("\x70\157\163\x74\x2e\x64\141\164\x61\x2f\x61"); goto Jo2T6; ecBal: $data["\x69\x64"] = $data["\x75\x73\145\162\137\151\144"]; goto Hbgxj; xJ36B: foreach ($userData as $key => $value) { goto XBzDd; XBzDd: $data[$key]["\151\144"] = $value["\x69\144"]; goto emm5W; emm5W: $data[$key]["\x6e\141\x6d\145"] = $value["\156\151\143\153\x6e\x61\x6d\x65"]; goto vWGsx; vWGsx: $data[$key]["\151\x6d\147"] = $value["\x61\x76\x61\x74\x61\x72"]; goto YTL1h; YTL1h: z3oQ1: goto jfq3m; jfq3m: } goto m9hmi; W2bAR: mauWP: goto aG4ro; xBSwF: YH42F: goto iXRPZ; X2kDB: if (!request()->isAjax()) { goto z8T_p; } goto UC5wJ; U_lHm: if ($role[1] == "\x63\x6c\x65\162\153") { goto YH42F; } goto nxHr_; QsEdf: $result = UserModel::update($data); goto IRUmi; npFE3: $data["\x63\x6c\145\x72\153\137\x74\x69\155\145"] = time(); goto D32i4; aFwT8: goto HGymN; goto TWVYH; Hbgxj: $role = explode("\54", $data["\x72\157\154\145\x5f\151\x64"]); goto U_lHm; v3F2W: $role = RoleModel::where("\x75\x6e\151\x61\143\x69\144", $this->uniacid)->select(); goto vI4p8; IRUmi: if ($result !== false) { goto JrFJa; } goto FvqfJ; Fey3F: W2R7f: goto aTQSl; XgebH: return $this->fetch(); goto J0V3p; JEVAf: $haveOfficial = UserModel::where(["\165\x6e\x69\x61\x63\151\x64" => $this->uniacid, "\x6f\x66\x66\151\143\151\141\x6c\x5f\x69\x64" => $data["\157\146\146\151\143\x69\141\154\x5f\x69\x64"], "\x69\x73\137\x64\x65\154\x65\164\145" => 0])->find(); goto FcOE3; Gk30c: return json(["\155\163\x67" => "\xe6\xb7\273\345\212\xa0\xe6\x88\x90\345\212\237", "\x65\x72\162\x6f\162\x43\157\x64\145" => 1]); goto kyR1P; kuGj_: goto W2R7f; goto xBSwF; CNUOP: $data = []; goto xJ36B; s8Gp5: R2SBR: goto BUYBp; D32i4: PG3OH: goto tZjIJ; FANn6: $data["\151\163\137\155\x6f\x62\x69\x6c\x65"] = 1; goto pToVY; aTQSl: unset($data["\x75\163\x65\x72\137\x69\x64"]); goto QsEdf; kyR1P: HGymN: goto b1aIB; pToVY: $data["\x72\157\154\145\x5f\x69\144"] = ''; goto Fey3F; UGx2F: TNZxJ: goto Z0d00; DKctt: return json(["\155\x73\x67" => "\xe8\257\xa5\xe5\x85\254\xe4\xbc\x97\345\x8f\267\347\224\250\346\210\xb7\345\xb7\xb2\347\273\221\xe5\256\232\357\xbc\x8c\350\257\xb7\351\207\x8d\346\x96\260\xe9\200\x89\346\x8b\xa9", "\x65\162\162\157\162\x43\157\x64\x65" => 0]); goto pRTIi; S38Qw: $data["\162\157\154\x65\137\x69\144"] = ''; goto FZARW; iXRPZ: if (!($user["\x69\x73\x5f\x63\x6c\145\162\153"] == 0)) { goto PG3OH; } goto npFE3; aG4ro: $user = UserModel::get($data["\x75\163\x65\x72\x5f\151\144"]); goto iXiao; TWVYH: JrFJa: goto Gk30c; tZjIJ: $data["\151\163\x5f\x63\154\145\162\153"] = 1; goto S38Qw; nxHr_: if ($role[1] == "\155\x6f\142\x69\x6c\145") { goto TNZxJ; } goto aQqnl; FZARW: goto W2R7f; goto UGx2F; FcOE3: if (!$haveOfficial) { goto GzXil; } goto DKctt; TiRMs: h3_QV: goto ecBal; J0V3p: } public function edit() { goto Gazq2; imqfe: return $this->fetch(); goto zEkhp; z2Npl: if ($role[1] == "\143\154\x65\162\153") { goto KsiIb; } goto K1DaV; g4YvY: $this->assign(["\162\x6f\154\145" => $role, "\165\x73\x65\162" => $user, "\x70\x75\142\x6c\151\143\x5f\x75\163\145\x72" => $public_user, "\x75\163\145\162\x49\156\146\x6f" => $userInfo]); goto imqfe; LYckb: NpnJb: goto ynRjZ; KByWD: $role = explode("\54", $data["\162\x6f\154\145\x5f\151\144"]); goto z2Npl; gjWLB: $public_user = PublicUserModel::get($user["\157\x66\x66\x69\143\x69\141\154\x5f\x69\x64"]); goto Uh6KW; t_Xvj: KsiIb: goto ZZ8T0; N46Av: return json(["\155\163\147" => "\347\274\226\xe8\xbe\x91\xe5\244\xb1\350\xb4\xa5", "\145\162\162\x6f\162\x43\x6f\x64\145" => 0]); goto LgQOu; iLKAW: goto lhHL_; goto t_Xvj; doeOY: foreach ($userData as $key => $value) { goto ZOxRL; X0EAx: vezNV: goto xLPMn; wn61N: $data[$key]["\156\x61\x6d\145"] = $value["\156\151\143\x6b\156\x61\155\145"]; goto UK2RR; UK2RR: $data[$key]["\x69\x6d\x67"] = $value["\x61\166\141\x74\x61\x72"]; goto X0EAx; ZOxRL: $data[$key]["\x69\144"] = $value["\151\x64"]; goto wn61N; xLPMn: } goto fPbKX; ZA80m: $data = []; goto doeOY; fPbKX: OTtKg: goto jBzmv; bvfhR: k32eV: goto g4YvY; ynRjZ: return json(["\x6d\163\147" => "\347\xbc\226\xe8\276\221\xe6\x88\220\345\212\x9f", "\x65\162\x72\157\162\103\157\144\x65" => 1]); goto aUKfw; FxRX1: $data["\x72\x6f\x6c\x65\x5f\x69\x64"] = ''; goto qYfSd; YOVCh: unset($data["\x75\163\x65\x72\x5f\151\x64"]); goto uWwcA; Gazq2: $userData = UserModel::where(["\x75\156\151\x61\143\x69\x64" => session("\165\156\x69\141\143\x69\x64"), "\x69\x73\137\x63\154\x65\x72\x6b" => 0, "\151\x73\x5f\x6d\157\x62\151\154\145" => 0])->where("\141\166\141\164\141\x72", "\x3c\x3e", '')->order("\x63\x72\145\141\x74\x65\137\x74\151\155\x65", "\144\x65\x73\143")->select(); goto ZA80m; cFyi3: $data = input("\x70\157\x73\x74\56\x64\x61\164\141\x2f\141"); goto dNn8q; dykfj: $role = RoleModel::where("\165\x6e\151\x61\143\151\x64", $this->uniacid)->select(); goto cUg6z; VRPzY: if ($result !== false) { goto NpnJb; } goto N46Av; m10ic: Hq0Qm: goto KQxBD; s2Hsn: $data["\x69\163\137\155\157\x62\151\x6c\145"] = 0; goto FxRX1; uWwcA: $result = UserModel::update($data); goto VRPzY; T9Y8k: $user = UserModel::get($id); goto gjWLB; cUg6z: $id = input("\x69\x64"); goto T9Y8k; KQxBD: $data["\151\x64"] = $data["\165\x73\145\162\x5f\x69\144"]; goto KByWD; DuTE9: $data["\x72\x6f\154\145\137\151\x64"] = $role[0]; goto iLKAW; LgQOu: goto TYcFY; goto LYckb; jBzmv: $userInfo = json_encode($data, JSON_UNESCAPED_UNICODE); goto dykfj; b0CX_: $data["\x69\163\137\x63\x6c\145\x72\x6b"] = 0; goto gyK0f; ffx4U: ieS4z: goto G9VGT; ZZ8T0: $data["\151\163\137\x63\154\145\x72\x6b"] = 1; goto s2Hsn; G9VGT: $data["\151\163\137\155\x6f\142\x69\x6c\145"] = 1; goto b0CX_; K1Osm: lhHL_: goto YOVCh; aUKfw: TYcFY: goto bvfhR; K1DaV: if ($role[1] == "\155\x6f\142\x69\x6c\145") { goto ieS4z; } goto DuTE9; Uh6KW: if (!request()->isAjax()) { goto k32eV; } goto cFyi3; gyK0f: $data["\162\x6f\x6c\145\x5f\x69\144"] = ''; goto K1Osm; dNn8q: if (!(!isset($data["\165\x73\145\162\137\x69\x64"]) || $data["\165\163\x65\162\137\x69\144"] == '')) { goto Hq0Qm; } goto wFhLH; qYfSd: goto lhHL_; goto ffx4U; wFhLH: return json(["\155\163\x67" => "\xe8\xaf\xb7\351\x80\x89\346\x8b\xa9\345\276\256\xe4\xbf\241\347\224\xa8\xe6\210\267", "\x65\x72\162\x6f\162\x43\157\144\x65" => 0]); goto m10ic; zEkhp: } public function cancelClerk() { goto RXaVh; FbkwG: $type = input("\164\x79\160\145"); goto KMxOs; bO6Uh: PXYhN: goto LSZu3; YBQte: if (!empty($user)) { goto klD5R; } goto KHPNi; uPGwG: vU96J: goto kHh7s; MJQJT: $user->is_clerk = 0; goto VUY0I; c29bK: goto KZddc; goto Pw6k3; l9n5h: $result = $user->save(); goto k2xk8; MPHsU: if ($type == "\x6d\x6f\x62\x69\x6c\x65") { goto PXYhN; } goto HAYHi; m5oAf: goto vU96J; goto bO6Uh; k2xk8: if ($result !== false) { goto I_LWo; } goto PlOen; B8p74: KZddc: goto HYaLQ; PlOen: return json(["\155\163\147" => "\350\xa7\243\xe9\x99\xa4\xe5\xa4\xb1\xe8\xb4\xa5", "\145\162\x72\x6f\162\103\157\144\x65" => 0]); goto c29bK; FoLB4: klD5R: goto DH_Bx; RXaVh: if (!request()->isAjax()) { goto GIacA; } goto yzr8C; KMxOs: $user = UserModel::get($id); goto YBQte; LSZu3: $user->is_mobile = 0; goto uPGwG; Pw6k3: I_LWo: goto fme9d; fme9d: return json(["\155\163\x67" => "\350\xa7\243\351\x99\xa4\xe6\210\220\345\x8a\237", "\x65\162\x72\157\162\103\x6f\x64\x65" => 1]); goto B8p74; A214O: $user->clerk_remark = null; goto m5oAf; VUY0I: $user->clerk_time = null; goto A214O; HAYHi: goto vU96J; goto aBB_o; KHPNi: return json(["\x6d\163\x67" => "\347\x94\xa8\346\210\xb7\xe4\xb8\215\345\255\x98\345\234\xa8", "\x65\x72\162\157\x72\103\x6f\144\x65" => 0]); goto FoLB4; DH_Bx: if ($type == "\143\154\145\162\x6b") { goto A4qhV; } goto MPHsU; kHh7s: $user->official_id = null; goto l9n5h; yzr8C: $id = input("\x69\144"); goto FbkwG; HYaLQ: GIacA: goto JciA7; aBB_o: A4qhV: goto MJQJT; JciA7: } public function del() { goto U_s8J; c9sLw: kroRV: goto vlk4r; TqJbQ: hUl2Y: goto IZUo1; FGpsN: return json(["\155\163\x67" => "\xe5\210\xa0\xe9\x99\244\346\x88\x90\xe5\212\x9f", "\145\162\x72\x6f\162\103\x6f\144\x65" => 1]); goto TqJbQ; GHXUC: if ($result !== false) { goto uwKT5; } goto Jts6I; IZUo1: PN6P0: goto xHmo2; cnyDc: if (!($id == '')) { goto kroRV; } goto RUXh3; U_s8J: if (!request()->isAjax()) { goto PN6P0; } goto gJygb; vlk4r: $result = AdminModel::destroy($id); goto GHXUC; ZknjH: goto hUl2Y; goto lsGj8; RUXh3: return json(["\x6d\163\x67" => "\151\144\xe4\270\x8d\xe5\xad\230\xe5\x9c\xa8", "\145\162\x72\157\x72\103\157\x64\x65" => 0]); goto c9sLw; gJygb: $id = input("\x69\x64"); goto cnyDc; lsGj8: uwKT5: goto FGpsN; Jts6I: return json(["\x6d\163\147" => "\345\210\xa0\xe9\231\xa4\xe5\xa4\xb1\xe8\xb4\245", "\145\162\162\157\x72\x43\157\144\x65" => 0]); goto ZknjH; xHmo2: } public function oauthQrCode() { goto xapEW; wXcYW: $data = ["\x6d\x73\x67" => "\350\216\xb7\xe5\217\x96\xe6\210\x90\345\x8a\237", "\x64\x61\164\x61" => WE7_PATH . $qrCode, "\x65\x72\x72\157\x72\103\157\x64\145" => 1]; goto CmD2l; eRo_I: if (!($setting["\141\x70\160\151\144"] == '' || $setting["\x61\160\160\x5f\163\145\143\162\x65\x74"] == '')) { goto GozY0; } goto XFbkw; XFbkw: return json(["\x6d\x73\147" => "\350\257\267\xe5\205\210\351\x85\x8d\xe7\275\256\xe5\205\254\xe4\274\x97\345\x8f\xb7\xe4\xbf\xa1\xe6\201\257", "\145\x72\x72\x6f\x72\103\157\144\x65" => 0]); goto Yk4os; Yk4os: GozY0: goto fF7q4; xapEW: $setting = PublicSettings::where(["\165\156\x69\x61\143\x69\x64" => session("\165\156\151\x61\143\151\144")])->find(); goto eRo_I; CmD2l: return $data; goto eDUfj; d6vYE: $qrCode = $OfficialService->getPublicOauthQrCode(); goto wXcYW; fF7q4: $OfficialService = new OfficialService(); goto d6vYE; eDUfj: } }