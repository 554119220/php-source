<?php
 namespace app\boguan\controller\platform; use app\boguan\controller\Platform; use app\boguan\model\Integral as IntegralModel; use app\boguan\model\PlatformSettings; use app\boguan\model\IntegralDetail; use app\boguan\model\User as UserModel; class Integral extends Platform { public function index() { goto UXBeL; QoC0D: $data = input("\x70\x6f\163\164\x2e\x64\x61\164\141\x2f\141"); goto o04tP; x2_9T: if (!request()->isAjax()) { goto uqHwQ; } goto QoC0D; C28i1: $data["\x75\x6e\x69\x61\x63\151\x64"] = $this->uniacid; goto rSMMe; qVI4i: return json(["\155\163\x67" => "\xe7\xa7\xaf\xe5\210\x86\345\x80\xbc\xe9\x9c\200\xe5\xa4\247\344\272\216\x30", "\x65\x72\162\x6f\x72\x43\x6f\x64\x65" => 0]); goto W0Qno; G7JXk: $totalDeduct = IntegralDetail::where(["\165\x6e\x69\x61\143\151\x64" => $this->uniacid, "\x74\x79\x70\145" => 2, "\153\x69\x6e\x64" => 3])->sum("\x69\156\x74\145\x67\162\x61\154"); goto P3Nhi; h485A: if ($data["\151\144"]) { goto aCJ1E; } goto C28i1; W0Qno: aIeF_: goto h485A; P3Nhi: $this->assign(["\151\156\164\x65\147\x72\x61\x6c" => $integral, "\160\154\x61\x74\146\x6f\x72\x6d" => $platform, "\x74\157\x74\141\154\137\x67\151\x76\145" => $totalGive, "\x74\157\164\141\154\x5f\144\x65\x64\x75\x63\x74" => $totalDeduct]); goto COf9m; Ts4jD: TZm_Q: goto VnYOc; o04tP: if (!($data["\151\156\164\145\x67\162\x61\154"] <= 0 || $data["\151\x6e\x74\x65\147\162\141\x6c"] == '')) { goto aIeF_; } goto qVI4i; COf9m: return $this->fetch(); goto bK2NV; bSjzA: uqHwQ: goto B44kN; B5qxV: LqoGT: goto J1Fm4; B44kN: $totalGive = IntegralDetail::where(["\x75\x6e\x69\141\x63\x69\144" => $this->uniacid, "\x74\x79\160\x65" => 1, "\x6b\x69\156\144" => 3])->sum("\x69\x6e\164\145\147\x72\141\x6c"); goto G7JXk; VnYOc: if ($result !== false) { goto LqoGT; } goto htJYe; LPCBW: goto ZVnzu; goto B5qxV; TvzIx: $integral["\164\157\164\x61\x6c"] = IntegralDetail::where(["\x75\x6e\x69\x61\x63\x69\x64" => $this->uniacid, "\164\171\160\145" => 1, "\x6b\x69\x6e\144" => 3, "\x69\156\164\x65\147\x72\141\154\x5f\151\144" => $integral["\x69\144"]])->sum("\151\156\164\x65\x67\162\141\x6c"); goto x2_9T; wwnRd: goto TZm_Q; goto gNoMY; rSMMe: $result = IntegralModel::create($data); goto wwnRd; gNoMY: aCJ1E: goto MDjzT; J1Fm4: return json(["\x6d\163\x67" => "\xe4\277\256\xe6\x94\xb9\346\x88\x90\xe5\212\x9f", "\x65\162\162\157\162\103\x6f\x64\x65" => 1]); goto FNFxx; UXBeL: $platform = PlatformSettings::where(["\165\156\x69\141\x63\x69\x64" => $this->uniacid])->field("\x69\x64\x2c\x64\x65\x64\x75\x63\x74\x69\x6f\x6e")->find(); goto d7UJa; FNFxx: ZVnzu: goto bSjzA; MDjzT: $result = IntegralModel::update($data); goto Ts4jD; htJYe: return json(["\x6d\x73\x67" => "\344\xbf\xae\346\224\271\345\244\261\350\264\245", "\145\x72\x72\x6f\162\x43\x6f\144\x65" => 0]); goto LPCBW; d7UJa: $integral = IntegralModel::where(["\165\x6e\151\x61\x63\151\x64" => $this->uniacid])->find(); goto TvzIx; bK2NV: } public function general() { goto O_9_i; bylPD: if ($data["\151\x64"]) { goto qODy9; } goto mUWo1; QEU3y: if (isset($data["\144\x65\x64\165\143\164\x69\x6f\156"])) { goto qLDDg; } goto J6pqg; Y4hED: ui87w: goto ab7tu; cuNtP: qLDDg: goto ZWQP9; ab7tu: jjL9D: goto jEI9c; O_9_i: if (!request()->isAjax()) { goto jjL9D; } goto Dfedr; z739j: uikWV: goto bylPD; yVaMc: goto JlC85; goto JwPZ0; BEhVe: $result = PlatformSettings::update($data); goto xrl_i; cQQ0S: r1B5C: goto yC88J; ZWQP9: if (!($data["\x64\x65\144\165\143\x74\x69\x6f\x6e"] <= -1)) { goto uikWV; } goto C_7Rz; xrl_i: JlC85: goto o56N8; ZJk7_: goto ui87w; goto cQQ0S; mUWo1: $data["\165\x6e\151\141\x63\x69\144"] = $this->uniacid; goto sCdk6; Dfedr: $data = input("\160\x6f\x73\x74\x2e"); goto QEU3y; JwPZ0: qODy9: goto BEhVe; yC88J: return json(["\155\x73\x67" => "\344\277\256\xe6\224\xb9\346\x88\220\xe5\x8a\237", "\x65\162\x72\x6f\x72\x43\157\144\145" => 1]); goto Y4hED; J6pqg: $data["\x64\145\x64\165\x63\x74\x69\x6f\x6e"] = 0; goto cuNtP; sCdk6: $result = PlatformSettings::create($data); goto yVaMc; o56N8: if ($result !== false) { goto r1B5C; } goto Vu9qs; C_7Rz: return json(["\x6d\163\147" => "\347\247\257\345\210\x86\347\232\204\345\200\274\xe9\x9c\x80\xe5\244\xa7\344\272\x8e\xe7\xad\211\xe4\272\216\60", "\145\x72\162\x6f\x72\103\x6f\144\145" => 0]); goto z739j; Vu9qs: return json(["\155\x73\x67" => "\344\xbf\xae\346\x94\xb9\xe5\xa4\261\350\264\xa5", "\145\162\162\157\162\103\x6f\x64\145" => 0]); goto ZJk7_; jEI9c: } public function add() { goto mZBLN; NXCfY: return json(["\x6d\x73\147" => "\347\xa7\257\345\210\206\xe9\234\200\345\244\247\xe4\272\x8e\x30", "\x65\x72\162\157\x72\103\157\144\x65" => 0]); goto b1lYb; QdjAT: return json(["\155\163\x67" => "\351\207\x91\351\xa2\235\351\x9c\x80\345\xa4\xa7\344\272\216\60", "\145\x72\x72\157\x72\x43\x6f\x64\x65" => 0]); goto oU3yF; Uh083: $data = input("\x70\x6f\163\164\x2e"); goto EslRn; nAkvY: return json(["\155\163\x67" => "\xe6\xb7\xbb\345\x8a\xa0\346\210\220\xe5\212\237", "\x65\x72\x72\x6f\x72\x43\x6f\144\145" => 1]); goto kO4jc; kO4jc: T4jFg: goto YbO2f; NM2kV: Jn57O: goto nAkvY; Qt9A9: goto T4jFg; goto NM2kV; b1lYb: cOWdE: goto o4jJy; EslRn: if (!($data["\155\157\156\145\171"] <= 0 || $data["\155\157\156\145\x79"] == '')) { goto mqDyo; } goto QdjAT; YbO2f: Ki8sY: goto Ib8hU; LQsz3: return json(["\x6d\x73\147" => "\xe6\xb7\xbb\345\212\xa0\345\244\xb1\350\xb4\245", "\145\162\x72\x6f\162\x43\x6f\144\x65" => 0]); goto Qt9A9; oU3yF: mqDyo: goto tHSXB; tHSXB: if (!($data["\x69\x6e\164\x65\x67\x72\141\x6c"] <= 0 || $data["\x69\156\x74\145\147\x72\141\154"] == '')) { goto cOWdE; } goto NXCfY; o4jJy: $data["\x75\x6e\151\141\x63\x69\144"] = $this->uniacid; goto juKxo; mZBLN: if (!request()->isAjax()) { goto Ki8sY; } goto Uh083; juKxo: $result = IntegralModel::create($data); goto wBnF2; wBnF2: if ($result !== false) { goto Jn57O; } goto LQsz3; Ib8hU: } public function edit() { goto ujKFP; ejtwW: return json(["\155\x73\x67" => "\xe6\267\273\345\x8a\xa0\346\210\220\345\212\237", "\x65\x72\x72\x6f\162\x43\157\144\145" => 1]); goto E2350; bX1Tk: return json(["\155\163\147" => "\351\x87\x91\xe9\xa2\x9d\351\234\200\xe5\xa4\xa7\xe4\272\x8e\x30", "\145\x72\162\157\x72\103\157\144\145" => 0]); goto l65b7; nck7T: return json(["\155\163\x67" => "\346\267\273\345\x8a\xa0\345\244\xb1\350\264\245", "\145\162\162\157\162\103\x6f\144\x65" => 0]); goto QuHhC; tTGK4: if (!($data["\x69\156\164\x65\x67\x72\x61\x6c"] <= 0 || $data["\x69\x6e\x74\145\147\162\141\x6c"] == '')) { goto Kw8z0; } goto yZA9h; qqzTb: $result = IntegralModel::update($data); goto d04rf; Lj8Hz: if (!($data["\x6d\157\x6e\145\171"] <= 0 || $data["\155\157\156\x65\171"] == '')) { goto w4hOC; } goto bX1Tk; QuHhC: goto OZ8tu; goto wyHhi; wyHhi: jLyic: goto ejtwW; I3Sf9: Kw8z0: goto wbV6z; l65b7: w4hOC: goto tTGK4; d04rf: if ($result !== false) { goto jLyic; } goto nck7T; cpW1S: $data = input("\160\157\163\164\x2e"); goto ySd2H; duM6O: nDa_V: goto tB_ij; yZA9h: return json(["\155\163\x67" => "\347\xa7\257\345\x88\x86\351\234\x80\xe5\244\247\344\xba\x8e\x30", "\x65\x72\x72\x6f\162\x43\157\144\145" => 0]); goto I3Sf9; ujKFP: if (!request()->isAjax()) { goto nDa_V; } goto cpW1S; etQCa: mPHN5: goto Lj8Hz; ySd2H: if (!($data["\151\144"] == '')) { goto mPHN5; } goto NWQBX; E2350: OZ8tu: goto duM6O; wbV6z: $data["\165\x70\x64\141\164\145\x5f\x74\x69\155\145"] = time(); goto qqzTb; NWQBX: return json(["\x6d\x73\147" => "\151\144\xe4\270\x8d\345\255\x98\xe5\x9c\250", "\x65\x72\162\x6f\162\103\x6f\x64\145" => 1]); goto etQCa; tB_ij: } public function del() { goto LiQsk; lJF04: Yb438: goto H7gSq; Ga0r_: if ($result !== false) { goto S86E0; } goto QVmnf; U79x8: goto Ual77; goto K82WT; LiQsk: if (!request()->isAjax()) { goto PG1aj; } goto VY4WA; VfiC3: Ual77: goto uaUY2; QVmnf: return json(["\155\163\x67" => "\xe5\210\240\xe9\x99\xa4\xe5\xa4\xb1\350\264\245", "\145\x72\x72\x6f\162\103\x6f\x64\145" => 0]); goto U79x8; H7gSq: $result = IntegralModel::destroy($id); goto Ga0r_; XVYuT: if (!($id == '')) { goto Yb438; } goto bB8ml; VY4WA: $id = input("\x69\x64"); goto XVYuT; uaUY2: PG1aj: goto wbPjc; K82WT: S86E0: goto UvkvW; bB8ml: return json(["\155\163\x67" => "\151\x64\xe4\270\215\xe5\255\230\345\234\xa8", "\x65\x72\x72\x6f\x72\103\157\x64\x65" => 0]); goto lJF04; UvkvW: return json(["\155\163\x67" => "\xe5\x88\240\351\231\244\xe6\x88\x90\345\x8a\x9f", "\145\162\x72\157\x72\x43\157\144\145" => 1]); goto VfiC3; wbPjc: } public function detail() { goto Djbrd; aYLcC: $end_time = input("\145\x6e\144\x5f\x74\x69\x6d\145"); goto GMFus; tXq7s: $userIds = implode("\x2c", $userIds); goto SRo1M; K0F_A: $detail = IntegralDetail::with("\x61\x64\155\x69\x6e")->with("\165\x73\145\162")->where($where)->where("\143\x72\145\x61\164\145\x5f\164\151\155\145", "\142\x65\164\x77\x65\x65\x6e\x20\x74\151\155\x65", [$start_time . "\40\x30\x30\x3a\60\x30\x3a\60\x30", $end_time . "\40\62\x33\72\65\71\72\x35\x39"])->order("\143\162\x65\141\x74\x65\137\x74\151\x6d\x65", "\x64\x65\163\143")->paginate(12, false, ["\161\x75\145\162\171" => $setWhere]); goto LAfQ5; d_QQf: $userIds = []; goto VCNtr; pgoBp: if (!$kind) { goto nW1Sk; } goto TqQwr; HiOiD: mJ9F7: goto Fayng; ULf7J: BmYNH: goto q0QGs; QKvrt: $detail = IntegralDetail::with("\141\144\155\x69\x6e")->with("\x75\163\x65\162")->where($where)->order("\x63\x72\145\141\x74\x65\137\x74\151\x6d\x65", "\x64\145\x73\x63")->paginate(12, false, ["\161\x75\x65\x72\x79" => $setWhere]); goto MLCug; VCNtr: foreach ($user as $value) { $userIds[] = $value["\151\x64"]; c9Yzs: } goto Mofd5; TqQwr: $where["\153\151\x6e\x64"] = $kind; goto Psmfs; q0QGs: $type = input("\x74\171\x70\x65"); goto g5DqO; Mofd5: BAupg: goto tXq7s; LAfQ5: iim8g: goto Vk9Th; YoHUX: $setWhere = ["\x73\164\x61\162\x74\137\164\x69\155\145" => $start_time, "\x65\x6e\x64\x5f\164\x69\x6d\x65" => $end_time, "\164\x79\160\145" => $type, "\x6b\151\156\x64" => $kind, "\x6b\145\x79\167\x6f\x72\x64" => $keyword]; goto S_Cg4; eNCw9: $this->assign(["\x64\145\x74\x61\x69\154" => $detail, "\x70\x61\147\x65" => $page]); goto k8Lpb; Vk9Th: $page = $detail->render(); goto eNCw9; fvp_B: whxLs: goto cv0ks; Psmfs: nW1Sk: goto KaVJK; RqD9M: $user = UserModel::where("\x75\x6e\151\141\143\x69\x64", $this->uniacid)->where("\x6e\x69\x63\153\x6e\141\155\x65", "\x6c\x69\153\x65", "\x25{$keyword}\45")->select(); goto d_QQf; k8Lpb: return $this->fetch(); goto h7WTX; GMFus: if (!($start_time && $end_time == '')) { goto BmYNH; } goto OEy_m; SRo1M: $where["\165\x73\x65\162\x5f\x69\x64"] = ["\151\156", $userIds]; goto HiOiD; MLCug: goto iim8g; goto k3fYM; s2EDP: $where["\164\x79\x70\x65"] = $type; goto fvp_B; g6p1Q: if (!$keyword) { goto mJ9F7; } goto RqD9M; OEy_m: $end_time = date("\x59\55\155\x2d\144", time()); goto ULf7J; k3fYM: o2PCs: goto K0F_A; Djbrd: $start_time = input("\163\164\x61\x72\x74\x5f\x74\151\155\x65"); goto aYLcC; cv0ks: $kind = input("\x6b\x69\156\x64"); goto pgoBp; Fayng: $where["\x75\156\x69\x61\143\x69\x64"] = $this->uniacid; goto YoHUX; g5DqO: if (!$type) { goto whxLs; } goto s2EDP; KaVJK: $keyword = input("\x6b\x65\171\167\x6f\162\144"); goto g6p1Q; S_Cg4: if ($start_time) { goto o2PCs; } goto QKvrt; h7WTX: } }