<?php
 namespace app\boguan\controller\platform; use app\boguan\controller\Platform; use app\boguan\model\Withdraw as WithdrawModel; use app\boguan\model\User as UserModel; use app\api\service\Wechat as WechatService; use app\boguan\model\WxTemplate; use app\boguan\controller\SendMessage; class Withdraw extends Platform { public function index() { goto EFTVT; E36mg: $where["\x73\x74\141\164\x75\163"] = $status; goto stYCO; EVfjY: $withdrawModel = new WithdrawModel(); goto aPMud; stYCO: li3pJ: goto r7i7l; FTxYe: if (!($status != '')) { goto li3pJ; } goto E36mg; luGVr: jHGwk: goto eJIRJ; C4e9N: $page = $withdraw->render(); goto jSzze; Io1om: $keyword = input("\153\145\171\x77\x6f\162\144"); goto FTxYe; jSzze: $this->assign(["\x77\151\x74\150\x64\x72\141\x77" => $withdraw, "\160\141\147\x65" => $page]); goto aU_s1; aBDtC: $setWhere = ["\153\x65\171\x77\157\162\144" => $keyword, "\163\x74\x61\x74\165\x73" => $status]; goto EVfjY; r7i7l: if (!($keyword != '')) { goto jHGwk; } goto DPh_h; QZMw6: $status = input("\163\164\x61\x74\165\x73"); goto Io1om; aPMud: $withdraw = $withdrawModel->alias("\x61")->join("\165\163\x65\162\x20\x62", "\141\56\x75\x73\x65\162\x5f\151\144\40\x3d\40\142\56\x69\144", "\x4c\105\106\x54")->field("\x61\x2e\x69\x64\x20\141\163\40\x61\x69\144\x2c\141\x2e\165\x73\x65\162\137\x69\144\54\x62\56\x6e\x69\x63\x6b\156\141\x6d\145\54\x62\56\x61\166\x61\164\141\x72\x2c\x61\56\155\x6f\156\145\171\x2c\x61\56\141\143\x63\x6f\165\x6e\x74\x2c\x61\x2e\x61\x6d\x6f\x75\x6e\164\54\x61\x2e\x73\164\x61\x74\x75\x73\x2c\141\x2e\143\162\145\141\164\145\137\164\151\x6d\x65\54\x61\x2e\162\x61\164\145\54\141\x2e\x77\x69\x74\150\x64\x72\x61\x77\137\164\x79\x70\x65\x2c\x61\56\156\141\x6d\x65")->where($where)->order("\x61\56\x63\162\x65\141\x74\145\137\164\151\x6d\x65", "\144\x65\163\x63")->paginate(12, false, ["\x71\165\x65\162\x79" => $setWhere]); goto C4e9N; eJIRJ: $where["\141\56\x75\156\x69\x61\x63\x69\x64"] = $this->uniacid; goto aBDtC; EFTVT: $where = []; goto QZMw6; DPh_h: $where["\142\x2e\x6e\151\143\153\156\141\155\145"] = ["\x6c\151\153\145", "\45{$keyword}\45"]; goto luGVr; aU_s1: return $this->fetch(); goto fNp3c; fNp3c: } public function agree() { goto KZxyh; AwoC0: $withdraw->save(); goto jMd_B; M3sc7: $res = WechatService::GetTransfers($args); goto iziYz; LVNIC: return json(["\155\x73\147" => "\347\224\250\346\x88\xb7\345\x8f\xaf\xe6\217\220\347\216\260\xe4\xbd\231\351\242\x9d\xe4\270\215\350\266\xb3", "\x65\162\162\157\162\103\157\144\145" => 0]); goto oPUaP; wWOXR: if (!empty($withdraw)) { goto dOtjm; } goto UM5WJ; VmWP0: if (!($withdraw["\x77\151\x74\x68\144\162\141\167\137\x74\171\x70\x65"] == 1)) { goto wcgpl; } goto c8WSX; bP4zI: $data = input("\160\157\163\164\x2e"); goto eMGru; I4qUe: $withdraw->status = 1; goto AwoC0; c3jul: $user = UserModel::get($withdraw["\165\163\x65\x72\x5f\151\x64"]); goto P2b3D; YDG0y: goto RGQ8v; goto oFpxy; jMd_B: return json(["\155\163\x67" => "\346\x89\223\346\254\xbe\346\x88\220\345\212\237", "\145\162\162\157\x72\103\x6f\x64\x65" => 1]); goto EeDCN; eMGru: $withdraw = WithdrawModel::get($data["\x69\x64"]); goto wWOXR; oPUaP: vLEzn: goto VmWP0; c8WSX: $args = ["\160\x61\x72\x74\156\x65\162\x5f\x74\x72\141\144\x65\x5f\156\x6f" => $withdraw["\157\x72\144\145\162\x5f\x6e\157"], "\x6f\x70\145\x6e\151\144" => $user["\x6f\160\145\156\151\x64"], "\141\155\x6f\x75\156\164" => $withdraw["\x61\155\x6f\165\x6e\x74"] * 100, "\144\x65\x73\x63" => "\347\224\xb3\350\257\267\xe6\x8f\x90\347\216\xb0"]; goto M3sc7; EeDCN: RGQ8v: goto UzAZz; UzAZz: wcgpl: goto cSluV; vlUuE: return json(["\x6d\163\x67" => $res["\145\x72\162\137\x63\x6f\144\145\x5f\144\145\x73"], "\145\x72\162\157\162\x43\x6f\144\x65" => 0]); goto YDG0y; TRwDl: dOtjm: goto c3jul; KZxyh: if (!request()->isAjax()) { goto wz5ac; } goto bP4zI; cSluV: wz5ac: goto Dq1Qb; P2b3D: if (!($user["\x73\150\x61\x72\x65\x5f\x6d\x6f\156\x65\171"] < $withdraw["\x6d\157\x6e\145\171"])) { goto vLEzn; } goto LVNIC; iziYz: if ($res["\162\x65\x74\x75\x72\x6e\x5f\143\x6f\x64\x65"] == "\x53\125\x43\103\x45\x53\123" && $res["\162\145\x73\165\154\x74\x5f\143\x6f\x64\x65"] == "\x53\x55\103\103\x45\x53\x53") { goto rh9bt; } goto vlUuE; UM5WJ: return json(["\x6d\163\x67" => "\346\x95\260\346\x8d\256\345\274\x82\xe5\270\xb8\xef\xbc\214\350\xaf\267\347\xa8\x8d\345\x80\231\345\x86\215\350\257\x95", "\145\162\162\x6f\162\103\x6f\x64\145" => 0]); goto TRwDl; oFpxy: rh9bt: goto I4qUe; Dq1Qb: } public function refuse() { goto DeqeF; rDsZ_: $user = UserModel::get($withdraw["\x75\x73\x65\x72\137\151\x64"]); goto eSgNG; Umyvg: if (!($template && $withdraw["\160\162\145\x70\x61\x79\137\151\144"])) { goto M4vAL; } goto XyNd1; eSgNG: $user->share_money += $withdraw["\x6d\157\156\145\x79"]; goto WXruT; WXruT: $user->save(); goto UKLom; Q9ZyF: $withdraw->status = 2; goto ymkTf; ePk2p: M4vAL: goto rDsZ_; XyNd1: $sendData = ["\x74\160\x6c\x49\x64" => $template, "\160\162\x65\x70\x61\x79\x5f\151\144" => $withdraw["\160\x72\x65\160\141\x79\137\151\144"], "\x75\151\144" => $withdraw["\165\x73\x65\x72\137\151\x64"], "\x6b\x65\171\x77\x6f\162\x64\61" => $withdraw["\141\155\x6f\x75\156\x74"], "\153\145\171\x77\x6f\162\x64\62" => $withdraw["\143\x72\145\x61\164\145\x5f\x74\151\x6d\145"], "\x6b\145\171\x77\157\162\x64\x33" => "\346\217\220\xe7\x8e\260\xe8\xa2\253\346\x8b\x92\xe7\xbb\x9d\357\274\214\350\xaf\xa6\xe6\x83\205\xe8\xaf\267\345\x92\xa8\350\257\242\xe5\256\242\xe6\x9c\x8d"]; goto Z1m75; qkyN4: if ($result !== false) { goto E03Mt; } goto IqVyp; dP1nG: $template = $wxTemplate->getTemplateById("\101\124\61\62\64\62"); goto Umyvg; FrA3G: return json(["\x6d\x73\x67" => "\350\256\242\xe5\x8d\x95\344\xb8\215\xe5\xad\x98\xe5\234\xa8", "\145\162\162\x6f\x72\103\x6f\x64\145" => 0]); goto MiX6H; Z1m75: $send = new SendMessage(); goto FQjRW; czF5A: if ($withdraw) { goto JDQdl; } goto FrA3G; IqVyp: return json(["\x6d\163\147" => "\xe6\x8b\x92\xe7\xbb\235\345\xa4\xb1\xe8\xb4\245", "\x65\162\162\x6f\x72\103\157\x64\145" => 0]); goto elKuO; DeqeF: if (!request()->isAjax()) { goto ZqSju; } goto WxYIt; FQjRW: $send->sendTplMessage($sendData, ''); goto ePk2p; wZ_Et: CGQkL: goto kIDvY; kIDvY: ZqSju: goto CR8BT; RY3du: E03Mt: goto dg2GO; ymkTf: $result = $withdraw->save(); goto qkyN4; elKuO: goto CGQkL; goto RY3du; MiX6H: JDQdl: goto Q9ZyF; UKLom: return json(["\x6d\163\x67" => "\346\x8b\x92\xe7\xbb\x9d\xe6\x88\220\345\x8a\237", "\145\162\x72\x6f\x72\x43\157\x64\145" => 1]); goto wZ_Et; DdeNY: $withdraw = WithdrawModel::get($id); goto czF5A; dg2GO: $wxTemplate = new WxTemplate(); goto dP1nG; WxYIt: $id = input("\x69\144"); goto DdeNY; CR8BT: } public function del() { goto Wwvw0; Wwvw0: if (!request()->isAjax()) { goto bM9sh; } goto lvbyl; jASTt: bM9sh: goto n_2_y; lvbyl: $id = input("\151\x64"); goto Jt2M3; LKbyW: uX3Qt: goto jASTt; C9IYu: TM3UM: goto V5tjs; V5tjs: $result = WithdrawModel::destroy($id); goto IeUOJ; i3ic_: TbUsO: goto LxVt5; Jt2M3: if (!($id == '')) { goto TM3UM; } goto psrGi; LxVt5: return json(["\x6d\x73\147" => "\xe5\x88\xa0\351\x99\244\346\210\220\xe5\x8a\x9f", "\145\162\162\x6f\x72\103\157\x64\145" => 1]); goto LKbyW; IeUOJ: if ($result !== false) { goto TbUsO; } goto xJ_X3; psrGi: return json(["\155\x73\x67" => "\x69\x64\344\xb8\215\xe5\xad\x98\345\234\250", "\145\162\162\157\x72\x43\x6f\144\x65" => 0]); goto C9IYu; Jlk3z: goto uX3Qt; goto i3ic_; xJ_X3: return json(["\x6d\163\x67" => "\345\210\xa0\351\231\xa4\xe5\xa4\261\xe8\xb4\xa5", "\145\162\162\x6f\162\103\157\144\145" => 0]); goto Jlk3z; n_2_y: } }