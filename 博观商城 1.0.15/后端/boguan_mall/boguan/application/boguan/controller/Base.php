<?php
 namespace app\boguan\controller; use app\boguan\model\Coupon; use app\boguan\model\Video; use think\Request; use app\boguan\model\Image; use think\Cache; use app\boguan\model\Node as NodeModel; use app\boguan\model\User as UserModel; use app\boguan\model\Message as MessageModel; use app\boguan\model\Product as ProductModel; use app\boguan\model\Content as ContentModel; use app\boguan\model\PlatformSettings; use app\boguan\model\PublicUser as PublicUserModel; class Base extends Auth { public $uniacid; public function __construct(Request $request = null) { goto cnw16; oNc51: $data = ["\x6b\x65\171" => config("\x63\x6c\157\x75\144\56\141\x70\151\137\153\145\171"), "\151\x70" => gethostbyname($_SERVER["\123\x45\122\126\x45\x52\x5f\x4e\x41\x4d\x45"]), "\x66\162\x6f\x6d\x5f\151\x70" => \request()->ip(), "\x64\157\155\x61\x69\156" => $this->server, "\163\x63\x68\145\x6d\145" => \request()->scheme(), "\x74\x79\160\x65" => "\62", "\160\x6c\x75\147\151\x6e" => $ctrl, "\x61\x75\164\x68\137\164\x79\x70\x65" => 1, "\x6e\141\x6d\x65" => $settings["\x6e\141\155\145"], "\160\150\157\x6e\x65" => $settings["\164\145\154"], "\x61\144\x64\162\145\163\x73" => $settings["\141\x64\144\x72\x65\163\163"], "\x61\143\x69\144" => session("\x75\156\151\141\x63\x69\x64")]; goto lIp2J; SLDAK: $act = $request->action(); goto sPJ6u; Y7o_Y: eJVf5: goto lTCRZ; cFWgD: $settings = PlatformSettings::where(["\x75\x6e\x69\141\143\151\144" => session("\165\x6e\151\141\x63\151\x64")])->field("\156\x61\155\x65\x2c\164\x65\x6c\54\x61\144\144\x72\145\163\x73")->find(); goto oNc51; wev2b: $getMessageCount = MessageModel::where(["\x75\x6e\x69\x61\x63\151\x64" => session("\x75\156\x69\x61\143\x69\x64"), "\151\x73\137\x72\145\141\x64" => 0])->count(); goto tnLYV; gyeas: JBqeG: goto lmI_Q; WA1rp: saQIl: goto KpOYL; vL6pg: $this->pluginAuth(); goto vs0iw; lmI_Q: return $this->redirect(request()->domain() . "\57\167\145\x62\x2f\x69\x6e\x64\145\x78\x2e\160\150\160\x3f\x63\x3d\141\143\x63\157\x75\156\164\46\x61\x3d\144\x69\x73\160\x6c\x61\171"); goto Dyw10; kbfop: BM230: goto HeZ9a; RhE7B: global $_W; goto Aexo8; sPJ6u: if (session("\120\114\x55\x47\x49\x4e\x5f\x41\125\x54\x48")) { goto SiGDx; } goto XPUOg; lnZjO: dxSPA: goto AQo0u; vip3T: $result = json_decode($this->cloud_post(config("\143\x6c\157\x75\x64\56\x70\154\x75\x67\x69\156\137\x75\x72\154"), $pluginData), true); goto qQcT4; rHf9Y: phb6q: goto GQt4T; AQo0u: return $this->redirect(request()->domain() . "\57\x77\x65\142\x2f\151\156\x64\x65\170\56\x70\x68\160\x3f\143\75\x61\143\143\157\x75\156\x74\46\x61\x3d\144\x69\x73\x70\154\x61\171"); goto WA1rp; KpOYL: if (!(!session("\x77\145\67") && empty(authCheck($ctrl . "\57" . $act)))) { goto BM230; } goto Gsu4y; Dyw10: goto saQIl; goto lnZjO; hv6S1: session("\111\x4d\x53\137\x56\105\x52\x53\111\117\x4e", "\62\x2e\60"); goto Lkdff; XPUOg: $pluginData = ["\x6b\x65\x79" => config("\x63\x6c\x6f\x75\x64\56\141\x70\151\137\x6b\145\171")]; goto vip3T; Lkdff: goto kcAvf; goto rHf9Y; Gsu4y: $this->error("\346\x82\250\346\xb2\xa1\346\234\211\346\x9d\203\xe9\x99\220\xe8\256\277\xe9\227\xae\345\x93\246"); goto kbfop; V8Oc7: if (session("\x49\x53\137\x41\x55\124\110")) { goto tTz5a; } goto cFWgD; lIp2J: $this->cloud_post(config("\x63\154\x6f\165\144\x2e\x64\145\x66\141\x75\154\x74\137\x75\162\x6c"), $data); goto fHAVa; tnLYV: $node = new NodeModel(); goto W7EYa; laGse: $settings = PlatformSettings::where(["\x75\x6e\x69\141\x63\151\144" => session("\165\156\x69\141\x63\151\144")])->field("\x6e\x61\x6d\145\x2c\x74\x65\x6c\54\141\144\x64\x72\x65\x73\163")->find(); goto vtPKM; cFFcu: $this->uniacid = session("\x75\156\x69\141\x63\x69\144"); goto RhE7B; HeZ9a: $getMessage = MessageModel::where(["\x75\x6e\x69\141\143\x69\x64" => session("\x75\x6e\x69\141\x63\x69\144"), "\x69\163\x5f\x72\x65\x61\144" => 0])->order("\x63\162\145\141\x74\145\137\x74\151\155\x65", "\x64\145\163\143")->limit(5)->select(); goto wev2b; kBAil: if (!session("\x61\x69\x64") && !session("\156\141\x6d\x65")) { goto dxSPA; } goto Ziag1; Aexo8: session("\x66\157\157\164\145\162\x6c\x65\146\164", $_W["\x73\x65\164\x74\x69\156\147"]["\x63\x6f\160\x79\x72\151\147\150\x74"]["\x66\x6f\157\x74\145\x72\154\145\146\x74"]); goto wRDGR; Ed59j: if (session("\x75\x6e\151\x61\143\151\144") == null && session("\x77\145\x37") == true) { goto JBqeG; } goto kBAil; wRDGR: session("\x69\x63\x70", $_W["\163\145\164\164\151\156\x67"]["\x63\x6f\160\171\162\x69\x67\x68\x74"]["\x69\x63\x70"]); goto pxOAV; fHAVa: tTz5a: goto Ed59j; vtPKM: $data = ["\x6b\x65\171" => config("\143\154\157\165\144\56\141\x70\151\137\x6b\x65\x79"), "\x69\x70" => gethostbyname($_SERVER["\123\105\122\126\105\122\137\x4e\101\x4d\x45"]), "\x66\x72\157\x6d\137\151\160" => \request()->ip(), "\144\157\155\x61\151\156" => $this->server, "\163\x63\150\145\155\x65" => \request()->scheme(), "\164\171\x70\145" => "\62", "\160\x6c\x75\147\x69\x6e" => $ctrl, "\141\x75\164\x68\x5f\164\171\x70\x65" => 2, "\x6e\x61\155\x65" => $settings["\156\x61\155\x65"], "\x70\x68\x6f\156\145" => $settings["\164\x65\x6c"], "\141\x64\144\162\145\163\163" => $settings["\141\x64\x64\162\145\163\163"], "\x61\x63\151\144" => session("\165\156\x69\141\143\x69\x64")]; goto M28aj; v93fu: $ctrl = $request->controller(); goto SLDAK; qQcT4: if (!(!empty($result["\144\x61\x74\x61"]["\x63\x6f\x6e\x74\x72\157\154\154\145\x72"]) && in_array($ctrl, $result["\144\x61\164\x61"]["\x63\157\156\x74\x72\x6f\x6c\154\x65\x72"]))) { goto eJVf5; } goto laGse; iwvfH: $request = \think\Request::instance(); goto v93fu; Ziag1: goto saQIl; goto gyeas; vs0iw: $this->webAuth(); goto iwvfH; GQt4T: session("\111\115\x53\x5f\x56\x45\x52\123\x49\117\x4e", $_W["\x73\145\164\x74\151\x6e\x67"]["\x73\x69\164\x65"]["\166\145\162\x73\x69\157\x6e"]); goto NAENp; M28aj: $this->cloud_post(config("\x63\154\157\x75\x64\x2e\x64\145\146\x61\165\154\x74\137\165\162\154"), $data); goto Y7o_Y; W7EYa: $this->assign(["\155\145\156\165" => $node->getMenu(session("\162\x75\x6c\x65")), "\x63\x74\x72\154" => $ctrl, "\x61\x63\x74" => $act, "\x67\145\164\115\145\163\x73\141\147\145" => $getMessage, "\147\x65\x74\115\x65\x73\x73\141\147\x65\x43\x6f\165\156\x74" => $getMessageCount]); goto cFFcu; pxOAV: if ($_W["\x73\145\x74\x74\x69\156\147"]["\x73\x69\x74\x65"]["\166\x65\x72\163\x69\157\156"] == "\61\x2e\70\x2e\60" || $_W["\x73\145\x74\x74\x69\x6e\147"]["\163\151\164\145"]["\166\145\162\x73\x69\157\156"] == "\61\x2e\x38\56\x31" || $_W["\x73\145\x74\x74\151\156\147"]["\x73\151\164\145"]["\x76\x65\x72\163\x69\157\156"] == "\61\56\x38\x2e\62" || $_W["\163\x65\164\164\x69\156\147"]["\x73\x69\164\145"]["\x76\x65\162\x73\x69\x6f\x6e"] == "\x31\56\70\56\x33") { goto phb6q; } goto hv6S1; cnw16: parent::__construct($request); goto vL6pg; NAENp: kcAvf: goto C5tn4; lTCRZ: SiGDx: goto V8Oc7; C5tn4: } public function img_upload() { goto mh4_R; IKaVu: $url = SITE_URL . $saveRoot . DS . $info->getSaveName(); goto bz4zd; A8Fs_: jhAwf: goto Zp1L9; H3JNE: if (is_dir(ROOT_PATH . $saveRoot)) { goto ztWd6; } goto rwm0a; Mjrse: if (!$_FILES["\x75\160\x6c\x6f\141\x64"]["\156\141\155\145"]) { goto jhAwf; } goto FWLGy; Lwcyu: $imgurl = "\x3c\163\x63\x72\151\x70\x74\x3e\x77\x69\x6e\x64\157\x77\56\160\141\162\145\156\164\x2e\103\113\105\x44\111\124\117\x52\x2e\164\157\x6f\x6c\163\x2e\143\141\154\154\106\x75\156\143\x74\151\x6f\x6e\x28\x22" . $CKEditorFuncNum . "\42\x2c\42" . $url . "\x22\x2c\x22\42\x29\x3b\74\x2f\163\x63\x72\x69\160\x74\x3e"; goto xvs1F; bz4zd: $url = str_replace("\x5c", "\x2f", $url); goto Lwcyu; rBPK0: ztWd6: goto IiVVu; xvs1F: echo $imgurl; goto rem0o; FWLGy: $files = request()->file("\165\x70\x6c\157\x61\144"); goto FBHJt; rem0o: JEU39: goto A8Fs_; RKk3d: if ($info) { goto iZ79x; } goto arfeY; zuKMa: goto JEU39; goto klkbg; rwm0a: mkdir(ROOT_PATH . $saveRoot, 0777, true); goto rBPK0; FBHJt: $saveRoot = "\160\x75\142\x6c\151\x63" . DS . "\x62\157\147\165\141\x6e" . DS . "\165\160\154\x6f\141\144\x73" . DS . "\145\144\151\x74\x6f\x72"; goto H3JNE; arfeY: echo "\x69\x6d\141\x67\x65\40\x65\x72\x72\x6f\162"; goto zuKMa; mh4_R: $CKEditorFuncNum = input("\103\x4b\105\144\151\164\157\x72\x46\x75\x6e\x63\116\165\155"); goto Mjrse; IiVVu: $info = $files->validate(["\x73\x69\x7a\145" => 8388608, "\145\x78\x74" => "\152\160\x67\54\152\160\145\x67\54\x70\x6e\147\54\147\x69\x66"])->move(ROOT_PATH . $saveRoot); goto RKk3d; klkbg: iZ79x: goto IKaVu; Zp1L9: } public function videoUpload() { goto SxVYM; J2cjC: t5vRi: goto hrrxu; SxVYM: if (!request()->isAjax()) { goto t5vRi; } goto HcnG6; ARH2r: if (is_dir($savePath . $saveRoot)) { goto pSvBC; } goto lavkx; z1WCX: $saveRoot = "\160\x75\x62\x6c\151\143" . DS . "\x62\x6f\x67\x75\x61\x6e" . DS . "\x75\160\x6c\x6f\x61\x64\x73" . DS . "\166\151\144\145\157" . DS . "\163\x74\157\162\x65\x5f" . session("\165\156\151\141\x63\151\x64"); goto ARH2r; a01Hz: goto spcV3; goto Uc9xP; SyeCG: $post["\156\141\x6d\145"] = $name[0]; goto RGGpJ; lavkx: mkdir($savePath . $saveRoot, 0777, true); goto ulZvt; IjAq1: $post["\165\x72\x6c"] = WE7_PATH . $saveRoot . DS . $info->getSaveName(); goto mwYZP; ARQSb: spcV3: goto J2cjC; mwYZP: $post["\165\156\x69\141\x63\151\144"] = $this->uniacid; goto SyeCG; lI34x: return json(["\x6d\163\x67" => $file->getError(), "\145\162\162\x6f\162\103\157\x64\145" => 0]); goto a01Hz; Uc9xP: GcbGf: goto aHTie; S0GC0: $name = explode("\56", $name); goto IjAq1; aHTie: $name = $info->getInfo("\x6e\141\x6d\145"); goto S0GC0; iLwrX: return json(["\x6d\x73\x67" => "\350\xa7\x86\351\xa2\x91\344\xb8\x8a\344\274\240\346\210\x90\345\212\237", "\144\141\x74\141" => ["\151\144" => $videoId, "\x75\x72\x6c" => $post["\x75\162\x6c"]], "\145\x72\x72\x6f\162\103\157\x64\145" => 1]); goto ARQSb; jmdVm: $savePath = ROOT_PATH; goto z1WCX; HcnG6: $file = request()->file("\146\x69\154\x65\x5f\144\x61\164\141"); goto jmdVm; uUl3d: $post["\x63\162\x65\x61\164\145\137\164\151\155\x65"] = time(); goto xpBEm; Y0YIZ: $info = $file->validate(["\x73\x69\x7a\x65" => 92274688, "\145\170\x74" => "\x6d\160\64"])->move($savePath . $saveRoot); goto pqLc9; ulZvt: pSvBC: goto Y0YIZ; xpBEm: $video = new Video(); goto JTX7U; JTX7U: $videoId = $video->insertGetId($post); goto iLwrX; RGGpJ: $post["\x73\x69\x7a\145"] = $info->getSize(); goto uUl3d; pqLc9: if ($info) { goto GcbGf; } goto lI34x; hrrxu: } public function videoList() { goto lDh2V; A8LTJ: $videoArr = []; goto wKDqP; yfIjg: return $videoArr; goto cOW9d; wKDqP: foreach ($images as $key => $value) { goto Aa09o; xhmxW: aJSc6: goto C11yn; KPm4m: $videoUrl = str_replace(MODEL_PATH, '', $videoUrl); goto tLjSm; KG991: $videoArr[$i]["\165\162\x6c"] = $value["\x75\x72\154"]; goto zRxFz; GyWJM: $videoUrl = str_replace("\150\x74\164\x70\163\72", '', $videoUrl); goto xjik4; tLjSm: $videoUrl = str_replace("\x68\164\x74\x70\72", '', $videoUrl); goto GyWJM; XEIy6: hwWM0: goto xhmxW; Ra08N: $videoArr[$i]["\163\x69\172\145"] = $value["\x73\151\172\145"]; goto KG991; gX7vi: $videoArr[$i]["\x69\144"] = $value["\x69\x64"]; goto D3OQC; xjik4: if (!file_exists($videoUrl)) { goto hwWM0; } goto gX7vi; Aa09o: $videoUrl = str_replace(WE7_PATH, '', $value["\x75\162\x6c"]); goto KPm4m; zRxFz: $videoArr[$i]["\164\151\155\145"] = $value["\143\x72\x65\x61\164\145\137\164\151\x6d\145"]; goto LGbGI; D3OQC: $videoArr[$i]["\x6e\141\155\145"] = $value["\x6e\x61\x6d\145"]; goto Ra08N; LGbGI: $i++; goto XEIy6; C11yn: } goto mefBF; CwFzb: $i = 0; goto A8LTJ; mefBF: myNF2: goto yfIjg; lDh2V: $images = Video::where("\x75\x6e\151\x61\143\x69\144", $this->uniacid)->order("\x69\144", "\x64\145\x73\143")->select(); goto CwFzb; cOW9d: } public function videoDel() { goto jkixa; OMDcR: J0AU6: goto zmYXn; hg9ZH: Hodca: goto Nms9Q; Nms9Q: unlink($data["\x75\x72\154"]); goto R4X_2; r79IE: $data["\165\162\154"] = str_replace(MODEL_PATH, '', $data["\165\162\x6c"]); goto zpgGb; EBCWP: $data["\165\162\x6c"] = str_replace("\150\x74\x74\160\x3a", '', $data["\165\x72\154"]); goto KRD3D; zpgGb: $data["\165\162\154"] = str_replace(MINI_WE7_PATH, '', $data["\165\x72\x6c"]); goto LhKk8; SKbsb: SXn_b: goto OMDcR; QnCg1: lau17: goto Bj616; R4X_2: if (!isset($data["\151\x64"])) { goto lau17; } goto zXyro; t0eli: $data["\x75\162\x6c"] = str_replace(WE7_PATH, '', $data["\x75\162\154"]); goto r79IE; tdoKb: return json(["\155\x73\147" => "\350\xa7\x86\351\xa2\x91\xe5\210\240\351\231\244\xe5\244\261\350\264\245", "\x65\162\162\x6f\x72\103\157\x64\145" => 0]); goto gv9Xz; OrdjO: $data = input("\160\157\163\x74\x2e"); goto t0eli; zXyro: Video::destroy($data["\x69\x64"]); goto QnCg1; Bj616: return json(["\x6d\163\147" => "\xe8\xa7\206\351\xa2\x91\345\x88\240\xe9\x99\244\xe6\210\220\xe5\x8a\237", "\145\x72\x72\x6f\x72\x43\157\144\x65" => 1]); goto SKbsb; jkixa: if (!request()->isAjax()) { goto J0AU6; } goto OrdjO; gv9Xz: goto SXn_b; goto hg9ZH; LhKk8: $data["\x75\x72\154"] = str_replace("\x68\x74\164\x70\x73\x3a", '', $data["\x75\162\154"]); goto EBCWP; KRD3D: if (file_exists($data["\165\162\154"])) { goto Hodca; } goto tdoKb; zmYXn: } public function imgUpload() { goto VdBwZ; O8F2j: if ($info) { goto Gwuey; } goto tcrwO; WkhBF: ZYGQ5: goto ZaHLk; O7mv9: $name = explode("\56", $name); goto dWhUg; uHP5m: $savePath = ROOT_PATH; goto AR_XU; tcrwO: return json(["\155\163\x67" => $file->getError(), "\145\162\x72\157\162\103\157\144\145" => 0]); goto AY8CZ; Lfkzo: $imageId = $image->insertGetId($post); goto PMGXf; Unm6_: HZe39: goto jIuoO; G2B2P: $post["\143\162\145\x61\164\x65\x5f\x74\151\x6d\x65"] = time(); goto TT9Kp; TT9Kp: $image = new Image(); goto Lfkzo; ZaHLk: pnv2t: goto TOcRb; PMGXf: return json(["\x6d\163\147" => "\xe5\233\276\xe7\x89\207\344\xb8\x8a\344\xbc\240\xe6\x88\220\345\212\x9f", "\144\141\164\x61" => ["\151\x64" => $imageId, "\x75\162\154" => $post["\165\162\x6c"], "\x6e\141\x6d\145" => $post["\156\x61\x6d\145"]], "\x65\162\162\157\x72\x43\x6f\x64\x65" => 1]); goto WkhBF; iBHCB: $file = request()->file("\151\x6d\141\147\145"); goto uHP5m; dWhUg: $post["\156\x61\x6d\145"] = $name[0]; goto nlUSJ; nlUSJ: $post["\x75\162\154"] = WE7_PATH . $saveRoot . DS . $info->getSaveName(); goto Z9S76; AR_XU: $saveRoot = "\160\x75\142\x6c\151\143" . DS . "\142\x6f\147\165\141\156" . DS . "\165\160\154\157\x61\144\x73" . DS . "\x69\x6d\141\147\145" . DS . "\x73\x74\157\x72\x65\137" . session("\165\156\x69\x61\x63\x69\x64"); goto ChVOC; ChVOC: if (is_dir($savePath . $saveRoot)) { goto HZe39; } goto AL1Zj; jIuoO: $info = $file->validate(["\163\151\172\x65" => 8388608, "\x65\x78\x74" => "\x6a\x70\147\54\152\x70\x65\147\x2c\x70\156\147\x2c\x67\151\146"])->move($savePath . $saveRoot); goto O8F2j; AY8CZ: goto ZYGQ5; goto IcMYx; Z9S76: $post["\165\156\151\141\x63\x69\x64"] = $this->uniacid; goto G2B2P; AL1Zj: mkdir($savePath . $saveRoot, 0777, true); goto Unm6_; IcMYx: Gwuey: goto QZTmR; VdBwZ: if (!request()->isAjax()) { goto pnv2t; } goto iBHCB; QZTmR: $name = $info->getInfo("\156\x61\x6d\145"); goto O7mv9; TOcRb: } public function UeImgUpload() { goto A8sjj; AP13E: return json($data); goto Ve3q8; Hpy1G: goto rP3X9; goto NfqGI; A8sjj: $config = ["\x69\155\x61\147\145\x41\x63\x74\151\x6f\156\116\141\155\145" => "\x75\160\154\x6f\x61\x64\x69\155\x61\147\x65", "\x69\155\141\x67\145\106\x69\x65\154\144\x4e\141\155\145" => "\151\155\141\x67\x65", "\x69\155\x61\x67\145\x43\x6f\x6d\160\162\x65\163\163\x45\x6e\x61\142\x6c\x65" => true, "\151\155\141\x67\x65\101\154\154\x6f\x77\x46\x69\154\x65\163" => ["\x2e\160\x6e\x67", "\56\x6a\x70\147", "\56\x6a\160\145\147", "\56\x67\151\x66", "\x2e\142\155\160"], "\x69\155\141\147\145\x4d\141\x78\x53\151\x7a\x65" => 1024 * 1024 * 8, "\x69\155\141\147\x65\125\x72\154\x50\162\145\146\x69\170" => '']; goto ILQk7; cHS7V: $post["\x75\x72\x6c"] = WE7_PATH . $saveRoot . DS . $info->getSaveName(); goto UWZKP; Kn52A: GiA3p: goto mXUqa; Fpjx9: if ($_GET["\x61\143\x74\x69\157\x6e"] == "\x63\x6f\x6e\146\151\x67") { goto ZfHvj; } goto Hpy1G; NfqGI: VF8mT: goto wPf2m; wPf2m: $file = request()->file("\x69\155\141\x67\x65"); goto wWlA3; wWlA3: if (!$file) { goto NBd2h; } goto NTuwk; NTuwk: $savePath = ROOT_PATH; goto qIuE3; ZrvwX: $data = ["\x73\x74\141\x74\x65" => "\x66\141\151\154"]; goto YBBXu; ykJs3: if (is_dir($savePath . $saveRoot)) { goto GiA3p; } goto uR2Rd; mXUqa: $info = $file->validate(["\163\x69\172\145" => 8388608, "\x65\170\164" => "\152\160\147\54\152\x70\145\147\x2c\160\156\147\54\x67\x69\x66"])->move($savePath . $saveRoot); goto kL7cD; Pc0wm: OGnUx: goto AP13E; oCIn9: goto rP3X9; goto nIb3O; UWZKP: $data = ["\163\x74\141\164\145" => "\123\125\x43\103\105\123\123", "\x75\x72\x6c" => $post["\x75\x72\x6c"]]; goto Pc0wm; DD4ue: rP3X9: goto U94Fe; qIuE3: $saveRoot = "\160\165\142\x6c\x69\143" . DS . "\x62\x6f\147\165\141\156" . DS . "\x75\x70\x6c\157\141\x64\163" . DS . "\x64\145\x66\x61\x75\154\164" . DS . "\x75\145\x64\x69\x74\x6f\x72" . DS . "\x73\x74\x6f\x72\145\137" . session("\x75\x6e\151\x61\143\151\x64"); goto ykJs3; uR2Rd: mkdir($savePath . $saveRoot, 0777, true); goto Kn52A; kL7cD: if ($info) { goto FwU4Z; } goto ZrvwX; YBBXu: goto OGnUx; goto sAltl; VWUus: return json_encode($config, JSON_UNESCAPED_UNICODE); goto DD4ue; Ve3q8: NBd2h: goto oCIn9; ILQk7: if ($_GET["\141\x63\164\151\x6f\156"] == "\165\160\154\x6f\141\x64\151\155\x61\x67\x65") { goto VF8mT; } goto Fpjx9; nIb3O: ZfHvj: goto VWUus; sAltl: FwU4Z: goto cHS7V; U94Fe: } public function manyImgUpload() { goto aCP_o; aSg3H: $saveRoot = "\x70\x75\142\154\x69\x63" . DS . "\x62\x6f\x67\x75\x61\x6e" . DS . "\165\x70\154\157\x61\x64\x73" . DS . "\144\145\146\x61\165\x6c\x74"; goto UIXGW; FW6vk: bQjnB: goto O2pL2; BGbWH: return json(["\155\x73\x67" => "\345\233\276\xe7\211\207\344\xb8\x8a\xe4\274\240\346\x88\x90\345\x8a\x9f", "\x64\x61\x74\x61" => ["\151\144" => $imageId, "\x75\x72\x6c" => $post["\165\162\x6c"]], "\145\x72\x72\157\x72\x43\157\x64\x65" => 1]); goto r3uNi; E2f8w: maB8h: goto SgofL; D4NRb: $imageId = $image->insertGetId($post); goto BGbWH; zO40s: return json(["\155\x73\x67" => $file->getError(), "\x65\x72\162\x6f\x72\x43\157\x64\x65" => 0]); goto qFzxy; OzNKS: $name = input("\146\151\154\145\x4e\141\155\x65") ? input("\x66\151\154\145\x4e\141\x6d\x65") : "\151\155\x61\147\145"; goto wKZxV; guq2W: $image = new Image(); goto D4NRb; aCP_o: if (!request()->isAjax()) { goto bQjnB; } goto OzNKS; Beeu4: if ($info) { goto maB8h; } goto zO40s; UIXGW: $info = $file->validate(["\x73\x69\x7a\145" => 8388608, "\x65\x78\164" => "\152\x70\147\54\152\x70\145\147\54\160\156\x67\x2c\147\151\x66"])->move($savePath . $saveRoot); goto Beeu4; wKZxV: $file = request()->file($name); goto O7cBR; qFzxy: goto CypBk; goto E2f8w; SgofL: $post["\165\162\x6c"] = $saveRoot . DS . $info->getSaveName(); goto guq2W; r3uNi: CypBk: goto FW6vk; O7cBR: $savePath = ROOT_PATH; goto aSg3H; O2pL2: } public function imageList() { goto qSGdH; ixBay: return $imageArr; goto DGjCw; w3Th8: foreach ($images as $key => $value) { goto ik9Bo; IBMuP: $imageUrl = str_replace(MODEL_PATH, '', $imageUrl); goto v8bnI; YNkU7: if ($value["\156\141\155\x65"] == '') { goto sybR4; } goto SZdoK; hZERJ: piiIZ: goto A1cTo; ik9Bo: $imageUrl = str_replace(WE7_PATH, '', $value["\x75\x72\x6c"]); goto IBMuP; YMCQl: $i++; goto l6JTW; v8bnI: $imageUrl = str_replace("\150\164\164\x70\x3a", '', $imageUrl); goto pCeY5; pCeY5: $imageUrl = str_replace("\150\x74\x74\160\163\x3a", '', $imageUrl); goto rpN4i; stMyC: hE2vl: goto cmwR3; cmwR3: $imageArr[$i]["\165\x72\x6c"] = $value["\165\x72\154"]; goto YMCQl; A0wmj: goto hE2vl; goto VJ4M5; VJ4M5: sybR4: goto Qbxy1; Qbxy1: $imageArr[$i]["\x6e\x61\x6d\145"] = $value["\x69\x64"]; goto stMyC; SZdoK: $imageArr[$i]["\156\141\155\145"] = $value["\156\141\x6d\145"]; goto A0wmj; cMWzR: $imageArr[$i]["\x69\144"] = $value["\151\x64"]; goto YNkU7; l6JTW: ukWty: goto hZERJ; rpN4i: if (!file_exists($imageUrl)) { goto ukWty; } goto cMWzR; A1cTo: } goto qOeyo; qSGdH: $images = Image::where("\165\156\151\141\143\x69\144", $this->uniacid)->order("\x69\144", "\144\145\163\143")->select(); goto BMXK8; BMXK8: $i = 0; goto BX4Hx; BX4Hx: $imageArr = []; goto w3Th8; qOeyo: Hfzg6: goto ixBay; DGjCw: } public function getContentByType() { goto SB1De; ozIaO: return json(["\164\171\x70\x65" => $type, "\144\141\x74\x61" => $data, "\145\x72\162\157\x72\x43\x6f\x64\x65" => 1]); goto vEJA6; efCJy: switch ($type) { case "\160\x72\157\144\x75\x63\x74\163": goto Api5_; qdOCI: $data["\x63\x61\164\x65\147\x6f\162\171"] = $product["\143\x61\164\145\x67\x6f\162\171"]; goto UlCbL; UlCbL: goto ydWze; goto h9EtZ; Ff1B1: $data["\154\151\163\164\163"] = $product["\160\162\x6f\144\x75\x63\164"]; goto qdOCI; Api5_: $product = ProductModel::getProductListByCategory(); goto Ff1B1; h9EtZ: case "\143\157\x75\x70\157\x6e\163": goto jNWXf; jNWXf: $coupon = Coupon::getAllCoupons(); goto t8udI; yRQ9N: goto ydWze; goto P_wbb; t8udI: $data["\154\x69\x73\x74\x73"] = $coupon; goto y7Vig; y7Vig: $data["\x63\141\164\x65\147\157\x72\171"] = [["\x69\x64" => 0, "\x6e\141\x6d\x65" => "\xe6\234\252\xe5\x88\206\xe7\xbb\204", "\x70\141\162\x65\x6e\x74\x49\x64" => "\61", "\x6c\145\x76\x65\154" => "\61", "\x63\x68\151\154\x64" => ["\60"]]]; goto yRQ9N; P_wbb: case "\141\x72\x74\x69\143\x6c\145\x73": goto uSSb1; uSSb1: $content = ContentModel::getContentListByCategory(); goto KXv2Z; KXv2Z: $data["\154\x69\x73\x74\163"] = $content["\x63\157\x6e\x74\x65\156\164"]; goto SOxcc; WdSdH: goto ydWze; goto ozgIY; SOxcc: $data["\143\141\164\145\x67\157\x72\x79"] = $content["\x63\x61\x74\x65\x67\x6f\162\x79"]; goto WdSdH; ozgIY: default: $data = ["\x6c\x69\163\x74\x73" => [], "\x63\x61\164\145\x67\157\162\171" => []]; } goto xJf93; uzWs3: ydWze: goto ozIaO; SB1De: $type = input("\x70\157\x73\164\56\x74\x79\160\145"); goto efCJy; xJf93: sUvVo: goto uzWs3; vEJA6: } public function productList() { goto mn0tM; vxDgB: return $data; goto rPa0u; mn0tM: $product = ProductModel::getProductListByCategory(); goto maM59; maM59: $data["\x70\x72\x6f\144\165\x63\164"] = $product["\160\162\x6f\x64\x75\x63\x74"]; goto CNSAC; CNSAC: $data["\143\x61\x74\x65\147\x6f\x72\171"] = $product["\x63\x61\x74\145\147\157\x72\171"]; goto vxDgB; rPa0u: } public function userList() { goto etxMc; Gj3dZ: $data = []; goto Ju4KM; etxMc: $user = UserModel::where("\141\x76\x61\x74\x61\162", "\x3c\76", '')->where("\x75\x6e\151\141\x63\151\144", $this->uniacid)->order("\151\144", "\144\x65\x73\143")->select(); goto Gj3dZ; qNkje: pHlui: goto D73jf; D73jf: $userInfo = $data; goto m8XlJ; m8XlJ: return $userInfo; goto fyTEf; Ju4KM: foreach ($user as $key => $value) { goto kiFFa; kiFFa: $data[$key]["\x69\x64"] = $value["\x69\144"]; goto xNYP6; xNYP6: $data[$key]["\x6e\x61\155\145"] = $value["\156\x69\143\x6b\156\x61\x6d\x65"]; goto oExqE; I56zU: NVoqF: goto BHTJL; oExqE: $data[$key]["\x69\x6d\x67"] = $value["\x61\x76\141\164\x61\162"]; goto I56zU; BHTJL: } goto qNkje; fyTEf: } public function officialUserList() { goto FD7NS; j68wG: $data = []; goto OiR2w; fF2Ri: return $userInfo; goto FBxUC; O4biB: xxUlQ: goto H7a4_; H7a4_: $userInfo = $data; goto fF2Ri; FD7NS: $user = PublicUserModel::where("\141\x76\141\164\x61\x72", "\74\76", '')->where("\x75\156\151\141\143\151\144", $this->uniacid)->order("\151\144", "\x64\x65\163\143")->select(); goto j68wG; OiR2w: foreach ($user as $key => $value) { goto cQePV; wAYUX: $data[$key]["\156\x61\x6d\x65"] = $value["\x6e\151\143\153\x6e\x61\155\145"]; goto PCSk4; cQePV: $data[$key]["\x69\x64"] = $value["\x69\x64"]; goto wAYUX; epUN9: QmzwS: goto CIDnw; PCSk4: $data[$key]["\x69\155\147"] = $value["\x61\166\141\x74\141\x72"]; goto epUN9; CIDnw: } goto O4biB; FBxUC: } public function imgUploadDel() { goto cx7aC; F_97_: $data["\x75\162\154"] = str_replace(MINI_WE7_PATH, '', $data["\165\x72\154"]); goto kBHsR; th2_J: if (empty($data["\151\x64"])) { goto xp37N; } goto oMa13; BUApj: $data["\x75\162\x6c"] = str_replace(MODEL_PATH, '', $data["\165\162\x6c"]); goto tOGGj; cx7aC: if (!request()->isAjax()) { goto ac3sh; } goto VyauM; LOuRM: goto h6DfJ; goto vWAOs; GyN_n: return json(["\155\163\147" => "\345\233\276\xe7\211\x87\345\210\xa0\xe9\x99\244\346\x88\220\xe5\212\237", "\x65\162\x72\157\x72\103\157\x64\x65" => 1]); goto sjDso; kBHsR: $data["\x75\162\154"] = str_replace("\150\164\x74\160\163\x3a", '', $data["\x75\162\154"]); goto mcdnf; i23Tz: ac3sh: goto umjTI; vWAOs: JVOOZ: goto aaR52; oMa13: Image::destroy($data["\151\x64"]); goto fjMh_; fjMh_: xp37N: goto GyN_n; tOGGj: $data["\x75\162\x6c"] = str_replace(WE_PATH, '', $data["\165\162\x6c"]); goto F_97_; VyauM: $data = input("\x70\x6f\163\x74\56"); goto dQVH6; bUI0a: if (file_exists($data["\x75\162\x6c"])) { goto JVOOZ; } goto MLCA0; aaR52: unlink($data["\165\162\154"]); goto th2_J; sjDso: h6DfJ: goto i23Tz; dQVH6: $data["\165\x72\x6c"] = str_replace(WE7_PATH, '', $data["\x75\x72\x6c"]); goto BUApj; MLCA0: return json(["\x6d\163\147" => "\345\233\276\347\211\207\xe5\x88\240\351\231\xa4\345\244\xb1\xe8\264\245", "\145\162\x72\x6f\162\103\157\144\x65" => 0]); goto LOuRM; mcdnf: $data["\x75\x72\x6c"] = str_replace("\x68\164\164\160\x3a", '', $data["\165\x72\154"]); goto bUI0a; umjTI: } public function cache() { goto jA3sn; OB_sD: goto USYSc; goto FOEVM; nOzng: $log_dir = "\162\x75\156\x74\x69\x6d\x65" . DS . "\154\157\x67" . DS; goto xgzoM; WOUuJ: foreach ($log_path as $v) { goto Ft0re; SbJ_h: $log_status = true; goto c60Ca; EPCdo: Q64la: goto lN5B_; c60Ca: qaMJi: goto EPCdo; zxDfY: if (!unlink($log_path)) { goto qaMJi; } goto SbJ_h; Ft0re: $log_path = $v; goto zxDfY; lN5B_: } goto UoxX5; K84n1: SJk9n: goto nOzng; jA3sn: $temp_dir = "\162\165\156\x74\x69\x6d\x65" . DS . "\x74\145\155\x70" . DS; goto PWEHw; IahpI: foreach ($temp_path as $v) { goto RPTKp; LHTN5: sQKE8: goto qQ_M_; TXmqg: IZmYf: goto LHTN5; RPTKp: $temp_path = $v; goto btvLx; btvLx: if (!unlink($temp_path)) { goto IZmYf; } goto OWQpy; OWQpy: $temp_status = true; goto TXmqg; qQ_M_: } goto K84n1; xgzoM: chmod($log_dir, 0777); goto csPTJ; FOEVM: qu_LG: goto vWjwu; UoxX5: TnZfW: goto Ism3Y; vWjwu: return ["\x6d\x73\x67" => "\xe6\x9b\xb4\346\226\xb0\xe6\210\220\xe5\212\237", "\145\x72\162\157\x72\x43\157\144\145" => 1]; goto G0Wra; Ism3Y: if (Cache::clear() && ($temp_status !== false || $log_status !== false)) { goto qu_LG; } goto VqYWP; jONSz: $temp_status = false; goto IahpI; PWEHw: $temp_path = glob($temp_dir . "\52\x2e\x70\150\160"); goto jONSz; G0Wra: USYSc: goto gNwN1; yl49q: $log_status = false; goto WOUuJ; csPTJ: $log_path = glob($log_dir . "\x2a" . DS . "\x2a\56\x6c\157\147"); goto yl49q; VqYWP: return ["\155\x73\147" => "\346\223\215\344\xbd\x9c\xe9\242\221\347\271\201\xef\xbc\214\350\257\xb7\347\xa8\215\xe5\200\231\345\206\x8d\xe8\xaf\x95", "\x65\162\162\x6f\x72\103\157\x64\145" => 0]; goto OB_sD; gNwN1: } }