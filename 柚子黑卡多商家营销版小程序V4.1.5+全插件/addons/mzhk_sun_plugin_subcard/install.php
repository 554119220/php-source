<?php
$tablename = trim(tablename('mzhk_sun'),"`");
pdo_query("
CREATE TABLE IF NOT EXISTS `".$tablename."_subcard_set` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uniacid` int(11) NOT NULL,
  `opensubcard` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否开启次卡插件 0 不开启 1 开启',
  `listimgs` text NOT NULL COMMENT '次卡列表轮播图',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `".$tablename."_subcard_goods` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uniacid` int(11) NOT NULL,
  `gname` varchar(100) NOT NULL COMMENT '次卡名称',
  `bid` int(11) NOT NULL DEFAULT '0' COMMENT '所属商家',
  `cateid` int(11) NOT NULL DEFAULT '0' COMMENT '所属分类',
  `originalprice` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '原价',
  `subcardprice` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '现价',
  `num` int(11) NOT NULL DEFAULT '0' COMMENT '库存',
  `virtualnum` int(11) NOT NULL DEFAULT '0' COMMENT '虚拟销量',
  `stocktype` int(11) NOT NULL DEFAULT '0' COMMENT '库存计数方式 0 下单减库存 1 付款减库存',
  `canrefund` int(11) NOT NULL DEFAULT '0' COMMENT '是否可以退款 0 可退款 1 不可退款',
  `limitnum` int(11) NOT NULL DEFAULT '0' COMMENT '每人限购数',
  `tid` int(11) NOT NULL DEFAULT '0' COMMENT '首页推荐 0 不推荐 1 推荐',
  `is_vip` int(11) NOT NULL DEFAULT '0' COMMENT '是否会员商品 0 不是 1 是',
  `vipprice` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '会员价格',
  `astime` varchar(100) NOT NULL COMMENT '开始时间',
  `antime` varchar(100) NOT NULL COMMENT '结束时间',
  `expirationtime` varchar(100) NOT NULL COMMENT '核销结束时间',
  `sort` int(11) NOT NULL DEFAULT '255' COMMENT '排序',
  `index_img` varchar(100) NOT NULL COMMENT '首页风格1和活动推荐展示图',
  `pic` varchar(100) NOT NULL COMMENT '首页风格2、活动商品列表页、商家详情页展示图',
  `index3_img` varchar(100) NOT NULL COMMENT '首页风格3展示图',
  `content` text NOT NULL COMMENT '详情内容',
  `daynum` int(11) NOT NULL DEFAULT '0' COMMENT '每日可核销数',
  `monthnum` int(11) NOT NULL DEFAULT '0' COMMENT '每月可核销数',
  `minnum` int(11) NOT NULL DEFAULT '0' COMMENT '每次最少核销数',
  `maxnum` int(11) NOT NULL DEFAULT '0' COMMENT '每次最多核销数',
  `months` int(11) NOT NULL DEFAULT '0' COMMENT '自动核销日期',
  `writenums` int(11) NOT NULL DEFAULT '0' COMMENT '自动核销次数',
  `firstwnums` int(11) NOT NULL DEFAULT '0' COMMENT '首次可核销数',
  `status` int(11) NOT NULL DEFAULT '1' COMMENT '状态 0 隐藏 1 显示',
  `addtime` varchar(100) NOT NULL COMMENT '添加时间',
  `lb_imgs` varchar(200) NOT NULL COMMENT '详情轮播图',
  `buynum` int(11) NOT NULL DEFAULT '0' COMMENT '已售商品数',
  `pnums` int(11) NOT NULL DEFAULT '0' COMMENT '商品说明数目',
  `pname` varchar(50) NOT NULL COMMENT '商品说明名称',
  `distribution_open` tinyint(1) NOT NULL DEFAULT '0' COMMENT '0不开启单独分销，1开启',
  `distribution_commissiontype` tinyint(1) NOT NULL DEFAULT '1' COMMENT '1百分比，2固定金额',
  `firstmoney` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '一级佣金',
  `secondmoney` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '二级佣金',
  `thirdmoney` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '三级佣金',
  `gcateid` INT(11) NOT NULL DEFAULT '0' COMMENT '主题分类id',
  `lid` INT(11) NOT NULL DEFAULT '12' COMMENT '商品类型',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=13 DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `".$tablename."_subcard_order` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uniacid` int(11) NOT NULL,
  `ordernum` varchar(100) NOT NULL COMMENT '订单号',
  `telnumber` varchar(50) NOT NULL COMMENT '用户电话',
  `money` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '订单金额',
  `status` int(11) NOT NULL DEFAULT '2' COMMENT '1 取消订单，2待支付，3待发货，4已支付，5已完成',
  `openid` varchar(100) NOT NULL COMMENT '用户openid',
  `addtime` varchar(100) NOT NULL COMMENT '添加时间',
  `gid` int(11) NOT NULL DEFAULT '0' COMMENT '商品id',
  `gname` varchar(200) NOT NULL COMMENT '商品名称',
  `num` int(11) NOT NULL DEFAULT '0' COMMENT '订单数量',
  `goodsimg` varchar(100) NOT NULL COMMENT '商品缩量图',
  `bid` int(11) NOT NULL DEFAULT '0' COMMENT '所属商家id',
  `expirationtime` varchar(100) NOT NULL COMMENT '核销过期时间',
  `paytype` varchar(100) NOT NULL COMMENT '支付方式 1 微信支付 2 余额支付',
  `cateid` int(11) NOT NULL DEFAULT '0' COMMENT '所属分类id',
  `paytime` varchar(100) NOT NULL COMMENT '付款时间',
  `out_trade_no` varchar(100) NOT NULL COMMENT '支付外部订单号',
  `out_refund_no` varchar(100) NOT NULL COMMENT '退款外部订单号',
  `isrefund` tinyint(1) NOT NULL DEFAULT '0' COMMENT '0正常，1申请退款，2已退款，3拒绝退款',
  `haswrittenoffnum` int(11) NOT NULL DEFAULT '0' COMMENT '已核销数',
  `is_store_submac` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否使用商家子商户号收款，0未启用，1启用',
  `sub_mch_id` varchar(255) NOT NULL COMMENT '子商户号id',
  `subcardprice` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '商品价格',
  `vipprice` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '会员价格',
  `pnums` int(11) NOT NULL DEFAULT '0' COMMENT '商品说明数目',
  `finishtime` varchar(100) NOT NULL COMMENT '完成时间',
  `bname` varchar(100) NOT NULL COMMENT '商家名称',
  `uremark` varchar(100) NOT NULL COMMENT '备注',
  `parent_id_1` int(11) NOT NULL COMMENT '一级id',
  `parent_id_2` int(11) NOT NULL COMMENT '二级id',
  `parent_id_3` int(11) NOT NULL COMMENT '三级id',
  `rid` INT(11) NOT NULL DEFAULT '0' COMMENT '红包id',
  `rmoney` DECIMAL(10,2) NOT NULL DEFAULT '0' COMMENT '使用红包金额',
  `source` TINYINT(1) NOT NULL DEFAULT '0' COMMENT '红包金额来源 0 正常支付 1 商家 2 平台',
  `fbid` INT(11) NOT NULL DEFAULT '0' COMMENT '联盟红包来源商家id',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=106 DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `".$tablename."_subcard_scate` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uniacid` int(11) NOT NULL,
  `scatename` varchar(100) NOT NULL COMMENT '分类名称',
  `sort` int(11) NOT NULL DEFAULT '255' COMMENT '排序',
  `status` tinyint(1) NOT NULL DEFAULT '0' COMMENT '状态 0 隐藏 1 显示',
  `addtime` varchar(100) NOT NULL COMMENT '添加时间',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=9 DEFAULT CHARSET=utf8;

");