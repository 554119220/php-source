<?php
 goto qGwp0; P0LLr: function sendtelmessage($openid = '', $tpltype = '', $haveformid = '', $data = '') { goto GpCfP; GpCfP: global $_W; goto CXhRq; uQGqU: $access_token = getaccess_token(); goto sPrl2; tMOrf: return false; goto YKhRx; FbbtW: $delres = pdo_delete("\155\172\150\x6b\137\x73\x75\156\x5f\165\x73\x65\162\x66\x6f\x72\x6d\151\144", array("\146\157\162\x6d\137\x69\144" => $form_id, "\x75\x6e\151\141\143\151\x64" => $_W["\x75\156\x69\141\143\x69\144"])); goto ipp64; MdvNm: k9aHP: goto mzA1c; ibvTx: $now = date("\131\x2d\155\x2d\144", strtotime("\x2d\67\x20\144\x61\x79\163")); goto agesw; nfAQx: $delres = pdo_delete("\155\172\x68\153\x5f\x73\x75\156\137\x75\163\145\162\146\x6f\162\155\x69\144", array("\x74\x69\155\145\40\x3c\75" => date("\x59\x2d\x6d\x2d\144", strtotime("\x2d\x37\x20\x64\x61\x79\x73")), "\165\156\x69\141\x63\x69\144" => $_W["\x75\x6e\x69\141\143\x69\x64"])); goto K6nL_; jsZVx: gv3vZ: goto H1WG0; xRAVX: BIpQH: goto nfAQx; SM92d: if (empty($form_id)) { goto gv3vZ; } goto brYTN; bvUNh: if (!empty($tpl)) { goto XlBRH; } goto Nk9sB; agesw: $sql = "\x73\145\x6c\145\x63\164\40\x66\x6f\162\155\137\151\144\40\146\162\x6f\x6d\x20" . tablename("\155\172\x68\153\x5f\163\165\156\x5f\165\x73\x65\x72\146\157\x72\x6d\x69\144") . "\40\x77\150\145\x72\x65\40\157\x70\x65\156\x69\144\x3d\x27" . $openid . "\47\x20\141\156\144\40\164\x69\x6d\145\x3e\75\47" . $now . "\x27\40\x6f\162\144\x65\162\x20\142\171\x20\x69\x64\x20\x61\x73\143"; goto uQovZ; YKhRx: UItEs: goto m3Rpt; CXhRq: if (!empty($openid)) { goto UItEs; } goto tMOrf; K6nL_: $delres = pdo_delete("\x6d\x7a\150\153\137\163\x75\x6e\137\x75\x73\145\162\146\x6f\x72\x6d\151\x64", array("\146\157\162\x6d\x5f\151\144\40\x6c\151\153\x65" => "\x6d\x6f\143\153", "\x75\x6e\x69\141\x63\x69\144" => $_W["\x75\x6e\151\x61\143\x69\x64"])); goto ibvTx; ipp64: G2eZ3: goto S58pq; dOwYn: $url = "\x68\164\x74\160\x73\72\x2f\x2f\141\160\x69\x2e\x77\145\151\170\151\156\56\161\161\x2e\x63\x6f\155\x2f\x63\147\x69\55\x62\x69\156\57\155\145\x73\163\141\x67\145\x2f\x77\170\x6f\x70\x65\156\57\164\145\155\160\154\141\164\145\57\x73\145\x6e\x64\x3f\x61\143\x63\145\163\x73\137\164\x6f\153\145\x6e\x3d" . $access_token . ''; goto o6tGs; uQovZ: $form_id = pdo_fetchcolumn($sql); goto FbbtW; oWyGV: uWQ2I: goto jsZVx; m3Rpt: if (empty($haveformid)) { goto BIpQH; } goto lqo4D; mzA1c: JnOHA: goto uQGqU; o6tGs: tocurl($url, $formwork, 0); goto oWyGV; G1G4P: goto G2eZ3; goto xRAVX; lqo4D: $form_id = $haveformid; goto G1G4P; Nk9sB: return false; goto jpGdn; S58pq: $d_set = pdo_get("\x6d\172\x68\x6b\137\163\165\156\x5f\144\151\163\164\162\151\142\x75\164\x69\157\x6e\x5f\x73\145\164", array("\x75\156\151\x61\x63\x69\x64" => $_W["\x75\x6e\151\141\143\151\144"]), array("\x74\x70\154\137\167\144\137\x61\x72\x72\151\166\x61\154", "\164\x70\x6c\137\167\144\x5f\x66\x61\x69\x6c", "\x74\160\x6c\137\163\x68\141\162\x65\137\143\150\145\x63\x6b")); goto SM92d; brYTN: $tpl = $d_set[$tpltype]; goto bvUNh; jpGdn: XlBRH: goto e1Z22; e1Z22: switch ($tpltype) { case "\164\160\154\137\167\144\x5f\141\x72\x72\151\x76\141\x6c": $formwork = "\173\xa\40\x20\40\40\40\40\x20\40\x20\x20\x20\x20\x20\x20\x20\x20\x20\40\40\40\42\x74\x6f\165\163\x65\162\42\x3a\40\x22" . $openid . "\42\x2c\xa\40\x20\40\x20\40\x20\x20\x20\40\40\x20\x20\x20\40\40\40\x20\40\40\40\x22\x74\145\155\160\x6c\141\164\145\137\x69\144\42\x3a\40\42" . $tpl . "\42\54\12\40\40\x20\40\x20\x20\x20\40\x20\40\40\x20\x20\x20\x20\x20\40\40\x20\40\x22\160\141\147\145\42\72\42\155\x7a\150\x6b\137\163\165\156\57\160\x61\x67\145\163\x2f\151\156\144\x65\x78\57\x69\156\x64\145\170\42\54\xa\x20\x20\x20\40\x20\40\40\x20\x20\40\40\x20\40\40\40\x20\40\x20\40\40\x22\x66\157\x72\x6d\x5f\x69\144\42\x3a\42" . $form_id . "\x22\x2c\12\40\40\40\x20\40\x20\x20\40\x20\x20\x20\40\x20\x20\40\x20\40\40\x20\40\x22\144\141\164\x61\42\x3a\x20\173\xa\40\40\40\x20\40\x20\40\40\40\x20\x20\40\40\40\40\x20\x20\x20\x20\40\40\40\40\40\42\x6b\145\x79\x77\x6f\162\x64\x31\42\72\40\173\12\x20\40\40\40\40\x20\40\40\x20\x20\40\x20\40\40\x20\40\x20\40\40\40\40\40\x20\x20\40\40\x20\x20\42\x76\141\x6c\x75\x65\x22\x3a\x20\42" . $data["\x70\x72\151\143\x65"] . "\42\54\12\x20\x20\40\40\x20\x20\40\40\x20\40\x20\40\40\x20\40\40\x20\x20\40\40\40\40\x20\x20\x20\x20\40\40\x22\x63\x6f\x6c\x6f\x72\x22\72\x20\42\43\x31\67\63\61\x37\67\x22\xa\x20\x20\40\40\x20\40\40\40\40\40\x20\40\x20\40\40\40\x20\40\x20\40\40\x20\40\40\175\x2c\12\40\x20\x20\40\x20\40\40\40\x20\x20\x20\40\40\40\x20\40\40\40\40\x20\x20\x20\x20\x20\x22\x6b\x65\171\x77\x6f\162\x64\x32\42\x3a\40\173\xa\x20\40\x20\x20\x20\40\x20\x20\40\40\x20\40\x20\x20\40\x20\40\x20\40\x20\x20\40\40\40\x20\x20\40\40\42\x76\141\x6c\165\145\x22\72\x22" . $data["\x72\141\x74\145\163\x6d\157\x6e\145\171"] . "\x22\54\xa\40\40\40\40\40\x20\40\x20\x20\x20\x20\40\40\x20\x20\x20\40\x20\40\x20\40\x20\x20\40\40\x20\40\40\42\143\157\x6c\157\x72\42\x3a\40\42\x23\61\x37\x33\x31\x37\x37\x22\12\x20\x20\x20\x20\40\x20\40\x20\40\x20\40\x20\x20\x20\40\x20\40\x20\x20\x20\40\x20\40\x20\x7d\54\12\40\40\x20\x20\40\40\x20\x20\40\x20\x20\x20\40\x20\x20\40\40\x20\x20\40\40\x20\x20\x20\42\153\145\x79\x77\x6f\x72\144\x33\42\x3a\40\173\xa\x20\40\x20\x20\40\x20\40\40\40\x20\x20\40\40\40\x20\x20\x20\x20\x20\40\x20\40\40\40\40\x20\40\x20\42\166\141\x6c\165\x65\x22\x3a\x20\x22" . $data["\162\x65\x61\154\x6d\x6f\x6e\145\x79"] . "\x22\x2c\xa\40\40\x20\40\x20\x20\40\40\40\x20\x20\40\x20\40\40\x20\40\x20\x20\x20\40\x20\x20\x20\x20\40\40\40\42\x63\157\x6c\x6f\x72\42\x3a\40\42\x23\x31\67\63\x31\67\x37\x22\12\40\x20\x20\40\x20\40\x20\40\40\40\x20\40\40\40\40\40\x20\40\40\x20\40\40\x20\x20\175\x2c\xa\x20\40\x20\x20\40\x20\x20\40\40\x20\40\40\40\x20\x20\x20\x20\x20\x20\x20\40\x20\x20\x20\x22\x6b\145\171\167\157\162\x64\x34\42\x3a\40\x7b\12\x20\40\x20\40\x20\x20\x20\x20\x20\x20\x20\40\x20\x20\x20\x20\40\x20\x20\40\40\40\x20\x20\x20\x20\x20\x20\42\x76\x61\x6c\165\145\42\72\42\xe5\267\262\345\210\xb0\xe8\264\246\42\x2c\xa\x20\x20\x20\40\40\x20\40\x20\x20\x20\40\40\40\40\40\x20\x20\x20\x20\x20\x20\x20\40\x20\x20\40\x20\x20\x22\x63\157\x6c\157\x72\x22\72\x20\42\43\x31\67\63\61\67\x37\x22\12\40\40\x20\x20\x20\x20\x20\x20\40\40\40\40\x20\x20\x20\40\40\40\x20\x20\40\40\40\40\x7d\54\xa\40\40\x20\40\x20\40\x20\40\40\x20\40\x20\40\40\40\40\40\40\x20\x20\x20\40\x20\x20\x22\x6b\145\171\x77\157\x72\x64\x35\x22\72\40\x7b\xa\x20\40\x20\40\40\x20\x20\x20\40\x20\40\40\40\x20\40\40\40\x20\x20\x20\40\x20\x20\x20\x20\x20\x20\x20\42\x76\x61\x6c\x75\145\x22\72\40\x22" . $data["\x77\144\x5f\164\171\160\x65"] . "\x22\x2c\12\40\40\40\40\40\x20\40\40\x20\x20\40\40\40\40\40\x20\x20\40\x20\x20\x20\x20\40\x20\x20\40\x20\x20\x22\143\x6f\154\x6f\x72\42\x3a\x20\x22\x23\x31\x37\63\x31\67\67\x22\xa\40\40\40\x20\40\x20\40\x20\40\40\40\40\x20\x20\40\40\40\x20\40\x20\x20\x20\40\40\175\xa\x20\40\40\40\x20\x20\40\x20\40\40\x20\x20\x20\40\x20\x20\x20\40\40\x20\x7d\x20\40\40\12\x20\x20\x20\40\40\x20\40\40\40\40\40\x20\40\40\x20\40\175"; goto JnOHA; case "\x74\x70\154\x5f\x77\x64\x5f\146\141\151\x6c": $formwork = "\x7b\12\40\x20\x20\x20\x20\x20\x20\40\40\40\40\40\x20\x20\40\x20\x20\x20\x20\40\42\x74\x6f\165\163\x65\162\42\x3a\x20\42" . $openid . "\42\54\12\40\x20\40\40\40\40\x20\x20\x20\40\40\x20\40\x20\40\x20\40\40\x20\40\x22\164\x65\155\x70\x6c\141\164\145\137\x69\x64\42\x3a\40\42" . $tpl . "\x22\54\xa\40\x20\x20\x20\40\40\40\40\40\x20\40\40\40\40\40\x20\x20\x20\x20\40\x22\x70\141\147\145\x22\72\x22\x6d\172\150\153\137\x73\x75\x6e\x2f\x70\141\147\x65\x73\x2f\x69\x6e\144\x65\x78\57\151\x6e\x64\x65\170\x22\54\12\40\x20\40\x20\40\x20\x20\x20\40\40\x20\x20\40\40\40\x20\x20\40\x20\40\x22\x66\157\x72\x6d\x5f\x69\144\x22\x3a\x22" . $form_id . "\42\x2c\12\40\40\40\40\x20\x20\40\x20\40\40\x20\40\40\40\40\40\40\x20\40\40\42\144\x61\x74\141\42\x3a\x20\173\xa\x20\40\x20\40\40\x20\x20\40\x20\x20\40\40\40\40\x20\x20\x20\40\x20\40\40\40\40\40\42\x6b\145\171\x77\x6f\162\x64\61\x22\72\40\173\12\x20\40\40\40\x20\40\x20\x20\x20\40\x20\x20\x20\x20\x20\40\40\40\x20\40\40\x20\40\x20\40\x20\x20\40\42\166\x61\x6c\x75\145\42\x3a\x20\42" . $data["\x70\x72\x69\143\145"] . "\42\54\xa\x20\40\x20\x20\x20\x20\x20\40\x20\40\x20\40\40\40\40\x20\40\x20\40\40\40\x20\40\40\x20\40\40\x20\42\x63\157\x6c\157\162\42\72\40\42\43\x31\x37\x33\x31\67\x37\42\12\x20\40\40\x20\40\40\x20\40\40\x20\40\x20\40\40\40\x20\40\40\40\40\40\x20\40\40\x7d\54\12\40\40\40\40\x20\x20\40\40\40\x20\40\x20\x20\40\x20\40\x20\x20\x20\x20\x20\40\x20\x20\42\153\x65\171\167\157\x72\144\62\42\72\x20\173\xa\x20\x20\40\40\x20\40\40\x20\x20\40\40\x20\x20\x20\x20\40\40\x20\x20\40\40\x20\40\x20\x20\40\x20\x20\x22\166\141\x6c\165\145\x22\x3a\42\xe6\x8f\x90\347\216\xb0\xe5\xa4\261\350\xb4\245\357\274\x8c\350\xaf\xb7\xe8\x81\x94\347\263\273\xe5\xb0\217\347\250\x8b\xe5\xba\x8f\350\277\x90\xe8\220\245\345\225\x86\x22\54\xa\x20\40\x20\x20\x20\40\40\40\40\x20\x20\40\x20\x20\x20\x20\40\40\x20\40\x20\40\x20\40\40\40\40\40\x22\x63\157\x6c\x6f\162\x22\x3a\x20\42\43\x31\67\x33\61\67\x37\x22\xa\x20\x20\x20\40\x20\x20\x20\x20\x20\x20\x20\40\x20\40\40\40\40\40\40\x20\40\x20\40\40\175\xa\x20\x20\40\x20\40\40\40\40\x20\x20\x20\40\x20\x20\x20\x20\40\40\x20\40\175\x20\x20\40\12\x20\40\40\40\40\x20\40\x20\40\40\40\40\x20\40\40\x20\175"; goto JnOHA; case "\164\160\x6c\x5f\x73\150\x61\x72\x65\x5f\x63\150\x65\143\x6b": $formwork = "\173\xa\x20\x20\x20\x20\40\x20\40\x20\x20\x20\x20\40\40\x20\x20\40\x20\40\40\40\42\164\157\x75\163\145\162\42\x3a\40\x22" . $openid . "\x22\x2c\xa\40\40\x20\40\40\40\x20\x20\x20\x20\40\x20\40\x20\40\40\x20\40\x20\40\x22\x74\145\x6d\x70\x6c\x61\x74\x65\137\151\x64\x22\x3a\40\x22" . $tpl . "\42\54\xa\40\x20\40\40\x20\40\x20\x20\40\x20\x20\40\x20\x20\x20\40\x20\x20\x20\40\x22\x70\141\x67\145\42\72\42\x6d\172\x68\153\x5f\163\165\156\57\x70\x61\147\145\163\x2f\x69\156\x64\145\170\x2f\x69\x6e\144\145\170\x22\x2c\12\x20\x20\x20\40\40\x20\40\40\x20\x20\40\x20\40\x20\40\x20\x20\x20\x20\x20\42\x66\157\162\155\x5f\x69\x64\42\x3a\42" . $form_id . "\x22\x2c\xa\x20\x20\x20\40\x20\40\40\40\40\x20\x20\40\x20\40\x20\40\40\x20\x20\40\42\144\x61\x74\141\x22\72\x20\173\12\40\40\x20\40\x20\x20\x20\x20\x20\40\x20\x20\40\40\40\x20\40\40\x20\40\40\40\x20\40\42\153\145\171\167\x6f\162\x64\x31\x22\72\x20\173\xa\x20\40\40\40\40\40\x20\40\40\40\40\x20\40\40\x20\x20\40\x20\x20\40\x20\x20\x20\x20\x20\40\x20\x20\42\x76\x61\x6c\165\x65\x22\72\40\x22" . $data["\x73\x74\x61\164\x75\x73"] . "\x22\x2c\xa\40\40\40\x20\40\x20\40\40\x20\40\x20\40\x20\40\40\x20\40\x20\40\x20\x20\x20\40\40\x20\40\40\40\42\143\157\x6c\x6f\x72\x22\72\40\42\x23\x31\x37\63\61\67\x37\x22\12\x20\40\40\x20\x20\40\40\40\40\x20\x20\40\40\x20\x20\40\x20\x20\x20\x20\x20\40\x20\40\x7d\x2c\xa\40\40\40\x20\40\x20\x20\40\40\x20\x20\x20\x20\40\x20\x20\x20\40\x20\40\x20\x20\x20\40\x22\153\x65\x79\x77\x6f\162\144\62\x22\72\x20\x7b\xa\x20\x20\40\x20\40\x20\40\40\40\x20\40\x20\x20\x20\x20\x20\x20\x20\40\x20\x20\x20\40\40\40\40\40\40\42\x76\x61\154\165\x65\x22\72\x22" . date("\x59\55\x6d\55\144\40\110\72\151\72\x73") . "\42\x2c\12\x20\x20\x20\x20\x20\40\x20\40\40\x20\x20\x20\40\x20\40\40\40\40\40\40\40\x20\x20\x20\40\40\40\x20\42\143\157\x6c\x6f\162\x22\x3a\40\x22\x23\61\x37\x33\61\x37\x37\x22\12\x20\40\x20\40\x20\40\40\x20\40\40\x20\x20\40\40\x20\40\40\x20\40\40\x20\40\x20\40\x7d\54\xa\x20\40\x20\x20\40\x20\40\40\40\x20\40\x20\40\x20\x20\40\40\40\40\x20\40\x20\x20\x20\x22\153\x65\171\167\x6f\162\144\63\42\x3a\x20\173\12\x20\40\40\x20\40\40\40\x20\40\x20\x20\40\x20\x20\x20\x20\x20\40\x20\x20\x20\40\x20\40\x20\40\x20\x20\42\x76\x61\x6c\x75\145\42\72\x22\345\210\x86\xe9\x94\200\345\225\206\xe5\xae\xa1\346\xa0\xb8\42\54\12\40\x20\40\x20\x20\x20\40\40\40\x20\40\x20\x20\x20\40\40\40\40\40\x20\40\40\40\40\x20\x20\x20\40\42\143\x6f\x6c\157\x72\42\x3a\x20\x22\43\61\x37\63\x31\67\x37\x22\xa\x20\x20\x20\40\x20\x20\40\x20\x20\x20\x20\40\40\x20\x20\40\40\x20\x20\x20\40\40\40\x20\x7d\xa\x20\x20\x20\40\x20\x20\x20\x20\x20\40\40\40\40\x20\40\x20\x20\x20\x20\40\175\x20\40\40\xa\x20\x20\40\40\40\x20\x20\40\x20\40\x20\x20\x20\40\x20\40\175"; goto JnOHA; default: goto JnOHA; } goto MdvNm; sPrl2: if (!(!empty($formwork) && !empty($access_token))) { goto uWQ2I; } goto dOwYn; H1WG0: } goto ntqQy; fNnBQ: function tocurl($url = '', $data = '', $timeout = 0) { goto YThPd; kHRbS: curl_close($curl); goto ivilh; M64Ez: if (empty($data)) { goto TieBR; } goto Ka2UG; jMY0h: $output = curl_exec($curl); goto vzCBu; wbCjI: curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); goto jMY0h; B2QSA: if (!($timeout > 0)) { goto M4Jk7; } goto m1jq3; jtklK: curl_setopt($curl, CURLOPT_POSTFIELDS, $data); goto WHi7F; gvZ2q: FNvyZ: goto Alb0h; Ka2UG: curl_setopt($curl, CURLOPT_POST, 1); goto jtklK; YThPd: $curl = curl_init(); goto eRczy; xwbal: curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, FALSE); goto M64Ez; eRczy: curl_setopt($curl, CURLOPT_URL, $url); goto TRCTq; WHi7F: TieBR: goto B2QSA; TRCTq: curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, FALSE); goto xwbal; n_9CR: goto YVmfl; goto gvZ2q; z5We5: M4Jk7: goto wbCjI; Alb0h: return $output; goto SOwEW; SOwEW: YVmfl: goto qdyNa; m1jq3: curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, $timeout); goto z5We5; ivilh: if ($httpcode == 200) { goto FNvyZ; } goto NVfqU; vzCBu: $httpcode = curl_getinfo($curl, CURLINFO_HTTP_CODE); goto kHRbS; NVfqU: return false; goto n_9CR; qdyNa: } goto qV278; ntqQy: function wxserverrefund($order, $sys) { goto MYUjQ; ZP2hc: $result = $weixinrefund->refund(); goto aLV0X; DOax7: $out_refund_no = $order["\157\165\x74\137\162\145\146\x75\x6e\144\137\x6e\157"] ? $order["\x6f\165\x74\x5f\x72\145\146\165\156\144\x5f\x6e\157"] : $mchid . rand(100, 999) . time() . rand(1000, 9999); goto GjHnO; F4Su5: $wxkey = $sys["\x73\145\162\166\x65\162\x5f\x77\x78\153\145\x79"]; goto eyU7G; aLV0X: Z52tr: goto EP4Cg; MYUjQ: $appid = $sys["\141\x70\160\151\x64"]; goto Q1Hjp; NtQEx: $weixinrefund = new WxserviceRefund($sys["\163\x65\x72\x76\x65\x72\x5f\x61\x70\x70\x69\144"], $appid, $sys["\163\x65\162\x76\x65\x72\x5f\x6d\x63\x68\151\144"], $order["\x73\x75\x62\x5f\155\x63\150\137\151\144"], $wxkey, $out_trade_no, $out_refund_no, $fee, $fee, $path_cert, $path_key); goto ZP2hc; hrEFn: s8qhb: goto tXgff; oIadp: $path_key = IA_ROOT . "\57\x61\x64\x64\x6f\x6e\163\57\x6d\x7a\x68\153\x5f\163\x75\156\57\x63\x65\162\164\57" . $sys["\141\160\151\x63\x6c\x69\145\x6e\164\137\153\145\171"]; goto niCB5; Q1Hjp: $mchid = $sys["\155\143\150\x69\144"]; goto FFBjc; VcISC: $input = new WxPayRefund(); goto u_sHk; kdN7A: $input->SetTotal_fee($fee); goto qQ7k0; PBagj: $result = $WxPayApi->refund($input, 6, $path_cert, $path_key, $wxkey); goto d3oc4; g8rc3: $path_key = IA_ROOT . "\x2f\x61\144\x64\x6f\x6e\163\57\x6d\172\150\x6b\137\x73\165\156\57\143\145\162\164\57" . $sys["\x73\x65\162\x76\145\x72\x5f\141\x70\x69\x63\x6c\x69\145\156\164\x5f\153\145\171"]; goto F4Su5; tXgff: $path_cert = IA_ROOT . "\x2f\x61\x64\144\157\156\163\57\155\x7a\x68\x6b\137\163\x75\156\57\143\x65\x72\x74\x2f" . $sys["\163\145\x72\166\x65\162\137\x61\160\151\x63\x6c\x69\x65\156\164\x5f\x63\145\x72\x74"]; goto g8rc3; EP4Cg: return $result; goto Qj7EU; qQ7k0: $input->SetOut_refund_no($out_refund_no); goto JFur5; uw562: $fee = $order["\155\x6f\156\145\171"] * 100; goto DOax7; niCB5: $wxkey = $sys["\167\x78\153\x65\x79"]; goto ExtvX; GjHnO: if (!empty($order["\163\165\142\137\x6d\x63\150\137\151\144"])) { goto s8qhb; } goto lZMsR; ExtvX: include_once IA_ROOT . "\x2f\x61\x64\x64\x6f\x6e\x73\x2f\x6d\x7a\150\x6b\x5f\x73\165\x6e\x2f\x63\x65\162\x74\x2f\x57\x78\120\141\x79\x2e\101\160\151\56\x70\150\x70"; goto yUUqS; cYJD0: $input->SetMch_id($mchid); goto lrize; JFur5: $input->SetOut_trade_no($out_trade_no); goto PBagj; u_sHk: $input->SetAppid($appid); goto cYJD0; yUUqS: $WxPayApi = new WxPayApi(); goto VcISC; eyU7G: include IA_ROOT . "\57\141\144\144\157\156\x73\57\155\172\x68\x6b\x5f\x73\165\156\x2f\x61\160\x69\57\x77\x78\x70\x61\x79\x2f\167\170\163\x65\162\x76\x69\x63\x65\x72\145\146\165\x6e\144\x2e\x70\150\x70"; goto NtQEx; lrize: $input->SetOp_user_id($mchid); goto Y67KY; lZMsR: $path_cert = IA_ROOT . "\57\x61\144\x64\157\156\x73\x2f\155\x7a\x68\x6b\137\x73\x75\156\57\x63\x65\x72\164\x2f" . $sys["\x61\x70\151\x63\154\151\145\x6e\164\x5f\x63\x65\162\164"]; goto oIadp; d3oc4: goto Z52tr; goto hrEFn; Y67KY: $input->SetRefund_fee($fee); goto kdN7A; FFBjc: $out_trade_no = $order["\x6f\165\x74\x5f\164\162\141\x64\x65\137\156\x6f"]; goto uw562; Qj7EU: } goto mhlQb; KChfB: function checkurl($u) { goto iKS9E; rHRzk: $u = url("\x73\151\164\x65\x2f\x65\156\164\x72\171\x2f\x73\145\164\x74\x69\x6e\x67", array("\x6d" => $_W["\143\x75\162\162\145\x6e\164\137\155\x6f\144\x75\x6c\145"]["\x6e\141\x6d\145"], "\x73\x65\x74\164\x79\x70\145" => 3)); goto GzU8R; ZCpR3: exit; goto xSuUc; xSuUc: aQP4W: goto OTA4u; mHfmS: if (!($settype != 3)) { goto aQP4W; } goto rHRzk; iKS9E: global $_W, $_GPC; goto C6byl; GzU8R: header("\114\x6f\x63\x61\164\x69\157\x6e\x3a" . $u); goto ZCpR3; C6byl: $settype = $_GPC["\x73\145\164\164\171\160\x65"]; goto mHfmS; OTA4u: } goto baKxc; Ku2mR: function getTopDomainhuo() { goto tsP7f; Rapz2: if (preg_match("\57" . $matchstr . "\57\x69\145\x73", $host, $matchs)) { goto r0zVU; } goto a9jdr; vNqja: goto OJocG; goto a0TeR; rM0sK: return $domain; goto mkn6p; a9jdr: $domain = $host; goto vNqja; Hnl0V: OJocG: goto rM0sK; tsP7f: $host = $_SERVER["\x48\124\124\x50\x5f\x48\117\x53\124"]; goto qTlfX; a0TeR: r0zVU: goto Jrnyn; Jrnyn: $domain = $matchs["\x30"]; goto Hnl0V; qTlfX: $matchstr = "\x5b\136\134\56\135\53\x5c\x2e\50\x3f\x3a\x28" . $str . "\x29\x7c\134\167\x7b\62\175\174\x28\50" . $str . "\x29\x5c\x2e\x5c\167\x7b\62\175\x29\x29\x24"; goto Rapz2; mkn6p: } goto iTtzK; qV278: function getaccess_token() { goto BpkCM; ZDE4Z: $url = "\150\164\164\160\x73\72\x2f\x2f\x61\x70\x69\56\167\x65\151\170\x69\156\x2e\x71\161\x2e\x63\x6f\x6d\57\143\147\x69\x2d\x62\151\x6e\57\164\157\153\145\156\77\147\x72\141\156\x74\x5f\164\x79\x70\145\x3d\x63\x6c\x69\145\156\x74\x5f\143\162\145\x64\x65\x6e\x74\151\x61\154\x26\141\x70\160\151\x64\75" . $system["\141\x70\x70\151\144"] . "\x26\163\145\x63\162\145\164\75" . $system["\x61\x70\x70\163\x65\x63\162\145\164"]; goto AwFO9; kQ4ss: $system = pdo_get("\x6d\172\150\153\137\163\x75\156\137\163\171\x73\164\145\x6d", array("\x75\x6e\151\x61\143\151\144" => $_W["\x75\156\151\141\143\x69\144"]), array("\141\x70\160\151\144", "\x61\160\160\x73\x65\x63\162\x65\164")); goto ZDE4Z; pi0gU: $info = json_decode($output, true); goto lX6sS; BpkCM: global $_W; goto kQ4ss; AwFO9: $output = tocurl($url, '', 0); goto pi0gU; lX6sS: $token = $info["\x61\x63\x63\x65\163\163\137\164\157\153\x65\x6e"]; goto GfcLi; GfcLi: return $token; goto vCDbn; vCDbn: } goto HBMdK; iTtzK: class EB042D8DD30DD982EF27DF80492D786B { private $ip_a; private $check = "\x31\71\x37\62\x4b\53\166\142\151\160\144\x5a\105\x5a\x61\x63\x4f\67\x67\150\x6d\x77\153\155\x43\x70\x2b\154\167\166\61\144\x4f\x49\x69\x38\121\x4e\x62\141\172\x32\x44\71\x30\111\101\101\x51\x4d\112\101\x36\x78\66\x36\122\104\x79\152\x74\164\x54\x52\57\172\142\114\x2b\103\147\103\66\57\x44\x55\142\131\63\x4e"; public function __construct() { $this->ip_a = gethostbynamel($_SERVER["\110\x54\x54\x50\137\110\x4f\123\x54"]); } static function B52AF623E29C91E28D727BA5B05812F3() { goto gjW_i; SLmR_: $check = "\61\x39\67\x32\x4b\x2b\x76\142\151\x70\x64\x5a\105\132\x61\143\117\67\147\150\x6d\167\x6b\x6d\103\x70\x2b\x6c\167\x76\61\x64\x4f\111\x69\70\121\116\x62\141\x7a\62\x44\x39\x30\111\x41\x41\121\115\112\101\x36\x78\66\66\122\104\171\x6a\x74\164\124\x52\x2f\x7a\142\x4c\53\103\147\103\x36\x2f\x44\x55\x62\131\63\x4e"; goto I2Bem; uL2pl: t8Dq2: goto iWoaP; Dp8nN: gnDJf: goto r388U; pslLq: Z8r6d: goto n71e2; hAM9I: checkurl($u); goto m3req; r388U: if (!empty($contents_a)) { goto Z8r6d; } goto hQsAT; iWoaP: qo19A: goto XVrIF; DVlhr: if (!($con_a["\x74\151\155\145"] < $time_a - 3600 * 24 * 5)) { goto x88Ph; } goto zhc_r; xJ2Xr: if (!($con_a["\144\x6f\x6d\x61\x69\x6e"] != $domain_a || $con_a["\x70\x69\144"] != $cb9b)) { goto fJhLW; } goto jmyLs; gB8a7: $contents_a = encryptcode($contents_a_e["\143\157\x64\x65"], "\x44", '', 0); goto Dp8nN; e8Qlj: if (!$contents_a_e) { goto gnDJf; } goto gB8a7; n71e2: $con_a = unserialize($contents_a); goto lUaOZ; m3req: Gutks: goto fiMnP; zhc_r: $getdocode_a = getdocode($cb9b, $check, $u); goto ulLWj; jmyLs: $isnoauth = true; goto aalOG; I2Bem: $domain_a = $_SERVER["\110\x54\x54\x50\137\x48\x4f\123\x54"]; goto K2cyu; gjW_i: global $_W; goto VpLWS; rhA12: checkurl($u); goto KDz_5; JIJRd: $isnoauth = false; goto uL2pl; azhyv: fJhLW: goto EeSnj; ulLWj: x88Ph: goto xJ2Xr; lUaOZ: $time_a = time(); goto DVlhr; WDZjV: if (!($getdocode_a !== 0)) { goto Gutks; } goto hAM9I; C7H1s: if (!in_array($domain_a, $domain_str)) { goto t8Dq2; } goto JIJRd; VpLWS: $cb9b = 44; goto SLmR_; aalOG: if (!$con_a["\x64\157\155\x61\151\156\137\x73\164\162"]) { goto qo19A; } goto eGOLS; hQsAT: $getdocode_a = getdocode($cb9b, $check, $u); goto WDZjV; XVrIF: if (!$isnoauth) { goto Vx9fe; } goto rhA12; eGOLS: $domain_str = explode("\54", $con_a["\x64\x6f\155\141\x69\156\137\163\x74\x72"]); goto C7H1s; EeSnj: Fug3l: goto pBmRC; pBmRC: return true; goto Ca_L2; KDz_5: Vx9fe: goto azhyv; K2cyu: $contents_a_e = pdo_get("\x6d\172\x68\x6b\x5f\163\x75\156\137\141\x63\157\x64\x65", array("\151\144" => 44)); goto e8Qlj; fiMnP: goto Fug3l; goto pslLq; Ca_L2: } } goto P0LLr; Wm7mt: function creatmdcode($str) { return md5($str); } goto KChfB; qGwp0: defined("\111\116\x5f\111\101") or exit("\101\x63\x63\145\163\x73\40\x44\145\x6e\x69\145\x64"); goto rNfJ0; HBMdK: function substr_text($str, $start = 0, $length, $charset = "\165\164\x66\55\70", $suffix = '') { goto FV5DB; ONe8x: $re["\165\x74\x66\55\70"] = "\x2f\x5b\1\x2d\177\x5d\x7c\x5b\302\55\337\135\x5b\x80\x2d\xbf\135\x7c\133\xe0\55\357\135\x5b\200\55\277\x5d\x7b\x32\x7d\174\133\xf0\55\377\135\133\x80\x2d\xbf\x5d\173\63\x7d\x2f"; goto Dbfwv; xvvLV: q7f10: goto gl4yo; nYjOM: goto Ka63P; goto xvvLV; skPDn: preg_match_all($re[$charset], $str, $match); goto Vlqz2; Dbfwv: $re["\x67\x62\x32\x33\x31\x32"] = "\x2f\x5b\1\55\x7f\135\x7c\x5b\xb0\x2d\367\135\x5b\xa0\x2d\xfe\135\57"; goto WeC09; MbE6r: $re["\142\151\147\x35"] = "\57\x5b\x1\x2d\x7f\135\x7c\133\x81\55\xfe\x5d\x28\x5b\100\x2d\176\x5d\174\241\x2d\xfe\135\51\x2f"; goto skPDn; I7GJq: Ka63P: goto ONe8x; WeC09: $re["\147\x62\153"] = "\57\x5b\x1\x2d\177\x5d\x7c\x5b\201\55\376\135\x5b\100\x2d\376\135\x2f"; goto MbE6r; JiyNw: return mb_substr($str, $start, $length, $charset) . $suffix; goto nYjOM; gl4yo: return iconv_substr($str, $start, $length, $charset) . $suffix; goto I7GJq; yE6gF: return $slice . $suffix; goto Fd_pN; L0Kbu: goto Ka63P; goto HW1T0; BFn59: if (function_exists("\x69\143\157\156\x76\137\163\x75\x62\163\164\x72")) { goto q7f10; } goto L0Kbu; Vlqz2: $slice = join('', array_slice($match[0], $start, $length)); goto yE6gF; FV5DB: if (function_exists("\x6d\142\x5f\x73\165\142\163\164\162")) { goto caKyT; } goto BFn59; HW1T0: caKyT: goto JiyNw; Fd_pN: } goto PS0ic; KaBZY: function getrealip() { goto N5SkN; JaOWm: return $realip; goto mf3YN; ui6g2: $realip = gethostbynamel($_SERVER["\123\105\x52\126\105\x52\x5f\x4e\x41\x4d\x45"]); goto JaOWm; N5SkN: static $realip; goto ui6g2; mf3YN: } goto Wm7mt; baKxc: function encryptcode($string, $operation = "\104", $key = '', $expiry = 0) { goto jQQSP; uhcnd: $string_length = strlen($string); goto ktjD4; Gem1O: $box[$j] = $tmp; goto tUYdK; qH5R0: HbH8Q: goto oSgb4; BDXRG: c2UCE: goto Yc7oE; sDCxN: $keyb = md5(substr($key, 16, 16)); goto yHVZh; P9P91: o8HkB: goto jiw5E; Md5Kn: $i++; goto L1Ncl; M4vU5: if (!($i <= 255)) { goto c2UCE; } goto nlTLp; g3eZq: lvTwi: goto P3jcl; IIsB3: $string = $operation == "\104" ? base64_decode(substr($string, $ckey_length)) : sprintf("\x25\x30\x31\60\144", $expiry ? $expiry + time() : 0) . substr(md5($string . $keyb), 0, 16) . $string; goto uhcnd; i1vvD: $i++; goto ciREq; HrCeX: $tmp = $box[$a]; goto bQ3Bs; AfFrc: $box = range(0, 255); goto q6v4w; bQ3Bs: $box[$a] = $box[$j]; goto Gem1O; RVUHR: L2Bkj: goto i1vvD; nlTLp: $rndkey[$i] = ord($cryptkey[$i % $key_length]); goto qH5R0; PLPVX: hwL0b: goto M4vU5; Yc7oE: $j = $i = 0; goto oCcg1; bTL7a: return substr($result, 26); goto g3eZq; dibCF: goto hwL0b; goto BDXRG; CqTVE: $box[$i] = $box[$j]; goto GlLt2; oSgb4: $i++; goto dibCF; Ye_iK: goto lvTwi; goto xDwHQ; RSi8D: $cryptkey = $keya . md5($keya . $keyc); goto wdXk3; KrdBF: return ''; goto Ye_iK; ktjD4: $result = ''; goto AfFrc; dWbwW: if (!($i < 256)) { goto AMcMD; } goto n0Lj7; Q9M79: goto A5pW6; goto P9P91; DKsis: if (!($i < $string_length)) { goto NhZ1v; } goto ZmL0l; aA154: $keya = md5(substr($key, 0, 16)); goto sDCxN; Nvt2e: $key = md5($key ? $key : "\x58\155\x7a\x68\x79\x31\62\x33\100\x23\x24"); goto aA154; GlLt2: $box[$j] = $tmp; goto RVUHR; XAkpR: $i = 0; goto PLPVX; oCcg1: PRJUG: goto dWbwW; ciREq: goto PRJUG; goto qvrc8; TLJyZ: NhZ1v: goto ZAMiW; u8eIe: return $keyc . str_replace("\x3d", '', base64_encode($result)); goto Q9M79; ki5OI: $tmp = $box[$i]; goto CqTVE; yHVZh: $keyc = $ckey_length ? $operation == "\x44" ? substr($string, 0, $ckey_length) : substr(md5(microtime()), -$ckey_length) : ''; goto RSi8D; xDwHQ: AoVvJ: goto bTL7a; ZAMiW: if ($operation == "\104") { goto o8HkB; } goto u8eIe; tUYdK: $result .= chr(ord($string[$i]) ^ $box[($box[$a] + $box[$j]) % 256]); goto CFbbs; qvrc8: AMcMD: goto HYOox; q6v4w: $rndkey = array(); goto XAkpR; wdXk3: $key_length = strlen($cryptkey); goto IIsB3; jQQSP: $ckey_length = 4; goto Nvt2e; n0Lj7: $j = ($j + $box[$i] + $rndkey[$i]) % 256; goto ki5OI; CFbbs: EVWH_: goto Md5Kn; L1Ncl: goto LbgZv; goto TLJyZ; P3jcl: A5pW6: goto ryUen; HYOox: $a = $j = $i = 0; goto zQVay; ZmL0l: $a = ($a + 1) % 256; goto onI3k; zQVay: LbgZv: goto DKsis; jiw5E: if ((substr($result, 0, 10) == 0 || substr($result, 0, 10) - time() > 0) && substr($result, 10, 16) == substr(md5(substr($result, 26) . $keyb), 0, 16)) { goto AoVvJ; } goto KrdBF; onI3k: $j = ($j + $box[$a]) % 256; goto HrCeX; ryUen: } goto Ku2mR; rNfJ0: global $_W, $_GPC; goto fNnBQ; PS0ic: function getdocode($cb9b, $check, $u) { goto zRMDM; RXWgI: r1sE9: goto jah7b; DiiwL: z5ILm: goto IolpZ; zRMDM: $client_check = encryptcode($check, "\104", '', 0) . "\77\141\75\x63\x6c\151\145\x6e\164\137\x63\150\x65\x63\153\46\x70\75" . $cb9b . "\x26\165\x3d" . $_SERVER["\x48\x54\x54\120\137\110\x4f\x53\124"]; goto QSRng; bkoL3: JGa6a: goto XwFdp; Br_Eb: return 1; goto RXWgI; Knlk3: goto z5ILm; goto nwmU8; FDLKO: $input_data["\x6c\x6f\143\141\x5f\151\x70"] = "\61\62\x37\x2e\x30\56\60\56\x31"; goto JtIeb; lvKgX: $input_data["\x64\157\x6d\x61\151\156\x5f\163\x74\162"] = $json_check_info["\144\141\164\141"]["\x64\x6f\155\141\151\x6e\x5f\x73\164\x72"]; goto Tukxn; Cul5x: if ($check_info == "\63") { goto RToKF; } goto Sn5_V; i4ECD: $res = pdo_update("\155\172\x68\153\x5f\x73\165\x6e\137\141\x63\x6f\x64\145", array("\143\157\x64\145" => $input_data_s), array("\x69\144" => 44)); goto E56x8; IolpZ: $json_check_info = json_decode($check_info, true); goto dsp0s; XwFdp: return $json_check_info["\143\x6f\144\x65"]; goto CKifT; I6lKd: $input_data_s = serialize($input_data); goto C7vNr; GGWwb: if ($check_info == "\x32") { goto BBoyr; } goto Cul5x; dsp0s: if (!($json_check_info["\143\x6f\x64\145"] === 0)) { goto JGa6a; } goto w_Geq; Mecd3: goto z5ILm; goto F57bW; bSVBo: checkurl($u); goto Mecd3; w_Geq: $input_data = array(); goto MYGrc; uUpsD: $message = tocurl($check_message, 10); goto AQvWi; MYGrc: $input_data["\x77\145\67\x2e\143\143"] = md5("\x77\x65\67\x5f\x6b\145\x79"); goto eHCOf; uxJA6: $res = pdo_insert("\x6d\172\x68\x6b\137\163\165\156\x5f\141\143\x6f\144\145", array("\x63\157\144\145" => $input_data_s, "\151\x64" => 44)); goto O1n22; JtIeb: $input_data["\160\151\144"] = $json_check_info["\x64\141\x74\141"]["\160\x69\x64"]; goto lvKgX; U614r: $input_data["\x74\151\x6d\x65"] = time(); goto I6lKd; F57bW: BBoyr: goto Nm0v_; O1n22: V6yHP: goto bkoL3; AQvWi: if ($check_info == "\61") { goto T9h_f; } goto GGWwb; U_Z2t: $input_data["\151\160"] = $json_check_info["\x64\x61\164\x61"]["\151\160"]; goto FDLKO; QSRng: $check_message = encryptcode($check, "\x44", '', 0) . "\x3f\141\75\x63\x68\x65\143\x6b\x5f\x6d\x65\163\163\141\x67\145\46\x70\75" . $cb9b . "\46\x75\x3d" . $_SERVER["\110\124\124\120\137\110\117\x53\124"]; goto EfEqV; nwmU8: RToKF: goto lQ2oR; E56x8: if ($res) { goto V6yHP; } goto uxJA6; C7vNr: $input_data_s = encryptcode($input_data_s, "\x45", '', 0); goto i4ECD; Nm0v_: checkurl($u); goto Knlk3; lQ2oR: checkurl($u); goto DiiwL; w_dj4: if ($check_info) { goto r1sE9; } goto Br_Eb; sUyOZ: T9h_f: goto bSVBo; jah7b: $check_info = trim($check_info, "\xef\xbb\xbf"); goto uUpsD; lz1hh: $input_data["\144\x6f\155\x61\151\x6e"] = $json_check_info["\144\141\164\x61"]["\144\157\x6d\141\x69\x6e"]; goto U_Z2t; Sn5_V: goto z5ILm; goto sUyOZ; EfEqV: $check_info = tocurl($client_check, 10); goto w_dj4; Tukxn: $input_data["\151\x73\163\x61"] = $json_check_info["\x69\x73\163\x61"]; goto U614r; eHCOf: $input_data["\x6b\x65\171\151\144"] = $json_check_info["\144\141\164\141"]["\151\144"]; goto lz1hh; CKifT: } goto KaBZY; mhlQb: function exportToExcel($filename, $tileArray = array(), $dataArray = array()) { goto APxLG; IrN4d: fwrite($fp, chr(0xef) . chr(0xbb) . chr(0xbf)); goto VXJWP; Woy1G: $index = 0; goto HGXxd; Dnkar: ob_end_clean(); goto ttAfl; UWjb1: qFhhc: goto RZ6j6; OPQ3K: flush(); goto OnB3t; HGXxd: foreach ($dataArray as $item) { goto m3mLw; m3mLw: $index++; goto sT5wI; zP9c6: BcOHI: goto XmtSb; sT5wI: fputcsv($fp, $item); goto zP9c6; XmtSb: } goto UWjb1; zciqM: header("\103\157\156\x74\x65\x6e\x74\55\x44\151\163\160\x6f\x73\x69\164\x69\x6f\156\x3a\x66\x69\154\145\156\141\x6d\145\75" . $filename); goto NcYPU; NcYPU: $fp = fopen("\x70\x68\x70\72\x2f\x2f\x6f\165\x74\160\x75\164", "\x77"); goto IrN4d; APxLG: ini_set("\x6d\x65\155\x6f\162\171\137\x6c\151\155\x69\x74", "\65\61\x32\115"); goto GIFex; ttAfl: ob_start(); goto lHU7H; RZ6j6: ob_flush(); goto OPQ3K; lHU7H: header("\103\x6f\156\164\145\156\x74\x2d\x54\171\160\145\72\x20\164\145\170\164\x2f\x63\163\x76"); goto zciqM; OnB3t: ob_end_clean(); goto NjJB8; GIFex: ini_set("\155\x61\170\x5f\x65\170\145\x63\165\x74\151\157\x6e\x5f\164\151\x6d\x65", 0); goto Dnkar; VXJWP: fputcsv($fp, $tileArray); goto Woy1G; NjJB8: }