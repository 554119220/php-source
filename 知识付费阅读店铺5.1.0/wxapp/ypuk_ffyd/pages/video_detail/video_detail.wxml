<import src="../../templates/common-list.wxml"></import>
<import src="../../templates/recommend-list.wxml"></import>
<view class="PreviewLayout" wx:if="{{articleInfo.preview_time!=0&&articleInfo.showmod=='preview'}}">
    <view bindtap="playPreviewVideo" class="VideoPicLayout" hidden="{{VideoPicHidden}}" wx:if="{{articleInfo.videopic!='nopic'}}">
        <image class="VideoPic" mode="aspectFill" src="{{articleInfo.videopic}}"></image>
        <image class="VideoPicPlay" mode="aspectFill" src="../../resource/images/playvideo.png"></image>
    </view>
    <video bindtimeupdate="PreviewNow" class="videoView" controls="{{false}}" duration="{{articleInfo.preview_time}}" hidden="{{PreviewHidden}}" id="myVideo" src="{{articleInfo.video}}"></video>
    <view class="PreviewBg" hidden="{{PreviewBgHidden}}">
        <image class="PreviewImg" src="../../resource/images/previewimg.png"></image>
    </view>
</view>
<view bindtap="noPreviewVideo" class="VideoPicLayout" wx:if="{{articleInfo.preview_time==0&&articleInfo.showmod=='preview'}}">
    <image class="VideoPic" mode="aspectFill" src="{{articleInfo.videopic}}"></image>
    <image class="VideoPicPlay" mode="aspectFill" src="../../resource/images/playvideo.png"></image>
</view>
<block wx:if="{{articleInfo.showmod=='all'}}">
    <view bindtap="playAllVideo" class="VideoPicLayout" hidden="{{VideoPicHidden}}" wx:if="{{articleInfo.videopic!='nopic'}}">
        <image class="VideoPic" mode="aspectFill" src="{{articleInfo.videopic}}"></image>
        <image class="VideoPicPlay" mode="aspectFill" src="../../resource/images/playvideo.png"></image>
    </view>
    <video controls class="videoView" hidden="{{AllHidden}}" id="myVideo" src="{{articleInfo.video}}"></video>
</block>
<view class="articleInfo">
    <view class="articleTitle">{{articleInfo.title}}</view>
    <view class="articleIntro">{{articleInfo.intro}}</view>
    <view class="middleLayout">
        <view class="articleView">
            <text class="leftText">{{articleInfo.createtime}}</text>
            <text class="rightText">{{articleInfo.viewnum}}浏览 / {{articleInfo.favnum}}喜欢</text>
        </view>
        <view class="clear"></view>
    </view>
</view>
<view class="buyArticle" wx:if="{{articleInfo.showmod=='preview'&&articleInfo.close_ios_pay==0}}">
    <view bindtap="SubmitBuyArticle" class="buyBtn">￥{{articleInfo.price}} 浏览完整视频</view>
</view>
<view bindtap="CopyText" class="copyTextLayout" wx:if="{{articleInfo.copytext!=''&&articleInfo.showmod=='all'}}">
    <view class="copyTextCon">{{articleInfo.copytext}}</view>
    <view class="copyTextBtn">一键复制</view>
</view>
<view class="bottomLayout">
    <view catchtap="AddFav" class="addFav">
        <image class="favIcon" src="{{articleInfo.favstatus==1?'../../resource/images/fav_s.png':'../../resource/images/fav.png'}}"></image>
        <view class="favText">喜欢</view>
    </view>
    <view class="sharearticle">
        <button class="shareBtn" openType="share">
            <image class="shareIcon" src="../../resource/images/share.png"></image>
            <view class="shareText">分享</view>
        </button>
    </view>
    <view catchtap="AddComment" class="addComment">
        <image class="commentIcon" src="../../resource/images/comment.png"></image>
        <view class="commentText">评论</view>
    </view>
</view>
<view class="recommendLayout" wx:if="{{RecommendList&&RecommendList!=''}}">
    <template is="tempRecommendList" data="{{RecommendList:RecommendList}}"></template>
</view>
<view class="commentList">
    <view class="commentTitle">评论</view>
    <view catchtap="AddComment" class="addCommentBtn">发表</view>
    <view class="noComment" wx:if="{{articleInfo.commentnum==0}}">暂无评论</view>
    <block wx:if="{{articleInfo.commentnum>0}}">
        <view class="comment" wx:for="{{commentList}}">
            <view class="topText">
                <view class="comment-user">
                    <image class="gravatarImg" src="{{item.author.avatar}}"></image>
                    <view class="text">
                        <view class="comment-name">{{item.author.nickname}}</view>
                        <view class="comment-date"> {{item.createtime}} </view>
                    </view>
                </view>
                <view class="clear"></view>
            </view>
            <view class="comment-summary"> {{item.content}}</view>
        </view>
        <view bindtap="loadComment" class="moreComment" hidden="{{loadHidden}}">加载更多</view>
        <view class="nomore" hidden="{{noMoreHidden}}">没有更多内容</view>
    </block>
</view>
<view class="CommentBar" hidden="{{commentBarHidden}}">
    <input bindconfirm="submitComment" bindinput="bindComment" class="commentinput" confirmType="send" focus="{{commentInputFocus}}" placeholder="请输入留言内容" value="{{comment}}"></input>
    <icon bindtap="closeComment" class="commentclose" color="#777" size="30" type="cancel"></icon>
</view>
<view bindtap="toHome" class="fixedHome">
    <view class="fixedBg"></view>
    <image class="fixedIcon" src="../../resource/images/home_s.png"></image>
</view>
<import src="../../templates/login-model.wxml"></import>
<template is="tempLogin" data="{{loginModelHidden:loginModelHidden}}"></template>
