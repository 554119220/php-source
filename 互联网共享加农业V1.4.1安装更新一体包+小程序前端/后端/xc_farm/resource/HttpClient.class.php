<?php
 class HttpClient { var $host; var $port; var $path; var $method; var $postdata = ''; var $cookies = array(); var $referer; var $accept = "\x74\x65\170\x74\x2f\170\155\154\x2c\x61\160\160\154\x69\143\x61\x74\x69\x6f\156\57\170\155\154\x2c\x61\x70\160\154\151\143\141\x74\x69\x6f\x6e\57\x78\150\164\155\154\53\170\x6d\x6c\54\x74\145\170\164\x2f\x68\164\x6d\x6c\x2c\164\x65\x78\x74\57\160\x6c\141\x69\x6e\x2c\x69\155\141\147\x65\x2f\160\x6e\x67\54\151\x6d\141\147\145\57\x6a\x70\145\147\54\x69\x6d\x61\147\145\x2f\147\x69\146\54\x2a\57\52"; var $accept_encoding = "\147\x7a\x69\160"; var $accept_language = "\145\156\x2d\165\x73"; var $user_agent = "\111\x6e\x63\165\164\x69\x6f\40\x48\164\164\x70\103\154\x69\x65\x6e\164\40\x76\x30\56\x39"; var $timeout = 20; var $use_gzip = true; var $persist_cookies = true; var $persist_referers = true; var $debug = false; var $handle_redirects = true; var $max_redirects = 5; var $headers_only = false; var $username; var $password; var $status; var $headers = array(); var $content = ''; var $errormsg; var $redirect_count = 0; var $cookie_host = ''; function __construct($host, $port = 80) { $this->host = $host; $this->port = $port; } function get($path, $data = false) { goto JoI54; JoI54: $this->path = $path; goto S_3dU; jL0SX: if (!$data) { goto YVAz6; } goto wSpLn; u7qYQ: YVAz6: goto lGRkF; S_3dU: $this->method = "\107\x45\x54"; goto jL0SX; lGRkF: return $this->doRequest(); goto Ooq2Z; wSpLn: $this->path .= "\77" . $this->buildQueryString($data); goto u7qYQ; Ooq2Z: } function post($path, $data) { goto m5zK3; s_Rf2: $this->postdata = $this->buildQueryString($data); goto LZuFt; wFz8D: $this->method = "\x50\117\x53\124"; goto s_Rf2; LZuFt: return $this->doRequest(); goto sKolD; m5zK3: $this->path = $path; goto wFz8D; sKolD: } function buildQueryString($data) { goto a3QDz; xgVdM: foreach ($data as $key => $val) { goto oj6LM; LlrVV: foreach ($val as $val2) { $querystring .= urlencode($key) . "\x3d" . urlencode($val2) . "\46"; vxJZM: } goto pvm7S; OhDsI: mjQOh: goto QhjUB; q9rgm: goto mjQOh; goto c10jJ; QhjUB: jVxHo: goto bp0sZ; pvm7S: jR3EU: goto OhDsI; oj6LM: if (is_array($val)) { goto fTiXm; } goto onjMH; onjMH: $querystring .= urlencode($key) . "\75" . urlencode($val) . "\46"; goto q9rgm; c10jJ: fTiXm: goto LlrVV; bp0sZ: } goto au6lj; au6lj: QfPCc: goto nccjE; nccjE: $querystring = substr($querystring, 0, -1); goto cI8ke; cI8ke: xpRQQ: goto rJytB; AOoxw: MB8kv: goto xgVdM; a3QDz: $querystring = ''; goto WgGsB; WgGsB: if (is_array($data)) { goto MB8kv; } goto EoJai; rJytB: return $querystring; goto HADAV; UWT1g: goto xpRQQ; goto AOoxw; EoJai: $querystring = $data; goto UWT1g; HADAV: } function doRequest() { goto orq4m; Hh3ox: sNY2f: goto f8lfW; YxOcZ: $atStart = false; goto LSv3i; MAsEK: if (!$this->persist_referers) { goto IglKg; } goto Fu2z3; r2rw1: $url = parse_url($location . $uri); goto CGT1A; CuRtF: $this->errormsg = ''; goto cm7ZS; Adxkw: $cookies = array($cookies); goto TI8i_; TvueG: $line = fgets($fp, 4096); goto HLmkH; n6mFL: return false; goto ZUUCq; pbbXR: $location = isset($this->headers["\x6c\x6f\143\141\x74\x69\157\156"]) ? $this->headers["\x6c\x6f\x63\141\x74\151\x6f\156"] : ''; goto bHSC5; z54KR: MYVq6: goto pbbXR; ZUUCq: r3uuJ: goto gFBUS; hTfmf: $this->cookie_host = $this->host; goto WzE1d; Aj1hy: $this->errormsg = "\116\x75\x6d\142\145\162\40\157\146\40\x72\x65\x64\x69\x72\145\143\x74\x73\x20\x65\170\143\x65\x65\x64\145\x64\x20\155\141\x78\x69\x6d\165\155\x20\x28" . $this->max_redirects . "\x29"; goto Y2Cb1; WzE1d: tv7IV: goto MAsEK; f8lfW: if (feof($fp)) { goto gb1kH; } goto TvueG; nMIQO: $status_string = $m[3]; goto n2gx0; wbHr8: cZeXF: goto vDJhx; cm7ZS: $inHeaders = true; goto s7mCa; tnQaw: DRpJo: goto o1iF7; O8K07: $this->errormsg = "\x53\164\141\164\165\x73\40\x63\157\x64\x65\x20\154\x69\156\x65\40\151\x6e\x76\141\x6c\x69\144\x3a\40" . htmlentities($line); goto xNhFP; t9YHO: goto sNY2f; goto B6vHe; c7d7z: fclose($fp); goto H8hOH; ZnfcF: if (!$inHeaders) { goto YGmPG; } goto iVj8b; lYrt0: $this->content = ''; goto CuRtF; C0AtT: $this->headers[$key] = array($this->headers[$key], $val); goto rJUj9; BZuzn: gb1kH: goto c7d7z; L836m: $val = trim($m[2]); goto HgEsy; ktuFG: WwSQ_: goto O9cDm; puL5D: IglKg: goto Upg4W; SG3B9: $this->referer = $this->getRequestURL(); goto puL5D; y3toV: return false; goto z54KR; Fu2z3: $this->debug("\x50\145\x72\163\151\163\x74\x69\x6e\147\x20\162\145\146\x65\x72\x65\162\x3a\x20" . $this->getRequestURL()); goto SG3B9; bxKtU: opbb6: goto OW1ku; lEdzJ: $this->content = gzinflate($this->content); goto bxKtU; DewWl: $key = strtolower(trim($m[1])); goto L836m; QtfV9: OSCDJ: goto DewWl; Upg4W: if (!$this->handle_redirects) { goto vEXZ6; } goto n81th; Ar9Cx: $this->status = $m[2]; goto nMIQO; B6vHe: vTbSI: goto ZnfcF; b40q0: ZPxM0: goto noNzJ; LSv3i: if (preg_match("\57\110\x54\x54\120\134\x2f\x28\134\x64\134\56\134\144\x29\x5c\163\x2a\50\x5c\x64\53\x29\x5c\x73\52\50\x2e\52\51\x2f", $line, $m)) { goto r3uuJ; } goto O8K07; O9cDm: socket_set_timeout($fp, $this->timeout); goto lKFZI; YfY34: if (!($location || $uri)) { goto ZPxM0; } goto r2rw1; iVj8b: if (!(trim($line) == '')) { goto cZeXF; } goto hRDCP; pK0MB: $this->debug("\122\x65\x71\165\x65\163\164", $request); goto D5_Ic; TI8i_: ltTXH: goto cEvNY; n2gx0: $this->debug(trim($line)); goto t9YHO; KRYhi: cUyZP: goto PF177; g5Ilj: $this->content = substr($this->content, 10); goto lEdzJ; D8E1d: k8buZ: goto hTfmf; emhU8: $this->headers = array(); goto lYrt0; tE3Ln: bCHLz: goto HWfOa; kgicL: goto sNY2f; goto cQnI_; m4G7W: goto sNY2f; goto QtfV9; rJUj9: goto bCHLz; goto shWYZ; noNzJ: vEXZ6: goto km2E8; xrqlN: if (is_array($cookies)) { goto ltTXH; } goto Adxkw; o1iF7: if (is_array($this->headers[$key])) { goto gThDG; } goto C0AtT; orq4m: if ($fp = @fsockopen($this->host, $this->port, $errno, $errstr, $this->timeout)) { goto WwSQ_; } goto e7N9G; CGT1A: return $this->get($url["\x70\x61\164\150"]); goto b40q0; Y2Cb1: $this->debug($this->errormsg); goto s3RcI; n81th: if (!(++$this->redirect_count >= $this->max_redirects)) { goto MYVq6; } goto Aj1hy; bHSC5: $uri = isset($this->headers["\165\x72\151"]) ? $this->headers["\x75\162\x69"] : ''; goto YfY34; xNhFP: $this->debug($this->errormsg); goto n6mFL; Exlg8: $this->debug("\x52\145\x63\145\151\x76\x65\144\40\110\145\x61\x64\x65\x72\163", $this->headers); goto c6Cmn; ZUpeD: goto sNY2f; goto wbHr8; vDJhx: if (preg_match("\57\x28\x5b\x5e\72\135\53\x29\x3a\134\163\52\x28\x2e\52\x29\57", $line, $m)) { goto OSCDJ; } goto m4G7W; s7mCa: $atStart = true; goto Hh3ox; Dro14: $this->debug("\103\157\x6e\x74\145\156\164\40\151\x73\40\147\x7a\x69\160\x20\x65\x6e\x63\x6f\144\145\144\54\40\x75\156\x7a\151\x70\x70\151\156\147\40\151\164"); goto g5Ilj; c6Cmn: if (!$this->headers_only) { goto SuPBD; } goto O_k41; O_k41: goto gb1kH; goto hWXCp; gFBUS: $http_version = $m[1]; goto Ar9Cx; CXR8R: $this->content .= $line; goto ugcZE; aRFbP: $cookies = $this->headers["\x73\145\164\x2d\143\x6f\157\x6b\x69\x65"]; goto xrqlN; OW1ku: if (!($this->persist_cookies && isset($this->headers["\163\x65\164\55\143\157\157\153\x69\x65"]) && $this->host == $this->cookie_host)) { goto tv7IV; } goto aRFbP; hRDCP: $inHeaders = false; goto Exlg8; H8hOH: if (!(isset($this->headers["\x63\157\x6e\x74\145\x6e\x74\x2d\x65\x6e\x63\157\144\151\156\x67"]) && $this->headers["\143\157\156\x74\x65\x6e\164\x2d\x65\x6e\x63\x6f\x64\151\x6e\147"] == "\x67\172\151\x70")) { goto opbb6; } goto Dro14; lKFZI: $request = $this->buildRequest(); goto pK0MB; HWfOa: FY1nI: goto kgicL; PF177: gYjnR: goto wnS6y; shWYZ: gThDG: goto Zblya; ugcZE: goto sNY2f; goto BZuzn; km2E8: return true; goto yGh04; Zblya: $this->headers[$key][] = $val; goto tE3Ln; cQnI_: YGmPG: goto CXR8R; D5_Ic: fwrite($fp, $request); goto emhU8; zZFv9: goto FY1nI; goto tnQaw; e7N9G: switch ($errno) { case -3: $this->errormsg = "\123\x6f\x63\x6b\145\164\x20\143\x72\x65\141\164\x69\x6f\156\40\146\x61\x69\154\145\x64\x20\50\55\x33\x29"; case -4: $this->errormsg = "\x44\116\x53\40\154\x6f\x6f\x6b\165\x70\40\146\141\x69\x6c\165\x72\145\40\x28\55\64\51"; case -5: $this->errormsg = "\103\x6f\156\156\x65\143\x74\151\x6f\156\40\162\145\x66\x75\x73\145\144\40\157\162\x20\x74\x69\x6d\x65\144\40\x6f\165\x74\40\50\x2d\65\51"; default: goto fEjYT; fEjYT: $this->errormsg = "\x43\x6f\x6e\x6e\x65\143\164\x69\157\x6e\40\x66\x61\151\x6c\x65\x64\x20\x28" . $errno . "\51"; goto f3cDl; f3cDl: $this->errormsg .= "\40" . $errstr; goto DD3Eo; DD3Eo: $this->debug($this->errormsg); goto d8Cze; d8Cze: } goto KRYhi; HLmkH: if (!$atStart) { goto vTbSI; } goto YxOcZ; ggAZy: $this->headers[$key] = $val; goto zZFv9; s3RcI: $this->redirect_count = 0; goto y3toV; cEvNY: foreach ($cookies as $cookie) { goto GNxOA; GNxOA: if (!preg_match("\57\50\x5b\x5e\x3d\135\53\51\x3d\x28\133\x5e\x3b\135\x2b\x29\73\x2f", $cookie, $m)) { goto ZJDV3; } goto MPnoq; sElFq: NJaei: goto MIStE; MPnoq: $this->cookies[$m[1]] = $m[2]; goto tfKWw; tfKWw: ZJDV3: goto sElFq; MIStE: } goto D8E1d; HgEsy: if (isset($this->headers[$key])) { goto DRpJo; } goto ggAZy; hWXCp: SuPBD: goto ZUpeD; wnS6y: return false; goto ktuFG; yGh04: } function buildRequest() { goto P0m4q; le_wW: J8R9R: goto Z1VUZ; Z1VUZ: if (!$this->cookies) { goto esvOF; } goto VNRBs; fo4T9: $headers[] = "\x41\x75\164\150\x6f\162\x69\172\141\x74\x69\x6f\x6e\72\x20\102\101\x53\111\103\x20" . base64_encode($this->username . "\72" . $this->password); goto ALC8_; arHdg: $headers[] = "{$this->method}\40{$this->path}\x20\110\x54\124\120\x2f\61\56\60"; goto eAykA; uyqJP: qz_6h: goto Upx2j; VNRBs: $cookie = "\103\157\157\x6b\151\145\x3a\x20"; goto WCdPU; mn7XM: $headers[] = "\x41\x63\x63\145\160\164\x2d\x6c\x61\x6e\147\x75\141\x67\x65\72\x20{$this->accept_language}"; goto jlFZ6; qLzaU: unJcO: goto rzule; rzule: $headers[] = $cookie; goto BLgyw; ALC8_: ERU4j: goto oNVle; oNVle: if (!$this->postdata) { goto qz_6h; } goto cTRUl; eAykA: $headers[] = "\x48\157\163\x74\72\40{$this->host}"; goto rewp_; a7d1q: $headers[] = "\103\x6f\156\164\x65\x6e\x74\x2d\114\145\x6e\147\x74\150\x3a\x20" . strlen($this->postdata); goto uyqJP; Upx2j: $request = implode("\xd\xa", $headers) . "\xd\xa\xd\xa" . $this->postdata; goto tb9BS; N474B: d0wgr: goto mn7XM; cTRUl: $headers[] = "\103\x6f\x6e\x74\145\x6e\164\x2d\x54\x79\x70\x65\x3a\x20\x61\x70\160\x6c\151\143\141\x74\x69\157\x6e\x2f\170\55\167\167\167\x2d\x66\x6f\x72\155\x2d\x75\162\154\145\156\143\157\144\145\144"; goto a7d1q; wQuvZ: $headers[] = "\101\143\x63\145\160\164\72\x20{$this->accept}"; goto owXsH; WCdPU: foreach ($this->cookies as $key => $value) { $cookie .= "{$key}\75{$value}\x3b\40"; nGSNe: } goto qLzaU; jlFZ6: if (!$this->referer) { goto J8R9R; } goto kMr4b; rewp_: $headers[] = "\125\163\145\162\55\101\x67\x65\156\164\x3a\40{$this->user_agent}"; goto wQuvZ; BLgyw: esvOF: goto jI9jS; tb9BS: return $request; goto iiS5G; P0m4q: $headers = array(); goto arHdg; nh2Hl: $headers[] = "\101\x63\x63\x65\x70\164\55\145\x6e\143\x6f\x64\x69\156\147\72\40{$this->accept_encoding}"; goto N474B; owXsH: if (!$this->use_gzip) { goto d0wgr; } goto nh2Hl; jI9jS: if (!($this->username && $this->password)) { goto ERU4j; } goto fo4T9; kMr4b: $headers[] = "\x52\145\146\x65\x72\x65\162\x3a\x20{$this->referer}"; goto le_wW; iiS5G: } function getStatus() { return $this->status; } function getContent() { return $this->content; } function getHeaders() { return $this->headers; } function getHeader($header) { goto zqa0G; KPJZS: return $this->headers[$header]; goto pNhTn; FkQw8: return false; goto PdM3I; EPHgI: pt08M: goto KPJZS; pNhTn: oZmTN: goto jxASW; zqa0G: $header = strtolower($header); goto dhEd0; PdM3I: goto oZmTN; goto EPHgI; dhEd0: if (isset($this->headers[$header])) { goto pt08M; } goto FkQw8; jxASW: } function getError() { return $this->errormsg; } function getCookies() { return $this->cookies; } function getRequestURL() { goto D_wmB; X8IhS: if (!($this->port != 80)) { goto iB9Rq; } goto kjybW; i94lL: iB9Rq: goto Grgjm; Gm5A6: return $url; goto NzN2W; Grgjm: $url .= $this->path; goto Gm5A6; kjybW: $url .= "\72" . $this->port; goto i94lL; D_wmB: $url = "\x68\164\x74\x70\72\x2f\x2f" . $this->host; goto X8IhS; NzN2W: } function setUserAgent($string) { $this->user_agent = $string; } function setAuthorization($username, $password) { $this->username = $username; $this->password = $password; } function setCookies($array) { $this->cookies = $array; } function useGzip($boolean) { $this->use_gzip = $boolean; } function setPersistCookies($boolean) { $this->persist_cookies = $boolean; } function setPersistReferers($boolean) { $this->persist_referers = $boolean; } function setHandleRedirects($boolean) { $this->handle_redirects = $boolean; } function setMaxRedirects($num) { $this->max_redirects = $num; } function setHeadersOnly($boolean) { $this->headers_only = $boolean; } function setDebug($boolean) { $this->debug = $boolean; } function quickGet($url) { goto uhBuO; yDO_L: $path .= "\77" . $bits["\161\165\145\x72\x79"]; goto P1txN; P1txN: GEoPL: goto AMU72; pjipf: return false; goto u82Mg; u82Mg: etz1G: goto Gp0w2; ncGSY: if (!isset($bits["\x71\x75\145\x72\x79"])) { goto GEoPL; } goto yDO_L; fc49R: return $client->getContent(); goto cqfro; cqfro: goto etz1G; goto RN_Db; gsFdk: $path = isset($bits["\x70\141\x74\x68"]) ? $bits["\160\141\164\x68"] : "\x2f"; goto ncGSY; uhBuO: $bits = parse_url($url); goto PZigm; PZigm: $host = $bits["\150\x6f\163\x74"]; goto WgJGh; AMU72: $client = new HttpClient($host, $port); goto E_Piz; E_Piz: if (!$client->get($path)) { goto ALCpQ; } goto fc49R; RN_Db: ALCpQ: goto pjipf; WgJGh: $port = isset($bits["\x70\x6f\162\164"]) ? $bits["\x70\157\x72\164"] : 80; goto gsFdk; Gp0w2: } function quickPost($url, $data) { goto Ezpjy; HHG4r: t2h_H: goto j2q7S; YA1Ih: $port = isset($bits["\160\157\x72\164"]) ? $bits["\x70\x6f\162\x74"] : 80; goto qmXXW; n0ijw: if (!$client->post($path, $data)) { goto duvdc; } goto sN25_; RCnny: duvdc: goto b4qy_; Ezpjy: $bits = parse_url($url); goto vGu2O; k3XGM: goto t2h_H; goto RCnny; qmXXW: $path = isset($bits["\160\141\x74\150"]) ? $bits["\x70\141\164\150"] : "\57"; goto L8hCW; sN25_: return $client->getContent(); goto k3XGM; vGu2O: $host = $bits["\150\x6f\x73\164"]; goto YA1Ih; L8hCW: $client = new HttpClient($host, $port); goto n0ijw; b4qy_: return false; goto HHG4r; j2q7S: } function debug($msg, $object = false) { goto j8pJ9; KzTe1: print "\x3c\160\162\x65\76" . $content . "\x3c\x2f\x70\162\x65\76"; goto g030M; Jrlch: ob_end_clean(); goto KzTe1; m2_lf: print "\74\x2f\144\x69\166\x3e"; goto O1uzS; lcCNz: ob_start(); goto fdiXZ; g030M: T8RNb: goto m2_lf; fdiXZ: print_r($object); goto WFwdO; O1uzS: KMVnl: goto hZVR8; WFwdO: $content = htmlentities(ob_get_contents()); goto Jrlch; hoLui: print "\74\x64\151\166\40\x73\x74\171\x6c\x65\x3d\42\x62\x6f\162\x64\x65\162\72\x20\x31\x70\170\x20\x73\x6f\x6c\x69\x64\40\x72\145\x64\x3b\x20\160\x61\x64\144\x69\156\x67\72\40\60\56\x35\145\155\x3b\40\x6d\141\x72\147\151\x6e\x3a\40\60\x2e\x35\x65\x6d\x3b\x22\x3e\x3c\x73\164\162\157\156\147\76\x48\164\164\x70\103\154\151\145\156\x74\40\104\145\x62\165\147\x3a\74\57\163\164\162\157\x6e\147\x3e\40" . $msg; goto yJmAz; j8pJ9: if (!$this->debug) { goto KMVnl; } goto hoLui; yJmAz: if (!$object) { goto T8RNb; } goto lcCNz; hZVR8: } }