{template 'web/common/common'}
{template 'web/system/navbar'}
<blockquote class="layui-elem-quote layui-text">
  运费规则->新增/编辑
</blockquote>
<div class="layui-card">
    <form class="layui-form" method="post" action="">
        <div class="layui-form-item">
            <label class="layui-form-label">规则名称</label>
            <div class="layui-input-block">
                <input type="text" name="name" value="{$data['list']['name']}" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">计费方式</label>
            <div class="layui-input-block">
                {if $data['list']['charge_type']==1}
                <label class="radio-inline">
                    <input type="radio" name="charge_type" value="1" title="按重计费" checked="">
                </label>
                <label class="radio-inline">
                    <input type="radio" name="charge_type" value="2" title="按件计费">
                </label>
                {else}
                <label class="radio-inline">
                    <input type="radio" name="charge_type" value="1" title="按重计费" >
                </label>
                <label class="radio-inline">
                    <input type="radio" name="charge_type" value="2" title="按件计费" checked="">
                </label>

                {/if}
            </div>
        </div>
        {if $data['list']['charge_type']==1}
        <div class="layui-form-item weight">
            <div class="layui-inline">
                <label class="layui-form-label">首重(克)</label>
                <div class="layui-input-inline" style="width: 200px;">
                    <input type="number" name="weight_first_piece" value="{$data['list']['first_piece']}"  class="layui-input">
                </div>
                <div class="layui-form-mid">首费(元)</div>
                <div class="layui-input-inline" style="width: 200px;">
                    <input type="number" name="weight_first_price" value="{$data['list']['first_price']}"  class="layui-input">
                </div>
            </div>
        </div>

        <div class="layui-form-item weight">
            <div class="layui-inline">
                <label class="layui-form-label">续重(克)</label>
                <div class="layui-input-inline" style="width: 200px;">
                    <input type="number" name="weight_second_piece"  value="{$data['list']['second_piece']}"  class="layui-input">
                </div>
                <div class="layui-form-mid">续费(元)</div>
                <div class="layui-input-inline" style="width: 200px;">
                    <input type="number" name="weight_second_price"  value="{$data['list']['second_price']}"   class="layui-input">
                </div>
            </div>
        </div>

        <div class="layui-form-item piece" style="display: none;">
            <div class="layui-inline">
                <label class="layui-form-label">首件(个)</label>
                <div class="layui-input-inline" style="width: 200px;">
                    <input type="number" name="piece_first_piece"  value="{$data['list']['first_piece']}" class="layui-input">
                </div>
                <div class="layui-form-mid">首费(元)</div>
                <div class="layui-input-inline" style="width: 200px;">
                    <input type="number" name="piece_first_price"  value="{$data['list']['first_price']}"  class="layui-input">
                </div>
            </div>
        </div>

        <div class="layui-form-item piece" style="display: none;">
            <div class="layui-inline">
                <label class="layui-form-label">续件(个)</label>
                <div class="layui-input-inline" style="width: 200px;">
                    <input type="number" name="piece_second_picec"  value="{$data['list']['second_piece']}"   class="layui-input">
                </div>
                <div class="layui-form-mid">续费(元)</div>
                <div class="layui-input-inline" style="width: 200px;">
                    <input type="number" name="piece_second_price"  value="{$data['list']['second_price']}"  class="layui-input">
                </div>
            </div>
        </div>
        {else}
        <div class="layui-form-item weight" style="display: none;">
            <div class="layui-inline">
                <label class="layui-form-label">首重(克)</label>
                <div class="layui-input-inline" style="width: 200px;">
                    <input type="number" name="weight_first_piece" value="{$data['list']['first_piece']}" class="layui-input">
                </div>
                <div class="layui-form-mid">首费(元)</div>
                <div class="layui-input-inline" style="width: 200px;">
                    <input type="number" name="weight_first_price" value="{$data['list']['first_price']}"  class="layui-input">
                </div>
            </div>
        </div>

        <div class="layui-form-item weight" style="display: none;">
            <div class="layui-inline">
                <label class="layui-form-label">续重(克)</label>
                <div class="layui-input-inline" style="width: 200px;">
                    <input type="number" name="weight_second_piece" value="{$data['list']['second_piece']}"  class="layui-input">
                </div>
                <div class="layui-form-mid">续费(元)</div>
                <div class="layui-input-inline" style="width: 200px;">
                    <input type="number" name="weight_second_price" value="{$data['list']['second_price']}"  class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item piece" >
            <div class="layui-inline">
                <label class="layui-form-label">首件(个)</label>
                <div class="layui-input-inline" style="width: 200px;">
                    <input type="number" name="piece_first_piece" value="{$data['list']['first_piece']}"  class="layui-input">
                </div>
                <div class="layui-form-mid">首费(元)</div>
                <div class="layui-input-inline" style="width: 200px;">
                    <input type="number" name="piece_first_price" value="{$data['list']['first_price']}"  class="layui-input">
                </div>
            </div>
        </div>

        <div class="layui-form-item piece">
            <div class="layui-inline">
                <label class="layui-form-label">续件(个)</label>
                <div class="layui-input-inline" style="width: 200px;">
                    <input type="number" name="piece_second_piece"  value="{$data['list']['second_piece']}" class="layui-input">
                </div>
                <div class="layui-form-mid">续费(元)</div>
                <div class="layui-input-inline" style="width: 200px;">
                    <input type="number" name="piece_second_price" value="{$data['list']['second_price']}"  class="layui-input">
                </div>
            </div>
        </div>
        {/if}

        <div class="layui-form-item">
            <div class="layui-input-block">
                <input type="hidden" name="id" value="{$data['list']['id']}">
                <button class="layui-btn layui-btn-sm" type="button" lay-filter="formSubmit" lay-submit="">保存</button>
                <a class="layui-btn layui-btn-primary layui-btn-sm" href="#" id="goBack">返回</a>
            </div>
        </div>
    </form>
</div>
{template 'common/footer'}
<script src="../addons/kundian_farm/resource/js/main.js" charset="utf-8"></script>
<script>
layui.use(['form', 'layedit', 'laydate'], function(){
    var form = layui.form,layer = layui.layer;
    form.on('submit(formSubmit)',function (data) {
        var formData = data.field;
        var url = "{url 'site/entry/admin',array('m'=>'kundian_farm','op'=>'freight_edit','action'=>'freight')}";
        var data = {
            formData: formData
        };
        postData(url, data);
        return false;
    })

    $("#goBack").click(function () {
        goBack();
    })
    $("input[name='charge_type']").click(function(){
        var charge_type=$(this).val();
        if(charge_type==1){
            $(".weight").show();
            $(".piece").hide();
        }else{
            $(".weight").hide();
            $(".piece").show();
        }
    })
});
</script>

