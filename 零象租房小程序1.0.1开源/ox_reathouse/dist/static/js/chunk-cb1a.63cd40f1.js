(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-cb1a"],{"3b3o":function(e,t,i){"use strict";i.r(t);var n=i("Is5O"),a=i("BO9Z"),o=i("glbJ"),l={components:{ImageUpload:a.a,Tinymce:o.a},data:function(){return{loading:!1,limit:1,ruleForm:{icon:"",sort:"",name:"",href:"",content:"",radio:"",imgList:[],id:""},options:[{value:"/pages/list/index?id=1",label:"整租"},{value:"/pages/list/index?id=2",label:"合租"},{value:"/pages/list/index?id=3",label:"民宿"}],value:"",isshow:!1}},created:function(){this.getDetail(this.$route.query)},methods:{submitForm:function(){var e=this;this.loading=!0,Object(n.c)(this.ruleForm).then(function(t){e.loading=!1,e.$message({message:"创建成功",type:"success"}),e.$router.push({path:"/service/index"})})},getDetail:function(e){var t=this;Object(n.b)(e).then(function(e){e.data.data&&(t.ruleForm=e.data.data)})}}},r=i("KHd+"),s=Object(r.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"musen-container "},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm chart-wrapper",attrs:{model:e.ruleForm,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"icon",prop:"desc"}},[i("ImageUpload",{attrs:{img:e.ruleForm.icon,filelist:e.ruleForm.imgList},on:{"update:img":function(t){e.$set(e.ruleForm,"icon",t)}}})],1),e._v(" "),i("el-form-item",{attrs:{label:"排序",prop:"name"}},[i("el-input",{attrs:{placeholder:"0～999"},model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}}),e._v(" "),i("template",{slot:"default"},[i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("数值越大，排序越靠前")])])],2),e._v(" "),i("el-form-item",{attrs:{label:"跳转",prop:"radio"}},[[i("el-radio",{attrs:{label:"1"},model:{value:e.ruleForm.radio,callback:function(t){e.$set(e.ruleForm,"radio",t)},expression:"ruleForm.radio"}},[e._v("链接")]),e._v(" "),i("el-radio",{attrs:{label:"2"},model:{value:e.ruleForm.radio,callback:function(t){e.$set(e.ruleForm,"radio",t)},expression:"ruleForm.radio"}},[e._v("图文")])]],2),e._v(" "),1==e.ruleForm.radio?i("el-form-item",{attrs:{label:"链接",prop:"href"}},[[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.href,callback:function(t){e.$set(e.ruleForm,"href",t)},expression:"ruleForm.href"}},e._l(e.options,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))]],2):e._e(),e._v(" "),2==e.ruleForm.radio?i("el-form-item",{attrs:{label:"图文",prop:"name"}},[i("tinymce",{attrs:{height:400},model:{value:e.ruleForm.content,callback:function(t){e.$set(e.ruleForm,"content",t)},expression:"ruleForm.content"}})],1):e._e(),e._v(" "),i("el-form-item",[i("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{loading:e.loading,type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")])],1)],1)],1)},[],!1,null,null,null);s.options.__file="add.vue";t.default=s.exports},"7w2M":function(e,t,i){"use strict";var n=i("VHl8");i.n(n).a},BO9Z:function(e,t,i){"use strict";var n={name:"ImageUpload",props:{limit:{type:Number,default:1},tip:{type:String,default:"只能上传jpg/png文件，且不超过500kb"},filelist:{type:Array,default:function(){return[]}}},data:function(){return{tempUrl:"",img:""}},computed:{imageUrl:function(){return this.value}},methods:{handleSucc:function(e){"SUCCESS"===e.state?(this.img=e.filename,this.$emit("update:img",e.filename),this.$emit("update:url",e.url),this.$message({message:"上传成功",type:"success"})):this.$message.error("上传失败")}}},a=i("KHd+"),o=Object(a.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-upload",{staticClass:"upload-demo",attrs:{"on-success":e.handleSucc,"file-list":e.filelist,limit:e.limit,name:"file",action:"/web/index.php?c=utility&a=file&do=upload&upload_type=image&global=&dest_dir=&uniacid=-1&quality=0&group_id=-1","list-type":"picture"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.tip))])],1)},[],!1,null,null,null);o.options.__file="image.vue";t.a=o.exports},Is5O:function(e,t,i){"use strict";i.d(t,"a",function(){return a}),i.d(t,"c",function(){return o}),i.d(t,"d",function(){return l}),i.d(t,"b",function(){return r});var n=i("t3Un");function a(e){return Object(n.a)({url:"/web/index.php?c=site&a=entry&m=ox_reathouse&do=web&r=service.type",method:"get",params:e})}function o(e){return Object(n.a)({url:"/web/index.php?c=site&a=entry&m=ox_reathouse&do=web&r=service.type_add",method:"post",data:e})}function l(e){return Object(n.a)({url:"/web/index.php?c=site&a=entry&m=ox_reathouse&do=web&r=service.type_del",method:"post",params:e})}function r(e){return Object(n.a)({url:"/web/index.php?c=site&a=entry&m=ox_reathouse&do=web&r=service.getNavDetail",method:"get",params:e})}},VHl8:function(e,t,i){},glbJ:function(e,t,i){"use strict";var n=i("4d7F"),a=i.n(n),o=i("GQeE"),l=i.n(o),r={name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var e=this;return l()(this.listObj).every(function(t){return e.listObj[t].hasSuccess})},handleSubmit:function(){var e=this,t=l()(this.listObj).map(function(t){return e.listObj[t]});this.checkAllSuccess()?(this.$emit("successCBK",t),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待所有图片上传成功 或 出现了网络问题，请刷新页面重新上传！")},handleSuccess:function(e,t){for(var i=t.uid,n=l()(this.listObj),a=0,o=n.length;a<o;a++)if(this.listObj[n[a]].uid===i)return this.listObj[n[a]].url=e.url,void(this.listObj[n[a]].hasSuccess=!0)},handleRemove:function(e){for(var t=e.uid,i=l()(this.listObj),n=0,a=i.length;n<a;n++)if(this.listObj[i[n]].uid===t)return void delete this.listObj[i[n]]},beforeUpload:function(e){var t=this,i=window.URL||window.webkitURL,n=e.uid;return this.listObj[n]={},new a.a(function(a,o){var l=new Image;l.src=i.createObjectURL(e),l.onload=function(){t.listObj[n]={hasSuccess:!1,uid:e.uid,width:this.width,height:this.height}},a(!0)})}}},s=(i("7w2M"),i("KHd+")),c=Object(s.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:e.color,borderColor:e.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("上传图片\n  ")]),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":e.fileList,"show-file-list":!0,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"before-upload":e.beforeUpload,action:"/web/index.php?c=utility&a=file&do=upload&upload_type=image&global=&dest_dir=&uniacid=-1&quality=0&group_id=-1","list-type":"picture-card"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1),e._v(" "),i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")])],1)],1)},[],!1,null,"adbee498",null);c.options.__file="editorImage.vue";var u=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],d=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],m={name:"Tinymce",components:{editorImage:c.exports},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:Number,required:!1,default:360}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN"}}},computed:{language:function(){return this.languageTypeList[this.$store.getters.language]}},watch:{value:function(e){var t=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(t.tinymceId).setContent(e||"")})},language:function(){var e=this;this.destroyTinymce(),this.$nextTick(function(){return e.initTinymce()})}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{initTinymce:function(){var e=this,t=this;window.tinymce.init({language:this.language,convert_urls:!1,selector:"#"+this.tinymceId,height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:d,menubar:this.menubar,plugins:u,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(i){t.value&&i.setContent(t.value),t.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",function(){e.hasChange=!0,e.$emit("input",i.getContent())})},setup:function(e){e.on("FullscreenStateChanged",function(e){t.fullscreen=e.state})}})},destroyTinymce:function(){window.tinymce.get(this.tinymceId)&&window.tinymce.get(this.tinymceId).destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(e){var t=this;e.forEach(function(e){console.log(e.url),window.tinymce.get(t.tinymceId).insertContent('<img class="wscnph" src="'+e.url+'" >')})}}},p=(i("xaBB"),Object(s.a)(m,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tinymce-container editor-container",class:{fullscreen:this.fullscreen}},[t("textarea",{staticClass:"tinymce-textarea",attrs:{id:this.tinymceId}}),this._v(" "),t("div",{staticClass:"editor-custom-btn-container"},[t("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:this.imageSuccessCBK}})],1)])},[],!1,null,"7efc165a",null));p.options.__file="index.vue";t.a=p.exports},rplf:function(e,t,i){},xaBB:function(e,t,i){"use strict";var n=i("rplf");i.n(n).a}}]);