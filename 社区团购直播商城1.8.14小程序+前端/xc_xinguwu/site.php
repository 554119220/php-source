<?php
 goto djHMJ; l07ea: include_once IA_ROOT . '/addons/' . $xcmodule . '/common/function.php'; goto gTXqz; YWLYI: global $xcmodule, $_W; goto Q6Bci; QGXbt: function xc_local_upmember($data = array(), $remarks = "", $cid = 2, $opusername = "", $openid) { goto NzVEk; UgL1f: $strwhere[':exp'] = $userdata['exp']; goto xPJhz; v67Mz: return array("error" => 1, "errmsg" => "更新用户信息失败"); goto pF5yr; hYuO6: $set_sql[] = ' exp=exp+:exp '; goto UgL1f; IgW6L: if ($ret) { goto PG6p4; } goto v67Mz; N6ogh: $strwhere = array(); goto kipJ0; BWzmh: $score_data['uniacid'] = $_W['uniacid']; goto sgkbl; nq9JP: $strwhere['unaicid'] = $_W['uniacid']; goto fEk_s; T5lW7: return array("error" => 1, "errmsg" => "余额，积分，金额 必须一个不为零", "errcode" => "1001"); goto KsSHC; kwnan: pdo_insert($xcmodule . '_member_exp_log', $exp_data); goto p00Om; kHLj3: mc_credit_update(mc_openid2uid($openid), 'credit1', $userdata['score'], array(mc_openid2uid($openid), $remarks, $xcmodule, "", "", 1)); goto pTd71; Q5BL4: foreach (array("score", "amount", "exp", "totalamount") as $keyvalue) { goto H4tqX; H4tqX: if (empty($data[$keyvalue])) { goto ZNMze; } goto RVBgx; eDEL4: ZNMze: goto d1DE3; RVBgx: $userdata[$keyvalue] = floatval($data[$keyvalue]); goto eDEL4; d1DE3: Mf2st: goto lKuQq; lKuQq: } goto z4OeW; OOhET: return array("error" => 1, "errmsg" => "openid不能为空", "errcode" => "1001"); goto uARbq; NzVEk: global $_W, $xcconfig, $xcmodule; goto yNvU9; JFTf_: $score_data['remarks'] = $remarks; goto H0gTW; ocoYa: $amount_data['remarks'] = $remarks; goto fV5q_; Qsedm: goto w1W81; goto PV0Vw; j1etK: $exp_data['uniacid'] = $_W['uniacid']; goto G2rRs; ncJEr: if (!($userdata['score'] == 0 && $userdata['amount'] == 0 && $userdata['exp'] == 0 && $userdata['totalamount'] == 0)) { goto zpjDg; } goto T5lW7; hSClp: $ret = pdo_query($sql, $strwhere); goto IgW6L; fdA22: $amount_data['costsamount'] = $userdata['amount']; goto yWyss; Aycjr: $exp_data['itype'] = 1; goto IVbby; uJxkq: nHjPj: goto Aycjr; S6fwM: epBjS: goto jjlLY; H0gTW: if ($userdata['score'] > 0) { goto Fp7bW; } goto QCQAr; sgkbl: $score_data['openid'] = $member['openid']; goto Ql6Af; IVbby: pLw2L: goto XEhEy; g6oIA: $score_data['surplusscore'] = $member['score']; goto JFTf_; ciMGa: $member = pdo_get($xcmodule . '_member', array("uniacid" => $_W['uniacid'], "openid" => $openid)); goto x7h0p; WGczg: pdo_insert($xcmodule . '_member_score_log', $score_data); goto eNWKL; yNvU9: $userdata = array("score" => 0, "amount" => 0, "exp" => 0, "totalamount" => 0); goto Q5BL4; RZjDD: load()->model('mc'); goto kHLj3; W6gbU: TgxUo: goto B9Ihu; rfE6j: $exp_data['itype'] = -1; goto ItcBP; AnKvB: $amount_data['uniacid'] = $_W['uniacid']; goto laQyB; pTd71: $userdata['score'] = 0; goto Ol0rk; z4OeW: l2RtH: goto B3KFm; e9wzw: $strwhere[':totalamount'] = $userdata['totalamount']; goto PaZTr; xqW6U: $score_data['cid'] = $cid; goto o80TD; o80TD: $score_data['opusername'] = $opusername; goto WGczg; XUf2c: $set_sql[] = ' amount = amount+:amount '; goto mpEY_; Ol0rk: aC_ib: goto ncJEr; VT5Ua: $score_data['itype'] = 1; goto ljmHB; uARbq: Zqnta: goto L7Xhn; pF5yr: goto TgxUo; goto RaQq0; PaZTr: Wcixz: goto GP2qK; mpEY_: $strwhere[':amount'] = $userdata['amount']; goto z53OU; GP2qK: $sql = 'update ' . tablename($xcmodule . '_member') . ' set ' . join(',', $set_sql) . ' where uniacid=:unaicid and openid=:openid '; goto nq9JP; fz9si: return array("error" => 1, "errmsg" => "必须有一个参数不为零", "errcode" => "1001"); goto S6fwM; h9r7p: $amount_data['cid'] = $cid; goto Lv2ac; B3KFm: if (!($userdata['score'] == 0 && $userdata['amount'] == 0 && $userdata['exp'] == 0 && $userdata['totalamount'] == 0)) { goto epBjS; } goto fz9si; mpY6z: $amount_data['itype'] = 1; goto oE40G; kipJ0: $set_sql = array(); goto xZMlW; Lv2ac: $amount_data['opusername'] = $opusername; goto HE8fF; CwW1D: if ($userdata['exp'] > 0) { goto nHjPj; } goto rfE6j; xZMlW: if (empty($userdata['amount'])) { goto mIw1s; } goto XUf2c; RjYZQ: $set_sql[] = 'totalscore = totalscore+:score '; goto EO05E; RaQq0: PG6p4: goto ciMGa; wSjKL: W_uwy: goto HN4EF; mSaf0: goto L7_xU; goto MLsdi; ItcBP: goto pLw2L; goto uJxkq; MLsdi: Fp7bW: goto VT5Ua; KsSHC: zpjDg: goto N6ogh; sINrY: $exp_data['opusername'] = $opusername; goto kwnan; x7h0p: if (empty($userdata['amount'])) { goto FP6G_; } goto AnKvB; z53OU: mIw1s: goto r0Iuc; laQyB: $amount_data['openid'] = $member['openid']; goto fdA22; G2rRs: $exp_data['openid'] = $member['openid']; goto PfZMQ; XEhEy: $exp_data['cid'] = $cid; goto sINrY; N5yvI: $strwhere[':score'] = $userdata['score']; goto mL1r9; EO05E: YWPhZ: goto wSjKL; YpTGT: FP6G_: goto HGKCX; fV5q_: if ($userdata['amount'] > 0) { goto yRLsk; } goto bFxil; NR4t5: if (empty($userdata['totalamount'])) { goto Wcixz; } goto Siw6Q; ljmHB: L7_xU: goto xqW6U; yWyss: $amount_data['surplusamount'] = $member['amount']; goto ocoYa; jazfr: $exp_data['remarks'] = $remarks; goto CwW1D; oE40G: w1W81: goto h9r7p; eNWKL: RECAe: goto lU85N; HN4EF: if (empty($userdata['exp'])) { goto c5obz; } goto hYuO6; fEk_s: $strwhere['openid'] = $openid; goto hSClp; bFxil: $amount_data['itype'] = -1; goto Qsedm; p00Om: IGEPg: goto pzOH5; mL1r9: if (!($userdata['score'] > 0)) { goto YWPhZ; } goto RjYZQ; r0Iuc: if (empty($userdata['score'])) { goto W_uwy; } goto Eu8Ru; lU85N: if (empty($userdata['exp'])) { goto IGEPg; } goto j1etK; jjlLY: if (!empty($openid)) { goto Zqnta; } goto OOhET; WMA4p: $exp_data['surplusexp'] = $member['exp']; goto jazfr; Siw6Q: $set_sql[] = ' totalamount = totalamount+:totalamount '; goto e9wzw; Ql6Af: $score_data['costscore'] = $userdata['score']; goto g6oIA; xPJhz: c5obz: goto NR4t5; pzOH5: return array("error" => 0, "errmsg" => "更新成功"); goto W6gbU; PfZMQ: $exp_data['costsexp'] = $userdata['exp']; goto WMA4p; PV0Vw: yRLsk: goto mpY6z; QCQAr: $score_data['itype'] = -1; goto mSaf0; Eu8Ru: $set_sql[] = ' score = score+:score '; goto N5yvI; L7Xhn: if (!(!empty($userdata['score']) && $xcconfig['webset']['unified_integral'] == 1)) { goto aC_ib; } goto RZjDD; HGKCX: if (empty($userdata['score'])) { goto RECAe; } goto BWzmh; HE8fF: pdo_insert($xcmodule . '_member_amount_log', $amount_data); goto YpTGT; B9Ihu: } goto zJYXV; zJYXV: function xc_excel($arytitle, $datas) { goto V8Ve2; scNSn: foreach ($datas as $item) { goto Cs0YK; Cs0YK: $temmodel = array(); goto wcGsP; xKHSC: XWif0: goto EH0oA; wcGsP: foreach ($arytitle as $titleitme) { $temmodel[] = $item[$titleitme['value']]; JRNfS: } goto xKHSC; lw8o0: shrvz: goto W4n98; EH0oA: $listmodel[] = $temmodel; goto lw8o0; W4n98: } goto cFY1E; cJfLH: fputcsv($fp, $tileArray); goto Bn_16; ZxaPM: $filename = date('ymdhis'); goto ggE34; LMaf8: header('Content-Type: text/csv'); goto z_MCk; pGo6F: ini_set('memory_limit', '512M'); goto dHP3m; w0d4f: $fp = fopen('php://output', 'w'); goto ZskpP; Lvy2Z: $listmodel = array(); goto M48AF; ZskpP: fwrite($fp, chr(0xef) . chr(0xbb) . chr(0xbf)); goto cJfLH; eefKb: ob_start(); goto LMaf8; Bn_16: $index = 0; goto qEYTo; dHP3m: ini_set('max_execution_time', 0); goto Xh9jE; t8usA: gKH3S: goto n6xvr; GlZMf: UtBt3: goto scNSn; iLl0b: exit; goto GIHGp; TEkEn: ob_end_clean(); goto iLl0b; JQBQV: flush(); goto TEkEn; n6xvr: ob_flush(); goto JQBQV; M48AF: foreach ($arytitle as $titleitme) { $tileArray[] = $titleitme['name']; voZ6S: } goto GlZMf; z_MCk: header('Content-Disposition:filename=' . $filename . '.csv'); goto w0d4f; ggE34: $dataArray = $listmodel; goto pGo6F; V8Ve2: $tileArray = array(); goto Lvy2Z; qEYTo: foreach ($dataArray as $item) { goto mG3sh; mG3sh: if (!($index == 1000)) { goto neUFm; } goto ztzaX; bZuoQ: neUFm: goto nTjUb; pZL5j: ob_flush(); goto e1gDg; e1gDg: flush(); goto bZuoQ; ztzaX: $index = 0; goto pZL5j; rquZH: lKyQu: goto cBCyd; nTjUb: $index++; goto nTpSi; nTpSi: fputcsv($fp, $item); goto rquZH; cBCyd: } goto t8usA; cFY1E: u8P3J: goto ZxaPM; Xh9jE: ob_end_clean(); goto eefKb; GIHGp: } goto zqcFZ; Q6Bci: $xcmodule = 'xc_xinguwu'; goto l07ea; nq440: function xc_muban_deliver($id) { goto BZKIa; i0B79: $data = str_replace('{{order}}', $order['order'], $data); goto ELHZc; szYXF: $post_data['form_id'] = $order['formid'][2]; goto h4mF2; FT77a: CV43k: goto RhTb6; XD9ZC: $data = str_replace('{{paytime}}', $order['paytime'], $data); goto jCG7R; kJb7G: $data = str_replace('{{express}}', $order['express'], $data); goto UXMG0; waJUM: goto PRpE9; goto z4mxY; J74vk: Z09lC: goto d71B3; GQiA1: $data = str_replace('{{paytype}}', '余额支付', $data); goto m9bd8; PpvP0: $post_data['touser'] = $order['openid']; goto A14va; OFiDG: xhcPk: goto cpp5a; wPlnJ: if (!($order['paytype'] == 2)) { goto wEONK; } goto wMeBT; xkB89: if (!empty($order)) { goto Xmhbm; } goto tLJtA; s9IT2: $data = str_replace('{{deliver_time}}', $order['deliver_time'], $data); goto FZRA1; LThy1: if (!($order['cid'] == 5)) { goto CV43k; } goto oP4aQ; MqB7L: q61nr: goto Nmo4m; JfY9n: $data = str_replace('{{express_name}}', $order['express_name'], $data); goto UkK2A; FlRe9: $account_api = WeAccount::create(); goto XwviD; c7sh9: $data = str_replace('{{totalnum}}', $order['totalnum'], $data); goto uTYVZ; PyQFn: if (!($order['paytype'] == 3)) { goto G3Hu4; } goto qX8El; XwviD: $access_token = $account_api->getAccessToken(); goto cmh5O; EAczx: if (empty($order['payid'])) { goto zZXi8; } goto FeRS3; wMeBT: $data = str_replace('{{paytype}}', '微信支付', $data); goto SPyd0; RhTb6: if (!($order['cid'] == 6)) { goto sBOQb; } goto mZCsV; sn7dl: if (!$muban) { goto zk5tF; } goto yrli2; jovQ5: curl_close($ch); goto mo1oW; NcHXF: curl_setopt($ch, CURLOPT_POST, 1); goto yGkQf; FeRS3: $post_data['form_id'] = $order['payid']; goto waJUM; xn8gL: $share = '../orderDetail/orderDetail?id=' . $id; goto PyZhv; qX8El: $data = str_replace('{{paytype}}', '余额不足,微信抵扣', $data); goto x2m2s; BZKIa: global $xcmodule, $_W; goto EXu9r; AIwA4: $output = curl_exec($ch); goto jovQ5; wvHUq: $data = str_replace('{{cid}}', '积分订单', $data); goto J74vk; oP4aQ: $data = str_replace('{{cid}}', '团订单', $data); goto FT77a; InAHR: curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); goto NcHXF; d71B3: if (!($order['cid'] == 4)) { goto prMiE; } goto S0pbm; U636f: $post_data['data'] = $data; goto D7y3E; EXu9r: $type = 1; goto PjLEk; ba_PG: $order['list'] = iunserializer($order['list']); goto MFXE1; UkK2A: $data = json_decode($data, true); goto PpvP0; fOoYK: $data = str_replace('{{cid}}', '普通订单', $data); goto MqB7L; jCG7R: if (!($order['paytype'] == 1)) { goto BaYn9; } goto GQiA1; FJZbV: $good_name = ''; goto EtXZ_; gxYn3: $data = str_replace('{{address}}', $order['region'] . $order['detail'], $data); goto GQYHh; UXMG0: $data = str_replace('{{remark}}', $order['remark'], $data); goto c7sh9; yGkQf: curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data); goto PT09g; zgzh5: sBOQb: goto gxYn3; z2fEi: prMiE: goto LThy1; IWhPF: $data = str_replace('{{price}}', $order['price'], $data); goto XD9ZC; cpp5a: $data = str_replace('{{list}}', $good_name, $data); goto IWhPF; BgpyS: $order = pdo_get($xcmodule . '_order', array("uniacid" => $uniacid, "id" => $id), array("openid", "payid", "formid", "order", "createtime", "price", "paytime", "paytype", "cid", "list", "region", "detail", "express", "remark", "totalnum", "name", "phone", "order_price", "express_number", "express_name", "deliver_time")); goto xkB89; h4mF2: PRpE9: goto U636f; PjLEk: $uniacid = $_W['uniacid']; goto q11sX; PT09g: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); goto XNWfq; mo1oW: zk5tF: goto aYj_R; MFXE1: $muban = pdo_get($xcmodule . '_other', array("uniacid" => $uniacid, "keyval" => $keyval, "status" => 1)); goto sn7dl; yrli2: $muban = json_decode($muban['contents'], true); goto FlRe9; uEMxa: $post_data = json_encode($post_data); goto oCOxh; PyZhv: $share = urlencode($share); goto ztgtd; FZRA1: $data = str_replace('{{express_number}}', $order['express_number'], $data); goto JfY9n; SC93Y: HaeAo: goto wiLCY; Haj34: if (!($order['paytype'] == 4)) { goto HaeAo; } goto HSwdR; ELHZc: $data = str_replace('{{createtime}}', $order['createtime'], $data); goto FJZbV; mTfIa: curl_setopt($ch, CURLOPT_URL, $url); goto InAHR; ohdDP: Xmhbm: goto ba_PG; D7y3E: $url = 'https://api.weixin.qq.com/cgi-bin/message/wxopen/template/send?access_token=' . $access_token; goto uEMxa; ztgtd: $post_data['page'] = $xcmodule . '/pages/base/base?share=' . $share; goto EAczx; kCmms: $data = str_replace('{{phone}}', $order['phone'], $data); goto s9IT2; tLJtA: return false; goto ohdDP; m9bd8: BaYn9: goto wPlnJ; AUo69: $order['formid'] = json_decode($order['formid'], true); goto szYXF; z4mxY: zZXi8: goto AUo69; GQYHh: $data = str_replace('{{order_price}}', $order['order_price'], $data); goto kJb7G; cmh5O: $data = $muban['contents']; goto i0B79; q11sX: $keyval = 'mb_deliver_sure'; goto BgpyS; oCOxh: $ch = curl_init(); goto mTfIa; Nmo4m: if (!($order['cid'] == 2)) { goto Z09lC; } goto wvHUq; mZCsV: $data = str_replace('{{cid}}', '抢购订单', $data); goto zgzh5; SPyd0: wEONK: goto PyQFn; x2m2s: G3Hu4: goto Haj34; S0pbm: $data = str_replace('{{cid}}', '砍价订单', $data); goto z2fEi; uTYVZ: $data = str_replace('{{name}}', $order['name'], $data); goto kCmms; XNWfq: curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0); goto AIwA4; A14va: $post_data['template_id'] = $muban['template_id']; goto xn8gL; HSwdR: $data = str_replace('{{paytype}}', '线下支付', $data); goto SC93Y; EtXZ_: foreach ($order['list'] as $list) { $good_name .= $list['name'] . '(' . $list['num'] . ');'; Um7oM: } goto OFiDG; wiLCY: if (!($order['cid'] == 1)) { goto q61nr; } goto fOoYK; aYj_R: } goto FjACv; gTXqz: include_once IA_ROOT . '/addons/' . $xcmodule . '/common/site/function.php'; goto xh5KM; zqcFZ: function xc_excel2($ary, $datas) { goto YvgMU; niiUG: exit; goto vQJJD; LGuf2: lB7cR: goto s1I3j; n1Fcl: goto OFDQT; goto xHR38; UHG1m: $i = 2; goto PD_Ah; IIwdn: $mer = $i / 26; goto V9S7x; MOmL4: header('Expires: 0'); goto EusV5; TXtJv: k9GtV: goto UApqZ; TCzSY: $objPHPExcel->getActiveSheet()->getRowDimension('1')->setRowHeight(30); goto JtAG_; V9S7x: if ($mer >= 1) { goto SNU0C; } goto XY5U3; QFDts: $q = 0; goto TXtJv; hqxIq: $i = 0; goto QFDts; LVYWL: $objPHPExcel->getActiveSheet()->freezePane('A2'); goto UHG1m; H04_V: header('Content-Type:application/download'); goto yMcTh; bFNm_: bBuWG: goto l2v5Q; xKEcM: OFDQT: goto ZNzCa; bl37a: nJ7NT: goto gCti1; GlIuJ: SNU0C: goto d88lQ; M7TDT: include IA_ROOT . '/framework/library/phpexcel/PHPExcel/Writer/Excel2007.php'; goto bOAPG; EfThW: $i = 0; goto xKEcM; Fe1Pa: $objPHPExcel->getActiveSheet()->getStyle($let[$i])->getAlignment()->setWrapText(true); goto dEyL6; EusV5: header('Cache-Control:must-revalidate, post-check=0, pre-check=0'); goto H37xh; k1Vcs: header('Content-Transfer-Encoding:binary'); goto B3VRC; d88lQ: $val = $let_md[$mer] . $let_md[$rem]; goto D2axk; YHOOA: header('Pragma: public'); goto MOmL4; j3RvZ: $let[$i] = $val; goto bFNm_; CYyqn: $i++; goto n1Fcl; H37xh: header('Content-Type:application/force-download'); goto H5esl; s1I3j: $objActSheet = $objPHPExcel->getActiveSheet(); goto TCzSY; D2axk: vieh3: goto j3RvZ; B3VRC: $objWriter = new PHPExcel_Writer_Excel5($objPHPExcel); goto tNgT4; JtAG_: foreach ($let as $item) { $objActSheet->getColumnDimension($item)->setWidth(30); GtVfA: } goto Kg2JD; V0ZkW: $objPHPExcel->getActiveSheet()->setTitle('表单数据'); goto m8jq2; cEXo9: goto k9GtV; goto bl37a; dEyL6: $objPHPExcel->getActiveSheet()->setCellValue($let[$i] . '1', $ary[$i]['name']); goto ogZMS; m8jq2: $objPHPExcel->getActiveSheet()->getDefaultRowDimension()->setRowHeight(90); goto LVYWL; ZNzCa: if (!($i < count($ary))) { goto rFxzj; } goto Fe1Pa; VbflE: $let = array(); goto hqxIq; YvgMU: include IA_ROOT . '/framework/library/phpexcel/PHPExcel.php'; goto M7TDT; gsboo: header('Content-Type:application/octet-stream'); goto H04_V; yMcTh: header('Content-Disposition:attachment;filename="testdata.xls"'); goto k1Vcs; ogZMS: hyLDz: goto CYyqn; DK9VS: $rem = $i % 26; goto IIwdn; Xm7u7: ob_end_clean(); goto YHOOA; ucHuW: goto vieh3; goto GlIuJ; bOAPG: $objPHPExcel = new PHPExcel(); goto kbDH3; H5esl: header('Content-Type:application/vnd.ms-execl'); goto gsboo; xHR38: rFxzj: goto V0ZkW; XY5U3: $val = $let_md[$rem]; goto ucHuW; tNgT4: $objWriter->save('php://output'); goto niiUG; l2v5Q: $i++; goto cEXo9; PD_Ah: foreach ($datas as $data) { goto iVX7w; FXb4g: $objPHPExcel->getActiveSheet()->getStyle('A' . $i . ':' . $let[count($let) - 1] . $i)->getAlignment()->setVertical(PHPExcel_Style_Alignment::VERTICAL_CENTER); goto b9QUa; b9QUa: $q = 0; goto MCmGF; tree1: $objPHPExcel->getActiveSheet()->setCellValue($let[$q] . $i, $data[$ary[$q]['value']]); goto oe_qj; y_WCX: DPT0j: goto PC18G; Smb23: if (!($q < count($ary))) { goto u2FN9; } goto tree1; rFBfv: $i++; goto y_WCX; Ceoaa: goto bMh6R; goto iWrFU; eroi4: $q++; goto Ceoaa; MCmGF: bMh6R: goto Smb23; iVX7w: $objPHPExcel->getActiveSheet()->getRowDimension($i)->setRowHeight(60); goto FXb4g; oe_qj: rxP7y: goto eroi4; iWrFU: u2FN9: goto rFBfv; PC18G: } goto LGuf2; UApqZ: if (!($i < count($ary))) { goto nJ7NT; } goto DK9VS; Kg2JD: vi12H: goto Xm7u7; kbDH3: $let_md = array("A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"); goto VbflE; gCti1: $objPHPExcel->getProperties()->setCreator('Phpmarker')->setLastModifiedBy('Phpmarker')->setTitle('Phpmarker')->setSubject('Phpmarker')->setDescription('Phpmarker')->setKeywords('Phpmarker')->setCategory('Phpmarker'); goto EfThW; vQJJD: } goto nq440; pgKc4: class xc_xinguwuModuleSite extends WeModuleSite { public function __construct() { global $xcconfig; $xcconfig = xc_ht_config(); } public function doMobileRecord() { goto jWWxy; AmkTF: $data['file_id'] = $param['file_id']; goto PZhkT; tEQvm: if (!($param['duration'] < intval($webset['live_playback_time']) * 60)) { goto u47xq; } goto gF1t7; boumP: $data['file_size'] = $param['file_size']; goto AmkTF; HhJA4: if (!($param['event_type'] == 0)) { goto Njzbz; } goto yCVEB; Je3Ij: $webset = pdo_get($xcmodule . '_other', array("uniacid" => $_W['uniacid'], "keyval" => "webconfig")); goto x7sV6; T2Dnm: logging_run($sql); goto EvXmc; sP774: pdo_update($xcmodule . '_live', $updata, array("uniacid" => $_W['uniacid'], "stream" => $stream)); goto ZEbf7; PJ0Yv: logging_run('-----------开始 ----------------'); goto T2Dnm; OuWg0: exit; goto pGukd; ZEbf7: goto aDWID; goto afpOQ; ixCbT: $updata = array(); goto W8oxS; iVjNt: if (!($webset['live'] != 1)) { goto njeh7; } goto OuWg0; rgdnF: u47xq: goto PqTY0; iHQHS: gvdSJ: goto HhJA4; PZhkT: $data['file_format'] = $param['file_format']; goto WzsxP; CAwsk: lUjnW: goto cqdiB; yCVEB: $updata = array(); goto hWe_p; AzsQg: logging_run('----------结束-----------------'); goto GI9qm; l_CwG: $updata['modifytime'] = date('Y-m-d H:i:s'); goto WT0Rs; gF1t7: exit; goto rgdnF; rCZo9: PZBuE: goto jwclf; lCEB6: if ($live['isplay'] == 1) { goto hW3dA; } goto ixCbT; eXu50: if ($param['stream_id']) { goto r7h1J; } goto tm2AF; cqdiB: if (!($param['event_type'] == 1)) { goto gvdSJ; } goto YT31R; B2w1s: r7h1J: goto GU72T; t0dQy: $updata['modifytime'] = date('Y-m-d H:i:s'); goto M8Omq; x3Om9: aDWID: goto iHQHS; Z35hG: logging_run(json_encode($playback, true)); goto AzsQg; jWWxy: global $_GPC, $xcmodule, $_W; goto Rhphn; f504C: $param = $_GPC['__input']; goto BMiNC; M8Omq: $updata['errmsg'] = $param['errmsg']; goto sP774; hWe_p: $updata['isplay'] = -1; goto l_CwG; jwclf: $data['status'] = 1; goto XfU8M; EvXmc: logging_run(array(":uniacid" => $_W['uniacid'], ":live_id" => $live)); goto Z35hG; W8oxS: $updata['isplay'] = 1; goto t0dQy; ofkmt: $live = pdo_getcolumn($xcmodule . '_live', array("uniacid" => $_W['uniacid'], "stream" => $stream), 'id'); goto NZDUo; yfgSR: if (!($param['event_type'] == 100 && $webset['live_playback'] == 1)) { goto lUjnW; } goto ofkmt; sFjyt: if ($playback && $playback['status'] == 2) { goto PZBuE; } goto tEQvm; VQ1wI: $data['video_url'] = $param['video_url']; goto boumP; NZDUo: $sql = ' select id,status  from ' . tablename($xcmodule . '_live_playback') . ' where uniacid=:uniacid and live_id=:live_id order by id desc limit 1'; goto K6OYD; PqTY0: $data['status'] = 2; goto LYFia; BMiNC: logging_run(json_encode($param, true)); goto Kqfjs; afpOQ: hW3dA: goto x3Om9; XfU8M: pdo_update($xcmodule . '_live_playback', $data, array("uniacid" => $_W['uniacid'], "id" => $playback['id'])); goto hviTv; Kqfjs: $stream = ''; goto eXu50; ZjWpK: $data['live_id'] = $live; goto tY42A; FUB5R: goto Qj9Z5; goto B2w1s; YT31R: $live = pdo_get($xcmodule . '_live', array("uniacid" => $_W['uniacid'], "stream" => $stream), array("isplay")); goto lCEB6; tm2AF: return; goto FUB5R; tY42A: pdo_insert($xcmodule . '_live_playback', $data); goto zU1ft; zU1ft: goto qU6_Q; goto rCZo9; GU72T: $stream = substr($param['stream_id'], stripos($param['stream_id'], '_') + 1); goto X8Wkb; GI9qm: $data = array(); goto VQ1wI; x7sV6: $webset = json_decode($webset['contents'], true); goto iVjNt; WzsxP: $data['duration'] = $param['duration']; goto sFjyt; LYFia: $data['uniacid'] = $_W['uniacid']; goto ZjWpK; Rhphn: load()->func('logging'); goto f504C; K6OYD: $playback = pdo_fetch($sql, array(":uniacid" => $_W['uniacid'], ":live_id" => $live)); goto PJ0Yv; pGukd: njeh7: goto yfgSR; hviTv: qU6_Q: goto CAwsk; VFQOP: pdo_update($xcmodule . '_live', $updata, array("uniacid" => $_W['uniacid'], "stream" => $stream)); goto bVK0j; bVK0j: Njzbz: goto hag8Z; X8Wkb: Qj9Z5: goto Je3Ij; WT0Rs: $updata['errmsg'] = $param['errmsg']; goto VFQOP; hag8Z: } public function doMobileUpload() { goto EJ_Tv; LTDGz: if (empty($_W['setting']['remote']['type'])) { goto h8SN6; } goto Y9PDD; n7Rzf: load()->func('file'); goto XnvSd; Y9PDD: file_remote_upload($ret['path']); goto y_0D5; bSR87: $file = $_FILES['file']; goto n7Rzf; O1wqI: ULDTk: goto pj_9V; XnvSd: $ret = file_upload($file, 'image', $_GPC['filename']); goto vO9yC; vO9yC: if ($ret['success']) { goto fRlH0; } goto vMYxe; EJ_Tv: global $_GPC, $_W; goto bSR87; kHe3c: fRlH0: goto LTDGz; Lwkp4: xc_message(1); goto O1wqI; vMYxe: xc_message(-1); goto wfMw9; y_0D5: h8SN6: goto Lwkp4; wfMw9: goto ULDTk; goto kHe3c; pj_9V: } public function xc_order_print($id = "", $order = "") { goto yCInk; WLw38: IGQdF: goto YerdF; snK_w: $request = push($requestInfo, $requestUrl); goto rUDVV; Mg7FJ: HljgO: goto EadHH; rBiI5: $content .= '<tr><td>备注:' . $order['remark'] . '</td></tr>'; goto Gfzwi; hqStB: foreach ($order['list'] as $list) { goto uimWx; wrV0n: $orderInfo .= '数量:1<BR>'; goto oTgVG; jwp_J: $orderInfo .= '金额:' . $order['list']['price'] . '<BR>'; goto wrV0n; FL6UY: $orderInfo .= '积分:' . $order['list']['integral'] . '<BR>'; goto jwp_J; uimWx: $orderInfo .= '名称:' . $order['list']['name'] . '<BR>'; goto FL6UY; oTgVG: WX6jI: goto mXPGK; mXPGK: } goto LAY6u; Xfl0o: $orderInfo .= '<QR>' . $order['order'] . '</QR>'; goto EjVFX; ZTDtW: if (!empty($order)) { goto bX88l; } goto qGiFm; juDzR: $content .= '<tr><td>收件人:' . $order['name'] . '</td></tr>'; goto AoGxs; IotAD: $machine_code = $print['machine_code']; goto YrQlM; dNtBn: upW0z: goto zJ89z; ilsEZ: define('PORT', 80); goto d7cBt; LAY6u: EMNK6: goto u2sue; uSXcf: define('SIG', sha1(USER . UKEY . STIME)); goto ApvaS; MCQle: r9T85: goto oLqrk; Fj4Zm: if (!empty($print)) { goto dcbP3; } goto hXZks; PJIYX: bX88l: goto T_2as; jjjA1: unset($list); goto INHLp; aHjxQ: $content2[] = '客户联系方式:' . $order['value']['address']['phone']; goto bKROA; Rncuo: dLv3z: goto Cw_S3; p6wJh: define('UKEY', $print['ukey']); goto J0jy5; iOUG9: define('IP', 'api.feieyun.cn'); goto ilsEZ; Lv64v: $content .= '<tr><td>订单号:' . $order['order'] . '</td></tr>'; goto qw2El; Xbqu4: $content2[] = '地址:' . $order['region'] . $order['detail']; goto toEHa; UmvFv: gfisQ: goto Xfl0o; c7DgY: RPCuC: goto xe60C; btHtn: $orderInfo .= '客户地址：' . $order['value']['address']['address'] . '<BR>'; goto UmvFv; bsvJY: $content2[] = '客户姓名:' . $order['value']['address']['name']; goto aHjxQ; u2sue: unset($list); goto j3A6h; nEwmQ: z2ZqP: goto W6Idj; pmijf: $orderInfo .= '客户联系方式：' . $order['value']['address']['phone'] . '<BR>'; goto btHtn; x05er: $content = join('
', $content2); goto qBUFh; rUDVV: return $request; goto Mg7FJ; JOvD6: $table = $xcmodule . '_order'; goto vtZ3I; UP_pZ: if (!($order['cid'] == 2)) { goto ejyPt; } goto FMShR; tTFXO: if (!($order['is_community'] == 1)) { goto gfisQ; } goto kowLQ; ACM_2: $content2[] = '支付方式:' . array("1" => "余额", "2" => "微信", "3" => "余额不足微信抵扣")[$order['paytype']]; goto eXPmL; T_2as: $parm = array("uniacid" => $_W['uniacid'], "order" => $order); goto MCQle; ApvaS: $orderInfo = '<CB>订单内容</CB><BR>'; goto q_tOv; cgFiU: $content = ''; goto mGMWu; eqIbw: goto ar7YQ; goto WLw38; XTTg4: define('USER', $print['user']); goto p6wJh; XJ1Da: if (!($order['is_community'] == 1)) { goto dLv3z; } goto bsvJY; gNJQy: $content2[] = '收件人:' . $order['name']; goto LN9ye; z5tMe: $order['list'] = iunserializer($order['list']); goto hsZqM; mGMWu: $content .= '<table>'; goto Lv64v; RdDXn: dcbP3: goto SqI2_; vzb_T: $content2[] = '总金额:' . $order['order_price']; goto N0bdM; qBUFh: GgCbD: goto n19DK; q_tOv: $orderInfo .= '订单号:' . $order['order'] . '<BR>'; goto wYxcl; DWOm_: $content2 = ''; goto cgFiU; ObGHT: GvaCG: goto hqStB; hsZqM: if (!($order['is_community'] == 1)) { goto RPCuC; } goto J48hE; vtZ3I: $order = pdo_get($table, $parm, $arr); goto gqZzX; b6JFf: $orderInfo .= '实付：' . $order['price'] . '元<BR>'; goto j9t6P; d7cBt: define('PATH', '/Api/Open/'); goto lCZ5d; aMxvT: $orderInfo .= '备注：' . $order['remark'] . '<BR>'; goto fEcEm; j9t6P: $orderInfo .= '联系人: ' . $order['name'] . '.<BR>'; goto ebRu4; fEcEm: $orderInfo .= '--------------------------------<BR>'; goto hwVSq; W6Idj: $partner = $print['partner']; goto TlsEC; n19DK: $sign = strtoupper(md5($apikey . 'machine_code' . $machine_code . 'partner' . $partner . 'time' . $time . $msign)); goto H3znS; Gfzwi: $content .= '</table>'; goto pQeNP; j3A6h: vVviH: goto ZuIZ6; h8k0_: P0ja2: goto nxbKe; SycKM: ejyPt: goto eqIbw; hwVSq: $orderInfo .= '合计：' . $order['order_price'] . '元<BR>'; goto b6JFf; xl1J8: XG8KZ: goto ZkTh_; eXPmL: $content2[] = '备注:' . $order['remark']; goto rBiI5; J0jy5: define('SN', $print['sn']); goto iOUG9; INHLp: goto vVviH; goto ObGHT; pdbhP: $content .= '<tr><td>客户联系方式:' . $order['value']['address']['phone'] . '</td></tr>'; goto mfZAz; oLqrk: goto GIpo0; goto h8k0_; mfZAz: $content .= '<tr><td>客户地址:' . $order['value']['address']['address'] . '</td></tr>'; goto Rncuo; FMShR: foreach ($order['list'] as $list) { goto VVBJb; yf6ZF: $content2[] = '数量:1'; goto Wn6Oa; ZhlUV: $content .= '<tr><td>金额:' . $list['price'] . '</td></tr>'; goto YXuw1; pfEwt: $content .= '<tr><td>积分:' . $list['integral'] . '</td></tr>'; goto ZhlUV; Wn6Oa: $content .= '<tr><td>名称:' . $list['name'] . '</td></tr>'; goto pfEwt; oxJC7: $content2[] = '金额:' . $list['price']; goto yf6ZF; MWJPi: $content2[] = '积分:' . $list['integral']; goto oxJC7; VVBJb: $content2[] = '名称:' . $list['name']; goto MWJPi; YXuw1: $content .= '<tr><td>数量:1</td></tr>'; goto t8aDZ; t8aDZ: zE0AG: goto jMqmK; jMqmK: } goto fAp5r; SqI2_: $print = json_decode($print['contents'], true); goto F5ulA; nxbKe: $parm = array("uniacid" => $_W['uniacid'], "id" => $id); goto kpYER; hqQ38: $requestAll = array("partner" => $partner, "machine_code" => $machine_code, "time" => $time, "content" => $content, "sign" => $sign); goto nXrNz; aTcfc: $print = pdo_get($xcmodule . '_other', array("uniacid" => $_W['uniacid'], "keyval" => "print", "status" => 1)); goto Fj4Zm; J48hE: $order['value'] = json_decode($order['value'], true); goto c7DgY; eRd2c: include IA_ROOT . '/addons/' . $_GPC['m'] . '/resource/HttpClient.class.php'; goto XTTg4; zJ89z: foreach ($order['list'] as $list) { goto cs3NG; wshp0: $orderInfo .= '数量:' . $list['num'] . '<BR>'; goto WPYwB; ZAo4a: $orderInfo .= '单价:' . $list['price'] . '<BR>'; goto wshp0; WPYwB: rG7VC: goto F71qI; CD0bB: $orderInfo .= '属性:' . $list['attr'] . '<BR>'; goto ZAo4a; cs3NG: $orderInfo .= '名称:' . $list['name'] . '<BR>'; goto CD0bB; F71qI: } goto GCmBn; Or584: $time = time(); goto DWOm_; zB3ei: if (!($print['type'] == 2)) { goto SdXuG; } goto eRd2c; qib7f: SdXuG: goto sHy6D; toEHa: $content .= '<tr><td>总金额:' . $order['order_price'] . '</td></tr>'; goto x8WBj; TlsEC: $apikey = $print['apikey']; goto IotAD; kFh6s: if (!empty($id)) { goto P0ja2; } goto ZTDtW; KG49N: if ($order['cid'] == 1 || $order['cid'] == 4 || $order['cid'] == 5 || $order['cid'] == 6) { goto upW0z; } goto Dmcqj; H3znS: $requestUrl = 'http://open.10ss.net:8888'; goto hqQ38; EjVFX: $request = wp_print(SN, $orderInfo, 1); goto Cjni4; gqZzX: if (!$order) { goto kJOGm; } goto z5tMe; xe60C: kJOGm: goto yBTWi; fQs4L: $content .= '<tr><td>客户姓名:' . $order['value']['address']['name'] . '</td></tr>'; goto pdbhP; wYxcl: $orderInfo .= '--------------------------------<BR>'; goto KG49N; lCZ5d: define('STIME', time()); goto uSXcf; LN9ye: $content2[] = '联系方式:' . $order['phone']; goto Xbqu4; hXZks: return false; goto RdDXn; G8TgW: goto r9T85; goto PJIYX; fAp5r: YhkUS: goto PbLU7; ebRu4: $orderInfo .= '联系电话：' . $order['phone'] . '<BR>'; goto lJboj; GCmBn: uwCAr: goto jjjA1; ZkTh_: unset($list); goto QMqSw; bOOS3: if ($order['cid'] == 1 || $order['cid'] == 4 || $order['cid'] == 5 || $order['cid'] == 6) { goto IGQdF; } goto UP_pZ; Dmcqj: if ($order['cid'] == 2) { goto GvaCG; } goto GKhPi; ZuIZ6: $orderInfo .= '支付方式：' . array("1" => "余额", "2" => "微信", "3" => "余额不足微信抵扣")[$order['paytype']] . '<BR>'; goto aMxvT; x8WBj: $content .= '<tr><td>实付金额:' . $order['price'] . '</td></tr>'; goto juDzR; F5ulA: $arr = array("order", "list", "order_price", "price", "remark", "name", "phone", "region", "detail", "cid", "value", "is_community", "paytype"); goto JOvD6; pQeNP: if (!($print['xtype'] == 2)) { goto GgCbD; } goto x05er; PbLU7: unset($list); goto SycKM; lJboj: $orderInfo .= '地址：' . $order['region'] . $order['detail'] . '<BR>'; goto tTFXO; qw2El: $content2[] = '订单号:' . $order['order']; goto bOOS3; yBTWi: if ($print['type'] == 1) { goto z2ZqP; } goto zB3ei; yCInk: global $_W, $xcmodule, $_GPC; goto kFh6s; kpYER: GIpo0: goto aTcfc; N0bdM: $content2[] = '实付金额:' . $order['price']; goto gNJQy; Cjni4: return $request; goto qib7f; GKhPi: goto vVviH; goto dNtBn; YerdF: foreach ($order['list'] as $list) { goto PEUeL; ugN9D: $content .= '<tr><td>单价:' . $list['price'] . '</td></tr>'; goto vc7RM; uu_Sw: $content2[] = '属性:' . $list['attr']; goto w9cLb; etO_H: $content2[] = '数量:' . $list['num']; goto TuOxB; w9cLb: $content2[] = '单价:' . $list['price']; goto etO_H; X24V7: $content .= '<tr><td>属性:' . $list['attr'] . '</td></tr>'; goto ugN9D; LLgAL: ribvM: goto KmQMH; vc7RM: $content .= '<tr><td>数量:' . $list['num'] . '</td></tr>'; goto LLgAL; TuOxB: $content .= '<tr><td>名称:' . $list['name'] . '</td></tr>'; goto X24V7; PEUeL: $content2[] = '名称:' . $list['name']; goto uu_Sw; KmQMH: } goto xl1J8; sHy6D: goto HljgO; goto nEwmQ; kowLQ: $orderInfo .= '客户姓名: ' . $order['value']['address']['name'] . '.<BR>'; goto pmijf; QMqSw: ar7YQ: goto vzb_T; AoGxs: $content .= '<tr><td>联系方式:' . $order['phone'] . '</td></tr>'; goto lwMp6; Cw_S3: $content .= '<tr><td>支付方式:' . array("1" => "余额", "2" => "微信", "3" => "余额不足微信抵扣")[$order['paytype']] . '</td></tr>'; goto ACM_2; bKROA: $content2[] = '客户地址:' . $order['value']['address']['address']; goto fQs4L; nXrNz: $requestInfo = http_build_query($requestAll); goto snK_w; qGiFm: return false; goto G8TgW; YrQlM: $msign = $print['msign']; goto Or584; lwMp6: $content .= '<tr><td>地址:' . $order['region'] . $order['detail'] . '</td></tr>'; goto XJ1Da; EadHH: } public function doWebUpgrade() { goto EPYGW; sw_7z: switch ($op) { case 'edit': include $this->template('mymanage/' . strtolower($_GPC['do']) . '/' . $op); exit; case 'query': goto pqS_U; q9RIC: TYL3W: goto n8BaD; n8BaD: $retstatus = $ret > 0 ? 1 : -1; goto Mv7Zt; TCfz1: goto TYL3W; goto Bee2O; Mv7Zt: xc_message($ret); goto xiOQ7; Bee2O: pmSQp: goto Z9ZOi; dH_pw: if (empty($fieldname)) { goto pmSQp; } goto kU6MZ; pqS_U: $tablename = safe_gpc_string($_GPC['tablename']); goto UceLL; Z9ZOi: $ret = pdo_tableexists($tablename); goto q9RIC; kU6MZ: $ret = pdo_fieldexists($tablename, $fieldname); goto TCfz1; dvgNC: $fieldname = safe_gpc_string($_GPC['fieldname']); goto dH_pw; UceLL: $tablename = $xcmodule . '_' . $tablename; goto dvgNC; xiOQ7: case 'upsql': goto RwkoB; GXT5G: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_category') . ' MODIFY `modifytime` datetime DEFAULT NULL COMMENT \'修改时间\';'); goto ciE1I; SIJ13: yTEJ2: goto xRzIn; nObdf: i3EjX: goto ZOGgd; gAtMy: if (!pdo_fieldexists('xc_xinguwu_order', 'order')) { goto eW2Ft; } goto xunVA; JPPLh: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_order') . ' ADD `out_refund_time` datetime  DEFAULT NULL COMMENT \'退款成功时间\';'); goto HE2_O; Eh7Y1: f9cul: goto k6Bt8; KVzy_: if (pdo_indexexists('xc_xinguwu_order', 'club_id')) { goto yaLvU; } goto PD2sK; J7cN1: if (pdo_fieldexists('xc_xinguwu_goods', 'brokerage')) { goto uxoX2; } goto NylZF; ovsMq: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_live') . ' ADD `errmsg` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'回调信息\';'); goto hTKdn; mgvPO: if (pdo_fieldexists('xc_xinguwu_member', 'admin')) { goto pR5yu; } goto KWh7v; nxTGk: if (pdo_fieldexists('xc_xinguwu_order', 'hex_time')) { goto vBKLy; } goto iYcDa; O7x2g: pdo_run($sql); goto H5ou3; AXL6J: if (!pdo_fieldexists('xc_xinguwu_brokerage_order', 'createtime')) { goto REWt9; } goto JyWiq; xunVA: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_order') . ' MODIFY `order` varchar(20) NOT NULL DEFAULT \'0\' COMMENT \'订单号\';'); goto BDLvH; VKf1Y: if (pdo_fieldexists('xc_xinguwu_order', 'community_status')) { goto pbgwA; } goto QYZpd; p5VHF: OQRo8: goto xVmHI; vCg7u: DDDKt: goto uJAmm; PFqbT: NzCmw: goto FJMun; eE2hp: vBKLy: goto ybLzx; JOAIl: if (!pdo_fieldexists('xc_xinguwu_member', 'modifytime')) { goto oP3X6; } goto D2TYB; PkdhT: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_flashsale') . ' modify column `good_ids` varchar(1000)'); goto SVSed; NUaMQ: if (pdo_fieldexists('xc_xinguwu_live_playback', 'isshow')) { goto DDDKt; } goto Hhumo; rWNOn: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_order') . ' ADD `club_id` int(11) NOT NULL DEFAULT \'0\' COMMENT \'团长id\';'); goto TUgT6; ggC2b: if (pdo_fieldexists('xc_xinguwu_club_brokerage', 'alipay')) { goto mRVCZ; } goto t0MIs; Z2zPO: $sql = 'CREATE TABLE IF NOT EXISTS `ims_xc_xinguwu_club_label` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uniacid` int(11) NOT NULL DEFAULT \'0\',
  `type` tinyint(3) NOT NULL DEFAULT \'0\' COMMENT \'1几日达\',
  `name` varchar(50) NOT NULL DEFAULT \'\' COMMENT \'名称\',
  `tip` varchar(50) NOT NULL DEFAULT \'\' COMMENT \'说明\',
  `sorts` int(11) NOT NULL DEFAULT \'0\' COMMENT \'排序\',
  `status` tinyint(3) NOT NULL DEFAULT \'1\' COMMENT \'状态\',
  `createtime` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT \'创建时间\',
  `modifytime` varchar(50) NOT NULL DEFAULT \'\' COMMENT \'修改时间\',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 COMMENT=\'社区团标签\';'; goto fkPva; LQV8E: miGNy: goto GNwT8; xAPVE: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_order') . ' ADD `group_status` tinyint(3) NOT NULL DEFAULT \'0\' COMMENT \'团状态 1组团中2成功-1失败\';'); goto mhg73; P3ybJ: RgGsG: goto geYv9; o1Ytv: Bp5L7: goto GRkMI; lbm4D: if (!pdo_fieldexists('xc_xinguwu_other', 'createtime')) { goto AxK3R; } goto nkxe_; yKxDK: oy0lI: goto MOpuO; AdSRS: y25I8: goto BIqyz; Fd_wz: if (pdo_fieldexists('xc_xinguwu_live', 'errmsg')) { goto TdlNZ; } goto ovsMq; BSeJw: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_recharge') . ' ADD `paytime` datetime DEFAULT NULL COMMENT \'支付时间\';'); goto ZKHbz; nhdO2: if (pdo_fieldexists('xc_xinguwu_voucher', 'open')) { goto X6SBI; } goto MIXky; MsrH3: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_member') . ' ADD `sig` varchar(500) NOT NULL  DEFAULT \'\' COMMENT \'云通信签名\';'); goto ujYaD; eWlOW: oP3X6: goto d4O71; PCovW: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_member') . ' ADD `name` varchar(255) NOT NULL  DEFAULT \'\' COMMENT \'姓名\';'); goto d5Tzq; FJMun: if (pdo_fieldexists('xc_xinguwu_member', 'pow')) { goto RIVuz; } goto gUQt6; rfWXB: RIVuz: goto NUaMQ; d5Tzq: xvdV8: goto ciWdR; FtIeJ: UIG22: goto UXObo; Izxuv: if (pdo_fieldexists('xc_xinguwu_order', 'expires')) { goto J9cIp; } goto jRq2p; H5ou3: if (pdo_fieldexists('xc_xinguwu_goods', 'ecid')) { goto juzFv; } goto wUZyC; TUgT6: pfCzz: goto qtfyJ; qtfyJ: if (pdo_fieldexists('xc_xinguwu_order', 'hex')) { goto YIbDt; } goto Wp9b4; ifNlq: if (pdo_fieldexists('xc_xinguwu_order', 'group_status')) { goto FVFgD; } goto xAPVE; cYdWm: OvEEq: goto Z2zPO; uqtYM: mRVCZ: goto n5Ogu; nkxe_: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_other') . ' MODIFY `createtime` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT \'创建时间\';'); goto PGCHB; Kjt5R: yF3CG: goto iukap; tDBsk: CQpgW: goto Kx9SP; euftJ: if (pdo_fieldexists('xc_xinguwu_live', 'goods')) { goto q_tX0; } goto vzbew; ciWdR: if (pdo_fieldexists('xc_xinguwu_member', 'phone')) { goto OQRo8; } goto rCnD2; ivlJk: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_goods') . ' ADD `brokerage_two` numeric(10,2) NOT NULL DEFAULT \'0.00\' COMMENT \'二级佣金\';'); goto h32lU; mvaqN: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_club') . ' ADD `formid`  text   COMMENT \'模版消息id\';'); goto OmUuc; OTAIi: OV3lz: goto mgvPO; h322g: if (pdo_fieldexists('xc_xinguwu_goods', 'tagsids')) { goto E_JUZ; } goto ZvwfR; at_Qz: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_order') . ' ADD `vendor_remark` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'卖家备注\';'); goto dleN9; wUZyC: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_goods') . ' ADD `ecid` int(11) DEFAULT \'1\' COMMENT \'1 pc -1手机\';'); goto dUKw8; ZOGgd: if (pdo_fieldexists('xc_xinguwu_member', 'sig')) { goto Zb1rR; } goto MsrH3; PVa8c: if (pdo_fieldexists('xc_xinguwu_voucher', 'name')) { goto R657Y; } goto FIpPX; gqYcv: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_group_tuxedo') . ' MODIFY `order` varchar(20) NOT NULL DEFAULT \'0\' COMMENT \'订单号\';'); goto ewgPp; obKBe: ELqkq: goto ggC2b; SVSed: $sql = 'CREATE TABLE IF NOT EXISTS  `ims_xc_xinguwu_autonum` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uniacid` int(11) NOT NULL DEFAULT \'0\',
  `num` int(11) DEFAULT \'0\',
  `keyval` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uniacid` (`uniacid`,`keyval`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT=\'自动编号\';'; goto O7x2g; ewgPp: XhAfy: goto PgvVG; Hhumo: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_live_playback') . ' ADD `isshow` tinyint(3) NOT NULL DEFAULT \'-1\' COMMENT \'显示\';'); goto vCg7u; oRYs0: if (pdo_fieldexists('xc_xinguwu_bargain_self', 'endtime')) { goto kagCD; } goto wzs6Q; FAiSu: if (pdo_fieldexists('xc_xinguwu_member', 'admin2')) { goto Bp5L7; } goto IjfFn; iYcDa: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_order') . ' ADD `hex_time` datetime DEFAULT NULL COMMENT \'核销时间\';'); goto eE2hp; SvmRu: yaLvU: goto gAtMy; KaRGc: JMPaE: goto RZnhc; dleN9: V4cGr: goto Jv2Wh; VdPly: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_supplier') . ' ADD `remark`  text   COMMENT \'备注\';'); goto hbQdK; Uah_g: R657Y: goto nhdO2; CpFgD: xc_message(1); goto YHzH8; wRhIb: if (!pdo_fieldexists('xc_xinguwu_order', 'value')) { goto wBX42; } goto wML9f; qwo4d: J9cIp: goto q2Lfr; RRVxx: if (!pdo_fieldexists('xc_xinguwu_other', 'modifytime')) { goto mVTgk; } goto sMueI; mhg73: FVFgD: goto id41K; ZvwfR: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_goods') . ' ADD `tagsids` varchar(1000) NOT NULL DEFAULT \'\' COMMENT \'标签\';'); goto TE3j6; jRq2p: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_order') . ' ADD `expires` int(11) NOT NULL DEFAULT \'0\' COMMENT \'失效时间\';'); goto qwo4d; D2TYB: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_member') . ' MODIFY `modifytime` datetime DEFAULT NULL COMMENT \'修改时间\';'); goto eWlOW; kz4iQ: if (pdo_fieldexists('xc_xinguwu_supplier', 'formid')) { goto miGNy; } goto c8krS; hl1uy: pbgwA: goto KVzy_; upDdd: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_goods') . ' ADD `club_brokerage` decimal(10,2) NOT NULL DEFAULT \'0.00\' COMMENT \'团长佣金\';'); goto iKUwx; TcPmh: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_order') . ' ADD `is_community` tinyint(3) NOT NULL DEFAULT \'0\' COMMENT \'社区团\';'); goto Qwv1t; cgP8M: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_club') . ' ADD `remark` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'备注(服务时间)\';'); goto Kjt5R; RZnhc: if (pdo_fieldexists('xc_xinguwu_order', 'value')) { goto eIqJn; } goto CQKtW; sMueI: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_other') . ' MODIFY `modifytime` datetime DEFAULT NULL COMMENT \'修改时间\';'); goto ldtJF; rCnD2: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_member') . ' ADD `phone` varchar(20) NOT NULL  DEFAULT \'0\' COMMENT \'联系方式\';'); goto p5VHF; ujYaD: Zb1rR: goto ukJwu; JzFZ8: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_bargain') . ' ADD `share` varchar(500) NOT NULL  DEFAULT \'\' COMMENT \'分享内容\';'); goto nObdf; MIXky: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_voucher') . ' ADD `open` tinyint(3) NOT NULL DEFAULT \'1\' COMMENT \'公开发行\';'); goto utN3b; GRkMI: if (pdo_fieldexists('xc_xinguwu_member', 'name')) { goto xvdV8; } goto PCovW; IjfFn: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_member') . ' ADD `admin2` tinyint(3) NOT NULL  DEFAULT \'-1\' COMMENT \'管理员\';'); goto o1Ytv; HcZV7: if (pdo_fieldexists('xc_xinguwu_goods', 'presell')) { goto CQpgW; } goto ucVKs; RwkoB: $sql = 'CREATE TABLE IF NOT EXISTS `ims_xc_xinguwu_label` (
   `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL DEFAULT \'\' COMMENT \'类别名称\',
  `uniacid` int(11) NOT NULL DEFAULT \'0\',
  `status` tinyint(3) NOT NULL DEFAULT \'0\' COMMENT \'状态\',
  `createtime` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT \'创建时间\',
  `sorts` int(11) NOT NULL DEFAULT \'0\' COMMENT \'排序\',
  `modifytime` datetime DEFAULT NULL COMMENT \'修改时间\',
  `imgurl` varchar(500) DEFAULT NULL,
  `itype` int(11) DEFAULT NULL COMMENT \'1产品，2固定链接\',
  `url` varchar(500) DEFAULT NULL COMMENT \'链接\',
  `cid` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `cid` (`cid`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT=\'标签\';
CREATE TABLE IF NOT EXISTS `ims_xc_xinguwu_labelclass` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL DEFAULT \'\' COMMENT \'类别名称\',
  `uniacid` int(11) NOT NULL DEFAULT \'0\',
  `status` tinyint(3) NOT NULL DEFAULT \'0\' COMMENT \'状态\',
  `createtime` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT \'创建时间\',
  `sorts` int(11) NOT NULL DEFAULT \'0\' COMMENT \'排序\',
  `modifytime` datetime DEFAULT NULL COMMENT \'修改时间\',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT=\'标签分类\';
CREATE TABLE IF NOT EXISTS `ims_xc_xinguwu_special` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uniacid` int(11) NOT NULL DEFAULT \'0\',
  `name` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'专题名称\',
  `img` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'展示图片\',
  `about` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'摘要\',
  `video_type` tinyint(3) NOT NULL DEFAULT \'0\' COMMENT \'视频模式\',
  `video` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'视频地址\',
  `sorts` int(11) NOT NULL DEFAULT \'0\' COMMENT \'排序\',
  `status` tinyint(3) NOT NULL DEFAULT \'0\' COMMENT \'状态\',
  `contents` longtext COMMENT \'内容\',
  `createtime` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT \'创建时间\',
  `modifytime` datetime DEFAULT NULL COMMENT \'修改时间\',
  `cid` int(11) NOT NULL DEFAULT \'0\' COMMENT \'分类id\',
  `ready` int(11) NOT NULL DEFAULT \'0\' COMMENT \'阅读量\',
  `like` int(11) NOT NULL DEFAULT \'0\' COMMENT \'点赞量\',
  `isindex` tinyint(3) NOT NULL DEFAULT \'-1\' COMMENT \'首页显示\',
  `poster` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'视频封面\',
  `ad_img` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'广告图片\',
  `ad_link` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'广告跳转地址\',
  PRIMARY KEY (`id`),
  KEY `cid` (`cid`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT=\'专题\';
CREATE TABLE IF NOT EXISTS `ims_xc_xinguwu_special_like` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uniacid` int(11) NOT NULL DEFAULT \'0\',
  `openid` varchar(40) NOT NULL DEFAULT \'\' COMMENT \'用户标识\',
  `special_id` int(11) NOT NULL DEFAULT \'0\' COMMENT \'专题id\',
  `createtime` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT \'创建时间\',
  `status` tinyint(3) NOT NULL DEFAULT \'1\' COMMENT \'1已点赞 -1 已取消点赞\',
  PRIMARY KEY (`id`),
  KEY `openid` (`openid`(28),`special_id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT=\'专题点赞\';
CREATE TABLE IF NOT EXISTS `ims_xc_xinguwu_specialclass` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uniacid` int(11) NOT NULL DEFAULT \'0\',
  `name` varchar(50) NOT NULL DEFAULT \'\' COMMENT \'专题名称\',
  `status` tinyint(3) NOT NULL DEFAULT \'0\' COMMENT \'状态\',
  `sorts` int(11) NOT NULL DEFAULT \'0\' COMMENT \'排序\',
  `createtime` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT \'创建时间\',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT=\'专题分类\';
CREATE TABLE IF NOT EXISTS `ims_xc_xinguwu_other` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uniacid` int(11) NOT NULL DEFAULT \'0\',
  `name` varchar(50) NOT NULL DEFAULT \'\' COMMENT \'名称\',
  `contents` longtext COMMENT \'内容\',
  `keyval` varchar(20) NOT NULL DEFAULT \'\' COMMENT \'关键字\',
  `status` tinyint(3) NOT NULL DEFAULT \'0\' COMMENT \'状态\',
  `sorts` int(11) NOT NULL DEFAULT \'0\' COMMENT \'排序\',
  `createtime` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT \'创建时间\',
  `modifytime` datetime DEFAULT NULL COMMENT \'修改时间\',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT=\'杂项\';
CREATE TABLE IF NOT EXISTS `ims_xc_xinguwu_brokerage_order` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uniacid` int(11) NOT NULL DEFAULT \'0\',
  `openid` varchar(40) NOT NULL DEFAULT \'\' COMMENT \'用户标识\',
  `order` bigint(20) NOT NULL DEFAULT \'0\' COMMENT \'订单号\',
  `createtime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP  COMMENT \'创建时间\',
  `order_price` decimal(10,2) NOT NULL DEFAULT \'0.00\' COMMENT \'订单价格\',
  `get_price` decimal(10,2) NOT NULL DEFAULT \'0.00\' COMMENT \'返佣\',
  `status` tinyint(3) NOT NULL DEFAULT \'0\' COMMENT \'状态1已付款2已完成\',
  `isoff` tinyint(3) NOT NULL DEFAULT \'0\' COMMENT \'是否已失效\',
  PRIMARY KEY (`id`),
  KEY `openid` (`openid`(28)),
  KEY `order` (`order`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT=\'佣金记录\';
CREATE TABLE IF NOT EXISTS `ims_xc_xinguwu_category` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL DEFAULT \'\' COMMENT \'类别名称\',
  `uniacid` int(11) DEFAULT NULL,
  `father_id` int(11) NOT NULL DEFAULT \'0\' COMMENT \'父id\',
  `status` tinyint(3) NOT NULL DEFAULT \'0\' COMMENT \'状态\',
  `createtime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT \'创建时间\',
  `sorts` int(11) NOT NULL DEFAULT \'0\' COMMENT \'排序\',
  `modifytime` datetime DEFAULT NULL COMMENT \'修改时间\',
  `feature` int(11) NOT NULL DEFAULT \'0\' COMMENT \'规格 id\',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT=\'类别\';
CREATE TABLE IF NOT EXISTS `ims_xc_xinguwu_member` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uniacid` int(11) NOT NULL DEFAULT \'0\',
  `openid` varchar(40) NOT NULL DEFAULT \'\' COMMENT \'用户id\',
  `nickname` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'昵称\',
  `avatarurl` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'头像\',
  `createtime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT \'创建时间\',
  `gender` tinyint(3) NOT NULL DEFAULT \'0\' COMMENT \'性别\',
  `totalamount` decimal(10,2) NOT NULL DEFAULT \'0.00\' COMMENT \'总共充值\',
  `amount` decimal(10,2) NOT NULL DEFAULT \'0.00\' COMMENT \'现有余额\',
  `exp` decimal(10,2) NOT NULL DEFAULT \'0.00\' COMMENT \'经验\',
  `score` decimal(10,2) NOT NULL DEFAULT \'0.00\' COMMENT \'积分\',
  `totalscore` decimal(10,2) NOT NULL DEFAULT \'0.00\' COMMENT \'历史总积分\',
  `remarks` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'备注\',
  `modifytime` datetime DEFAULT NULL COMMENT \'修改时间\',
  `level` tinyint(3) NOT NULL DEFAULT \'-1\' COMMENT \'等级(-1表示没有等级\',
  `one` varchar(40) NOT NULL DEFAULT \'0\' COMMENT \'一级\',
  `two` varchar(40) NOT NULL DEFAULT \'0\' COMMENT \'二级\',
  `there` varchar(40) NOT NULL DEFAULT \'0\' COMMENT \'三级\',
  `garder` tinyint(3) NOT NULL DEFAULT \'0\' COMMENT \'分销等级\',
  `one_order` int(11) NOT NULL DEFAULT \'0\' COMMENT \'一级贡献订单\',
  `two_order` int(11) NOT NULL DEFAULT \'0\' COMMENT \'二级贡献订单\',
  `there_order` int(11) NOT NULL DEFAULT \'0\' COMMENT \'三级贡献订单\',
  `one_price` decimal(10,2) NOT NULL DEFAULT \'0.00\' COMMENT \'一级贡献佣金\',
  `two_price` decimal(10,2) NOT NULL DEFAULT \'0.00\' COMMENT \'二级贡献佣金\',
  `there_price` decimal(10,2) NOT NULL DEFAULT \'0.00\' COMMENT \'三级贡献佣金\',
  `is_distributor` tinyint(3) NOT NULL DEFAULT \'-1\' COMMENT \'是否为分销商\',
  `date` date DEFAULT NULL COMMENT \'登录日志\',
  `status` tinyint(3) NOT NULL DEFAULT \'1\' COMMENT \'状态\',
  PRIMARY KEY (`id`),
  KEY `openid` (`openid`(28))
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT=\'会员信息\';'; goto gyatf; J0pkU: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_member') . ' ADD `admin1` tinyint(3) NOT NULL  DEFAULT \'-1\' COMMENT \'员工\';'); goto Vz_us; cDS40: eIqJn: goto ifNlq; utN3b: X6SBI: goto wRhIb; OybYE: if (pdo_fieldexists('xc_xinguwu_club', 'formid')) { goto Sd9ke; } goto mvaqN; lw8Xk: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_order') . ' ADD `express_code` varchar(50) NOT NULL DEFAULT \'\' COMMENT \'快递公司编码\';'); goto Eh7Y1; O_Orj: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_order') . ' ADD `num` int(11) NOT NULL DEFAULT \'0\' COMMENT \'主要针对 活动团购，限制抢购\';'); goto EQBWl; AgX70: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_order') . ' ADD `community_price` numeric(10,2) NOT NULL DEFAULT \'0.00\' COMMENT \'团点优惠\';'); goto AtMma; Y4WH3: if (pdo_fieldexists('xc_xinguwu_goods', 'club_brokerage')) { goto OOn8U; } goto upDdd; UXObo: if (pdo_fieldexists('xc_xinguwu_distribution', 'formid')) { goto RnDoa; } goto Xr1Ed; stkeF: kagCD: goto t64im; gyatf: pdo_run($sql); goto jdBjF; jl8M9: if (!pdo_fieldexists('xc_xinguwu_category', 'modifytime')) { goto H65l5; } goto GXT5G; Qwv1t: s9php: goto VKf1Y; tqdXL: uxoX2: goto VLtBD; Jv2Wh: if (pdo_fieldexists('xc_xinguwu_order', 'out_refund_time')) { goto qN04w; } goto JPPLh; Wp9b4: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_order') . ' ADD `hex` varchar(50) NOT NULL DEFAULT \'\' COMMENT \'核销码\';'); goto vAPVa; KWh7v: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_member') . ' ADD `admin` tinyint(3) NOT NULL DEFAULT \'-1\' COMMENT \'客服人员1是-1不是\';'); goto Kmk8y; TE3j6: E_JUZ: goto J7cN1; FIpPX: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_voucher') . ' ADD `name` varchar(50) NOT NULL DEFAULT \'\' COMMENT \'卡券名称\';'); goto Uah_g; t0MIs: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_club_brokerage') . ' ADD `alipay` varchar(50) NOT NULL DEFAULT \'\' COMMENT \'支付宝账号\';'); goto uqtYM; d4O71: if (pdo_fieldexists('xc_xinguwu_order', 'express_code')) { goto f9cul; } goto lw8Xk; hkEW3: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_recharge') . ' ADD `remark`  text   COMMENT \'备注\';'); goto vUbu2; AtMma: yE8ii: goto JSHfj; ROHNY: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_order') . ' ADD `community_brokerage` numeric(10,2) NOT NULL DEFAULT \'0.00\' COMMENT \'社区团佣金\';'); goto i7N5M; vzbew: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_live') . ' ADD `goods` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'商品ID集合\';'); goto M5ZUG; VPDfJ: if (pdo_fieldexists('xc_xinguwu_recharge', 'remark')) { goto VIa3m; } goto hkEW3; ciE1I: H65l5: goto JOAIl; xVmHI: if (pdo_fieldexists('xc_xinguwu_special', 'recom')) { goto Fmqqh; } goto iN_co; upxqc: pdo_run($sql); goto Y4WH3; i7N5M: FbVcd: goto NnsxI; huGkz: if (pdo_fieldexists('xc_xinguwu_order', 'vendor_remark')) { goto V4cGr; } goto at_Qz; h32lU: a3dsZ: goto WtVvf; VvsIj: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_order') . ' ADD `express_code` varchar(50) NOT NULL DEFAULT \'\' COMMENT \'快递公司编码\';'); goto KaRGc; Xr1Ed: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_distribution') . ' ADD `formid`  text   COMMENT \'模版消息id\';'); goto cvWKU; HE2_O: qN04w: goto oRYs0; ucVKs: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_goods') . ' ADD `presell` tinyint(3) NOT NULL DEFAULT \'-1\' COMMENT \'预售\';'); goto tDBsk; wzs6Q: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_bargain_self') . ' ADD `endtime` datetime  DEFAULT NULL COMMENT \'结束时间\';'); goto stkeF; vAPVa: YIbDt: goto nxTGk; cvWKU: RnDoa: goto kz4iQ; Yg6YJ: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_goods') . ' ADD `brokerage_there` numeric(10,2) NOT NULL DEFAULT \'0.00\' COMMENT \'三级级佣金\';'); goto uDLeK; NylZF: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_goods') . ' ADD `brokerage` numeric(10,2) NOT NULL DEFAULT \'0.00\' COMMENT \'所值佣金\';'); goto tqdXL; fKySM: FBrQ6: goto h322g; Bewsf: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_member') . ' ADD `is_club` tinyint(3) NOT NULL DEFAULT \'-1\' COMMENT \'团长\';'); goto PFqbT; ZKHbz: Fbe0o: goto lbm4D; k4M1Z: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_order') . ' ADD `activityid` int(11) NOT NULL DEFAULT \'0\' COMMENT \'活动id\';'); goto AdSRS; ldtJF: mVTgk: goto AXL6J; iN_co: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_special') . ' ADD `recom` varchar(255) NOT NULL  DEFAULT \'\' COMMENT \'推荐商品\';'); goto La_1J; dUKw8: juzFv: goto FNcB1; Kmk8y: pR5yu: goto pY947; PGCHB: AxK3R: goto RRVxx; BIqyz: if (pdo_fieldexists('xc_xinguwu_order', 'num')) { goto L03MW; } goto O_Orj; oIX7I: if (pdo_fieldexists('xc_xinguwu_order', 'community_price')) { goto yE8ii; } goto AgX70; MSNRv: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_club_label') . ' ADD `start` int(11) NOT NULL DEFAULT \'0\';'); goto P3ybJ; hbQdK: C1fR1: goto OybYE; t64im: if (pdo_fieldexists('xc_xinguwu_member', 'admin1')) { goto O_88t; } goto J0pkU; oSJoF: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_order') . ' ADD `out_refund_no` varchar(100) NOT NULL DEFAULT \'\' COMMENT \'商户退款单号\';'); goto OTAIi; uDLeK: cID9o: goto oIX7I; iukap: if (pdo_fieldexists('xc_xinguwu_goods', 'arrive')) { goto OvEEq; } goto rHXQT; La_1J: Fmqqh: goto EOnSN; Mtvqx: if (!pdo_fieldexists('xc_xinguwu_group_tuxedo', 'order')) { goto XhAfy; } goto gqYcv; PD2sK: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_order') . ' ADD INDEX `club_id` (`club_id`);'); goto SvmRu; xRzIn: if (pdo_fieldexists('xc_xinguwu_order', 'refund_error_msg')) { goto FBrQ6; } goto DWYCf; rCGKS: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_recharge') . ' ADD `cid` tinyint(3) NOT NULL DEFAULT \'1\' COMMENT \'1用户2管理员\';'); goto Jnuez; q2Lfr: if (pdo_fieldexists('xc_xinguwu_order', 'activityid')) { goto y25I8; } goto k4M1Z; WtVvf: if (pdo_fieldexists('xc_xinguwu_goods', 'brokerage_there')) { goto cID9o; } goto Yg6YJ; iKUwx: OOn8U: goto Fd_wz; wML9f: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_order') . ' MODIFY `value` text NOT NULL  COMMENT \'信息\';'); goto RtG4A; CQKtW: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_order') . ' ADD `value` varchar(500) NOT NULL DEFAULT \'\' COMMENT \'团信息\';'); goto cDS40; JSHfj: if (pdo_fieldexists('xc_xinguwu_order', 'community_brokerage')) { goto FbVcd; } goto ROHNY; ukJwu: if (pdo_fieldexists('xc_xinguwu_member', 'sig_endtime')) { goto yTEJ2; } goto N6npA; pY947: if (pdo_fieldexists('xc_xinguwu_recharge', 'cid')) { goto rOkTn; } goto rCGKS; OmUuc: Sd9ke: goto VPDfJ; UIAUy: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_club_label') . ' ADD `end` int(11) NOT NULL DEFAULT \'0\';'); goto FtIeJ; hTKdn: TdlNZ: goto euftJ; BDLvH: eW2Ft: goto Mtvqx; FNcB1: if (pdo_fieldexists('xc_xinguwu_order', 'pid')) { goto Mj0z0; } goto pOyUT; PgvVG: if (pdo_fieldexists('xc_xinguwu_member', 'is_club')) { goto NzCmw; } goto Bewsf; fkPva: pdo_run($sql); goto PVa8c; N6npA: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_member') . ' ADD `sig_endtime` datetime DEFAULT NULL COMMENT \'签名过期时间\';'); goto SIJ13; k6Bt8: if (pdo_fieldexists('xc_xinguwu_order', 'express_code')) { goto JMPaE; } goto VvsIj; JyWiq: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_brokerage_order') . ' MODIFY `createtime` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT \'创建时间\';'); goto GE3FN; geYv9: if (pdo_fieldexists('xc_xinguwu_club_label', 'end')) { goto UIG22; } goto UIAUy; GNwT8: if (pdo_fieldexists('xc_xinguwu_supplier', 'remark')) { goto C1fR1; } goto VdPly; jdBjF: if (pdo_fieldexists('xc_xinguwu_recharge', 'paytime')) { goto Fbe0o; } goto BSeJw; NnsxI: if (pdo_fieldexists('xc_xinguwu_order', 'club_id')) { goto pfCzz; } goto rWNOn; pOyUT: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_order') . ' ADD `pid` int(11) NOT NULL DEFAULT \'0\' COMMENT \'针对限购产品\';'); goto G6ZoD; c8krS: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_supplier') . ' ADD `formid`  text   COMMENT \'模版消息id\';'); goto LQV8E; vUbu2: VIa3m: goto PkdhT; QYZpd: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_order') . ' ADD `community_status` tinyint(3) NOT NULL DEFAULT \'0\' COMMENT \'自提状态1待自提2已取货\';'); goto hl1uy; G6ZoD: Mj0z0: goto Izxuv; rHXQT: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_goods') . ' ADD `arrive` int(11) NOT NULL DEFAULT \'0\' COMMENT \'几日达标签id\';'); goto cYdWm; uJAmm: $sql = 'CREATE TABLE IF NOT EXISTS `ims_xc_xinguwu_club` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uniacid` int(11) NOT NULL DEFAULT \'0\',
  `openid` varchar(40) NOT NULL DEFAULT \'\' COMMENT \'用户标识\',
  `createtime` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT \'创建时间\',
  `status` tinyint(3) NOT NULL DEFAULT \'1\' COMMENT \'状态1正常2申请-1关闭\',
  `title` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'社团名称\',
  `name` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'姓名\',
  `phone` varchar(11) DEFAULT NULL COMMENT \'联系方式\',
  `region` varchar(50) NOT NULL DEFAULT \'\' COMMENT \'省市区\',
  `detail` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'详细地址\',
  `longitude` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'经度\',
  `latitude` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'纬度\',
  `modifytime` datetime DEFAULT NULL COMMENT \'修改日志\',
  `brokerage` decimal(10,2) NOT NULL DEFAULT \'0.00\' COMMENT \'佣金\',
  `totalbrokerage` decimal(10,2) NOT NULL DEFAULT \'0.00\' COMMENT \'总佣金\',
  `number` int(11) NOT NULL DEFAULT \'0\' COMMENT \'成交单数\',
  `avatar` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `openid` (`openid`(28))
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT=\'团长\';

CREATE TABLE IF NOT EXISTS `ims_xc_xinguwu_club_brokerage` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uniacid` int(11) DEFAULT NULL,
  `openid` varchar(40) NOT NULL DEFAULT \'\' COMMENT \'用户标识\',
  `type` tinyint(3) NOT NULL DEFAULT \'1\' COMMENT \'1收入-1支出\',
  `remark` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'备注\',
  `fee` decimal(10,2) NOT NULL DEFAULT \'0.00\' COMMENT \'变动\',
  `now_brokerage` decimal(10,2) NOT NULL DEFAULT \'0.00\' COMMENT \'变动之后的佣金\',
  `createtime` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT \'创建时间\',
  `status` tinyint(3) NOT NULL DEFAULT \'1\' COMMENT \'状态2申请\',
  `avatarurl` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'头像\',
  `nickname` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'昵称\',
  `order` varchar(20) NOT NULL DEFAULT \'\' COMMENT \'单号\',
  `deposit_time` datetime DEFAULT NULL COMMENT \'提现时间\',
  PRIMARY KEY (`id`),
  KEY `openid` (`openid`(28))
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT=\'社区佣金\';

CREATE TABLE IF NOT EXISTS `ims_xc_xinguwu_club_member` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uniacid` int(11) NOT NULL DEFAULT \'0\',
  `openid` varchar(40) NOT NULL DEFAULT \'\' COMMENT \'用户标识\',
  `status` tinyint(3) NOT NULL DEFAULT \'1\' COMMENT \'状态\',
  `createtime` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT \'创建时间\',
  `name` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'姓名\',
  `phone` varchar(11) NOT NULL DEFAULT \'\' COMMENT \'联系方式\',
  `region` varchar(50) NOT NULL DEFAULT \'\' COMMENT \'地址\',
  `brokerage` decimal(10,2) NOT NULL DEFAULT \'0.00\' COMMENT \'成交佣金\',
  `number` int(11) NOT NULL DEFAULT \'0\' COMMENT \'消费单数\',
  `detail` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'地址详情\',
  `club_id` int(11) NOT NULL DEFAULT \'0\' COMMENT \'团长id\',
  PRIMARY KEY (`id`),
  KEY `club_id` (`club_id`),
  KEY `openid` (`openid`(28))
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT=\'社团成员\';

CREATE TABLE  IF NOT EXISTS `ims_xc_xinguwu_club_statistics` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uniacid` int(11) NOT NULL DEFAULT \'0\',
  `brokerage` decimal(10,2) NOT NULL DEFAULT \'0.00\' COMMENT \'佣金\',
  `number` int(11) NOT NULL DEFAULT \'0\' COMMENT \'成交单数\',
  `date` date DEFAULT NULL COMMENT \'日期\',
  `createtime` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT \'创建时间\',
  `club_id` int(11) NOT NULL DEFAULT \'0\' COMMENT \'社团id\',
  PRIMARY KEY (`id`),
  KEY `club_id` (`club_id`,`date`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT=\'今日统计\';

CREATE TABLE IF NOT EXISTS `ims_xc_xinguwu_club_statistics_day` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uniacid` int(11) NOT NULL DEFAULT \'0\',
  `club_id` int(11) NOT NULL DEFAULT \'0\',
  `good_name` varchar(255) NOT NULL DEFAULT \'\',
  `good_id` int(11) NOT NULL DEFAULT \'0\',
  `num` int(11) DEFAULT \'0\',
  `date` date DEFAULT NULL,
  `createtime` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `img` varchar(255) DEFAULT NULL,
  `brokerage` decimal(10,2) NOT NULL DEFAULT \'0.00\',
  PRIMARY KEY (`id`),
  KEY `club_id` (`club_id`,`date`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `ims_xc_xinguwu_club_statistics_month` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uniacid` int(11) NOT NULL DEFAULT \'0\',
  `club_id` int(11) NOT NULL DEFAULT \'0\',
  `good_name` varchar(255) NOT NULL DEFAULT \'\',
  `good_id` int(11) NOT NULL DEFAULT \'0\',
  `date` date DEFAULT NULL,
  `createtime` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `num` int(11) NOT NULL DEFAULT \'0\',
  `img` varchar(255) DEFAULT NULL,
  `brokerage` decimal(10,2) NOT NULL DEFAULT \'0.00\',
  PRIMARY KEY (`id`),
  KEY `club_id` (`club_id`,`date`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT=\'商品统计月表\';

CREATE TABLE IF NOT EXISTS `ims_xc_xinguwu_club_statistics_total` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uniacid` int(11) DEFAULT NULL,
  `club_id` int(11) NOT NULL DEFAULT \'0\' COMMENT \'社团id\',
  `good_name` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'商品名称\',
  `num` int(11) NOT NULL DEFAULT \'0\' COMMENT \'数量\',
  `createtime` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT \'创建时间\',
  `good_id` int(11) NOT NULL DEFAULT \'0\' COMMENT \'商品id\',
  `img` varchar(255) DEFAULT NULL,
  `brokerage` decimal(10,2) NOT NULL DEFAULT \'0.00\',
  PRIMARY KEY (`id`),
  KEY `club_id` (`club_id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT=\'社团统计\';

CREATE TABLE IF NOT EXISTS `ims_xc_xinguwu_club_statistics_week` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uniacid` int(11) NOT NULL DEFAULT \'0\',
  `club_id` int(11) NOT NULL DEFAULT \'0\',
  `good_name` varchar(255) NOT NULL DEFAULT \'\',
  `good_id` int(11) NOT NULL DEFAULT \'0\',
  `date` date DEFAULT NULL,
  `createtime` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `num` int(11) NOT NULL DEFAULT \'0\',
  `img` varchar(255) DEFAULT NULL,
  `brokerage` decimal(10,2) NOT NULL DEFAULT \'0.00\',
  PRIMARY KEY (`id`),
  KEY `club_id` (`club_id`,`date`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT=\'统计商品周表\';

CREATE TABLE IF NOT EXISTS `ims_xc_xinguwu_live_playback` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uniacid` int(11) NOT NULL DEFAULT \'0\',
  `live_id` int(11) NOT NULL DEFAULT \'0\' COMMENT \'直播间id\',
  `status` tinyint(3) NOT NULL DEFAULT \'1\' COMMENT \'状态\',
  `video_url` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'回放地址\',
  `file_size` varchar(50) NOT NULL DEFAULT \'0\' COMMENT \'大小 (字节)\',
  `file_id` varchar(100) NOT NULL DEFAULT \'\' COMMENT \'点播file id\',
  `file_format` varchar(10) NOT NULL DEFAULT \'\' COMMENT \'文件格式\',
  `duration` int(11) NOT NULL DEFAULT \'0\' COMMENT \'推流时长(秒)\',
  `createtime` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT \'创建时间\',
  `img` varchar(255) DEFAULT NULL,
  `title` varchar(255) DEFAULT NULL,
  `nickname` varchar(255) DEFAULT NULL,
  `avatarurl` varchar(255) DEFAULT NULL,
  `contents` text,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT=\'直播回放\';

CREATE TABLE IF NOT EXISTS `ims_xc_xinguwu_live_dialog` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `uniacid` int(11) DEFAULT \'0\',
  `live_id` int(11) NOT NULL DEFAULT \'0\' COMMENT \'直播间ID\',
  `createtime` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT \'创建时间\',
  `fromAccountNick` varchar(255) DEFAULT NULL COMMENT \'昵称\',
  `avatarurl` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'头像\',
  `content` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'内容\',
  `type` tinyint(3) NOT NULL DEFAULT \'0\' COMMENT \'类型\',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT=\'直播对话信息\';'; goto upxqc; XuYsr: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_deposit_log') . ' ADD `alipay` varchar(50) NOT NULL DEFAULT \'\' COMMENT \'支付宝账号\';'); goto obKBe; GE3FN: REWt9: goto jl8M9; d55ZK: if (pdo_fieldexists('xc_xinguwu_club', 'remark')) { goto yF3CG; } goto cgP8M; MOpuO: if (pdo_fieldexists('xc_xinguwu_deposit_log', 'alipay')) { goto ELqkq; } goto XuYsr; DWYCf: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_order') . ' ADD `refund_error_msg` varchar(255) NOT NULL DEFAULT \'\' COMMENT \'退款错误回调信息\';'); goto fKySM; Vz_us: O_88t: goto FAiSu; RtG4A: wBX42: goto HcZV7; id41K: if (pdo_fieldexists('xc_xinguwu_order', 'out_refund_no')) { goto OV3lz; } goto oSJoF; VLtBD: if (pdo_fieldexists('xc_xinguwu_goods', 'brokerage_two')) { goto a3dsZ; } goto ivlJk; EOnSN: if (pdo_fieldexists('xc_xinguwu_bargain', 'share')) { goto i3EjX; } goto JzFZ8; EQBWl: L03MW: goto CpFgD; Kx9SP: if (pdo_fieldexists('xc_xinguwu_goods', 'presell_time')) { goto oy0lI; } goto MX4zC; ybLzx: if (pdo_fieldexists('xc_xinguwu_order', 'is_community')) { goto s9php; } goto TcPmh; gUQt6: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_member') . ' ADD `pow` int(11) NOT NULL DEFAULT \'0\' COMMENT \'调试\';'); goto rfWXB; M5ZUG: q_tX0: goto d55ZK; MX4zC: pdo_query('ALTER TABLE ' . tablename('xc_xinguwu_goods') . ' ADD `presell_time` date DEFAULT NULL COMMENT \'预售时间\';'); goto yKxDK; Jnuez: rOkTn: goto huGkz; n5Ogu: if (pdo_fieldexists('xc_xinguwu_club_label', 'start')) { goto RgGsG; } goto MSNRv; YHzH8: } goto mhTFS; x9Wbe: $do = $_GPC['do']; goto sw_7z; PkUY5: $op = strlen($_GPC['op']) > 0 ? $_GPC['op'] : 'edit'; goto x9Wbe; NZGD0: eaiMQ: goto H6IPS; EPYGW: global $_GPC, $_W, $xcmodule; goto PkUY5; mhTFS: PbDC7: goto NZGD0; H6IPS: } public function doWebLink() { goto Wk4lB; Sd6db: $op = $_GPC['op']; goto ZH_A2; ZH_A2: switch ($op) { case 'pagedata': goto gEQzf; dd_kx: $jsondata['category'] = $category; goto B55eG; B55eG: $specialclass = pdo_getall($xcmodule . '_specialclass', array("uniacid" => $uniacid, "status" => 1), array("id", "name")); goto cy01R; SQd4r: xc_ajax($jsondata); goto nOB2A; gEQzf: $category = pdo_getall($xcmodule . '_category', array("uniacid" => $uniacid, "status" => 1), array("id", "name")); goto rLyGa; rLyGa: $jsondata = array(); goto dd_kx; cy01R: $jsondata['specialclass'] = $specialclass; goto SQd4r; nOB2A: case 'goodjsondata': goto tL1yA; nHMei: goto QyTSO; goto wdlcI; Kfw59: $params['uniacid'] = $uniacid; goto a5vn8; vczS5: if (empty($jsondate['total'])) { goto l8U67; } goto Cw2QZ; v7n2G: $jsondate['rows'] = []; goto rJoxl; UJmQ1: $listmodel = pdo_fetchall($sql, $params); goto qmfZG; K3SoA: $sql = 'SELECT COUNT(*) FROM   ' . $fulltable . $where; goto f75qA; wdlcI: l8U67: goto v7n2G; hhjyl: $where = ' WHERE uniacid=:uniacid and status=:status'; goto tx8BQ; kvcRG: FLOkB: goto msGxC; XkalY: $jsondate['total'] = pdo_fetchcolumn($sql, $params); goto vczS5; RboRY: sVPqc: goto L8Yz9; L8Yz9: $jsondate['rows'] = $listmodel; goto P7MHy; tx8BQ: if (!(strlen($_GPC['seachkey']) > 0)) { goto FLOkB; } goto ZTC3y; msGxC: $params = array(); goto ZiUGs; ZiUGs: if (!(strlen($_GPC['id']) > 0 && $_GPC['id'] != '0')) { goto pS6tJ; } goto UENzH; tL1yA: $ararysort = ararysorts(); goto hhjyl; UENzH: $where .= ' and id=:id'; goto XLLoS; ZTC3y: $where .= ' and name like \'%' . $_GPC['seachkey'] . '%\''; goto kvcRG; Cw2QZ: $sql = 'SELECT * FROM  ' . $fulltable . $where . ' ORDER BY ' . $ararysort['order'] . ' LIMIT ' . $ararysort['offset'] . ',' . $ararysort['limit']; goto UJmQ1; f75qA: $total = pdo_fetchcolumn($sql, $params); goto XkalY; P7MHy: xc_ajax($jsondate); goto nHMei; JwLXE: pS6tJ: goto Kfw59; rJoxl: xc_ajax($jsondate); goto fJL_D; XLLoS: $params['id'] = $_GPC['id']; goto JwLXE; fJL_D: QyTSO: goto IVDBT; n02aU: $fulltable = tablename($xcmodule . '_goods'); goto K3SoA; qmfZG: foreach ($listmodel as &$item) { goto uE9yS; uE9yS: $item['bimg'] = tomedia($item['bimg']); goto iuda0; UqbJX: mqmmo: goto Jlldm; iuda0: $item['attrs'] = iunserializer($item['attrs']); goto UqbJX; Jlldm: } goto RboRY; a5vn8: $params['status'] = 1; goto n02aU; IVDBT: case 'specialjsondata': goto Y0joL; Y0joL: $ararysort = ararysorts(); goto B9xSV; QXh4I: MRM0u: goto jOw2d; kov9b: $params['uniacid'] = $uniacid; goto ddZGX; YI0BY: $where .= ' and cid=:cid'; goto bYN47; e112T: $jsondate['total'] = pdo_fetchcolumn($sql, $params); goto URrr7; bYN47: $params['cid'] = $_GPC['cid']; goto Njig_; Cjoh6: GzCwF: goto cCaDY; Jhqbj: $sql = 'SELECT * FROM  ' . $fulltable . $where . ' ORDER BY ' . $ararysort['order'] . ' LIMIT ' . $ararysort['offset'] . ',' . $ararysort['limit']; goto SReB0; f7i1w: hYGBb: goto k2DL5; V6pPA: $total = pdo_fetchcolumn($sql, $params); goto e112T; frTFN: if (!(strlen($_GPC['cid']) > 0 && $_GPC['cid'] != '0')) { goto CNDn7; } goto YI0BY; jOw2d: $jsondate['rows'] = $listmodel; goto J8ul4; Bj8x5: $params = array(); goto frTFN; tio1_: if (!(strlen($_GPC['seachkey']) > 0)) { goto GIXAK; } goto JN_XJ; iDt08: goto hYGBb; goto Cjoh6; URrr7: if (empty($jsondate['total'])) { goto GzCwF; } goto Jhqbj; B9xSV: $where = ' WHERE uniacid=:uniacid and status=:status'; goto tio1_; JN_XJ: $where .= ' and name like \'%' . $_GPC['seachkey'] . '%\''; goto iM8Vg; ww46i: foreach ($listmodel as &$item) { goto n6ogq; n6ogq: if (empty($item['img'])) { goto NMmIF; } goto Bcitg; YU4lt: NMmIF: goto V1wtz; Bcitg: $item['img'] = tomedia($item['img']); goto YU4lt; V1wtz: mW3yb: goto KrkUP; KrkUP: } goto QXh4I; eKP6z: $fulltable = tablename($xcmodule . '_special'); goto bbsqv; J8ul4: xc_ajax($jsondate); goto iDt08; SReB0: $listmodel = pdo_fetchall($sql, $params); goto ww46i; Njig_: CNDn7: goto kov9b; cCaDY: $jsondate['rows'] = []; goto ebZBY; ddZGX: $params['status'] = 1; goto eKP6z; iM8Vg: GIXAK: goto Bj8x5; bbsqv: $sql = 'SELECT COUNT(*) FROM   ' . $fulltable . $where; goto V6pPA; ebZBY: xc_ajax($jsondate); goto f7i1w; k2DL5: case 'lotteryjsondata': goto Wza8r; hPqA3: $listmodel = pdo_fetchall($sql, $params); goto NWAgK; pEotJ: $where .= ' and cid=:cid'; goto Da9kH; vYM6u: $params = array(); goto FA7iK; egQ6x: loccS: goto h4Yfh; j4157: $jsondate['total'] = pdo_fetchcolumn($sql, $params); goto sUXbp; GbhC4: xc_ajax($jsondate); goto CkDvJ; NWAgK: foreach ($listmodel as &$item) { goto ZN1OH; SWosr: ZXVpb: goto odwCA; odwCA: jE0om: goto sULQP; Nte0x: $item['img'] = tomedia($item['img']); goto SWosr; ZN1OH: if (empty($item['img'])) { goto ZXVpb; } goto Nte0x; sULQP: } goto egQ6x; qNX2M: xc_ajax($jsondate); goto hYK80; hYK80: krCSA: goto lpRQj; MP7jb: $params['status'] = 1; goto im3qT; im3qT: $fulltable = tablename($xcmodule . '_lottery'); goto ahCsY; rNQKa: $total = pdo_fetchcolumn($sql, $params); goto j4157; FA7iK: if (!(strlen($_GPC['cid']) > 0 && $_GPC['cid'] != '0')) { goto ALGmH; } goto pEotJ; aixma: ALGmH: goto OGMdH; Wza8r: $ararysort = ararysorts(); goto B9jg5; B9jg5: $where = ' WHERE uniacid=:uniacid and status=:status'; goto C83Ck; ahCsY: $sql = 'SELECT COUNT(*) FROM   ' . $fulltable . $where; goto rNQKa; h4Yfh: $jsondate['rows'] = $listmodel; goto GbhC4; DnYIf: $sql = 'SELECT * FROM  ' . $fulltable . $where . ' ORDER BY ' . $ararysort['order'] . ' LIMIT ' . $ararysort['offset'] . ',' . $ararysort['limit']; goto hPqA3; FvX59: $jsondate['rows'] = []; goto qNX2M; Da9kH: $params['cid'] = $_GPC['cid']; goto aixma; w3L3G: $where .= ' and name like \'%' . $_GPC['seachkey'] . '%\''; goto NE6Y4; Pf59n: NmY0j: goto FvX59; NE6Y4: DxrEA: goto vYM6u; OGMdH: $params['uniacid'] = $uniacid; goto MP7jb; CkDvJ: goto krCSA; goto Pf59n; sUXbp: if (empty($jsondate['total'])) { goto NmY0j; } goto DnYIf; C83Ck: if (!(strlen($_GPC['seachkey']) > 0)) { goto DxrEA; } goto w3L3G; lpRQj: } goto YnPSa; Wk4lB: global $_GPC, $_W, $xcmodule; goto GFkLH; pOIjQ: rsiOd: goto YumLg; GFkLH: $uniacid = $_W['uniacid']; goto Sd6db; YnPSa: hbsax: goto pOIjQ; YumLg: } public function doWebDelivery() { goto zyAv7; yPJDO: $op = strlen($_GPC['op']) > 1 ? $_GPC['op'] : 'list'; goto Vx1N1; ys7Rs: if (!(strlen($_GPC['xtitlea']) > 0)) { goto dOSVt; } goto r3F1W; qiR76: switch ($op) { case 'edit': goto bOaEa; STKt2: $xc = pdo_get($table, $params); goto TJRss; fgzoB: $params['keyval'] = 'express'; goto STKt2; X9Ds8: GCEfs: goto NOaD1; pbDWN: $params['uniacid'] = $_W['uniacid']; goto fgzoB; bOaEa: $xc = array(); goto pbDWN; NOaD1: include $this->template('mymanage/' . strtolower($_GPC['do']) . '/' . $op); goto BEyiS; MVKRt: foreach ($xc['contents']['setting'] as &$item) { goto d44oD; kHWhF: qh1qt: goto mlwab; mlwab: QrZ08: goto tPw1K; tWUJ1: $item['citys'] = json_encode($item['citys'], JSON_UNESCAPED_UNICODE); goto kHWhF; d44oD: if (!$item['citys']) { goto qh1qt; } goto tWUJ1; tPw1K: } goto iucyb; MsDm9: if (!$xc['contents']['setting']) { goto GCEfs; } goto MVKRt; TJRss: $xc['contents'] = iunserializer($xc['contents']); goto MsDm9; iucyb: FEyVC: goto X9Ds8; BEyiS: exit; goto co1aT; co1aT: case 'save': goto SGrEu; SGrEu: $postdata = array(); goto ama8I; s6hgi: $parawhere = array(); goto UlESO; AAYoR: $postdata['calculatetype'] = $_GPC['calculatetype']; goto uQyL2; iCdTj: xc_message($status, null); goto JGoVx; HFMj5: $data['status'] = $_GPC['status']; goto X0iBl; UlESO: $parawhere['uniacid'] = $_W['uniacid']; goto W4o9B; jdWbq: pwmkf: goto dGuSB; PeZGZ: $ret = -1; goto Gnum7; ama8I: $postdata['default'] = $_GPC['default']; goto EkjZ6; tlGVH: $pmodel = pdo_get($table, $parawhere); goto PeZGZ; ho7FL: $ret = pdo_insert($table, $data); goto y2T0Z; ag_0B: $data['contents'] = iserializer($postdata); goto s6hgi; dGuSB: $data['modifytime'] = date('Y-m-d H:i:s'); goto S_FsT; X0iBl: $postdata['setting'] = $_GPC['setting']; goto AAYoR; cZMgh: $data['keyval'] = 'express'; goto ho7FL; y2T0Z: goto aXvgm; goto jdWbq; W4o9B: $parawhere['keyval'] = 'express'; goto tlGVH; EkjZ6: $postdata['express'] = $_GPC['express']; goto HFMj5; p1eIJ: aXvgm: goto qlrIh; S_FsT: $ret = pdo_update($table, $data, $parawhere); goto p1eIJ; rCwnH: $data['modifytime'] = date('Y-m-d H:i:s'); goto KTWqB; Gnum7: if ($pmodel) { goto pwmkf; } goto rCwnH; qlrIh: $status = $ret > 0 ? 1 : -1; goto iCdTj; uQyL2: $postdata['notarea'] = $_GPC['notarea']; goto ag_0B; KTWqB: $data['uniacid'] = $_W['uniacid']; goto cZMgh; JGoVx: case 'set': goto vmJRK; Spwlp: $xc = pdo_get($xcmodule . '_other', array("uniacid" => $_W['uniacid'], "keyval" => "express_set")); goto onZmT; KuJiA: include $this->template('mymanage/' . strtolower($_GPC['do']) . '/' . $op); goto NjG3k; Y4Kja: o0Xox: goto KuJiA; vmJRK: $xc = array(); goto Spwlp; NjG3k: exit; goto CUmx_; onZmT: if (!$xc) { goto o0Xox; } goto KUgX7; KUgX7: $xc['contents'] = json_decode($xc['contents'], true); goto Y4Kja; CUmx_: case 'save_set': goto AkDM0; tCIJT: $data['contents'] = $_GPC['contents']; goto lRGMg; tXAiF: $ret = pdo_insert($xcmodule . '_other', $data); goto ne2rZ; ne2rZ: tqshA: goto XDZCD; adAf2: $data['name'] = '快递公司列表'; goto cQVX_; AkDM0: $id = intval($_GPC['id']); goto tCIJT; zHaRl: EgFQp: goto YIRVW; daD3_: $data['uniacid'] = $_W['uniacid']; goto adAf2; XDZCD: $retstatus = $ret > 0 ? 1 : -1; goto TNxv1; YIRVW: if (empty($id)) { goto ijyAX; } goto VOZnO; VOZnO: $ret = pdo_update($xcmodule . '_other', $data, array("uniacid" => $_W['uniacid'], "id" => $id)); goto EYYLU; ezEE1: if (!empty($id)) { goto EgFQp; } goto mSDFQ; cQVX_: $data['keyval'] = 'express_set'; goto tXAiF; mSDFQ: $id = pdo_getcolumn($xcmodule . '_other', array("uniacid" => $_W['uniacid'], "keyval" => "express_set"), 'id'); goto zHaRl; Ih4js: ijyAX: goto daD3_; EYYLU: goto tqshA; goto Ih4js; TNxv1: xc_message($retstatus); goto wQxF4; lRGMg: $data['contents'] = json_encode($data['contents']); goto ezEE1; wQxF4: } goto FDthY; ZDYZJ: if (!(strlen($_GPC['xtitleb']) > 0)) { goto ShJHI; } goto mnIiW; sgCKM: $xtitleb = ''; goto ys7Rs; ZkqYT: $xtitlea = ''; goto sgCKM; r3F1W: $xtitlea = urldecode($_GPC['xtitlea']); goto UXYpg; FDthY: QKGpl: goto islci; mnIiW: $xtitleb = urldecode($_GPC['xtitleb']); goto mpIAO; UXYpg: dOSVt: goto ZDYZJ; Vx1N1: $do = $_GPC['do']; goto qiR76; islci: auZbU: goto LXsJa; zyAv7: global $_W, $_GPC, $xcmodule, $xcconfig; goto ZkqYT; h1ZmI: $table = $xcmodule . '_' . 'other'; goto yPJDO; mpIAO: ShJHI: goto h1ZmI; LXsJa: } public function doWebPagecollection() { goto f2ogW; J_6Bz: $op = strlen($_GPC['op']) > 1 ? $_GPC['op'] : 'edit'; goto k2UdH; uy_I7: $xtitlea = ''; goto G2AfY; okAcf: y_sAV: goto tHlJt; G2AfY: $xtitleb = ''; goto xaB60; US7bQ: $xtitleb = urldecode($_GPC['xtitleb']); goto lo9dG; fqT2j: switch ($op) { case 'edit': include $this->template('mymanage/' . strtolower($_GPC['do']) . '/' . $op); exit; case 'save': goto cK0jp; zNHN_: $jsondata['attrs'] = $attrs; goto H0lfN; cK0jp: require_once IA_ROOT . '/addons/' . $xcmodule . '/resource/querylist/phpQuery.php'; goto m0Pmn; f0APq: $intEncoding = $_GPC['intEncoding']; goto mmNLE; lfBBU: $data = \QL\QueryList::Query($html, array("title" => array("#J_Title h3", "text"), "price" => array("#J_StrPrice .tb-rmb-num", "text")), '', $outEncoding, $intEncoding, $removeHead)->data; goto r7fq5; RkJZX: $intEncoding = 'gb18030'; goto Zvh8Z; hzBan: $price = $data[0]['price']; goto iC2Tt; SGuH1: $price = ''; goto ZR22o; wwq9Z: $outEncoding = 'utf-8'; goto U7z1I; xtNmI: $jsondata['price'] = $price; goto zNHN_; OoOCH: $attrs = $data; goto nXF1J; U7z1I: zHy3S: goto TavoP; Zvh8Z: F9cbj: goto L2oyi; IOhjl: $title = ''; goto SGuH1; r7fq5: $title = $data[0]['title']; goto hzBan; J2bZP: if (!empty($intEncoding)) { goto F9cbj; } goto RkJZX; iC2Tt: $data = \QL\QueryList::Query($html, array("name" => array("#J_isku .J_Prop .tb-property-type", "text", "-#J_isku .tb-amount"), "list" => array("#J_isku dl dd ul", "html", "-#J_isku .tb-amount ")), '', $outEncoding, $intEncoding, $removeHead)->getData(function ($item) use($outEncoding) { $item['list'] = \QL\QueryList::Query($item['list'], array("value" => array("span", "text")), '', $outEncoding, $outEncoding)->data; return $item; }); goto OoOCH; L2oyi: if (!empty($outEncoding)) { goto zHy3S; } goto wwq9Z; mmNLE: $outEncoding = $_GPC['outEncoding']; goto J2bZP; MTZcc: xc_ajax($jsondata); goto Jwxts; eld9W: $imgs = array(); goto Lmqmb; H0lfN: $jsondata['imgs'] = $imgs; goto MTZcc; nXF1J: $data = \QL\QueryList::Query($html, array("img" => array("#J_UlThumb img", "data-src", "-#J_VideoThumb")), '', $outEncoding, $intEncoding, $removeHead)->getData(); goto yN2D6; Lmqmb: $rules = array("title" => array("#J_Title h3", "text"), "price" => array("#J_StrPrice .tb-rmb-num", "text")); goto lfBBU; ytboV: $jsondata = array(); goto IOhjl; m0Pmn: require_once IA_ROOT . '/addons/' . $xcmodule . '/resource/querylist/QueryList.php'; goto DoDF3; IEq62: $jsondata['title'] = $title; goto xtNmI; yN2D6: $imgs = $data; goto IEq62; ZR22o: $attrs = array(); goto eld9W; DoDF3: $html = $_GPC['weburl']; goto f0APq; TavoP: $removeHead = safe_gpc_boolean($_GPC['removeHead']) || false; goto ytboV; Jwxts: } goto okAcf; qZjgX: if (!(strlen($_GPC['xtitleb']) > 0)) { goto Inz1W; } goto US7bQ; dWILW: TvbEY: goto qZjgX; lo9dG: Inz1W: goto J_6Bz; xaB60: if (!(strlen($_GPC['xtitlea']) > 0)) { goto TvbEY; } goto XeBoG; tHlJt: tTTW6: goto PK64U; f2ogW: global $_W, $xcmodule, $_GPC; goto uy_I7; k2UdH: $do = $_GPC['do']; goto fqT2j; XeBoG: $xtitlea = urldecode($_GPC['xtitlea']); goto dWILW; PK64U: } public function doWebPpt() { goto CLK58; sZyCy: $xtitleb = ''; goto u5aC1; CLK58: global $_W, $_GPC, $xcmodule, $xcconfig; goto MyMpf; Sun0J: if (!(strlen($_GPC['xtitleb']) > 0)) { goto AQF0j; } goto dpyKV; uLglV: $xtitlea = urldecode($_GPC['xtitlea']); goto ZpxTg; W3dOl: $uniacid = $_W['uniacid']; goto vtbgE; xc9Ez: $op = strlen($_GPC['op']) > 1 ? $_GPC['op'] : 'list'; goto K5Fv3; THnij: $xtitlea = ''; goto sZyCy; ZpxTg: AcGgg: goto Sun0J; u5aC1: if (!(strlen($_GPC['xtitlea']) > 0)) { goto AcGgg; } goto uLglV; dpyKV: $xtitleb = urldecode($_GPC['xtitleb']); goto pTqkb; xRhhv: $table = $xcmodule . '_' . 'other'; goto xc9Ez; K5Fv3: $do = $_GPC['do']; goto W3dOl; TGfN5: $openid = $_W['openid']; goto H9Qan; vtbgE: $m = $_GPC['m']; goto TGfN5; RgXRj: M7VZK: goto Zmfip; MyMpf: load()->web('tpl'); goto Pk73g; Ywg9O: y9c_K: goto RgXRj; Pk73g: load()->func('tpl'); goto THnij; pTqkb: AQF0j: goto xRhhv; H9Qan: switch ($op) { case 'delete': goto vLOsi; bBLEg: xc_message($status, null); goto Rm9Km; vLOsi: $ids = $_GPC['ids']; goto GXOQm; Rm9Km: goto o3l8a; goto c4Exr; c4Exr: OQ6M0: goto zTryg; zTryg: xc_message(-1, null); goto YMbdg; u71j_: if (count($arrids) < 1) { goto OQ6M0; } goto wDE2x; wDE2x: $result = pdo_delete($table, array("id" => $arrids, "uniacid" => $uniacid)); goto hES9l; hES9l: $status = $result > 0 ? 1 : -1; goto bBLEg; YMbdg: o3l8a: goto n1aYJ; GXOQm: $arrids = explode(',', $ids); goto u71j_; n1aYJ: case 'copy': goto EfpDU; GjfT7: RTwb4: goto eSOMB; WZRz_: $id = pdo_insertid(); goto d1vlH; d1vlH: fubC4: goto X1RaI; FoP6D: unset($xc['createtime']); goto ZcKMx; sjlF1: if (!($ret > 0)) { goto fubC4; } goto WZRz_; bqD29: $ret = pdo_insert($table, $xc); goto sjlF1; eSOMB: unset($xc['id']); goto FoP6D; Xfk3a: if (!empty($xc)) { goto RTwb4; } goto fbELi; CtYVw: $xc = pdo_get($table, array("uniacid" => $uniacid, "id" => $id)); goto Xfk3a; EfpDU: $id = $_GPC['id']; goto CtYVw; ZcKMx: unset($xc['modifytime']); goto bqD29; fbELi: xc_message(-1, null); goto ZEe9q; ZEe9q: goto paGDP; goto GjfT7; Tspp4: xc_message($status, null); goto QjA2C; QjA2C: paGDP: goto VouHd; X1RaI: $status = $ret > 0 ? 1 : -1; goto Tspp4; VouHd: case 'midstatus': goto XEz56; evZRI: $status = -$_GPC['status']; goto f3G7v; LFFTH: exit; goto HZ7_e; XEz56: $id = intval($_GPC['id']); goto evZRI; jO57r: xc_message($ret, null); goto LFFTH; kdEnU: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto jO57r; f3G7v: $updatestatus = array(); goto Y02Z_; Y02Z_: $updatestatus['status'] = $status; goto kdEnU; HZ7_e: case 'updatesorts': goto g2KxQ; rwY6q: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto q8UdK; q8UdK: xc_message($ret, null); goto ggdsx; G2hbB: $updatestatus['sorts'] = $sorts; goto rwY6q; TqEIa: $updatestatus = array(); goto G2hbB; g2KxQ: $id = intval($_GPC['id']); goto Ssm4T; Ssm4T: $sorts = $_GPC['sorts']; goto TqEIa; ggdsx: case 'list': include $this->template('mymanage/' . $do . '/' . $op); exit; case 'edit': goto geYRx; geYRx: $id = intval($_GPC['id']); goto jJwXg; xpzCk: exit; goto dadXs; jJwXg: $xc = array(); goto Offvb; nVzW2: $xc = pdo_get($table, $params); goto iEmOL; okc7C: if (!empty($id)) { goto AOeu1; } goto Xe0F2; plts9: nDFot: goto etHer; etHer: include $this->template('mymanage/' . strtolower($_GPC['do']) . '/' . $op); goto xpzCk; Xe0F2: $xc['id'] = 0; goto jfg2X; iEmOL: $xc['contents'] = json_decode($xc['contents'], true); goto plts9; jfg2X: goto nDFot; goto MMl0f; Offvb: $params = array("id" => $id, "uniacid" => $_W['uniacid']); goto okc7C; MMl0f: AOeu1: goto nVzW2; dadXs: case 'save': goto ag_oC; InSVz: $data['contents'] = json_encode($postdata); goto opy5l; a50Oa: if (empty($id)) { goto UiXGL; } goto LBuGA; cbHId: if (empty($ret)) { goto PzQuF; } goto j5g1G; vOB9F: $data['status'] = $postdata['status']; goto vNCgX; Ipvu1: goto fdzVp; goto qB6SW; qB6SW: UiXGL: goto OZDLW; vNCgX: EYZOR: goto xNC2t; Vrxft: xc_message($status, null); goto cC3ZZ; rIHoV: PzQuF: goto xp6Lz; opy5l: $ret = -1; goto a50Oa; sCkUS: $status = $ret > 0 ? 1 : -1; goto Vrxft; j5g1G: $id = pdo_insertid(); goto rIHoV; GOQgX: if (!isset($postdata['status'])) { goto EYZOR; } goto vOB9F; LBuGA: $ret = pdo_update($table, $data, array("id" => $id, "uniacid" => $_W['uniacid'])); goto Ipvu1; a20yl: $ret = pdo_insert($table, $data); goto cbHId; ArcMW: $data['sorts'] = $postdata['sorts']; goto IAm_2; ASk4H: $data['name'] = '轮播图'; goto TsxBW; OSEMM: $postdata = $_GPC['xc']; goto GOQgX; xNC2t: if (!isset($postdata['sorts'])) { goto QpkCt; } goto ArcMW; TsxBW: $data['keyval'] = 'ppt'; goto a20yl; OZDLW: $data['uniacid'] = $uniacid; goto ASk4H; xp6Lz: fdzVp: goto sCkUS; ag_oC: $id = $_GPC['id']; goto OSEMM; IAm_2: QpkCt: goto InSVz; cC3ZZ: case 'getseachjson': goto JescY; HHktQ: goto Vdw7e; goto O13Gf; M2iIX: $listmodel = pdo_fetchall($sql, $params); goto tfSz4; O13Gf: e4K0R: goto B9R_o; RETlF: $jsondate['total'] = pdo_fetchcolumn($sql, $params); goto FYfvT; FEnhq: G1LWH: goto bXmc0; hgmTI: Vdw7e: goto k9fpQ; TmlyB: $sql = "SELECT * FROM  {$fulltable}   {$where} ORDER BY " . $ararysort['order'] . ' LIMIT ' . $ararysort['offset'] . ',' . $ararysort['limit']; goto M2iIX; p5NQl: $total = pdo_fetchcolumn($sql, $params); goto rAjdb; o1AlS: $params = array(); goto i_jHr; HA85k: $sql = 'SELECT COUNT(*) FROM   ' . $fulltable . $where; goto p5NQl; rAjdb: $jsondate = array(); goto RETlF; bXmc0: $jsondate['rows'] = $listmodel; goto NrvBp; i4U2U: $params['uniacid'] = $_W['uniacid']; goto BGglH; qMjdG: $fulltable = tablename($table); goto HA85k; lFQzt: LYNrc: goto i4U2U; zUGCP: XNJgT: goto iqon2; tP7DL: xc_ajax($jsondate); goto hgmTI; tfSz4: foreach ($listmodel as &$item) { goto juInH; juInH: $item['contents'] = json_decode($item['contents'], true); goto JjeP0; SXVxv: WBr20: goto KcpO4; JjeP0: if (empty($item['contents']['img'])) { goto Rw2nT; } goto TYFKN; ECusr: Rw2nT: goto SXVxv; TYFKN: $item['contents']['img'] = tomedia($item['contents']['img']); goto ECusr; KcpO4: } goto FEnhq; BGglH: $params[':keyval'] = 'ppt'; goto qMjdG; NrvBp: xc_ajax($jsondate); goto HHktQ; jwDgd: $where .= ' and pid=:pid'; goto zAExW; zAExW: $params[':pid'] = $_GPC['pid']; goto lFQzt; X0Lc_: $params[':seachkey'] = '%' . $_GPC['seachkey'] . '%'; goto zUGCP; i_jHr: if (!(strlen($_GPC['seachkey']) > 0)) { goto XNJgT; } goto X4XAh; iqon2: if (!(!empty($_GPC['pid']) && $_GPC['pid'] != '-1')) { goto LYNrc; } goto jwDgd; X4XAh: $where .= ' and name like :seachkey'; goto X0Lc_; JescY: $ararysort = ararysorts(); goto UOFlF; FYfvT: if (empty($jsondate['total'])) { goto e4K0R; } goto TmlyB; UOFlF: $where = ' WHERE uniacid=:uniacid and keyval=:keyval'; goto o1AlS; B9R_o: $jsondate['rows'] = array(); goto tP7DL; k9fpQ: } goto Ywg9O; Zmfip: } public function doWebLive_ppt() { goto glhQi; ca_be: $openid = $_W['openid']; goto xOu7U; TIYW9: $xtitlea = ''; goto JluCL; GIUj0: mRzLt: goto ps2t9; A8SY8: $m = $_GPC['m']; goto ca_be; mR8u9: $do = $_GPC['do']; goto BmkHS; glhQi: global $_W, $_GPC, $xcmodule, $xcconfig; goto TPinZ; BmkHS: $uniacid = $_W['uniacid']; goto A8SY8; e_Yr8: Ty2xv: goto GIUj0; Hx7rr: yfQY2: goto LHC3q; TPinZ: load()->web('tpl'); goto IGfJi; xOu7U: switch ($op) { case 'delete': goto l_l1E; f8Qd_: vLZAI: goto VjkwH; l_l1E: $ids = $_GPC['ids']; goto dggsK; fc2Th: goto Oq40I; goto f8Qd_; VjkwH: xc_message(-1, null); goto sAf1y; sAf1y: Oq40I: goto aHEKl; fqFuD: $result = pdo_delete($table, array("id" => $arrids, "uniacid" => $uniacid)); goto GBknd; GBknd: $status = $result > 0 ? 1 : -1; goto Im7Dg; Im7Dg: xc_message($status, null); goto fc2Th; GjcR_: if (count($arrids) < 1) { goto vLZAI; } goto fqFuD; dggsK: $arrids = explode(',', $ids); goto GjcR_; aHEKl: case 'copy': goto SBEOd; ui2G5: goto J2x_P; goto PDH6p; SBEOd: $id = $_GPC['id']; goto WjQRK; lYuNF: unset($xc['createtime']); goto cr91D; PyVva: RdmXk: goto fTx4X; PDH6p: vng2D: goto CIERV; PSBEV: xc_message($status, null); goto LBV7M; qF7gj: xc_message(-1, null); goto ui2G5; cr91D: unset($xc['modifytime']); goto kdMfy; LBV7M: J2x_P: goto H3jQL; TXzEa: if (!empty($xc)) { goto vng2D; } goto qF7gj; WjQRK: $xc = pdo_get($table, array("uniacid" => $uniacid, "id" => $id)); goto TXzEa; fTx4X: $status = $ret > 0 ? 1 : -1; goto PSBEV; jgiVy: if (!($ret > 0)) { goto RdmXk; } goto S9hO7; CIERV: unset($xc['id']); goto lYuNF; kdMfy: $ret = pdo_insert($table, $xc); goto jgiVy; S9hO7: $id = pdo_insertid(); goto PyVva; H3jQL: case 'midstatus': goto g7E_d; g7E_d: $id = intval($_GPC['id']); goto D2spj; QWJst: $updatestatus['status'] = $status; goto JZsCe; D2spj: $status = -$_GPC['status']; goto c2uip; lnQHs: xc_message($ret, null); goto DJvMz; JZsCe: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto lnQHs; c2uip: $updatestatus = array(); goto QWJst; DJvMz: exit; goto pcqFQ; pcqFQ: case 'updatesorts': goto PYSP4; TLDLd: $updatestatus['sorts'] = $sorts; goto AewUJ; AewUJ: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto rMrd9; rMrd9: xc_message($ret, null); goto t166A; yYjX6: $sorts = $_GPC['sorts']; goto l5M0n; PYSP4: $id = intval($_GPC['id']); goto yYjX6; l5M0n: $updatestatus = array(); goto TLDLd; t166A: case 'list': include $this->template('mymanage/' . $do . '/' . $op); exit; case 'edit': goto GQLy1; ds4X6: $xc['contents'] = json_decode($xc['contents'], true); goto a4ty7; OKA3I: $xc['id'] = 0; goto ORe6q; gnnmf: include $this->template('mymanage/' . strtolower($_GPC['do']) . '/' . $op); goto mlDKg; mlDKg: exit; goto RTmA0; GQLy1: $id = intval($_GPC['id']); goto pjuUz; nn7qz: $params = array("id" => $id, "uniacid" => $_W['uniacid']); goto i3iw1; pjuUz: $xc = array(); goto nn7qz; Jqmai: $xc = pdo_get($table, $params); goto ds4X6; XyQp3: AL5ck: goto Jqmai; i3iw1: if (!empty($id)) { goto AL5ck; } goto OKA3I; a4ty7: c6xRA: goto gnnmf; ORe6q: goto c6xRA; goto XyQp3; RTmA0: case 'save': goto J9Xl0; f1Qo_: $id = pdo_insertid(); goto W0pED; ZDDY1: $ret = -1; goto Fjflu; TRbSu: $status = $ret > 0 ? 1 : -1; goto FV_SY; SeEL1: J0mzm: goto xe9tN; rrc9H: nyg43: goto tqY2C; aJoYJ: ODxVz: goto TRbSu; Tb8li: ScDjW: goto rjFbt; yJE1e: $ret = pdo_update($table, $data, array("id" => $id, "uniacid" => $_W['uniacid'])); goto l5AYG; l5AYG: goto ODxVz; goto rrc9H; rjFbt: if (!isset($postdata['sorts'])) { goto J0mzm; } goto XlDMB; tqY2C: $data['uniacid'] = $uniacid; goto GHq1W; xe9tN: $data['contents'] = json_encode($postdata); goto ZDDY1; XlDMB: $data['sorts'] = $postdata['sorts']; goto SeEL1; yyboJ: if (!isset($postdata['status'])) { goto ScDjW; } goto mR60L; mR60L: $data['status'] = $postdata['status']; goto Tb8li; Gdd6R: $ret = pdo_insert($table, $data); goto yW183; W0pED: VlOsn: goto aJoYJ; GHq1W: $data['name'] = '直播轮播图'; goto Ijf4U; uURor: $postdata = $_GPC['xc']; goto yyboJ; Fjflu: if (empty($id)) { goto nyg43; } goto yJE1e; Ijf4U: $data['keyval'] = 'live_ppt'; goto Gdd6R; FV_SY: xc_message($status, null); goto Hzrk3; J9Xl0: $id = $_GPC['id']; goto uURor; yW183: if (empty($ret)) { goto VlOsn; } goto f1Qo_; Hzrk3: case 'getseachjson': goto B0bi1; wyy8T: $total = pdo_fetchcolumn($sql, $params); goto YQwZ7; xXxVC: cuZM4: goto Jr1Ka; e3A4e: $where .= ' and name like :seachkey'; goto kkX2_; YAc11: $params[':keyval'] = 'live_ppt'; goto zotm9; qjhO6: $jsondate['total'] = pdo_fetchcolumn($sql, $params); goto UjXLB; oRQ_O: vI5vZ: goto N4DpI; xD9b_: $sql = 'SELECT COUNT(*) FROM   ' . $fulltable . $where; goto wyy8T; CkHo8: $params[':pid'] = $_GPC['pid']; goto UAv60; Jr1Ka: if (!(!empty($_GPC['pid']) && $_GPC['pid'] != '-1')) { goto bqlEa; } goto h2nb6; h2nb6: $where .= ' and pid=:pid'; goto CkHo8; AtlWf: $sql = "SELECT * FROM  {$fulltable}   {$where} ORDER BY " . $ararysort['order'] . ' LIMIT ' . $ararysort['offset'] . ',' . $ararysort['limit']; goto DmJ2C; z0Ex7: FSMy3: goto wnFEE; kkX2_: $params[':seachkey'] = '%' . $_GPC['seachkey'] . '%'; goto xXxVC; B0bi1: $ararysort = ararysorts(); goto D9vwj; MlxZm: xc_ajax($jsondate); goto QUink; N4DpI: $jsondate['rows'] = $listmodel; goto DLUTW; UjXLB: if (empty($jsondate['total'])) { goto FSMy3; } goto AtlWf; DLUTW: xc_ajax($jsondate); goto gFuYq; UAv60: bqlEa: goto TLtQJ; LaLYt: if (!(strlen($_GPC['seachkey']) > 0)) { goto cuZM4; } goto e3A4e; D9vwj: $where = ' WHERE uniacid=:uniacid and keyval=:keyval'; goto G0KGU; TLtQJ: $params['uniacid'] = $_W['uniacid']; goto YAc11; DmJ2C: $listmodel = pdo_fetchall($sql, $params); goto tLZ3F; zotm9: $fulltable = tablename($table); goto xD9b_; gFuYq: goto TZehN; goto z0Ex7; wnFEE: $jsondate['rows'] = array(); goto MlxZm; QUink: TZehN: goto wGSGi; tLZ3F: foreach ($listmodel as &$item) { goto YvJ8w; YvJ8w: $item['contents'] = json_decode($item['contents'], true); goto G5nhu; KFIo8: foQ_4: goto X1C_u; QEoCQ: $item['contents']['img'] = tomedia($item['contents']['img']); goto wv17M; wv17M: e9ZG0: goto KFIo8; G5nhu: if (empty($item['contents']['img'])) { goto e9ZG0; } goto QEoCQ; X1C_u: } goto oRQ_O; YQwZ7: $jsondate = array(); goto qjhO6; G0KGU: $params = array(); goto LaLYt; wGSGi: } goto e_Yr8; LHC3q: if (!(strlen($_GPC['xtitleb']) > 0)) { goto GW2or; } goto K5MiQ; zfZRU: $xtitlea = urldecode($_GPC['xtitlea']); goto Hx7rr; hHkPM: $table = $xcmodule . '_' . 'other'; goto JuH9q; IGfJi: load()->func('tpl'); goto TIYW9; EVo61: if (!(strlen($_GPC['xtitlea']) > 0)) { goto yfQY2; } goto zfZRU; JuH9q: $op = strlen($_GPC['op']) > 1 ? $_GPC['op'] : 'list'; goto mR8u9; K5MiQ: $xtitleb = urldecode($_GPC['xtitleb']); goto UrSGK; JluCL: $xtitleb = ''; goto EVo61; UrSGK: GW2or: goto hHkPM; ps2t9: } public function doWebWebhome() { goto yLUra; yLUra: global $_W, $_GPC, $xcmodule, $xcconfig; goto ahTCS; lmlvT: $do = $_GPC['do']; goto mcWOq; dm0sA: n3llK: goto xce9x; ahTCS: $table = $xcmodule . '_' . 'other'; goto VptIy; QCQYL: switch ($op) { case 'index': include $this->template('mymanage/' . strtolower($_GPC['do']) . '/' . $op); exit; case 'home': goto MiP_9; dunQP: $goods = pdo_getall($xcmodule . '_goods', array("uniacid" => $uniacid), array("status")); goto wNXrJ; qnXqc: $order_other_deliver_no = 0; goto cruXB; wc86w: $order_other_yes = 0; goto APgyz; imbev: $price = array(0, 0, 0, 0, 0, 0, 0); goto hrB1y; APgyz: $order_other_no = 0; goto UPlZA; xiw8Y: foreach ($users as $user) { goto ffG7E; MYQPW: $user_num_log += 1; goto ZmIA4; REjOD: w_6GH: goto Y31O_; O7nGM: Ofh7v: goto REjOD; ZmIA4: v5e0n: goto XVCQk; XVCQk: if (!($user['is_distributor'] == 1)) { goto Ofh7v; } goto I3iJU; ffG7E: if (!(date('Y-m-d', strtotime($user['createtime'])) == date('Y-m-d'))) { goto xS__G; } goto gVoiS; eGyFg: if (!(date('Y-m-d') == $user['date'])) { goto v5e0n; } goto MYQPW; I3iJU: $distribution_num += 1; goto O7nGM; BKgfM: xS__G: goto eGyFg; gVoiS: $user_num_day += 1; goto BKgfM; Y31O_: } goto FoNiN; NEeoN: foreach ($statisticsorder as $item) { goto cv7dt; k6lPN: eoi1t: goto DtTdw; DtTdw: XhkCz: goto sdvUA; cv7dt: if (!($item['status'] != 4)) { goto XsMtj; } goto e1TDE; IOFNr: switch ($item['status']) { case 1: $order_other_deliver_no += $item['order_num']; goto eoi1t; case 2: $order_other_no += $item['order_num']; goto eoi1t; case 3: $order_other_yes += $item['order_num']; goto eoi1t; case 4: $order_other_refund += $item['order_num']; goto eoi1t; case 5: $order_other_sure += $item['order_num']; goto eoi1t; } goto KWUSC; uDijT: XsMtj: goto IOFNr; KWUSC: I86lr: goto k6lPN; IQ32N: $total_price += $item['total_price']; goto ABGot; e1TDE: $order_num += $item['order_num']; goto d5NRC; ABGot: KLkO6: goto uDijT; d5NRC: if (empty($item['total_price'])) { goto KLkO6; } goto IQ32N; sdvUA: } goto daT1n; dstZF: goto GlVwg; goto cjkL5; UPlZA: $order_other_sure = 0; goto qnXqc; QybOC: xWOLi: goto RfCZs; zpsQ2: $users = pdo_getall($xcmodule . '_member', array("uniacid" => $uniacid, "status" => 1), array("createtime", "date", "is_distributor")); goto HcTtm; UW2q2: $value = date('Y-m-d', strtotime('-' . $i . 'day')); goto xE4UP; qvGnd: A3EuK: goto J7LMF; t3hc2: U4azK: goto wc86w; nf1RI: if ($weblist && $weblist[$value]) { goto b6xRF; } goto W9YIM; HQYXO: $total_price = 0.0; goto zpsQ2; V3SqV: foreach ($goods as $good) { goto C2mhw; YxAFE: $good_status_no += 1; goto FEahk; atCw7: CwvXe: goto jhOa2; iIRCZ: V8KBq: goto OEBI8; jhOa2: $good_status_yes += 1; goto iIRCZ; C2mhw: if ($good['status'] == 1) { goto CwvXe; } goto YxAFE; FEahk: goto V8KBq; goto atCw7; OEBI8: J_1Jr: goto tDYlP; tDYlP: } goto IqYl7; MfoSS: $user_num_day = 0; goto Xtdg5; Xtdg5: $user_num_log = 0; goto ALDfI; XQ2uQ: $user_num = count($users); goto xiw8Y; xE4UP: $week[] = '"' . $value . '"'; goto nf1RI; goW3o: fo7Ui: goto L5nKP; rXoqu: goto lMyvR; goto goW3o; QQfR5: $good_num = 0; goto E7Rl1; kI0Uv: $weeksql = 'select  DATE_FORMAT(createtime,\'%Y-%m-%d\') as xdate,sum(order_price) as totalprice  from ims_xc_xinguwu_order where  uniacid = :uniacid  and status!=1 and status!=4  and to_days(DATE_SUB(CURDATE(), INTERVAL 7 DAY)) <=to_days(createtime) group by DATE_FORMAT(createtime,\'%Y-%m-%d\')'; goto jz5hr; QjHdK: $price = array(); goto cJxJX; khkWu: if (!($i >= 0)) { goto fo7Ui; } goto UW2q2; J7LMF: $i--; goto rXoqu; k35G9: $i = 6; goto q794c; MiP_9: $user_num = 0; goto MfoSS; XcyMh: unset($user); goto t3hc2; E7Rl1: $good_status_yes = 0; goto T8wJY; cruXB: $order_other_refund = 0; goto imbev; W9YIM: $price[] = 0; goto dstZF; T8wJY: $good_status_no = 0; goto dunQP; RfCZs: $price = implode(',', $price); goto h6rca; wNXrJ: if (!$goods) { goto xWOLi; } goto NTxim; FoNiN: lNa6y: goto XcyMh; L5nKP: $week = implode(',', $week); goto QQfR5; HcTtm: if (!$users) { goto U4azK; } goto XQ2uQ; ALDfI: $distribution_num = 0; goto BWKwY; cJxJX: $week = array(); goto k35G9; YiiF_: GlVwg: goto qvGnd; IqYl7: N5J4Q: goto QybOC; CIWV7: exit; goto O9LNU; cjkL5: b6xRF: goto rfFa5; jz5hr: $weblist = pdo_fetchall($weeksql, array(":uniacid" => $uniacid), 'xdate'); goto QjHdK; q794c: lMyvR: goto khkWu; daT1n: VN8IC: goto kI0Uv; h6rca: include $this->template('mymanage/' . strtolower($_GPC['do']) . '/' . $op); goto CIWV7; NTxim: $good_num += count($goods); goto V3SqV; BWKwY: $order_num = 0; goto HQYXO; hrB1y: $statisticsorder = pdo_fetchall('select  count(id) as order_num,sum(order_price) as total_price,status from ims_xc_xinguwu_order where  status!=-1 and uniacid = :uniacid group by status', array(":uniacid" => $uniacid)); goto NEeoN; rfFa5: $price[] = $weblist[$value]['totalprice']; goto YiiF_; O9LNU: } goto WRQaX; WRQaX: Wfwmo: goto dm0sA; VptIy: $op = strlen($_GPC['op']) > 1 ? $_GPC['op'] : 'index'; goto lmlvT; mcWOq: $uniacid = $_W['uniacid']; goto QCQYL; xce9x: } public function doWebDiypage() { goto t7SyQ; ueyYV: if (!(strlen($_GPC['xtitlea']) > 0)) { goto JkCBx; } goto KLQe3; ultVA: $xtitleb = ''; goto ueyYV; bjNCY: $table = $xcmodule . '_' . 'page'; goto qjJPe; JnyB0: $xtitleb = urldecode($_GPC['xtitleb']); goto bd6qZ; YdNwg: $xtitlea = ''; goto ultVA; Vtjbl: if (!(strlen($_GPC['xtitleb']) > 0)) { goto LV_DB; } goto JnyB0; bd6qZ: LV_DB: goto bjNCY; dN0bl: $do = $_GPC['do']; goto G8462; KLQe3: $xtitlea = urldecode($_GPC['xtitlea']); goto IplPi; ZFqn_: KdjG4: goto hOWJw; G8462: switch ($op) { case 'delete': goto CAL9z; aZYXc: xc_message($status, null); goto wuzhw; rEJjD: if (count($arrids) < 1) { goto sTHw2; } goto ffK7Y; q77C2: $arrids = explode(',', $ids); goto rEJjD; ngNFD: xc_message(-1, null); goto KTHpv; CAL9z: $uniacid = $_W['uniacid']; goto MEa7q; wuzhw: goto dmGup; goto kW3TK; ffK7Y: $result = pdo_delete($table, array("id" => $arrids, "uniacid" => $uniacid)); goto URsXH; KTHpv: dmGup: goto sAO6G; URsXH: $status = $result > 0 ? 1 : -1; goto aZYXc; kW3TK: sTHw2: goto ngNFD; MEa7q: $ids = $_GPC['ids']; goto q77C2; sAO6G: case 'midstatus': goto tc2Uo; scYSG: xc_message($ret, null); goto K8TyG; tc2Uo: $id = intval($_GPC['id']); goto fZRFZ; K8TyG: exit; goto uX3l7; aQ8sZ: $updatestatus = array(); goto iwTda; LGO5V: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $_W['uniacid'])); goto scYSG; iwTda: $updatestatus['status'] = $status; goto LGO5V; fZRFZ: $status = -$_GPC['status']; goto aQ8sZ; uX3l7: case 'list': goto D3LTZ; lLJbs: $pidparams[':uniacid'] = $_W['uniacid']; goto SrOI2; D3LTZ: $arrpidsql = array(); goto aqJUj; gZoPg: $arrpidsql[] = 'order by sorts desc ,id desc'; goto I3aoN; O0SXq: $arrpidsql[] = 'where uniacid=:uniacid and pid=0'; goto gZoPg; wEQmF: exit; goto EtZwo; aqJUj: $pidparams = array(); goto lLJbs; I3aoN: $pidlist = pdo_fetchall(join(' ', $arrpidsql), $pidparams); goto NCgC0; SrOI2: $arrpidsql[] = 'select id,name as text from'; goto rDnf3; NCgC0: include $this->template('mymanage/' . $do . '/' . $op); goto wEQmF; rDnf3: $arrpidsql[] = tablename($table); goto O0SXq; EtZwo: case 'diyform': include $this->template('mymanage/' . $do . '/' . $op); exit; case 'edit': goto F9i2t; ALwuy: gIiSd: goto trhvQ; s1dlY: $temmdoel['modeldata'] = array(); goto cHu3n; GBvCJ: $vuedata = ''; goto IF73f; vk2eX: $keyval = $_GPC['keyval']; goto gn1q_; XJY1o: include $this->template('mymanage/' . strtolower($_GPC['do']) . '/' . $op); goto PyqLP; YxZyS: $xcresourcejson = json_encode($xcresource, true); goto vk2eX; trhvQ: xlNC5: goto K1VyI; kTHUH: $temmdoel = json_decode($xc['contents'], true); goto fQcWk; noWFB: foreach ($xcresource as $k => $v) { $xcresource[$k] = $xcsiteroot . $v; CpU4A: } goto z54bJ; hR76Y: NqVr2: goto n7ecR; Xh2UA: if (!empty($temmdoel['them'])) { goto A3pOl; } goto QfBJL; gn1q_: $xc = array(); goto FFBCN; pyz2F: $temmdoel['menu'] = new StdClass(); goto jJnOH; txuzD: if (!empty($temmdoel['menu'])) { goto NqVr2; } goto pyz2F; gcsWa: $xcresource = $xcresource['xcsysimgdata']; goto E3y7l; hVzWc: usHQO: goto Xh2UA; XzQvW: $xc = pdo_get($table, $params); goto GBvCJ; cHu3n: VVcIb: goto txuzD; D75n0: $temmdoel['kefu'] = array(); goto hVzWc; fdTxI: $temmdoel = array(); goto ALwuy; jJnOH: $temmdoel['menu']->itype = 'diy_menu'; goto hR76Y; FFBCN: $params = array("keyval" => $keyval, "uniacid" => $_W['uniacid']); goto XzQvW; QfBJL: $temmdoel['them'] = new StdClass(); goto pfRvE; E3y7l: $xcsiteroot = $_W['siteroot']; goto noWFB; IKcjl: A3pOl: goto eKPHd; IF73f: $temmdoel = array(); goto GlND6; F9i2t: $xcresource = (include IA_ROOT . '/addons/' . $xcmodule . '/common/data.php'); goto gcsWa; eKPHd: $vuedata = json_encode($temmdoel, true); goto XJY1o; FtjYB: $temmdoel['them']->title = '未设定'; goto IKcjl; z54bJ: g08Et: goto YxZyS; fQcWk: if (!empty($temmdoel)) { goto gIiSd; } goto fdTxI; n7ecR: if (!empty($temmdoel['kefu'])) { goto usHQO; } goto D75n0; pfRvE: $temmdoel['them']->itype = 'diy_page_cofnig'; goto FtjYB; GlND6: if (!$xc) { goto xlNC5; } goto kTHUH; PyqLP: exit; goto h4T6c; K1VyI: if (!empty($temmdoel['modeldata'])) { goto VVcIb; } goto s1dlY; h4T6c: case 'save': goto eFjdw; g8TFY: $savedata['uniacid'] = $_W['uniacid']; goto MscDZ; E4EE1: $savedata['modifytime'] = date('y-m-d H:i:s'); goto w3z7h; k_jkD: $savedata = array(); goto tx8VK; gp5DT: $reslut = pdo_insert($table, $savedata); goto hlXY0; CQje7: $status = $reslut > 0 ? 1 : -1; goto B1BEC; FtJGU: $savedata['status'] = 1; goto gp5DT; eqKty: $strwhere['id'] = $icolum; goto ORZMP; iGmaZ: Z1mNp: goto CQje7; IDy0l: $savedata['contentsparas'] = json_encode($contentsparas, true); goto E4EE1; SgICn: $strwhere = array(); goto Lh1sj; w3z7h: $reslut = 0; goto DfI2F; awOSh: mPTu2: goto eqKty; VEy7A: $icolum = pdo_getcolumn($table, $strwhere, 'id'); goto k_jkD; DfI2F: if ($icolum) { goto mPTu2; } goto g8TFY; ZdvQz: $data = $_GPC['xc']; goto SgICn; tx8VK: $savedata['contents'] = json_encode($data, true); goto Ey59F; B1BEC: xc_message($status, null); goto KE0lO; eFjdw: $keyval = $_GPC['keyval']; goto ZdvQz; FvI7b: $strwhere['uniacid'] = $_W['uniacid']; goto VEy7A; Vn3t3: $savedata['contentscompile'] = json_encode($contentscompile, true); goto IDy0l; x6NMf: $contentscompile = $diycompilebill->compilehtml($data); goto VgZjR; MscDZ: $savedata['keyval'] = $keyval; goto FtJGU; Lh1sj: $strwhere['keyval'] = $keyval; goto FvI7b; ORZMP: $reslut = pdo_update($table, $savedata, $strwhere); goto iGmaZ; hlXY0: goto Z1mNp; goto awOSh; VgZjR: $contentsparas = $diycompilebill->contentsparas; goto Vn3t3; Ey59F: $diycompilebill = new diycompile(); goto x6NMf; KE0lO: case 'midstatus': goto DXQSS; ir7AS: $updatestatus = array(); goto mbwCt; DXQSS: $id = intval($_GPC['id']); goto agUfT; Pxl10: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $_W['uniacid'])); goto Jr38o; agUfT: $status = -$_GPC['status']; goto ir7AS; mbwCt: $updatestatus['status'] = $status; goto Pxl10; Jr38o: xc_message($ret, null); goto JqrFW; JqrFW: case 'updatesorts': goto Agyci; QqRKr: $sorts = $_GPC['sorts']; goto YFnpS; WoEeO: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $_W['uniacid'])); goto M7ECe; M7ECe: xc_message($ret, null); goto A8VE6; N9jrl: $updatestatus['sorts'] = $sorts; goto WoEeO; Agyci: $id = intval($_GPC['id']); goto QqRKr; YFnpS: $updatestatus = array(); goto N9jrl; A8VE6: case 'diypageapi': $data = getjsonpro($_GPC, 1); xc_message(1, $data, null); } goto D73lk; t7SyQ: global $_W, $_GPC, $xcmodule, $xcconfig; goto YdNwg; D73lk: iuFe2: goto ZFqn_; qjJPe: $op = strlen($_GPC['op']) > 1 ? $_GPC['op'] : 'edit'; goto dN0bl; IplPi: JkCBx: goto Vtjbl; hOWJw: } public function doWebAmount() { goto Le6N0; unDBw: if (!(strlen($_GPC['xtitleb']) > 0)) { goto tCaC4; } goto HRsOr; As4qx: $do = $_GPC['do']; goto O1rxk; LIjaM: $xtitlea = urldecode($_GPC['xtitlea']); goto ZYmIT; HViYa: $openid = $_W['openid']; goto HfZWn; jY_AC: $table = $xcmodule . '_' . 'member_amount_log'; goto IJer0; yQEb0: vS5rh: goto HoYFV; O1rxk: $m = $_GPC['m']; goto N2T2C; LmNgS: $xtitlea = ''; goto U6sHU; VW70m: if (!(strlen($_GPC['xtitlea']) > 0)) { goto S7kqA; } goto LIjaM; HfZWn: switch ($op) { case 'delete': goto Ng0SW; bh8sa: $status = $result > 0 ? 1 : -1; goto V2alP; Ng0SW: $ids = $_GPC['ids']; goto Rhi5m; LEYN7: goto HDbDk; goto rmXDJ; juStS: HDbDk: goto J2CZF; fwOX0: if (count($arrids) < 1) { goto kqfWz; } goto TfL9t; TfL9t: $result = pdo_delete($table, array("id" => $arrids, "uniacid" => $uniacid)); goto bh8sa; EUtX9: xc_message(-1, null); goto juStS; Rhi5m: $arrids = explode(',', $ids); goto fwOX0; rmXDJ: kqfWz: goto EUtX9; V2alP: xc_message($status, null); goto LEYN7; J2CZF: case 'copy': goto xyrw0; j9O4Z: xc_message(-1, null); goto WUMcV; WUMcV: goto C_0Rr; goto MJnq9; AGTSa: unset($xc['createtime']); goto MDh9g; AqHNI: $id = pdo_insertid(); goto HXn23; HXn23: lh2aT: goto clpYX; bv6oI: if (!empty($xc)) { goto jgk6V; } goto j9O4Z; MDh9g: unset($xc['modifytime']); goto i0Qun; CLGly: xc_message($status, null); goto N1TAk; MJnq9: jgk6V: goto SmvfY; N1TAk: C_0Rr: goto wcgKe; clpYX: $status = $ret > 0 ? 1 : -1; goto CLGly; JTjzA: $xc = pdo_get($table, array("uniacid" => $uniacid, "id" => $ids)); goto bv6oI; i0Qun: $ret = pdo_insert($table, $xc); goto w9DtD; SmvfY: unset($xc['id']); goto AGTSa; w9DtD: if (!($ret > 0)) { goto lh2aT; } goto AqHNI; xyrw0: $ids = $_GPC['ids']; goto JTjzA; wcgKe: case 'midstatus': goto efV3F; ELDwj: $status = -$_GPC['status']; goto A8K2T; efV3F: $id = intval($_GPC['id']); goto ELDwj; G4TCk: $updatestatus['status'] = $status; goto TeU2G; JC5ZH: exit; goto bEfqk; X3qWQ: xc_message($ret, null); goto JC5ZH; TeU2G: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto X3qWQ; A8K2T: $updatestatus = array(); goto G4TCk; bEfqk: case 'midisindex': goto lhTDN; e826D: exit; goto YUAX2; XXAc4: $status = -$_GPC['status']; goto THrDG; THrDG: $updatestatus = array(); goto QHJay; nLnZ1: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto ctAmY; lhTDN: $id = intval($_GPC['id']); goto XXAc4; ctAmY: xc_message($ret, null); goto e826D; QHJay: $updatestatus['isindex'] = $status; goto nLnZ1; YUAX2: case 'updatesorts': goto cEzKH; FKmqd: $updatestatus = array(); goto Vz_LC; GuRlk: xc_message($ret, null); goto IoTXv; QOoPB: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto GuRlk; zDUFG: $sorts = intval($_GPC['sorts']); goto FKmqd; cEzKH: $id = intval($_GPC['id']); goto zDUFG; Vz_LC: $updatestatus['sorts'] = $sorts; goto QOoPB; IoTXv: exit; goto BC3mM; BC3mM: case 'list': include $this->template('mymanage/' . $do . '/' . $op); exit; case 'edit': goto wn8Sz; q042N: vhlDM: goto VaNJU; jRHt0: $sql = 'SELECT * FROM ' . tablename($table) . ' WHERE id=:id AND uniacid=:uniacid LIMIT 1'; goto Q2Dp3; ccE9P: $xc['id'] = 0; goto Jorvn; b9oR_: $xc = pdo_fetch($sql, $params); goto q042N; VaNJU: include $this->template('mymanage/' . strtolower($_GPC['do']) . '/' . $op); goto XYzDW; XYzDW: exit; goto ZBp1X; wn8Sz: $id = intval($_GPC['id']); goto urtrJ; urtrJ: $xc = array(); goto saNSC; HB5nt: o1tpD: goto jRHt0; saNSC: if (!empty($id)) { goto o1tpD; } goto ccE9P; Q2Dp3: $params = array(":id" => $id, ":uniacid" => $_W['uniacid']); goto b9oR_; Jorvn: goto vhlDM; goto HB5nt; ZBp1X: case 'getseachjson': goto oBkHr; rki0z: if (empty($jsondate['total'])) { goto qwIMR; } goto VVbOx; p6vz2: foreach ($listmodel as &$item) { goto iw6P7; h5pqN: if (!$user) { goto Uu3Yi; } goto LNjpZ; iw6P7: $item['value'] = iunserializer($item['value']); goto UumOT; UumOT: $user = pdo_get($xcmodule . '_member', array("uniacid" => $uniacid, "openid" => $item['openid']), array("nickname")); goto h5pqN; LNjpZ: $user['nickname'] = base64_decode($user['nickname']); goto mFdN6; wiKY_: ODwWY: goto qfq4S; mFdN6: $item['nickname'] = $user['nickname']; goto ZL43v; ZL43v: Uu3Yi: goto wiKY_; qfq4S: } goto wbuKw; w2pOZ: $total = pdo_fetchcolumn($sql, $params); goto o9jhV; z6zkt: qwIMR: goto WvaJX; oZA4g: $where .= ' and name like \'%' . $_GPC['seachkey'] . '%\''; goto kjEtt; IM9Rk: $sql = 'SELECT COUNT(*) FROM   ' . $fulltable . $where; goto w2pOZ; HO2Hq: $params['uniacid'] = $uniacid; goto Hq7FP; oBkHr: $ararysort = ararysorts(); goto Z9UYC; j5O_o: $jsondate['rows'] = $listmodel; goto NQkCp; HgOE1: if (!(strlen($_GPC['cid']) > 0 && $_GPC['cid'] != '0')) { goto epCD1; } goto fd0aH; o9jhV: $jsondate['total'] = pdo_fetchcolumn($sql, $params); goto rki0z; WvaJX: $jsondate['rows'] = []; goto N0zhi; kjEtt: asmt1: goto PHn4O; tdjAS: $params['cid'] = $_GPC['cid']; goto OD9vm; VVbOx: $sql = 'SELECT * FROM  ' . $fulltable . $where . ' ORDER BY ' . $ararysort['order'] . ' LIMIT ' . $ararysort['offset'] . ',' . $ararysort['limit']; goto ERoD2; QJFLh: mY5gO: goto F0mhG; wbuKw: vPJmb: goto j5O_o; OD9vm: epCD1: goto HO2Hq; fd0aH: $where .= ' and cid=:cid'; goto tdjAS; PHn4O: $params = array(); goto HgOE1; iFaqa: if (!(strlen($_GPC['seachkey']) > 0)) { goto asmt1; } goto oZA4g; PSytx: goto mY5gO; goto z6zkt; N0zhi: xc_ajax($jsondate); goto QJFLh; NQkCp: xc_ajax($jsondate); goto PSytx; Z9UYC: $where = ' WHERE uniacid=:uniacid '; goto iFaqa; Hq7FP: $fulltable = tablename($table); goto IM9Rk; ERoD2: $listmodel = pdo_fetchall($sql, $params); goto p6vz2; F0mhG: case 'save': goto QvpIs; af1FC: $ret = pdo_update($table, $data, array("id" => $id, "uniacid" => $uniacid)); goto b2ZUI; FwP7v: goto TMTBt; goto VC3Te; hVaZW: if (strlen($id) < 1 || empty($id)) { goto ZkLjH; } goto af1FC; b2ZUI: $reslutstatus = $ret > 0 ? 1 : -1; goto FwP7v; JDutq: $data = $_GPC['xc']; goto K3u0q; yLq2J: xgFe_: goto p5oIn; S_lHn: if (empty($ret)) { goto xgFe_; } goto SIpjp; cutPK: $reslutstatus = $ret > 0 ? 1 : -1; goto S_lHn; K3u0q: $data['value'] = iserializer($data['value']); goto hVaZW; zVqQm: $data['uniacid'] = $uniacid; goto oZmOb; QvpIs: $id = $_GPC['id']; goto JDutq; O16W0: xc_message($reslutstatus); goto TCa6G; SIpjp: $id = pdo_insertid(); goto yLq2J; oZmOb: $ret = pdo_insert($table, $data); goto cutPK; VC3Te: ZkLjH: goto zVqQm; p5oIn: TMTBt: goto O16W0; TCa6G: } goto yQEb0; Q3nUx: tCaC4: goto d4py6; HoYFV: H2PE3: goto zl0xn; ikRam: load()->func('tpl'); goto jY_AC; N2T2C: $uniacid = $_W['uniacid']; goto HViYa; d4py6: load()->web('tpl'); goto ikRam; U6sHU: $xtitleb = ''; goto VW70m; HRsOr: $xtitleb = urldecode($_GPC['xtitleb']); goto Q3nUx; ZYmIT: S7kqA: goto unDBw; Le6N0: global $_W, $_GPC, $xcmodule; goto LmNgS; IJer0: $op = strlen($_GPC['op']) > 0 ? $_GPC['op'] : 'list'; goto As4qx; zl0xn: } public function doWebGoodsclass() { goto zhg_h; LZkKa: if (!(strlen($_GPC['xtitleb']) > 0)) { goto PL0P1; } goto mip66; SNv5s: load()->web('tpl'); goto Tzhg6; zhg_h: global $_W, $_GPC, $xcmodule; goto SNv5s; dat8A: $uniacid = $_W['uniacid']; goto hHriJ; LG8vs: $do = $_GPC['do']; goto NgBzk; AuMAA: $xtitlea = urldecode($_GPC['xtitlea']); goto SKyYG; t8T48: switch ($op) { case 'delete': goto Q2aAr; DTlYN: $arrids = explode(',', $ids); goto qv5Ql; FCL9h: $result = pdo_delete($table, array("id" => $arrids, "uniacid" => $uniacid)); goto n8WAd; AnEos: I3jHv: goto b9BGB; Q2aAr: $ids = $_GPC['ids']; goto DTlYN; Bm8ZG: oKNbb: goto guUDz; qv5Ql: if (count($arrids) < 1) { goto oKNbb; } goto FCL9h; vJN2Z: xc_message($status, null); goto AoNJD; AoNJD: goto I3jHv; goto Bm8ZG; guUDz: xc_message(-1, null); goto AnEos; n8WAd: $status = $result > 0 ? 1 : -1; goto vJN2Z; b9BGB: case 'copy': goto XJWFo; iEiXp: RPYbo: goto za989; tH2st: BIeMK: goto d6hJO; Qt3NH: unset($xc['createtime']); goto kMcqT; kMcqT: unset($xc['midtime']); goto Gcx0r; UdYxG: goto BIeMK; goto iEiXp; Gcx0r: $ret = pdo_insert($table, $xc); goto X6UMW; za989: unset($xc['id']); goto Qt3NH; jV1h4: $status = $ret > 0 ? 1 : -1; goto C3_nx; TpUFe: $id = pdo_insertid(); goto yT6Bc; XJWFo: $ids = $_GPC['ids']; goto VgqCL; yT6Bc: bVkQ4: goto jV1h4; X6UMW: if (!($ret > 0)) { goto bVkQ4; } goto TpUFe; Fsh9A: if (!empty($xc)) { goto RPYbo; } goto ynlj2; VgqCL: $xc = pdo_get($table, array("uniacid" => $uniacid, "id" => $ids)); goto Fsh9A; C3_nx: xc_message($status, null); goto tH2st; ynlj2: xc_message(-1, null); goto UdYxG; d6hJO: case 'midstatus': goto qFs8r; l_6Gd: $updatestatus['status'] = $status; goto MpvpK; qFs8r: $id = intval($_GPC['id']); goto bVA53; yQYef: if ($status == 1) { goto seSiv; } goto DtXPi; A0Wnk: goto F6DGB; goto DWQjY; OoJ25: $updatestatus = array(); goto l_6Gd; IRIn_: F6DGB: goto Nl_5I; MpvpK: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto vg8GI; DtXPi: pdo_update($xcmodule . '_goods', array("status" => -1), array("uniacid" => $uniacid, "cid" => $id)); goto A0Wnk; bVA53: $status = -$_GPC['status']; goto OoJ25; zyo4Q: pdo_update($xcmodule . '_goods', array("status" => 1), array("uniacid" => $uniacid, "cid" => $id)); goto IRIn_; DWQjY: seSiv: goto zyo4Q; Nl_5I: xhr1c: goto QuftH; qvZdx: exit; goto Nw9kH; vg8GI: if (!$ret) { goto xhr1c; } goto yQYef; QuftH: xc_message($ret, null); goto qvZdx; Nw9kH: case 'midisindex': goto tgqgQ; vNWRI: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto wycKE; KaBON: $status = -$_GPC['status']; goto qNuP6; wycKE: xc_message($ret, null); goto OLkwj; OLkwj: exit; goto VoLjn; tgqgQ: $id = intval($_GPC['id']); goto KaBON; qNuP6: $updatestatus = array(); goto nS0oM; nS0oM: $updatestatus['isindex'] = $status; goto vNWRI; VoLjn: case 'midsorts': goto PtTwu; xMmfV: $updatestatus = array(); goto JHiS9; JHiS9: $updatestatus['sorts'] = $sorts; goto y0udu; MmMvx: exit; goto XMOMc; u8Ez4: xc_message($ret, null); goto MmMvx; K3vkc: $sorts = intval($_GPC['sorts']); goto xMmfV; y0udu: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto u8Ez4; PtTwu: $id = intval($_GPC['id']); goto K3vkc; XMOMc: case 'list': goto jsAZ8; yy3XV: include $this->template('mymanage/' . $do . '/' . $op); goto gBylE; gBylE: exit; goto KD545; jsAZ8: $feature = pdo_getall($xcmodule . '_feature', array("uniacid" => $uniacid, "status" => 1)); goto yy3XV; KD545: case 'getseachjson': goto Q3tDU; Q3tDU: $ararysort = ararysorts(); goto LnLG6; hnXag: $jsondate['rows'] = $listmodel; goto bpP0N; w9mel: BEN0P: goto K2qY0; NcW1f: $jsondate['total'] = pdo_fetchcolumn($sql, $params); goto qliNz; dpU4S: $listmodel = pdo_fetchall($sql, $params); goto B2G2f; KDbzZ: $where .= ' and name like \'%' . $_GPC['seachkey'] . '%\''; goto xNO__; e6qPs: $where .= ' and cid=:cid'; goto v99es; DQuni: $params['uniacid'] = $uniacid; goto FdQJK; uIZK3: $params = array(); goto JJJDO; fGX_3: $sql = 'SELECT COUNT(*) FROM   ' . $fulltable . $where; goto I1tSx; S3yaF: dq7Ra: goto hnXag; FdQJK: $fulltable = tablename($table); goto fGX_3; bpP0N: xc_ajax($jsondate); goto q0IhJ; LnLG6: $where = ' WHERE uniacid=:uniacid '; goto mqrXE; AjAHV: xc_ajax($jsondate); goto hzIRm; I1tSx: $total = pdo_fetchcolumn($sql, $params); goto NcW1f; CDRIC: $sql = 'SELECT * FROM  ' . $fulltable . $where . ' ORDER BY ' . $ararysort['order'] . ' LIMIT ' . $ararysort['offset'] . ',' . $ararysort['limit']; goto dpU4S; hzIRm: yup2r: goto XPPC6; xNO__: fC8RG: goto uIZK3; v99es: $params['cid'] = $_GPC['cid']; goto AQtr5; B2G2f: foreach ($listmodel as &$item) { goto DOCnF; Bni7_: $feature_name = pdo_get($xcmodule . '_feature', array("uniacid" => $uniacid, "id" => $item['feature'])); goto TlLnY; DOCnF: if (empty($item['feature'])) { goto IWXDu; } goto Bni7_; V3Ema: IWXDu: goto lx8xe; lx8xe: hmubU: goto ppvr5; TlLnY: $item['feature_name'] = $feature_name['name']; goto V3Ema; ppvr5: } goto S3yaF; mqrXE: if (!(strlen($_GPC['seachkey']) > 0)) { goto fC8RG; } goto KDbzZ; JJJDO: if (!(strlen($_GPC['cid']) > 0 && $_GPC['cid'] != '0')) { goto JfHsn; } goto e6qPs; AQtr5: JfHsn: goto DQuni; qliNz: if (empty($jsondate['total'])) { goto BEN0P; } goto CDRIC; K2qY0: $jsondate['rows'] = []; goto AjAHV; q0IhJ: goto yup2r; goto w9mel; XPPC6: case 'save': goto LGedB; AOVgp: $ret = pdo_update($table, $data, array("id" => $id, "uniacid" => $uniacid)); goto QcVch; HUmKV: if (strlen($id) < 1 || empty($id)) { goto Vwmy6; } goto AOVgp; iItPR: $reslutstatus = $ret > 0 ? 1 : -1; goto urLfr; sxcgb: slg42: goto imUAS; IJIgr: Vwmy6: goto Q6qQC; QcVch: $reslutstatus = $ret > 0 ? 1 : -1; goto Vbybe; O6QmH: $id = pdo_insertid(); goto sxcgb; Vbybe: goto iPkEd; goto IJIgr; RISU_: xc_message($reslutstatus); goto qr7oU; imUAS: iPkEd: goto RISU_; Q6qQC: $data['uniacid'] = $uniacid; goto Vv0EX; oDOG8: $data = $_GPC['xc']; goto HUmKV; Vv0EX: $ret = pdo_insert($table, $data); goto iItPR; urLfr: if (empty($ret)) { goto slg42; } goto O6QmH; LGedB: $id = $_GPC['id']; goto oDOG8; qr7oU: } goto UO7uR; eZVAL: $_title = '商品类别'; goto t8T48; hHriJ: $openid = $_W['openid']; goto eZVAL; OIJLL: $xtitlea = ''; goto lmOCx; SKyYG: eXrEb: goto LZkKa; uPhMc: if (!(strlen($_GPC['xtitlea']) > 0)) { goto eXrEb; } goto AuMAA; UO7uR: HbcTY: goto YmI5v; mip66: $xtitleb = urldecode($_GPC['xtitleb']); goto SQbqJ; SQbqJ: PL0P1: goto sSJZn; lmOCx: $xtitleb = ''; goto uPhMc; Tzhg6: load()->func('tpl'); goto OIJLL; NgBzk: $m = $_GPC['m']; goto dat8A; YmI5v: wETA1: goto BK_1j; RI086: $op = strlen($_GPC['op']) > 0 ? $_GPC['op'] : 'list'; goto LG8vs; sSJZn: $table = $xcmodule . '_' . 'category'; goto RI086; BK_1j: } public function doWebScore() { goto byaPO; mGE7q: load()->func('tpl'); goto ezkqE; F7CFO: $m = $_GPC['m']; goto ZAgCI; ZAgCI: $uniacid = $_W['uniacid']; goto H27WX; D4Tbt: JNW7k: goto u24Jb; Q1WTT: $xtitleb = urldecode($_GPC['xtitleb']); goto vNhlI; ggjJl: $do = $_GPC['do']; goto F7CFO; Cobmj: load()->web('tpl'); goto mGE7q; l2sRQ: $op = strlen($_GPC['op']) > 0 ? $_GPC['op'] : 'list'; goto ggjJl; EkPW0: tgvwC: goto FkfIe; fX2Ma: DevTh: goto EkPW0; JoyRq: $xtitlea = urldecode($_GPC['xtitlea']); goto D4Tbt; H27WX: $openid = $_W['openid']; goto xLncK; u24Jb: if (!(strlen($_GPC['xtitleb']) > 0)) { goto qRR_g; } goto Q1WTT; J27d6: $xtitlea = ''; goto jwRpj; ezkqE: $table = $xcmodule . '_' . 'member_score_log'; goto l2sRQ; vNhlI: qRR_g: goto Cobmj; xLncK: switch ($op) { case 'delete': goto yUl4r; Q5t5s: $status = $result > 0 ? 1 : -1; goto z4OVQ; aWz8v: $arrids = explode(',', $ids); goto V63K0; QvKvj: xc_message(-1, null); goto plJ4t; yUl4r: $ids = $_GPC['ids']; goto aWz8v; TwkYL: agA6b: goto QvKvj; V63K0: if (count($arrids) < 1) { goto agA6b; } goto v4C40; ijxb0: goto qc98I; goto TwkYL; v4C40: $result = pdo_delete($table, array("id" => $arrids, "uniacid" => $uniacid)); goto Q5t5s; plJ4t: qc98I: goto rjhnY; z4OVQ: xc_message($status, null); goto ijxb0; rjhnY: case 'copy': goto y8QFR; JE8NI: unset($xc['modifytime']); goto zlhmn; nOCFj: $status = $ret > 0 ? 1 : -1; goto jOosp; iNRz_: $id = pdo_insertid(); goto mLQNU; y8QFR: $ids = $_GPC['ids']; goto ZUUYG; Tad2_: unset($xc['id']); goto muxtd; ZUUYG: $xc = pdo_get($table, array("uniacid" => $uniacid, "id" => $ids)); goto GNjn2; jOosp: xc_message($status, null); goto ihfcH; U1NmE: xc_message(-1, null); goto AJZGP; NpRsU: if (!($ret > 0)) { goto ix_xk; } goto iNRz_; muxtd: unset($xc['createtime']); goto JE8NI; AJZGP: goto GqHNT; goto OzOOX; OzOOX: AeyPf: goto Tad2_; zlhmn: $ret = pdo_insert($table, $xc); goto NpRsU; GNjn2: if (!empty($xc)) { goto AeyPf; } goto U1NmE; mLQNU: ix_xk: goto nOCFj; ihfcH: GqHNT: goto b8CDA; b8CDA: case 'midstatus': goto HOaZM; U9nPL: exit; goto YkgFx; WAO2y: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto DP3Wm; HiRAA: $updatestatus['status'] = $status; goto WAO2y; GgF3a: $updatestatus = array(); goto HiRAA; HOaZM: $id = intval($_GPC['id']); goto CV8_P; CV8_P: $status = -$_GPC['status']; goto GgF3a; DP3Wm: xc_message($ret, null); goto U9nPL; YkgFx: case 'midisindex': goto LIiWq; TrohH: $status = -$_GPC['status']; goto VtEG6; VtEG6: $updatestatus = array(); goto zp998; Rargq: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto N3Ym7; LIiWq: $id = intval($_GPC['id']); goto TrohH; N3Ym7: xc_message($ret, null); goto nrkwi; zp998: $updatestatus['isindex'] = $status; goto Rargq; nrkwi: exit; goto RclBL; RclBL: case 'updatesorts': goto IQ0O4; IQ0O4: $id = intval($_GPC['id']); goto qhaYw; BMIUF: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto x14Ii; x14Ii: xc_message($ret, null); goto tYzAR; tYzAR: exit; goto hWDgR; qhaYw: $sorts = intval($_GPC['sorts']); goto fDzjL; GJDBc: $updatestatus['sorts'] = $sorts; goto BMIUF; fDzjL: $updatestatus = array(); goto GJDBc; hWDgR: case 'list': include $this->template('mymanage/' . $do . '/' . $op); exit; case 'edit': goto xALLr; Bqf2_: if (!empty($id)) { goto owgAF; } goto fULFc; bjzLS: owgAF: goto mZGiF; B4UZc: goto R32QP; goto bjzLS; mZGiF: $sql = 'SELECT * FROM ' . tablename($table) . ' WHERE id=:id AND uniacid=:uniacid LIMIT 1'; goto eBRAM; eBRAM: $params = array(":id" => $id, ":uniacid" => $_W['uniacid']); goto wdA9Q; TDI3K: include $this->template('mymanage/' . strtolower($_GPC['do']) . '/' . $op); goto HiD1Q; xALLr: $id = intval($_GPC['id']); goto GFxU7; GFxU7: $xc = array(); goto Bqf2_; I83R_: R32QP: goto TDI3K; HiD1Q: exit; goto hmZVi; wdA9Q: $xc = pdo_fetch($sql, $params); goto I83R_; fULFc: $xc['id'] = 0; goto B4UZc; hmZVi: case 'getseachjson': goto D4mp3; qQP5V: $listmodel = pdo_fetchall($sql, $params); goto rr0QL; YNRGI: goto fx7IP; goto yAQ6y; wOMqy: $jsondate['total'] = pdo_fetchcolumn($sql, $params); goto yF0tQ; uf6OG: c3HqZ: goto Sh6zA; ReaiV: xc_ajax($jsondate); goto YNRGI; EetD6: xc_ajax($jsondate); goto f5AJW; zwktp: hC3fu: goto WM0gp; yF0tQ: if (empty($jsondate['total'])) { goto UsrkE; } goto TyoRJ; w5foX: $params['itype'] = $_GPC['itype']; goto rVAvS; ITIKl: if (!(strlen($_GPC['openid']) > 0 && $_GPC['openid'] != '0')) { goto Jnqz2; } goto J2a5L; ofiFd: $sql = 'SELECT COUNT(*) FROM   ' . $fulltable . $where; goto skqir; BCWK1: if (!(strlen($_GPC['itype']) > 0 && $_GPC['itype'] != '0')) { goto qJYAg; } goto zpCQ2; YD2QC: if (!(strlen($_GPC['seachkey']) > 0)) { goto c3HqZ; } goto JEsHv; Sh6zA: $params = array(); goto ITIKl; D4mp3: $ararysort = ararysorts(); goto ZsrPz; Liv5v: $fulltable = tablename($table); goto ofiFd; zRfuq: $params['openid'] = $_GPC['openid']; goto mSRih; yAQ6y: UsrkE: goto xB9Rw; zpCQ2: $where .= ' and itype=:itype'; goto w5foX; zSmeR: $params['uniacid'] = $uniacid; goto Liv5v; JEsHv: $where .= ' and name like \'%' . $_GPC['seachkey'] . '%\''; goto uf6OG; rr0QL: foreach ($listmodel as &$item) { goto pPho7; j1rwT: b1yIr: goto XZWms; pPho7: $user = pdo_get($xcmodule . '_member', array("uniacid" => $uniacid, "openid" => $item['openid']), array("nickname")); goto h7PLG; XZWms: X4Rio: goto Cln2X; h7PLG: if (!$user) { goto b1yIr; } goto xhpHD; xhpHD: $item['nickname'] = base64_decode($user['nickname']); goto j1rwT; Cln2X: } goto zwktp; ZsrPz: $where = ' WHERE uniacid=:uniacid '; goto YD2QC; J2a5L: $where .= ' and openid=:openid'; goto zRfuq; f5AJW: fx7IP: goto gaCdT; xB9Rw: $jsondate['rows'] = []; goto EetD6; rVAvS: qJYAg: goto zSmeR; WM0gp: $jsondate['rows'] = $listmodel; goto ReaiV; mSRih: Jnqz2: goto BCWK1; TyoRJ: $sql = 'SELECT * FROM  ' . $fulltable . $where . ' ORDER BY ' . $ararysort['order'] . ' LIMIT ' . $ararysort['offset'] . ',' . $ararysort['limit']; goto qQP5V; skqir: $total = pdo_fetchcolumn($sql, $params); goto wOMqy; gaCdT: case 'save': goto sZIZY; sZIZY: $id = $_GPC['id']; goto PvP7K; uupzr: $ret = pdo_update($table, $data, array("id" => $id, "uniacid" => $uniacid)); goto Hv_pM; FUOn4: xc_message($reslutstatus); goto sbWlR; um1dJ: $reslutstatus = $ret > 0 ? 1 : -1; goto a4l3M; PvP7K: $data = $_GPC['xc']; goto uQdGu; AUIjH: $id = pdo_insertid(); goto D3mPe; VfijG: BzZAm: goto FUOn4; eH8Lu: goto BzZAm; goto Sg7Yx; D3mPe: PNtxA: goto VfijG; Hv_pM: $reslutstatus = $ret > 0 ? 1 : -1; goto eH8Lu; oECh3: $data['uniacid'] = $uniacid; goto mQv0J; uQdGu: $data['value'] = iserializer($data['value']); goto kZIuE; kZIuE: if (strlen($id) < 1 || empty($id)) { goto oxKt0; } goto uupzr; a4l3M: if (empty($ret)) { goto PNtxA; } goto AUIjH; Sg7Yx: oxKt0: goto oECh3; mQv0J: $ret = pdo_insert($table, $data); goto um1dJ; sbWlR: } goto fX2Ma; Ym0fz: if (!(strlen($_GPC['xtitlea']) > 0)) { goto JNW7k; } goto JoyRq; jwRpj: $xtitleb = ''; goto Ym0fz; byaPO: global $_W, $_GPC, $xcmodule; goto J27d6; FkfIe: } public function doWebSpecialclass() { goto qvYGZ; ZQEVG: IU5QM: goto wr_dg; RUK3M: $xtitleb = urldecode($_GPC['xtitleb']); goto vWUYn; a7sgG: $op = strlen($_GPC['op']) > 0 ? $_GPC['op'] : 'list'; goto Kl9o9; wr_dg: if (!(strlen($_GPC['xtitleb']) > 0)) { goto d7Fpv; } goto RUK3M; btF8b: load()->web('tpl'); goto Bw3oD; qvYGZ: global $_W, $_GPC, $xcmodule; goto rspG5; I_RhX: Pc9RP: goto yDcml; Fdnmn: $uniacid = $_W['uniacid']; goto H1X80; fPjGp: if (!(strlen($_GPC['xtitlea']) > 0)) { goto IU5QM; } goto Bt2Kd; H1X80: $openid = $_W['openid']; goto ePcnx; vWUYn: d7Fpv: goto btF8b; b4vjH: $xtitleb = ''; goto fPjGp; AnY2c: $m = $_GPC['m']; goto Fdnmn; mabie: auco2: goto I_RhX; Bw3oD: load()->func('tpl'); goto wY6oB; Kl9o9: $do = $_GPC['do']; goto AnY2c; ePcnx: switch ($op) { case 'delete': goto cg2NS; O44mE: $status = $result > 0 ? 1 : -1; goto g3Qq6; aR_TY: UHz3r: goto X9odr; OAYYs: $result = pdo_delete($table, array("id" => $arrids, "uniacid" => $uniacid)); goto O44mE; xR6Ep: $arrids = explode(',', $ids); goto AJ4LB; DavGZ: goto UHz3r; goto Vo8_y; AJ4LB: if (count($arrids) < 1) { goto GkjDb; } goto OAYYs; cg2NS: $ids = $_GPC['ids']; goto xR6Ep; Vo8_y: GkjDb: goto vvua0; vvua0: xc_message(-1, null); goto aR_TY; g3Qq6: xc_message($status, null); goto DavGZ; X9odr: case 'copy': goto lxlre; jasxN: $id = pdo_insertid(); goto PkgX4; PkgX4: US9k5: goto iqPPq; jA8Gv: if (!empty($xc)) { goto U_p_3; } goto VIINe; XRrHE: unset($xc['id']); goto hzk3q; xT2b4: if (!($ret > 0)) { goto US9k5; } goto jasxN; cC5Fn: goto JK2O7; goto R2GvR; ghtNA: JK2O7: goto wzsz4; lxlre: $ids = $_GPC['ids']; goto XonSg; oeY3q: xc_message($status, null); goto ghtNA; R2GvR: U_p_3: goto XRrHE; hzk3q: unset($xc['createtime']); goto DVLt1; UqGLk: $ret = pdo_insert($table, $xc); goto xT2b4; VIINe: xc_message(-1, null); goto cC5Fn; iqPPq: $status = $ret > 0 ? 1 : -1; goto oeY3q; XonSg: $xc = pdo_get($table, array("uniacid" => $uniacid, "id" => $ids)); goto jA8Gv; DVLt1: unset($xc['modifytime']); goto UqGLk; wzsz4: case 'midstatus': goto oxrUR; gCrQt: xc_message($ret, null); goto yhVyC; N6gWo: $updatestatus = array(); goto oHRAd; krckb: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto gCrQt; yhVyC: exit; goto VDFSN; pP0tY: $status = -$_GPC['status']; goto N6gWo; oHRAd: $updatestatus['status'] = $status; goto krckb; oxrUR: $id = intval($_GPC['id']); goto pP0tY; VDFSN: case 'midisindex': goto hF0qB; CkmSE: xc_message($ret, null); goto pn_qZ; BgO_o: $updatestatus = array(); goto H9Qmo; vbbuF: $status = -$_GPC['status']; goto BgO_o; pn_qZ: exit; goto W6glW; hF0qB: $id = intval($_GPC['id']); goto vbbuF; QDpdh: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto CkmSE; H9Qmo: $updatestatus['isindex'] = $status; goto QDpdh; W6glW: case 'updatesorts': goto Cv5DJ; ta4v3: $updatestatus = array(); goto OgQwP; Cv5DJ: $id = intval($_GPC['id']); goto GsN6t; GsN6t: $sorts = intval($_GPC['sorts']); goto ta4v3; gOHZO: exit; goto NxzXf; R_Hf2: xc_message($ret, null); goto gOHZO; OgQwP: $updatestatus['sorts'] = $sorts; goto bBnfI; bBnfI: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto R_Hf2; NxzXf: case 'list': include $this->template('mymanage/' . $do . '/' . $op); exit; case 'edit': goto L9dwT; T8Y0o: n4N8x: goto zWXA0; sb9JD: xQRNI: goto zxgmP; h6ois: if (!empty($id)) { goto xQRNI; } goto JbpqH; yUIUJ: $xc = pdo_fetch($sql, $params); goto T8Y0o; k2CRA: exit; goto pc08d; bNST3: $params = array(":id" => $id, ":uniacid" => $_W['uniacid']); goto yUIUJ; zWXA0: include $this->template('mymanage/' . strtolower($_GPC['do']) . '/' . $op); goto k2CRA; L9dwT: $id = intval($_GPC['id']); goto cSUAc; cSUAc: $xc = array(); goto h6ois; dLnch: goto n4N8x; goto sb9JD; JbpqH: $xc['id'] = 0; goto dLnch; zxgmP: $sql = 'SELECT * FROM ' . tablename($table) . ' WHERE id=:id AND uniacid=:uniacid LIMIT 1'; goto bNST3; pc08d: case 'getseachjson': goto SOJcN; lzm13: $where .= ' and cid=:cid'; goto H1w6W; LVCd1: if (empty($jsondate['total'])) { goto SjFQB; } goto CFg3X; SOJcN: $ararysort = ararysorts(); goto sa8ag; PW2Fc: goto NZG3C; goto RuN0c; HeXAD: $listmodel = pdo_fetchall($sql, $params); goto LSmk6; H1w6W: $params['cid'] = $_GPC['cid']; goto rHLXV; LSmk6: $jsondate['rows'] = $listmodel; goto TYtFi; gaIcE: $params['uniacid'] = $uniacid; goto Ll9rg; XRvFF: ZDg0C: goto RWMHw; w1lvW: $sql = 'SELECT COUNT(*) FROM   ' . $fulltable . $where; goto ghzOg; LMXCX: $jsondate['total'] = pdo_fetchcolumn($sql, $params); goto LVCd1; ghzOg: $total = pdo_fetchcolumn($sql, $params); goto LMXCX; RuN0c: SjFQB: goto TZkaI; rHLXV: QJ8Os: goto gaIcE; CFg3X: $sql = 'SELECT * FROM  ' . $fulltable . $where . ' ORDER BY ' . $ararysort['order'] . ' LIMIT ' . $ararysort['offset'] . ',' . $ararysort['limit']; goto HeXAD; l7cv_: if (!(strlen($_GPC['cid']) > 0 && $_GPC['cid'] != '0')) { goto QJ8Os; } goto lzm13; YEnnO: NZG3C: goto pTTBr; RWMHw: $params = array(); goto l7cv_; TZkaI: $jsondate['rows'] = []; goto k1bwb; TYtFi: xc_ajax($jsondate); goto PW2Fc; yW1GL: $where .= ' and name like \'%' . $_GPC['seachkey'] . '%\''; goto XRvFF; OJd67: if (!(strlen($_GPC['seachkey']) > 0)) { goto ZDg0C; } goto yW1GL; Ll9rg: $fulltable = tablename($table); goto w1lvW; sa8ag: $where = ' WHERE uniacid=:uniacid '; goto OJd67; k1bwb: xc_ajax($jsondate); goto YEnnO; pTTBr: case 'save': goto rVcij; TvmB1: $ret = pdo_insert($table, $data); goto MXVt7; r72ue: $reslutstatus = $ret > 0 ? 1 : -1; goto pO3Qs; B9D8v: if (strlen($id) < 1 || empty($id)) { goto SizJf; } goto XQyZZ; pO3Qs: goto H2jw3; goto DZHCa; gJfj_: if (empty($ret)) { goto V0o_M; } goto FSzb4; u1R4X: $data = $_GPC['xc']; goto B9D8v; VI9zj: H2jw3: goto uDel3; XQyZZ: $ret = pdo_update($table, $data, array("id" => $id, "uniacid" => $uniacid)); goto r72ue; OmODR: $data['uniacid'] = $uniacid; goto TvmB1; xtu9v: V0o_M: goto VI9zj; uDel3: xc_message($reslutstatus); goto PcsbZ; FSzb4: $id = pdo_insertid(); goto xtu9v; DZHCa: SizJf: goto OmODR; MXVt7: $reslutstatus = $ret > 0 ? 1 : -1; goto gJfj_; rVcij: $id = $_GPC['id']; goto u1R4X; PcsbZ: } goto mabie; wY6oB: $table = $xcmodule . '_' . 'specialclass'; goto a7sgG; Bt2Kd: $xtitlea = urldecode($_GPC['xtitlea']); goto ZQEVG; rspG5: $xtitlea = ''; goto b4vjH; yDcml: } public function doWebPoster() { goto iML2F; pfiqV: F5Muc: goto c4JpP; HMRbI: $op = strlen($_GPC['op']) > 0 ? $_GPC['op'] : 'list'; goto ddYFd; mf4w7: $xtitlea = urldecode($_GPC['xtitlea']); goto lYv2r; QBgws: $xtitlea = ''; goto w8OAD; ZNej4: load()->web('tpl'); goto S_F3d; bF5SN: $table = $xcmodule . '_' . 'other'; goto HMRbI; OE7nY: yycSe: goto pfiqV; R8qe8: switch ($op) { case 'delete': goto kBwOk; raMAp: V12Kj: goto u1VMU; LQPsY: $result = pdo_delete($table, array("id" => $arrids, "uniacid" => $uniacid)); goto N899J; JPVVg: mTtVA: goto Uwk1f; gqaGH: xc_message($status, null); goto xfJU7; N899J: $status = $result > 0 ? 1 : -1; goto gqaGH; Uwk1f: xc_message(-1, null); goto raMAp; YuuGI: $arrids = explode(',', $ids); goto yxrAn; kBwOk: $ids = $_GPC['ids']; goto YuuGI; yxrAn: if (count($arrids) < 1) { goto mTtVA; } goto LQPsY; xfJU7: goto V12Kj; goto JPVVg; u1VMU: case 'copy': goto ueDtA; vmyFz: VDcoq: goto pY1rf; kxRxe: if (!empty($xc)) { goto VDcoq; } goto xMuZy; bRPqw: goto p6TNK; goto vmyFz; tTP3f: unset($xc['modifytime']); goto SRvEs; PSeCG: aRWMD: goto G2zgc; CDb0u: if (!($ret > 0)) { goto aRWMD; } goto n_8It; xMuZy: xc_message(-1, null); goto bRPqw; l_tVy: $xc = pdo_get($table, array("uniacid" => $uniacid, "id" => $ids)); goto kxRxe; SRvEs: $ret = pdo_insert($table, $xc); goto CDb0u; G2zgc: $status = $ret > 0 ? 1 : -1; goto kyKUQ; pY1rf: unset($xc['id']); goto OT2rN; n_8It: $id = pdo_insertid(); goto PSeCG; OT2rN: unset($xc['createtime']); goto tTP3f; ueDtA: $ids = $_GPC['ids']; goto l_tVy; kyKUQ: xc_message($status, null); goto O2Vzo; O2Vzo: p6TNK: goto c8Nqs; c8Nqs: case 'midstatus': goto uWC36; JOAsg: $updatestatus['status'] = $status; goto o6Jz1; xbWLf: exit; goto b2675; xt1SR: xc_message($ret, null); goto xbWLf; uWC36: $id = intval($_GPC['id']); goto b0jCs; b0jCs: $status = -$_GPC['status']; goto Tgwd7; Tgwd7: $updatestatus = array(); goto JOAsg; o6Jz1: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto xt1SR; b2675: case 'midisindex': goto VrQhy; VX3GH: $updatestatus = array(); goto l91Zw; sV9Bp: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto pmccr; vDRJA: exit; goto u0CFr; VrQhy: $id = intval($_GPC['id']); goto ev2kZ; l91Zw: $updatestatus['isindex'] = $status; goto sV9Bp; pmccr: xc_message($ret, null); goto vDRJA; ev2kZ: $status = -$_GPC['status']; goto VX3GH; u0CFr: case 'updatesorts': goto t4dor; uauoP: $sorts = intval($_GPC['sorts']); goto dvckp; HgcCS: $updatestatus['sorts'] = $sorts; goto FLAWY; HSJAK: xc_message($ret, null); goto fIIOY; dvckp: $updatestatus = array(); goto HgcCS; fIIOY: exit; goto hwzHX; FLAWY: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto HSJAK; t4dor: $id = intval($_GPC['id']); goto uauoP; hwzHX: case 'list': include $this->template('mymanage/' . $do . '/' . $op); exit; case 'edit': goto HK446; UOfLM: goto JZEC0; goto AHyzU; h_Z7T: $xc['id'] = 0; goto UOfLM; ko3ep: $xc['content'] = htmlspecialchars_decode($list['contents']['content']); goto rgJdn; J5w9n: $xc['name'] = $list['name']; goto zBwrE; rgJdn: JZEC0: goto qzbc8; mr698: $list = pdo_fetch($sql, $params); goto sMeF6; oydJX: if (!empty($id)) { goto VpXS2; } goto h_Z7T; HK446: $id = intval($_GPC['id']); goto CXnvF; AHyzU: VpXS2: goto WpGo0; u4u3l: $params = array(":id" => $id, ":uniacid" => $_W['uniacid']); goto mr698; zBwrE: $xc['id'] = $list['id']; goto kkm8w; WpGo0: $sql = 'SELECT * FROM ' . tablename($table) . ' WHERE id=:id AND uniacid=:uniacid LIMIT 1'; goto u4u3l; CXnvF: $list = array(); goto oydJX; NErFV: exit; goto gDZF1; oH802: $xc['list'] = $list['contents']['list']; goto ko3ep; E6a8W: $xc['count'] = $list['contents']['count']; goto oH802; qzbc8: include $this->template('mymanage/' . strtolower($_GPC['do']) . '/' . $op); goto NErFV; kkm8w: $xc['status'] = $list['status']; goto E6a8W; sMeF6: $list['contents'] = json_decode($list['contents'], true); goto J5w9n; gDZF1: case 'getseachjson': goto WBrn6; lYIjS: $listmodel = pdo_fetchall($sql, $params); goto ZvOkV; z70Hu: $jsondate['total'] = pdo_fetchcolumn($sql, $params); goto pecrR; WBrn6: $ararysort = ararysorts(); goto V9Nfs; RthNF: $sql = 'SELECT * FROM  ' . $fulltable . $where . ' ORDER BY ' . $ararysort['order'] . ' LIMIT ' . $ararysort['offset'] . ',' . $ararysort['limit']; goto lYIjS; eUnT2: $params[':keyval'] = 'poster'; goto Qi1GA; wYwGv: $jsondate['rows'] = []; goto hwBuM; GmRR_: aiszl: goto l8twn; hwBuM: xc_ajax($jsondate); goto GmRR_; veHaZ: if (!(strlen($_GPC['seachkey']) > 0)) { goto lNypS; } goto nhHgb; QI_Mv: $total = pdo_fetchcolumn($sql, $params); goto z70Hu; Zr8bV: $params = array(); goto DDe9L; hvFqm: BT65B: goto PYhTN; ZvOkV: $jsondate['rows'] = $listmodel; goto Zdm92; V9Nfs: $where = ' WHERE uniacid=:uniacid and keyval=:keyval'; goto veHaZ; ztAny: $where .= ' and cid=:cid'; goto QY1bn; DDe9L: if (!(strlen($_GPC['cid']) > 0 && $_GPC['cid'] != '0')) { goto BT65B; } goto ztAny; pecrR: if (empty($jsondate['total'])) { goto hZ5FM; } goto RthNF; QY1bn: $params['cid'] = $_GPC['cid']; goto hvFqm; L8JsE: lNypS: goto Zr8bV; PYhTN: $params['uniacid'] = $uniacid; goto eUnT2; ZVbox: $sql = 'SELECT COUNT(*) FROM   ' . $fulltable . $where; goto QI_Mv; Qi1GA: $fulltable = tablename($table); goto ZVbox; nhHgb: $where .= ' and name like \'%' . $_GPC['seachkey'] . '%\''; goto L8JsE; xIZSl: goto aiszl; goto RBJju; Zdm92: xc_ajax($jsondate); goto xIZSl; RBJju: hZ5FM: goto wYwGv; l8twn: case 'save': goto bulzt; QYajR: goto VSxBR; goto Mb0YI; aNat4: NkJ4d: goto q8CJj; IEMhH: $reslutstatus = $ret > 0 ? 1 : -1; goto jOC0_; bulzt: $id = $_GPC['id']; goto gLfhb; a2Ce1: if (isset($postdata['status'])) { goto D6y4H; } goto b9ax4; v_bt4: $data['uniacid'] = $uniacid; goto SdCNH; WBTI5: VSxBR: goto u5Dar; b9ax4: $data['status'] = -1; goto QYajR; ZRg8b: $id = pdo_insertid(); goto P87rS; KiC1D: $data['name'] = $postdata['name']; goto a2Ce1; RYRhI: if (strlen($id) < 1 || empty($id)) { goto kuU7_; } goto ysaKt; F0i9p: goto NkJ4d; goto Th8S2; jOC0_: if (empty($ret)) { goto ybt5C; } goto ZRg8b; Z8cln: $data['status'] = 1; goto WBTI5; ysaKt: $ret = pdo_update($table, $data, array("id" => $id, "uniacid" => $uniacid)); goto q38NT; gLfhb: $postdata = $_GPC['xc']; goto KiC1D; SdCNH: $data['keyval'] = 'poster'; goto KJJWB; KJJWB: $ret = pdo_insert($table, $data); goto IEMhH; Th8S2: kuU7_: goto v_bt4; P87rS: ybt5C: goto aNat4; q8CJj: xc_message($reslutstatus); goto NW9wz; u5Dar: $data['contents'] = json_encode($postdata); goto RYRhI; q38NT: $reslutstatus = $ret > 0 ? 1 : -1; goto F0i9p; Mb0YI: D6y4H: goto Z8cln; NW9wz: } goto OE7nY; w8OAD: $xtitleb = ''; goto Fk9sG; Fk9sG: if (!(strlen($_GPC['xtitlea']) > 0)) { goto xVibW; } goto mf4w7; lYv2r: xVibW: goto q8POt; WYRGM: $openid = $_W['openid']; goto R8qe8; iML2F: global $_W, $_GPC, $xcmodule; goto QBgws; ddYFd: $do = $_GPC['do']; goto Lw4z3; cs5g_: $xtitleb = urldecode($_GPC['xtitleb']); goto rDM7_; S_F3d: load()->func('tpl'); goto bF5SN; rDM7_: zWMeN: goto ZNej4; q8POt: if (!(strlen($_GPC['xtitleb']) > 0)) { goto zWMeN; } goto cs5g_; Lw4z3: $m = $_GPC['m']; goto Z2tHr; Z2tHr: $uniacid = $_W['uniacid']; goto WYRGM; c4JpP: } public function doWebShop_ppt() { goto tF587; MunsF: load()->web('tpl'); goto V7SpF; lCUjt: $xtitleb = ''; goto r84GP; Xuz3i: vMjwd: goto MunsF; wbdYU: da0sZ: goto OoMo4; ApFcj: $openid = $_W['openid']; goto sm3IX; tF587: global $_W, $_GPC, $xcmodule; goto bF144; V7SpF: load()->func('tpl'); goto yO5IJ; sm3IX: switch ($op) { case 'delete': goto Onq2Y; Onq2Y: $ids = $_GPC['ids']; goto fRcIq; fRcIq: $arrids = explode(',', $ids); goto Ww0Lx; AnyXD: $result = pdo_delete($table, array("id" => $arrids, "uniacid" => $uniacid)); goto k4OS0; QgyKe: U7RwS: goto osnIV; WMPHM: xc_message($status, null); goto rWMiM; rWMiM: goto pYau3; goto QgyKe; k4OS0: $status = $result > 0 ? 1 : -1; goto WMPHM; EknQJ: pYau3: goto pdGvD; Ww0Lx: if (count($arrids) < 1) { goto U7RwS; } goto AnyXD; osnIV: xc_message(-1, null); goto EknQJ; pdGvD: case 'copy': goto lBACN; Qtlxz: $ret = pdo_insert($table, $xc); goto nMKnQ; m9oYz: weEhz: goto n3TpV; IOLs5: bUilR: goto A1rYx; A1rYx: unset($xc['id']); goto Xa9hM; nMKnQ: if (!($ret > 0)) { goto weEhz; } goto h0fm2; h27cC: kGFvF: goto HM_V8; n3TpV: $status = $ret > 0 ? 1 : -1; goto dZcZX; dZcZX: xc_message($status, null); goto h27cC; K6_7U: xc_message(-1, null); goto OTV3t; SG1wN: if (!empty($xc)) { goto bUilR; } goto K6_7U; xWG3h: unset($xc['midtime']); goto Qtlxz; esekK: $xc = pdo_get($table, array("uniacid" => $uniacid, "id" => $ids)); goto SG1wN; h0fm2: $id = pdo_insertid(); goto m9oYz; lBACN: $ids = $_GPC['ids']; goto esekK; Xa9hM: unset($xc['createtime']); goto xWG3h; OTV3t: goto kGFvF; goto IOLs5; HM_V8: case 'midstatus': goto ueVCj; ueVCj: $id = intval($_GPC['id']); goto iqTXZ; OqBER: exit; goto CTxum; JUo5i: $updatestatus['status'] = $status; goto DjolI; wxnIU: $updatestatus = array(); goto JUo5i; mO4Tj: xc_message($ret, null); goto OqBER; iqTXZ: $status = -$_GPC['status']; goto wxnIU; DjolI: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto mO4Tj; CTxum: case 'midisindex': goto Q1Rnu; upLYh: xc_message($ret, null); goto gbzy5; j84N4: $status = -$_GPC['status']; goto Wh3Vz; Wh3Vz: $updatestatus = array(); goto aJs7t; gbzy5: exit; goto jMw_E; hZG78: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto upLYh; aJs7t: $updatestatus['isindex'] = $status; goto hZG78; Q1Rnu: $id = intval($_GPC['id']); goto j84N4; jMw_E: case 'midsorts': goto nyhzv; wAgU6: exit; goto eVrvI; F18rF: $updatestatus = array(); goto nwoku; nyhzv: $id = intval($_GPC['id']); goto JYjw8; JYjw8: $sorts = intval($_GPC['sorts']); goto F18rF; EQzHW: xc_message($ret, null); goto wAgU6; j8ntF: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto EQzHW; nwoku: $updatestatus['sorts'] = $sorts; goto j8ntF; eVrvI: case 'list': include $this->template('mymanage/' . $do . '/' . $op); exit; case 'edit': goto mjqKx; SpsVT: $xc['contents'] = iunserializer($xc['contents']); goto CL6UW; BxrrP: include $this->template('mymanage/' . strtolower($_GPC['do']) . '/' . $op); goto YkQ3n; daw1W: if (empty($id)) { goto fBVBr; } goto ZDEnD; mjqKx: $id = intval($_GPC['id']); goto pwyK7; skS43: $xc = pdo_fetch($sql, $params); goto SpsVT; AT0VJ: $params = array(":id" => $id, ":uniacid" => $_W['uniacid']); goto skS43; pwyK7: $xc = array(); goto daw1W; ZDEnD: $sql = 'SELECT * FROM ' . tablename($table) . ' WHERE id=:id AND uniacid=:uniacid LIMIT 1'; goto AT0VJ; YkQ3n: exit; goto dBWSq; CL6UW: fBVBr: goto BxrrP; dBWSq: case 'getseachjson': goto poHPO; ZPQBY: szDrB: goto Xav92; nGNGj: $where = ' WHERE uniacid=:uniacid and keyval=:keyval'; goto RT2nq; NWN21: $listmodel = pdo_fetchall($sql, $params); goto u7iSw; q3hHW: $sql = 'SELECT COUNT(*) FROM   ' . $fulltable . $where; goto cfCt0; MJ0ui: l3oGK: goto gkTir; gkTir: $params['uniacid'] = $uniacid; goto Qv4w3; s2oP1: $params = array(); goto JZftA; mLWLH: A8RgP: goto s2oP1; Qv4w3: $params['keyval'] = 'shop_ppt'; goto MTn0q; cfCt0: $total = pdo_fetchcolumn($sql, $params); goto o5vP1; RT2nq: if (!(strlen($_GPC['seachkey']) > 0)) { goto A8RgP; } goto qH2PL; U2zOE: $jsondate['rows'] = array(); goto I4MTi; DqgSe: $where .= ' and cid=:cid'; goto ubnTU; I4MTi: xc_ajax($jsondate); goto ZPQBY; o5vP1: $jsondate['total'] = pdo_fetchcolumn($sql, $params); goto sQabI; JZftA: if (!(strlen($_GPC['cid']) > 0 && $_GPC['cid'] != '0')) { goto l3oGK; } goto DqgSe; mr1_j: goto szDrB; goto UUlDT; iao5w: $jsondate['rows'] = $listmodel; goto tZ8iz; tZ8iz: xc_ajax($jsondate); goto mr1_j; u7iSw: foreach ($listmodel as &$item) { goto eaHkU; eaHkU: $item['contents'] = iunserializer($item['contents']); goto gL864; xYORF: dPUs5: goto EF4S7; gL864: if (!$item['contents']['img']) { goto dPUs5; } goto RtckX; EF4S7: gdT9N: goto SgElr; RtckX: $item['contents']['img'] = tomedia($item['contents']['img']); goto xYORF; SgElr: } goto i1dz2; FHeSG: $sql = 'SELECT * FROM  ' . $fulltable . $where . ' ORDER BY ' . $ararysort['order'] . ' LIMIT ' . $ararysort['offset'] . ',' . $ararysort['limit']; goto NWN21; UUlDT: iyAbk: goto U2zOE; qH2PL: $where .= ' and name like \'%' . $_GPC['seachkey'] . '%\''; goto mLWLH; ubnTU: $params['cid'] = $_GPC['cid']; goto MJ0ui; i1dz2: l6RPA: goto iao5w; poHPO: $ararysort = ararysorts(); goto nGNGj; sQabI: if (empty($jsondate['total'])) { goto iyAbk; } goto FHeSG; MTn0q: $fulltable = tablename($table); goto q3hHW; Xav92: case 'save': goto qUD2M; Em218: PL3Sf: goto PSErx; MK5CN: aMtNI: goto H91a_; rMQUK: zPG7N: goto v6QhM; YqePA: unset($postdata['status']); goto RzQAW; FiYeN: goto COYyR; goto rMQUK; bu9UZ: if (!isset($postdata['sorts'])) { goto aMtNI; } goto dOszT; qUD2M: $id = $_GPC['id']; goto iE9sJ; H3BDk: $data['name'] = '积分商城轮播图'; goto HVWLs; Fwe77: if (!isset($postdata['status'])) { goto teXTK; } goto sfZzH; H91a_: $data['contents'] = iserializer($postdata); goto m5jFT; dOszT: $data['sorts'] = $postdata['sorts']; goto zjHR0; iE9sJ: $postdata = $_GPC['xc']; goto Fwe77; RzQAW: teXTK: goto bu9UZ; il0HA: $data['modifytime'] = date('Y-m-d H:i:s'); goto yYRPq; v6QhM: $data['uniacid'] = $uniacid; goto WPc6X; HVWLs: $ret = pdo_insert($table, $data); goto CzCGq; p6aMX: xc_message($reslutstatus); goto fh_Ej; PSErx: COYyR: goto p6aMX; xf3hJ: if (empty($ret)) { goto PL3Sf; } goto qJeaA; m5jFT: if (strlen($id) < 1 || empty($id)) { goto zPG7N; } goto il0HA; Rua20: $reslutstatus = $ret > 0 ? 1 : -1; goto FiYeN; WPc6X: $data['keyval'] = 'shop_ppt'; goto H3BDk; CzCGq: $reslutstatus = $ret > 0 ? 1 : -1; goto xf3hJ; yYRPq: $ret = pdo_update($table, $data, array("id" => $id, "uniacid" => $uniacid)); goto Rua20; zjHR0: unset($postdata['sorts']); goto MK5CN; sfZzH: $data['status'] = $postdata['status']; goto YqePA; qJeaA: $id = pdo_insertid(); goto Em218; fh_Ej: } goto wbdYU; OoMo4: xlZ_7: goto ggM0V; yO5IJ: $table = $xcmodule . '_' . 'other'; goto xDBn7; ButpG: $xtitlea = urldecode($_GPC['xtitlea']); goto ZZN9f; gKF9H: if (!(strlen($_GPC['xtitleb']) > 0)) { goto vMjwd; } goto WptM1; bF144: $xtitlea = ''; goto lCUjt; Tz6ax: $m = $_GPC['m']; goto M38FI; jI9fE: $do = $_GPC['do']; goto Tz6ax; xDBn7: $op = strlen($_GPC['op']) > 0 ? $_GPC['op'] : 'list'; goto jI9fE; WptM1: $xtitleb = urldecode($_GPC['xtitleb']); goto Xuz3i; ZZN9f: d1GCk: goto gKF9H; M38FI: $uniacid = $_W['uniacid']; goto ApFcj; r84GP: if (!(strlen($_GPC['xtitlea']) > 0)) { goto d1GCk; } goto ButpG; ggM0V: } public function doWebDis_ppt() { goto pYKIQ; ChUXk: if (!(strlen($_GPC['xtitleb']) > 0)) { goto uhyaS; } goto h1J5x; q0neJ: $table = $xcmodule . '_' . 'other'; goto WOoKe; A78yJ: load()->web('tpl'); goto uHVKf; DOMSd: if (!(strlen($_GPC['xtitlea']) > 0)) { goto Ve8Yn; } goto YBxJC; vANH4: $uniacid = $_W['uniacid']; goto tJjHr; pYKIQ: global $_W, $_GPC, $xcmodule; goto S9Zyo; miN5Y: switch ($op) { case 'delete': goto c4gfw; snXAw: I0g9E: goto d9x45; Ugoug: $status = $result > 0 ? 1 : -1; goto oi7n7; gpGyb: $result = pdo_delete($table, array("id" => $arrids, "uniacid" => $uniacid)); goto Ugoug; FEW6H: $arrids = explode(',', $ids); goto duvBB; c4gfw: $ids = $_GPC['ids']; goto FEW6H; mJmLv: xc_message(-1, null); goto snXAw; h3UqD: goto I0g9E; goto QwetP; duvBB: if (count($arrids) < 1) { goto EBdlP; } goto gpGyb; QwetP: EBdlP: goto mJmLv; oi7n7: xc_message($status, null); goto h3UqD; d9x45: case 'copy': goto YH2XO; cj5zr: $status = $ret > 0 ? 1 : -1; goto F5Emp; lfSDk: unset($xc['midtime']); goto Mecxi; qcxwB: if (!empty($xc)) { goto k4NhW; } goto WN7o6; Ev1sj: if (!($ret > 0)) { goto q9gyM; } goto lWqa6; lWqa6: $id = pdo_insertid(); goto fixk9; J8JRM: unset($xc['id']); goto fQ4kt; Rea7c: k4NhW: goto J8JRM; WN7o6: xc_message(-1, null); goto NZDXe; fixk9: q9gyM: goto cj5zr; fQ4kt: unset($xc['createtime']); goto lfSDk; RCsGw: $xc = pdo_get($table, array("uniacid" => $uniacid, "id" => $ids)); goto qcxwB; F5Emp: xc_message($status, null); goto UcEkF; NZDXe: goto nv0ON; goto Rea7c; Mecxi: $ret = pdo_insert($table, $xc); goto Ev1sj; UcEkF: nv0ON: goto MW9SA; YH2XO: $ids = $_GPC['ids']; goto RCsGw; MW9SA: case 'midstatus': goto IYVNm; IYVNm: $id = intval($_GPC['id']); goto z4pKK; ZW98h: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto m9FJJ; mzYgP: $updatestatus = array(); goto VTv0o; m9FJJ: xc_message($ret, null); goto KGlAA; KGlAA: exit; goto Nunbv; VTv0o: $updatestatus['status'] = $status; goto ZW98h; z4pKK: $status = -$_GPC['status']; goto mzYgP; Nunbv: case 'midisindex': goto YAme7; QrVFf: $updatestatus = array(); goto uzinc; YAme7: $id = intval($_GPC['id']); goto nTEpi; cig9N: xc_message($ret, null); goto hJr4u; uzinc: $updatestatus['isindex'] = $status; goto uuN8j; nTEpi: $status = -$_GPC['status']; goto QrVFf; hJr4u: exit; goto fmZ7f; uuN8j: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto cig9N; fmZ7f: case 'midsorts': goto HOmEC; DTdiA: exit; goto e1rm_; fseDt: $updatestatus = array(); goto cF2K7; V9fav: $sorts = intval($_GPC['sorts']); goto fseDt; cF2K7: $updatestatus['sorts'] = $sorts; goto Hi5Y5; Hi5Y5: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto D19sy; D19sy: xc_message($ret, null); goto DTdiA; HOmEC: $id = intval($_GPC['id']); goto V9fav; e1rm_: case 'list': include $this->template('mymanage/' . $do . '/' . $op); exit; case 'edit': goto oPGjY; Y88dz: exit; goto zXi9f; wio76: if (empty($id)) { goto R6G3R; } goto Gdw1U; aTmhL: $params = array(":id" => $id, ":uniacid" => $_W['uniacid']); goto IzBS5; oPGjY: $id = intval($_GPC['id']); goto jQOk2; DzI_z: $xc['contents'] = json_decode($xc['contents'], true); goto wyUJ6; jQOk2: $xc = array(); goto wio76; Gdw1U: $sql = 'SELECT * FROM ' . tablename($table) . ' WHERE id=:id AND uniacid=:uniacid LIMIT 1'; goto aTmhL; E4IL4: include $this->template('mymanage/' . strtolower($_GPC['do']) . '/' . $op); goto Y88dz; IzBS5: $xc = pdo_fetch($sql, $params); goto DzI_z; wyUJ6: R6G3R: goto E4IL4; zXi9f: case 'getseachjson': goto i_dlk; ILHTv: EUFz1: goto upjjt; IUKqJ: $fulltable = tablename($table); goto Bikxn; JOZwB: $params['uniacid'] = $uniacid; goto Opcs7; F4dgX: $total = pdo_fetchcolumn($sql, $params); goto e2YD9; IRFhG: foreach ($listmodel as &$item) { goto uubGt; uubGt: $item['contents'] = json_decode($item['contents'], true); goto PkKAs; fgX2G: VRMsb: goto AuyxH; PkKAs: if (!$item['contents']['img']) { goto VGVHa; } goto fUZMB; fUZMB: $item['contents']['img'] = tomedia($item['contents']['img']); goto oUdBu; oUdBu: VGVHa: goto fgX2G; AuyxH: } goto h5gLV; upjjt: $jsondate['rows'] = array(); goto tB5C1; Bikxn: $sql = 'SELECT COUNT(*) FROM   ' . $fulltable . $where; goto F4dgX; wuP9x: $where .= ' and cid=:cid'; goto eM6Rd; e2YD9: $jsondate['total'] = pdo_fetchcolumn($sql, $params); goto Fi7st; Opcs7: $params['keyval'] = 'dis_ppt'; goto IUKqJ; DEdDA: $params = array(); goto Bk4bz; rFwB7: xc_ajax($jsondate); goto cQB9R; ZQqTX: $where .= ' and name like \'%' . $_GPC['seachkey'] . '%\''; goto thRgM; thRgM: C5ZE5: goto DEdDA; Bk4bz: if (!(strlen($_GPC['cid']) > 0 && $_GPC['cid'] != '0')) { goto LB0mo; } goto wuP9x; cQB9R: goto XADsl; goto ILHTv; RFGoF: LB0mo: goto JOZwB; h5gLV: gQxC9: goto VKsIv; jvDUt: $where = ' WHERE uniacid=:uniacid and keyval=:keyval'; goto NS2AI; tB5C1: xc_ajax($jsondate); goto KlTJE; NS2AI: if (!(strlen($_GPC['seachkey']) > 0)) { goto C5ZE5; } goto ZQqTX; KlTJE: XADsl: goto t2lln; LwP3K: $sql = 'SELECT * FROM  ' . $fulltable . $where . ' ORDER BY ' . $ararysort['order'] . ' LIMIT ' . $ararysort['offset'] . ',' . $ararysort['limit']; goto cMyb2; eM6Rd: $params['cid'] = $_GPC['cid']; goto RFGoF; cMyb2: $listmodel = pdo_fetchall($sql, $params); goto IRFhG; VKsIv: $jsondate['rows'] = $listmodel; goto rFwB7; Fi7st: if (empty($jsondate['total'])) { goto EUFz1; } goto LwP3K; i_dlk: $ararysort = ararysorts(); goto jvDUt; t2lln: case 'save': goto MCxlE; Hopr3: $id = pdo_insertid(); goto vzB_H; MCxlE: $id = $_GPC['id']; goto x6swP; G4uL8: if (!isset($postdata['sorts'])) { goto l6PPj; } goto x2YoR; QRTkx: if (strlen($id) < 1 || empty($id)) { goto dZXiv; } goto X9vlb; LGY87: $ret = pdo_update($table, $data, array("id" => $id, "uniacid" => $uniacid)); goto zzolh; Wq8pg: RsCYW: goto G4uL8; WUdBG: q1WUn: goto xtibr; mK080: if (!isset($postdata['status'])) { goto RsCYW; } goto lwlfj; oun3J: goto q1WUn; goto au08P; BT8br: $data['keyval'] = 'dis_ppt'; goto vcsDA; nxrKe: $data['uniacid'] = $uniacid; goto BT8br; e_gJM: $data['contents'] = json_encode($postdata); goto QRTkx; zzolh: $reslutstatus = $ret > 0 ? 1 : -1; goto oun3J; x2YoR: $data['sorts'] = $postdata['sorts']; goto LzCAe; BS3aO: if (empty($ret)) { goto hm6ei; } goto Hopr3; xtibr: xc_message($reslutstatus); goto jENiY; au08P: dZXiv: goto nxrKe; wwQ5W: $ret = pdo_insert($table, $data); goto WWZBg; oYSRK: l6PPj: goto e_gJM; vcsDA: $data['name'] = '分销轮播图'; goto wwQ5W; zZsKH: unset($postdata['status']); goto Wq8pg; x6swP: $postdata = $_GPC['xc']; goto mK080; WWZBg: $reslutstatus = $ret > 0 ? 1 : -1; goto BS3aO; lwlfj: $data['status'] = $postdata['status']; goto zZsKH; X9vlb: $data['modifytime'] = date('Y-m-d H:i:s'); goto LGY87; vzB_H: hm6ei: goto WUdBG; LzCAe: unset($postdata['sorts']); goto oYSRK; jENiY: } goto VIdUR; psnOu: $xtitleb = ''; goto DOMSd; iWrh3: uhyaS: goto A78yJ; lnuG4: $do = $_GPC['do']; goto ihXYe; ducmj: Ve8Yn: goto ChUXk; YBxJC: $xtitlea = urldecode($_GPC['xtitlea']); goto ducmj; VIdUR: mlCYm: goto vDkKO; WOoKe: $op = strlen($_GPC['op']) > 0 ? $_GPC['op'] : 'list'; goto lnuG4; h1J5x: $xtitleb = urldecode($_GPC['xtitleb']); goto iWrh3; uHVKf: load()->func('tpl'); goto q0neJ; ihXYe: $m = $_GPC['m']; goto vANH4; vDkKO: U_yQ8: goto mjrPP; S9Zyo: $xtitlea = ''; goto psnOu; tJjHr: $openid = $_W['openid']; goto miN5Y; mjrPP: } public function doWebStaff() { goto BQL6N; qDA6v: $xtitlea = urldecode($_GPC['xtitlea']); goto VtMZ9; BrEnD: $openid = $_W['openid']; goto WXT5G; x0y3T: PLRJ_: goto XWUz6; BQL6N: global $_W, $_GPC, $xcmodule; goto bsRnQ; WXT5G: switch ($op) { case 'delete': goto DaSyx; zmI0O: goto JOQ3Q; goto gbl3v; AK7It: $status = $result > 0 ? 1 : -1; goto ON98s; PD1HK: $arrids = explode(',', $ids); goto Kvete; Kvete: if (count($arrids) < 1) { goto SIDp1; } goto wNMtv; gbl3v: SIDp1: goto Eg9V9; Eg9V9: xc_message(-1, null); goto M5eCd; wNMtv: $result = pdo_update($table, array("admin1" => -1), array("id" => $arrids, "uniacid" => $uniacid)); goto AK7It; ON98s: xc_message($status, null); goto zmI0O; DaSyx: $ids = $_GPC['ids']; goto PD1HK; M5eCd: JOQ3Q: goto w6dau; w6dau: case 'list': include $this->template('mymanage/' . $do . '/' . $op); exit; case 'edit': goto TU8j9; gZwLa: if (empty($id)) { goto i6DH7; } goto MRNvt; MRNvt: $sql = 'SELECT * FROM ' . tablename($table) . ' WHERE id=:id AND uniacid=:uniacid LIMIT 1'; goto kNQeT; YW0CJ: $xc['contents'] = iunserializer($xc['contents']); goto GCy3w; TusNA: $xc = array(); goto gZwLa; TU8j9: $id = intval($_GPC['id']); goto TusNA; w_UgS: $xc = pdo_fetch($sql, $params); goto YW0CJ; GCy3w: i6DH7: goto yXzGa; T75zG: exit; goto Hyj0H; yXzGa: include $this->template('mymanage/' . strtolower($_GPC['do']) . '/' . $op); goto T75zG; kNQeT: $params = array(":id" => $id, ":uniacid" => $_W['uniacid']); goto w_UgS; Hyj0H: case 'getseachjson': goto GVvUM; Lvir7: $where .= ' and openid=:openid'; goto WxuGo; SzCxt: r7gna: goto PiYzy; lh5el: $total = pdo_fetchcolumn($sql, $params); goto Vi1OO; Vi1OO: $jsondate['total'] = pdo_fetchcolumn($sql, $params); goto B2F2l; B2F2l: if (empty($jsondate['total'])) { goto k26bE; } goto YWm75; Ft6gj: $listmodel = pdo_fetchall($sql, $params); goto lhCpp; AR4d0: $fulltable = tablename($table); goto ZzdLB; t0MyU: $where .= ' and name like \'%' . $_GPC['seachkey'] . '%\''; goto SzCxt; gpSh2: A2FlS: goto s7_jp; aYyM7: ccPHs: goto juADW; ZzdLB: $sql = 'SELECT COUNT(*) FROM   ' . $fulltable . $where; goto lh5el; WxuGo: $params['openid'] = $_GPC['openid']; goto lx7xk; pIFGw: $where = ' WHERE uniacid=:uniacid and (admin1=:admin1 or admin2=:admin2)'; goto M7X8U; s7_jp: $jsondate['rows'] = $listmodel; goto uB_fL; lhCpp: foreach ($listmodel as &$item) { $item['nickname'] = base64_decode($item['nickname']); Lb_sP: } goto gpSh2; p3wT2: $params['admin2'] = 1; goto AR4d0; s8JqX: $params['admin1'] = 1; goto p3wT2; mPi39: $jsondate['rows'] = array(); goto NwZOQ; M7X8U: if (!(strlen($_GPC['seachkey']) > 0)) { goto r7gna; } goto t0MyU; uB_fL: xc_ajax($jsondate); goto HSRAr; NwZOQ: xc_ajax($jsondate); goto aYyM7; GVvUM: $ararysort = ararysorts(); goto pIFGw; HSRAr: goto ccPHs; goto EKz5s; YWm75: $sql = 'SELECT * FROM  ' . $fulltable . $where . ' ORDER BY ' . $ararysort['order'] . ' LIMIT ' . $ararysort['offset'] . ',' . $ararysort['limit']; goto Ft6gj; bsjl_: $params['uniacid'] = $uniacid; goto s8JqX; dZDQP: if (!(strlen($_GPC['openid']) > 0 && $_GPC['openid'] != '0')) { goto R3kt0; } goto Lvir7; EKz5s: k26bE: goto mPi39; PiYzy: $params = array(); goto dZDQP; lx7xk: R3kt0: goto bsjl_; juADW: case 'save': goto xtp3i; iduib: if (empty($ret)) { goto phNNp; } goto RaWuH; BbTj9: gCTTQ: goto Lbxdm; hfBvj: $data['keyval'] = 'shop_ppt'; goto TT3W2; ARTmr: goto gCTTQ; goto EEyl5; afaMO: $data['uniacid'] = $uniacid; goto hfBvj; PZ8uY: $reslutstatus = $ret > 0 ? 1 : -1; goto iduib; Rgeyj: $data['modifytime'] = date('Y-m-d H:i:s'); goto e5xfP; xtp3i: $id = $_GPC['id']; goto fWbc1; RaWuH: $id = pdo_insertid(); goto IpY9r; Lbxdm: xc_message($reslutstatus); goto aMaYI; fWbc1: $data = $_GPC['xc']; goto p9v1Z; dCWng: $ret = pdo_insert($table, $data); goto PZ8uY; p9v1Z: if (strlen($id) < 1 || empty($id)) { goto yiwP7; } goto Rgeyj; TT3W2: $data['name'] = '积分商城轮播图'; goto dCWng; e5xfP: $ret = pdo_update($table, $data, array("id" => $id, "uniacid" => $uniacid)); goto b43ul; EEyl5: yiwP7: goto afaMO; b43ul: $reslutstatus = $ret > 0 ? 1 : -1; goto ARTmr; IpY9r: phNNp: goto BbTj9; aMaYI: } goto GexUs; ZikA9: $xtitleb = urldecode($_GPC['xtitleb']); goto mML1U; GqOhq: load()->web('tpl'); goto iFL0J; uY5CY: if (!(strlen($_GPC['xtitleb']) > 0)) { goto WQHHW; } goto ZikA9; LeRLw: $m = $_GPC['m']; goto J01eV; snD6M: $xtitleb = ''; goto dNf_G; dNf_G: if (!(strlen($_GPC['xtitlea']) > 0)) { goto UpTy3; } goto qDA6v; Yhuhy: $op = strlen($_GPC['op']) > 0 ? $_GPC['op'] : 'list'; goto S8qFg; VtMZ9: UpTy3: goto uY5CY; J01eV: $uniacid = $_W['uniacid']; goto BrEnD; bsRnQ: $xtitlea = ''; goto snD6M; GexUs: LUBE_: goto x0y3T; S8qFg: $do = $_GPC['do']; goto LeRLw; mML1U: WQHHW: goto GqOhq; MSDwW: $table = $xcmodule . '_' . 'member'; goto Yhuhy; iFL0J: load()->func('tpl'); goto MSDwW; XWUz6: } public function doWebStaff_apply() { goto EdVD7; J2fLX: $xtitleb = ''; goto VG36M; ZxHWe: if (!(strlen($_GPC['xtitleb']) > 0)) { goto wAhFw; } goto vRX9X; sXXhd: $table = $xcmodule . '_' . 'member'; goto ngpum; oexwZ: switch ($op) { case 'agree': goto EMsH0; LWe7I: exit; goto vwioV; ypO3t: $updatestatus = array(); goto AzDWx; AzDWx: $updatestatus['admin1'] = 1; goto ZfIU3; ZfIU3: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto XNTCp; EMsH0: $id = intval($_GPC['id']); goto ypO3t; XNTCp: xc_message($ret, null); goto LWe7I; vwioV: case 'noagree': goto PaZ7p; PaZ7p: $id = intval($_GPC['id']); goto M3ThP; u4wYy: $updatestatus['admin1'] = -1; goto z9k1F; z9k1F: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto yDsDl; yDsDl: xc_message($ret, null); goto Kz25t; Kz25t: exit; goto EqQQd; M3ThP: $updatestatus = array(); goto u4wYy; EqQQd: case 'list': include $this->template('mymanage/' . $do . '/' . $op); exit; case 'getseachjson': goto lj9RB; UNMPE: if (!(strlen($_GPC['openid']) > 0 && $_GPC['openid'] != '0')) { goto xO2OK; } goto Y6r1l; fxYbK: $params = array(); goto UNMPE; T0tBl: goto fyQSj; goto jNqvt; VQzhI: xc_ajax($jsondate); goto PLOtX; ioL3m: foreach ($listmodel as &$item) { $item['nickname'] = base64_decode($item['nickname']); OQeVV: } goto FXXXS; PLOtX: fyQSj: goto R_dOp; Pe2ti: $params['uniacid'] = $uniacid; goto wixtF; w7FrM: $listmodel = pdo_fetchall($sql, $params); goto ioL3m; iKZ3D: $fulltable = tablename($table); goto DEibi; PKSS7: Jj4JN: goto fxYbK; mR342: $jsondate['rows'] = array(); goto VQzhI; DWlzU: $where = ' WHERE uniacid=:uniacid and admin1=:admin1'; goto Lb6Lj; m_aNS: $where .= ' and name like \'%' . $_GPC['seachkey'] . '%\''; goto PKSS7; DEibi: $sql = 'SELECT COUNT(*) FROM   ' . $fulltable . $where; goto deAEw; T9uCf: $params['openid'] = $_GPC['openid']; goto AGFci; jNqvt: IR6hi: goto mR342; ep7SX: $jsondate['rows'] = $listmodel; goto wcUUD; lj9RB: $ararysort = ararysorts(); goto DWlzU; wixtF: $params['admin1'] = 2; goto iKZ3D; deAEw: $total = pdo_fetchcolumn($sql, $params); goto m1X0d; FXXXS: g3BNi: goto ep7SX; Lb6Lj: if (!(strlen($_GPC['seachkey']) > 0)) { goto Jj4JN; } goto m_aNS; i0HoC: if (empty($jsondate['total'])) { goto IR6hi; } goto P4uJ4; P4uJ4: $sql = 'SELECT * FROM  ' . $fulltable . $where . ' ORDER BY ' . $ararysort['order'] . ' LIMIT ' . $ararysort['offset'] . ',' . $ararysort['limit']; goto w7FrM; wcUUD: xc_ajax($jsondate); goto T0tBl; AGFci: xO2OK: goto Pe2ti; m1X0d: $jsondate['total'] = pdo_fetchcolumn($sql, $params); goto i0HoC; Y6r1l: $where .= ' and openid=:openid'; goto T9uCf; R_dOp: } goto zsIJw; zsIJw: bt_wX: goto cMbF4; f5_Ay: $xtitlea = urldecode($_GPC['xtitlea']); goto RvBhX; N3Mxw: load()->web('tpl'); goto OqJB7; CiYjE: $m = $_GPC['m']; goto aJ8rm; lmqqF: $xtitlea = ''; goto J2fLX; cMbF4: wnWvS: goto N1Gsc; EdVD7: global $_W, $_GPC, $xcmodule; goto lmqqF; S3e_e: wAhFw: goto N3Mxw; RvBhX: vf9ZS: goto ZxHWe; VG36M: if (!(strlen($_GPC['xtitlea']) > 0)) { goto vf9ZS; } goto f5_Ay; OqJB7: load()->func('tpl'); goto sXXhd; M_IAU: $do = $_GPC['do']; goto CiYjE; ngpum: $op = strlen($_GPC['op']) > 0 ? $_GPC['op'] : 'list'; goto M_IAU; ie6cl: $openid = $_W['openid']; goto oexwZ; vRX9X: $xtitleb = urldecode($_GPC['xtitleb']); goto S3e_e; aJ8rm: $uniacid = $_W['uniacid']; goto ie6cl; N1Gsc: } public function doWebFeature() { goto Zmcft; Ibn8P: $uniacid = $_W['uniacid']; goto NQrBT; GO1u3: load()->web('tpl'); goto RvrN1; gpVd2: mbgu8: goto GO1u3; k3XYG: $xtitleb = urldecode($_GPC['xtitleb']); goto gpVd2; zn_Cd: if (!(strlen($_GPC['xtitleb']) > 0)) { goto mbgu8; } goto k3XYG; NQrBT: $openid = $_W['openid']; goto NoRwN; V5fiL: $table = $xcmodule . '_' . 'feature'; goto BDcWk; LYcqM: EC7Mk: goto D4SZh; T6fHn: $do = $_GPC['do']; goto UvN3B; D4SZh: zMawT: goto i3VB9; BDcWk: $op = strlen($_GPC['op']) > 0 ? $_GPC['op'] : 'list'; goto T6fHn; QlO_z: $xtitlea = urldecode($_GPC['xtitlea']); goto pVQfx; CqEAA: $xtitleb = ''; goto PPfMW; UvN3B: $m = $_GPC['m']; goto Ibn8P; NoRwN: switch ($op) { case 'delete': goto YCvp5; Xs_9n: xc_message($status, null); goto njVbw; wcVeH: if (count($arrids) < 1) { goto vVs8H; } goto R8RAQ; OJYrI: zu1QE: goto Bvif5; R8RAQ: $result = pdo_delete($table, array("id" => $arrids, "uniacid" => $uniacid)); goto ysdO8; njVbw: goto zu1QE; goto h4xqO; h4xqO: vVs8H: goto Zb7qv; Zb7qv: xc_message(-1, null); goto OJYrI; ysdO8: $status = $result > 0 ? 1 : -1; goto Xs_9n; YCvp5: $ids = $_GPC['ids']; goto BJTb0; BJTb0: $arrids = explode(',', $ids); goto wcVeH; Bvif5: case 'copy': goto URZY6; Ga3y3: unset($xc['id']); goto eEZU6; C658r: xc_message($status, null); goto zS2LM; OOkBk: if (!($ret > 0)) { goto QjkNJ; } goto Ai_4S; P_Lou: if (!empty($xc)) { goto gF71X; } goto Nfpd1; j_5XZ: QjkNJ: goto O0wpY; GUJlg: gF71X: goto Ga3y3; Ai_4S: $id = pdo_insertid(); goto j_5XZ; O0wpY: $status = $ret > 0 ? 1 : -1; goto C658r; zS2LM: FnPv1: goto ZXelW; Nfpd1: xc_message(-1, null); goto LVSYr; URZY6: $ids = $_GPC['ids']; goto IIcD7; IIcD7: $xc = pdo_get($table, array("uniacid" => $uniacid, "id" => $ids)); goto P_Lou; HAhMU: unset($xc['modifytime']); goto DHByE; eEZU6: unset($xc['createtime']); goto HAhMU; LVSYr: goto FnPv1; goto GUJlg; DHByE: $ret = pdo_insert($table, $xc); goto OOkBk; ZXelW: case 'midstatus': goto YjChR; ZiE0V: $updatestatus['status'] = $status; goto jNVvq; jNVvq: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto EusFt; PN3RF: $status = -$_GPC['status']; goto qK8T6; EusFt: xc_message($ret, null); goto P7aGq; P7aGq: exit; goto dIPrN; YjChR: $id = intval($_GPC['id']); goto PN3RF; qK8T6: $updatestatus = array(); goto ZiE0V; dIPrN: case 'midisindex': goto aYLVV; DOC7F: xc_message($ret, null); goto FqMdf; FqMdf: exit; goto wjUwQ; aYLVV: $id = intval($_GPC['id']); goto nYC3p; XGZi3: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto DOC7F; ivcbz: $updatestatus['isindex'] = $status; goto XGZi3; nYC3p: $status = -$_GPC['status']; goto zs7Ve; zs7Ve: $updatestatus = array(); goto ivcbz; wjUwQ: case 'updatesorts': goto Ln2Rn; nmA3W: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto iFuhh; Ln2Rn: $id = intval($_GPC['id']); goto m0thJ; Om4EA: $updatestatus = array(); goto Mqd9Q; m0thJ: $sorts = intval($_GPC['sorts']); goto Om4EA; Mqd9Q: $updatestatus['sorts'] = $sorts; goto nmA3W; A_3bQ: exit; goto jN_EY; iFuhh: xc_message($ret, null); goto A_3bQ; jN_EY: case 'list': include $this->template('mymanage/' . $do . '/' . $op); exit; case 'edit': goto oVJhs; G5tpD: DBt89: goto fKz7N; LJca6: $sql = 'SELECT * FROM ' . tablename($table) . ' WHERE id=:id AND uniacid=:uniacid LIMIT 1'; goto tK6JJ; Th7YV: if (!empty($id)) { goto kVxVR; } goto Mnl2N; RWZIG: $xc = array(); goto Th7YV; tDkoM: kVxVR: goto LJca6; Mnl2N: $xc['id'] = 0; goto vJObn; P3UWC: exit; goto JMSV5; tK6JJ: $params = array(":id" => $id, ":uniacid" => $_W['uniacid']); goto SyFoS; vJObn: goto DBt89; goto tDkoM; LV1tv: $xc['value'] = iunserializer($xc['value']); goto G5tpD; fKz7N: include $this->template('mymanage/' . strtolower($_GPC['do']) . '/' . $op); goto P3UWC; oVJhs: $id = intval($_GPC['id']); goto RWZIG; SyFoS: $xc = pdo_fetch($sql, $params); goto LV1tv; JMSV5: case 'getseachjson': goto FHn6k; pXTrf: foreach ($listmodel as &$item) { $item['value'] = iunserializer($item['value']); CUdFI: } goto PTk9f; b8B6_: $where .= ' and cid=:cid'; goto lqMqI; WnCJd: $listmodel = pdo_fetchall($sql, $params); goto pXTrf; dgwwC: $sql = 'SELECT * FROM  ' . $fulltable . $where . ' ORDER BY ' . $ararysort['order'] . ' LIMIT ' . $ararysort['offset'] . ',' . $ararysort['limit']; goto WnCJd; UYVGF: dZ3j2: goto hM9ML; hM9ML: $params = array(); goto fUdR1; YQp5_: $where .= ' and name like \'%' . $_GPC['seachkey'] . '%\''; goto UYVGF; rv5TI: xc_ajax($jsondate); goto t7Fwz; fUdR1: if (!(strlen($_GPC['cid']) > 0 && $_GPC['cid'] != '0')) { goto HVm9M; } goto b8B6_; UfgKB: $sql = 'SELECT COUNT(*) FROM   ' . $fulltable . $where; goto T9B8g; o8aWx: EKjgb: goto KAEBb; FHn6k: $ararysort = ararysorts(); goto T28_v; IICd2: xc_ajax($jsondate); goto NzZ_T; t0ZZ2: if (!(strlen($_GPC['seachkey']) > 0)) { goto dZ3j2; } goto YQp5_; f43ed: $params['uniacid'] = $uniacid; goto HlVq3; T9B8g: $total = pdo_fetchcolumn($sql, $params); goto jXZ1N; FxTgW: HVm9M: goto f43ed; KAEBb: $jsondate['rows'] = []; goto rv5TI; nV0Q6: $jsondate['rows'] = $listmodel; goto IICd2; PTk9f: Qhjtn: goto nV0Q6; lqMqI: $params['cid'] = $_GPC['cid']; goto FxTgW; jXZ1N: $jsondate['total'] = pdo_fetchcolumn($sql, $params); goto CyUSa; t7Fwz: eXlT5: goto eIFOm; T28_v: $where = ' WHERE uniacid=:uniacid '; goto t0ZZ2; NzZ_T: goto eXlT5; goto o8aWx; CyUSa: if (empty($jsondate['total'])) { goto EKjgb; } goto dgwwC; HlVq3: $fulltable = tablename($table); goto UfgKB; eIFOm: case 'save': goto h0vwM; zFJvd: if (empty($ret)) { goto o3B9E; } goto LlLKm; oxETT: $ret = pdo_update($table, $data, array("id" => $id, "uniacid" => $uniacid)); goto KdAn8; SPBKc: xc_message($reslutstatus); goto XmgGs; o1N72: I_qa9: goto SPBKc; KdAn8: $reslutstatus = $ret > 0 ? 1 : -1; goto ApCeQ; VpfEn: o3B9E: goto o1N72; h0vwM: $id = $_GPC['id']; goto ojRlD; LlLKm: $id = pdo_insertid(); goto VpfEn; s94Vj: $data['uniacid'] = $uniacid; goto HqU0y; C6bkV: $data['value'] = iserializer($data['value']); goto EDwUw; HqU0y: $ret = pdo_insert($table, $data); goto rAGhx; rHmAE: o295N: goto s94Vj; EDwUw: if (strlen($id) < 1 || empty($id)) { goto o295N; } goto oxETT; ojRlD: $data = $_GPC['xc']; goto C6bkV; rAGhx: $reslutstatus = $ret > 0 ? 1 : -1; goto zFJvd; ApCeQ: goto I_qa9; goto rHmAE; XmgGs: } goto LYcqM; fQc3U: $xtitlea = ''; goto CqEAA; Zmcft: global $_W, $_GPC, $xcmodule; goto fQc3U; pVQfx: uHsJd: goto zn_Cd; RvrN1: load()->func('tpl'); goto V5fiL; PPfMW: if (!(strlen($_GPC['xtitlea']) > 0)) { goto uHsJd; } goto QlO_z; i3VB9: } public function doWebExp() { goto CAKLS; BRkSb: $uniacid = $_W['uniacid']; goto pqlHX; HaeFV: $m = $_GPC['m']; goto BRkSb; V8aaf: $xtitlea = urldecode($_GPC['xtitlea']); goto B5Qi1; hdJlF: J2oVH: goto r_L_e; eu6Zp: $xtitlea = ''; goto hgHRT; hgHRT: $xtitleb = ''; goto hIYe6; pqlHX: $openid = $_W['openid']; goto SjltA; B5Qi1: vYBWB: goto qYHr3; HUTKz: $op = strlen($_GPC['op']) > 0 ? $_GPC['op'] : 'list'; goto WBC6B; zhxmN: Aji7z: goto hdJlF; Clieq: load()->func('tpl'); goto Yhn4o; Ett6Y: load()->web('tpl'); goto Clieq; CAKLS: global $_W, $_GPC, $xcmodule; goto eu6Zp; KaBvj: aYRJr: goto Ett6Y; qYHr3: if (!(strlen($_GPC['xtitleb']) > 0)) { goto aYRJr; } goto k6wZY; k6wZY: $xtitleb = urldecode($_GPC['xtitleb']); goto KaBvj; Yhn4o: $table = $xcmodule . '_' . 'member_exp_log'; goto HUTKz; hIYe6: if (!(strlen($_GPC['xtitlea']) > 0)) { goto vYBWB; } goto V8aaf; WBC6B: $do = $_GPC['do']; goto HaeFV; SjltA: switch ($op) { case 'delete': goto oPHCR; rQadd: if (count($arrids) < 1) { goto iajFp; } goto Nk7qS; OZSUo: xc_message($status, null); goto sLQoh; BbOw_: xc_message(-1, null); goto DLqvV; Nk7qS: $result = pdo_delete($table, array("id" => $arrids, "uniacid" => $uniacid)); goto lhwsQ; DLqvV: vjfVu: goto iKilP; lhwsQ: $status = $result > 0 ? 1 : -1; goto OZSUo; k13ml: iajFp: goto BbOw_; sLQoh: goto vjfVu; goto k13ml; a6orK: $arrids = explode(',', $ids); goto rQadd; oPHCR: $ids = $_GPC['ids']; goto a6orK; iKilP: case 'copy': goto Tt6CR; WU94h: if (!($ret > 0)) { goto diePu; } goto eOdPs; fKFOq: xc_message(-1, null); goto VW6ni; e9mao: unset($xc['modifytime']); goto E0s3L; X5L3I: $status = $ret > 0 ? 1 : -1; goto iVe1Q; Tt6CR: $ids = $_GPC['ids']; goto vCS6_; zbdXh: diePu: goto X5L3I; gz0f4: if (!empty($xc)) { goto gkkL4; } goto fKFOq; TLPCP: unset($xc['id']); goto WFQXp; iVe1Q: xc_message($status, null); goto nlArL; nlArL: doAt1: goto U3WEL; eOdPs: $id = pdo_insertid(); goto zbdXh; VW6ni: goto doAt1; goto ApL7A; ApL7A: gkkL4: goto TLPCP; WFQXp: unset($xc['createtime']); goto e9mao; vCS6_: $xc = pdo_get($table, array("uniacid" => $uniacid, "id" => $ids)); goto gz0f4; E0s3L: $ret = pdo_insert($table, $xc); goto WU94h; U3WEL: case 'midstatus': goto DLapc; Ugd0f: $updatestatus = array(); goto nAG8Q; nAG8Q: $updatestatus['status'] = $status; goto Hlcut; Bs7s4: $status = -$_GPC['status']; goto Ugd0f; DLapc: $id = intval($_GPC['id']); goto Bs7s4; bdiXr: xc_message($ret, null); goto S3Jsy; Hlcut: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto bdiXr; S3Jsy: exit; goto lfUKX; lfUKX: case 'midisindex': goto k0Sup; FJIIk: xc_message($ret, null); goto Nr0Bc; L6yWu: $updatestatus = array(); goto GLo3x; RHRvB: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto FJIIk; Nr0Bc: exit; goto O0zLd; GmU_P: $status = -$_GPC['status']; goto L6yWu; GLo3x: $updatestatus['isindex'] = $status; goto RHRvB; k0Sup: $id = intval($_GPC['id']); goto GmU_P; O0zLd: case 'updatesorts': goto DxZxW; NhYbQ: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $uniacid)); goto xS1Kr; uRXXC: $updatestatus = array(); goto W5s0G; dX2le: $sorts = intval($_GPC['sorts']); goto uRXXC; W5s0G: $updatestatus['sorts'] = $sorts; goto NhYbQ; xS1Kr: xc_message($ret, null); goto vALTj; DxZxW: $id = intval($_GPC['id']); goto dX2le; vALTj: exit; goto Nlv72; Nlv72: case 'list': include $this->template('mymanage/' . $do . '/' . $op); exit; case 'edit': goto lh8IC; y9FRu: $sql = 'SELECT * FROM ' . tablename($table) . ' WHERE id=:id AND uniacid=:uniacid LIMIT 1'; goto q5Yz1; R3ghi: $xc = pdo_fetch($sql, $params); goto UOKf7; yJNaX: include $this->template('mymanage/' . strtolower($_GPC['do']) . '/' . $op); goto w1JPk; q5Yz1: $params = array(":id" => $id, ":uniacid" => $_W['uniacid']); goto R3ghi; S7UvK: $xc = array(); goto iNRBS; w1JPk: exit; goto LoMMt; iNRBS: if (!empty($id)) { goto rPXlo; } goto aADzx; UOKf7: sLJ3h: goto yJNaX; t5yZ0: goto sLJ3h; goto XkkTj; aADzx: $xc['id'] = 0; goto t5yZ0; lh8IC: $id = intval($_GPC['id']); goto S7UvK; XkkTj: rPXlo: goto y9FRu; LoMMt: case 'getseachjson': goto cs2eu; AUuRK: if (empty($jsondate['total'])) { goto LlGLV; } goto Z5aI0; vVWD5: $where .= ' and cid=:cid'; goto X6fe7; QpGSH: foreach ($listmodel as &$item) { $item['value'] = iunserializer($item['value']); iXuG7: } goto bb9hb; UANLh: $where .= ' and name like \'%' . $_GPC['seachkey'] . '%\''; goto tgqnN; x1Nzb: EduqM: goto JY6c3; glJ61: $jsondate['rows'] = $listmodel; goto kDEQ8; cs2eu: $ararysort = ararysorts(); goto TfSfY; Bppcz: if (!(strlen($_GPC['cid']) > 0 && $_GPC['cid'] != '0')) { goto AE_xC; } goto vVWD5; LXCgA: if (!(strlen($_GPC['seachkey']) > 0)) { goto a2HiA; } goto UANLh; nK2L7: LlGLV: goto Yle7M; ivJYV: $params = array(); goto Bppcz; S5YuB: AE_xC: goto Hq4Y8; U6Pqr: $fulltable = tablename($table); goto y9wuw; Hq4Y8: $params['uniacid'] = $uniacid; goto U6Pqr; PywPu: $listmodel = pdo_fetchall($sql, $params); goto QpGSH; IK6Kr: $total = pdo_fetchcolumn($sql, $params); goto VzuXD; tgqnN: a2HiA: goto ivJYV; TfSfY: $where = ' WHERE uniacid=:uniacid '; goto LXCgA; X6fe7: $params['cid'] = $_GPC['cid']; goto S5YuB; F18Sy: goto EduqM; goto nK2L7; Yle7M: $jsondate['rows'] = []; goto oPZBG; VzuXD: $jsondate['total'] = pdo_fetchcolumn($sql, $params); goto AUuRK; y9wuw: $sql = 'SELECT COUNT(*) FROM   ' . $fulltable . $where; goto IK6Kr; Z5aI0: $sql = 'SELECT * FROM  ' . $fulltable . $where . ' ORDER BY ' . $ararysort['order'] . ' LIMIT ' . $ararysort['offset'] . ',' . $ararysort['limit']; goto PywPu; bb9hb: lZaks: goto glJ61; oPZBG: xc_ajax($jsondate); goto x1Nzb; kDEQ8: xc_ajax($jsondate); goto F18Sy; JY6c3: case 'save': goto p66Hm; V5aeC: dBw6k: goto n4QCz; n4QCz: QfMo_: goto TKYPa; Oui3u: VVMaE: goto JfuuG; dSxou: $ret = pdo_insert($table, $data); goto QmV8G; HEvay: $ret = pdo_update($table, $data, array("id" => $id, "uniacid" => $uniacid)); goto qlBlE; jvp0c: if (empty($ret)) { goto dBw6k; } goto U9i85; VseC2: if (strlen($id) < 1 || empty($id)) { goto VVMaE; } goto HEvay; JfuuG: $data['uniacid'] = $uniacid; goto dSxou; qlBlE: $reslutstatus = $ret > 0 ? 1 : -1; goto VEF0U; VEF0U: goto QfMo_; goto Oui3u; U9i85: $id = pdo_insertid(); goto V5aeC; p66Hm: $id = $_GPC['id']; goto ffwgW; QmV8G: $reslutstatus = $ret > 0 ? 1 : -1; goto jvp0c; TKYPa: xc_message($reslutstatus); goto E9IcU; ffwgW: $data = $_GPC['xc']; goto vqjQT; vqjQT: $data['value'] = iserializer($data['value']); goto VseC2; E9IcU: } goto zhxmN; r_L_e: } public function doWebIntegral() { goto E6xmP; gBJBn: DKefu: goto wYKjl; YKaPh: if (!(strlen($_GPC['xtitleb']) > 0)) { goto x4WfM; } goto ci1Hs; E8hmr: if (!(strlen($_GPC['xtitlea']) > 0)) { goto ca2m0; } goto q8kaw; E6xmP: global $_W, $_GPC, $xcmodule, $xcconfig; goto g6kAw; o1j_L: x4WfM: goto BmrQp; tlW_q: ca2m0: goto YKaPh; wYKjl: exit; goto nevVl; bVRLf: switch ($op) { case 'delete': goto vKLIY; Q12Rx: $ids = $_GPC['ids']; goto rw0eV; I3klf: goto z0rRY; goto s6Tvr; CBD9u: $result = pdo_delete($table, array("id" => $arrids, "uniacid" => $uniacid)); goto UIciW; KP9L2: if (count($arrids) < 1) { goto henOn; } goto CBD9u; rw0eV: $arrids = explode(',', $ids); goto KP9L2; s6Tvr: henOn: goto SRXwH; UIciW: $status = $result > 0 ? 1 : -1; goto ddnFd; SRXwH: xc_message(-1, null); goto V9SI3; V9SI3: z0rRY: goto HDiWS; vKLIY: $uniacid = $_W['uniacid']; goto Q12Rx; ddnFd: xc_message($status, null); goto I3klf; HDiWS: case 'midstatus': goto wneFT; vWIg3: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $_W['uniacid'])); goto tw7Su; FSfzf: $status = -$_GPC['status']; goto xPRJb; xPRJb: $updatestatus = array(); goto tHXt7; wuFSF: exit; goto f61QY; tw7Su: xc_message($ret, null); goto wuFSF; tHXt7: $updatestatus['status'] = $status; goto vWIg3; wneFT: $id = intval($_GPC['id']); goto FSfzf; f61QY: case 'list': goto lCt82; pNotZ: $pidparams = array(); goto WBhRj; uY6Uf: $arrpidsql[] = 'select id,name as text from'; goto HCynj; UCQOT: include $this->template('mymanage/' . $do . '/' . $op); goto EixBn; WBhRj: $pidparams[':uniacid'] = $_W['uniacid']; goto uY6Uf; EixBn: exit; goto Zelor; HCynj: $arrpidsql[] = tablename($table); goto vsyfZ; N63Bh: $pidlist = pdo_fetchall(join(' ', $arrpidsql), $pidparams); goto UCQOT; vsyfZ: $arrpidsql[] = 'where uniacid=:uniacid and pid=0'; goto jyJkZ; jyJkZ: $arrpidsql[] = 'order by sorts desc ,id desc'; goto N63Bh; lCt82: $arrpidsql = array(); goto pNotZ; Zelor: case 'getseachjson': goto wuvgB; UdjT0: xc_ajax($jsondate); goto fkezb; J5ijP: $where .= ' and find_in_set (pid,:mpid)'; goto MYhiR; fkezb: goto enOYS; goto t1u1R; ZQrKT: if (empty($_GPC['mpid'])) { goto OLED0; } goto J5ijP; s1KGj: RUGRw: goto W5Otg; W5Otg: $params['uniacid'] = $_W['uniacid']; goto cxhdS; cxhdS: $fulltable = tablename($table); goto eyWgu; r68cV: $total = pdo_fetchcolumn($sql, $params); goto W7cUm; Gq8_o: $jsondate['rows'] = array(); goto nqE3J; ZotWc: $params[':seachkey'] = '%' . $_GPC['seachkey'] . '%'; goto Gbhac; yR0Wi: if (empty($jsondate['total'])) { goto zI418; } goto lEjbW; t1u1R: zI418: goto Gq8_o; bKTBS: $jsondate['total'] = pdo_fetchcolumn($sql, $params); goto yR0Wi; kl9h8: $where .= ' and name like :seachkey'; goto ZotWc; nqE3J: xc_ajax($jsondate); goto QQkrJ; Sv9P3: $listmodel = pdo_fetchall($sql, $params); goto FC9Lz; YdDai: $params = array(); goto iqBio; FC9Lz: $jsondate['rows'] = $listmodel; goto UdjT0; lEjbW: $sql = "SELECT * FROM  {$fulltable}   {$where} ORDER BY " . $ararysort['order'] . ' LIMIT ' . $ararysort['offset'] . ',' . $ararysort['limit']; goto Sv9P3; MYhiR: $params[':mpid'] = join(',', $_GPC['mpid']); goto t8Z5F; npX0K: $where = ' WHERE uniacid=:uniacid '; goto YdDai; eyWgu: $sql = 'SELECT COUNT(*) FROM   ' . $fulltable . $where; goto r68cV; SpVk_: $params[':pid'] = $_GPC['pid']; goto s1KGj; wuvgB: $ararysort = ararysorts(); goto npX0K; QQkrJ: enOYS: goto wKbE3; MnekY: $where .= ' and pid=:pid'; goto SpVk_; GZYXY: if (!(!empty($_GPC['pid']) && $_GPC['pid'] != '-1')) { goto RUGRw; } goto MnekY; t8Z5F: OLED0: goto GZYXY; W7cUm: $jsondate = array(); goto bKTBS; Gbhac: Bhokt: goto ZQrKT; iqBio: if (!(strlen($_GPC['seachkey']) > 0)) { goto Bhokt; } goto kl9h8; wKbE3: case 'midstatus': goto DKGC2; R9uzL: $updatestatus = array(); goto bK60x; bK60x: $updatestatus['status'] = $status; goto V6an8; On4yO: $status = -$_GPC['status']; goto R9uzL; jqJ9R: xc_message($ret, null); goto cIbzF; V6an8: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $_W['uniacid'])); goto jqJ9R; DKGC2: $id = intval($_GPC['id']); goto On4yO; cIbzF: case 'updatesorts': goto oCkrD; oCkrD: $id = intval($_GPC['id']); goto fuqmD; uvL0Y: $ret = pdo_update($table, $updatestatus, array("id" => $id, "uniacid" => $_W['uniacid'])); goto umk5u; umk5u: xc_message($ret, null); goto NqWBj; XJdxT: $updatestatus['sorts'] = $sorts; goto uvL0Y; kR96Y: $updatestatus = array(); goto XJdxT; fuqmD: $sorts = $_GPC['sorts']; goto kR96Y; NqWBj: } goto YroTE; BmrQp: $table = 'xc_sys_member'; goto KZIK8; OWC9B: $xtitleb = ''; goto E8hmr; YroTE: qw6Wm: goto gBJBn; q8kaw: $xtitlea = urldecode($_GPC['xtitlea']); goto tlW_q; ci1Hs: $xtitleb = urldecode($_GPC['xtitleb']); goto o1j_L; ilU9w: $do = $_GPC['do']; goto bVRLf; KZIK8: $op = strlen($_GPC['op']) > 1 ? $_GPC['op'] : 'list'; goto ilU9w; g6kAw: $xtitlea = ''; goto OWC9B; nevVl: } protected function createWebUrl($do, $query = array()) { goto ZQW3A; ZzasM: return wurl('site/entry', $query); goto H51Ye; eT1BG: $query['m'] = strtolower($this->modulename); goto wZ16U; epN1a: $query['do'] = $do; goto eT1BG; ZQW3A: global $_GPC; goto epN1a; wZ16U: $query['version_id'] = intval($_GPC['version_id']); goto ZzasM; H51Ye: } public function createWebUrlex($do, $m, $query = array()) { goto Z0Wjr; ImjUw: $query['m'] = $m; goto PVIFT; D1Soq: return wurl('site/entry', $query); goto EDitH; Z0Wjr: global $_GPC; goto eTG3q; eTG3q: $query['do'] = $do; goto ImjUw; PVIFT: $query['version_id'] = intval($_GPC['version_id']); goto D1Soq; EDitH: } public function xc_order_refund_sure($order) { goto Kjbnq; QsXqo: $string = md5($string); goto lwBen; qwP4u: $moduleid = empty($module_info['mid']) ? '000000' : sprintf('%06d', $module_info['mid']); goto tQYTu; Jv1vy: foreach ($refund_param as $key => $val) { goto zeysI; qGvMH: $str .= $key . '=' . $val . '&'; goto GD1KH; DiPg7: m_dwY: goto qGvMH; zeysI: if (!((empty($val) || is_array($val)) && !in_array($key, $ignore))) { goto m_dwY; } goto xULYJ; GD1KH: iHZx0: goto f3OzE; xULYJ: goto iHZx0; goto DiPg7; f3OzE: } goto ihVnU; igCxV: pdo_update($xcmodule . '_mycard', array("voucherstatus" => 1), array("uniacid" => $_W['uniacid'], "id" => $order['myvoucher'])); goto mFLuv; QJ5N0: return array("error" => 1, "msg" => $response['return_msg']); goto QPdca; qHfg3: V5RN5: goto xeDWW; Aik_J: $reason = $order['refund_value']['reason']; goto fOd2H; FLZYP: $xml = array2xml($refund_param); goto i1kCO; zkhKj: $this->xc_cancel_brokerage_order($order['order']); goto g_leG; exEeX: xc_refund_success($order['id'], 1); goto eMLvK; Kf4lx: unlink(ATTACHMENT_ROOT . $_W['uniacid'] . '_wechat_refund_all.pem'); goto r2ykK; TeCwd: hRORr: goto rVCvv; hsnfP: return error(1, '未开启微信退款功能!'); goto tpVC3; rVCvv: rys6X: goto enLd_; BOw3U: $refund_param = array("appid" => $account['key'], "mch_id" => $setting['payment']['wechat']['mchid'], "out_trade_no" => $paylog['uniontid'], "out_refund_no" => $refund_uniontid, "total_fee" => $paylog['card_fee'] * 100, "refund_fee" => $fee * 100, "nonce_str" => random(8), "refund_desc" => $reason); goto QHsqE; SPSUq: $setting = uni_setting_load('payment', $_W['uniacid']); goto v6mWg; G0rOQ: vJLuO: goto dVWa4; IqTFk: $account = uni_fetch($_W['uniacid']); goto MNN0z; XVXSQ: Gukn1: goto NXiQa; v52ZZ: HfU73: goto oFt9a; DLa3b: aRa6A: goto caU1j; BO0Sg: E0rtb: goto IqTFk; ph7dt: if (!($type == 1 || $type == 3 || $type == 4)) { goto IS2Si; } goto kI0X1; Px8jX: if (empty($order['myvoucher'])) { goto bg99N; } goto igCxV; lwBen: $refund_param['sign'] = strtoupper($string); goto arO62; PJvga: file_put_contents(ATTACHMENT_ROOT . $_W['uniacid'] . '_wechat_refund_all.pem', $cert . $key); goto JY3vr; v6mWg: $refund_setting = $setting['payment']['wechat_refund']; goto ErnyV; PWiTq: pdo_update($xcmodule . '_mycard', array("voucherstatus" => 1), array("uniacid" => $_W['uniacid'], "id" => $order['myvoucher'])); goto G0rOQ; OgNE_: $type = $order['paytype']; goto ph7dt; JQrgx: goto xZSH2; goto v52ZZ; M9l4P: if (!(empty($refund_setting['key']) || empty($refund_setting['cert']))) { goto E0rtb; } goto PS7p1; mFLuv: bg99N: goto ovjsy; IEIVs: return array("error" => 1); goto x1Kcc; jfL1R: $key = authcode($refund_setting['key'], 'DECODE'); goto PJvga; g_leG: xc_refund_success($order['id']); goto UFJ4Z; M56lJ: xZSH2: goto TeCwd; x1Kcc: goto czmD3; goto n1r85; yk0v4: return array("error" => 1); goto OTZpg; c6rtP: if (empty($order['myvoucher'])) { goto vJLuO; } goto PWiTq; ovjsy: $ret = pdo_update($xcmodule . '_order', array("status" => 4, "refund" => 2, "out_refund_no" => $response['out_refund_no'], "out_refund_time" => date('Y-m-d H:i:s')), array("uniacid" => $_W['uniacid'], "id" => $order['id'])); goto zTKbK; ihVnU: muiKt: goto IvYXi; RPeOZ: if ($response['return_code'] == 'SUCCESS') { goto Gukn1; } goto QJ5N0; kI0X1: xc_local_upmember(array("score" => -$order['score'], "amount" => $order['price'], "exp" => -$order['exp'], "totalamount" => -$order['pay_wechat']), '订单退款;单号:' . $order['order'], '1', '', $order['openid']); goto c6rtP; tgwmT: $paylog = pdo_get('core_paylog', array("uniacid" => $_W['uniacid'], "tid" => $tid, "module" => $module)); goto SPSUq; arO62: load()->func('communication'); goto FLZYP; sVDYx: $ignore = array("coupon_refund_fee", "coupon_refund_count"); goto Jv1vy; uo1QY: return array("error" => 1, "msg" => $response['err_code_des']); goto JQrgx; OTZpg: goto aRa6A; goto qHfg3; eMLvK: return array("error" => 0); goto bgDOp; MNN0z: $module_info = module_fetch($module); goto qwP4u; fOd2H: $module = $xcmodule; goto tgwmT; dVWa4: $ret = pdo_update($xcmodule . '_order', array("status" => 4, "refund" => 2, "out_refund_time" => date('Y-m-d H:i:s')), array("uniacid" => $_W['uniacid'], "id" => $order['id'])); goto JLeOu; vSJvx: xc_refund_success($order['id'], 1); goto oLK1w; NXiQa: if ($response['result_code'] == 'SUCCESS') { goto HfU73; } goto uo1QY; QHsqE: $cert = authcode($refund_setting['cert'], 'DECODE'); goto jfL1R; r2ykK: $response = xml2array($response['content']); goto RPeOZ; vreTX: if (!($type == 2)) { goto rys6X; } goto vSJvx; caU1j: IS2Si: goto vreTX; oLK1w: $tid = $order['order']; goto JvX5h; ErnyV: if (!($refund_setting['switch'] != 1)) { goto YDKJK; } goto hsnfP; zTKbK: if ($ret > 0) { goto R0EN9; } goto IEIVs; JY3vr: ksort($refund_param); goto sVDYx; n1r85: R0EN9: goto wJ5DN; tQYTu: $refund_uniontid = date('YmdHis') . $moduleid . random(8, 1); goto BOw3U; QPdca: goto hRORr; goto XVXSQ; UFJ4Z: return array("error" => 0); goto DLa3b; Icrgm: $string = $string . 'key=' . $setting['payment']['wechat']['signkey']; goto QsXqo; bgDOp: czmD3: goto M56lJ; tpVC3: YDKJK: goto M9l4P; oFt9a: xc_local_upmember(array("score" => -$order['score'], "totalamount" => -$order['price'], "exp" => -$order['exp']), '订单退款;单号:' . $order['order'], '1', '', $order['openid']); goto Px8jX; i1kCO: $response = ihttp_request('https://api.mch.weixin.qq.com/secapi/pay/refund', $xml, array(CURLOPT_SSLCERT => ATTACHMENT_ROOT . $_W['uniacid'] . '_wechat_refund_all.pem')); goto Kf4lx; xeDWW: $this->xc_cancelorder_stock($order['id']); goto zkhKj; JvX5h: $fee = $order['price']; goto Aik_J; Kjbnq: global $_W, $xcmodule, $xcconfig; goto OgNE_; IvYXi: $string = $str; goto Icrgm; JLeOu: if ($ret > 0) { goto V5RN5; } goto yk0v4; wJ5DN: $this->xc_cancel_brokerage_order($order['order']); goto exEeX; PS7p1: return error(1, '缺少微信证书'); goto BO0Sg; enLd_: } public function xc_cancel_brokerage_order($order) { global $_W, $xcmodule; pdo_update($xcmodule . '_brokerage_order', array("isoff" => 1), array("uniacid" => $_W['uniacid'], "order" => $order)); } public function xc_get_score($openid) { goto cj17c; kQoOP: return $ret['credit1']; goto l5udk; STtj8: haQad: goto kQoOP; bm5Av: return 0; goto qiaPS; QLwci: if ($ret) { goto haQad; } goto bm5Av; qiaPS: goto ONHoM; goto STtj8; l5udk: ONHoM: goto H0Btc; cj17c: $ret = pdo_get('ims_mc_members', array("uid" => mc_openid2uid($openid)), array("credit1")); goto QLwci; H0Btc: } public function xc_cancelorder_stock($id) { goto U6NUB; oMsOf: foreach ($list as $lis) { goto PjYlH; hA3Xu: pdo_update($xcmodule . '_bargain_self', array("status" => 3), array("uniacid" => $_W['uniacid'], "id" => $lis['bargain_self_id'])); goto gZqes; gZqes: ANrPv: goto WweOm; PjYlH: $this->xc_good_stock($lis['id'], $lis['attr'], $lis['num']); goto SCFrX; SCFrX: if (!($lis['cid'] == 4)) { goto ANrPv; } goto hA3Xu; WweOm: PBx8b: goto ZcVgv; ZcVgv: } goto LzVhn; tiVY1: $list = iunserializer($order['list']); goto oMsOf; dGQZS: $order = pdo_get($xcmodule . '_order', array("uniacid" => $_W['uniacid'], "id" => $id)); goto pocwM; aJnTO: foreach ($list as $shop_list) { pdo_update($xcmodule . '_shop', array("inventory +=" => $order['totalnum']), array("uniacid" => $_W['uniacid'], "id" => $shop_list['id'])); bl96Q: } goto UT8Vn; DW8i9: $list = iunserializer($order['list']); goto aJnTO; U4fr_: if (empty($order['list'])) { goto XVv7t; } goto tiVY1; Jeojm: XVv7t: goto deX2z; Hcn9i: kKqTT: goto Bq6MX; yg89i: if (!($order['cid'] == 2)) { goto fY2eF; } goto MAe2i; jzNaL: L_K3k: goto dGQZS; LzVhn: HNEkd: goto Jeojm; Bq6MX: fY2eF: goto BXoN0; deX2z: lO0Hg: goto yg89i; pocwM: if (!($order['cid'] == 1 || $order['cid'] == 4 || $order['cid'] == 5 || $order['cid'] == 6)) { goto lO0Hg; } goto U4fr_; MAe2i: if (empty($order['list'])) { goto kKqTT; } goto DW8i9; U6NUB: global $_W, $xcmodule; goto BUHFC; bD3V5: return false; goto jzNaL; UT8Vn: TgFK9: goto Hcn9i; BUHFC: if (!empty($id)) { goto L_K3k; } goto bD3V5; BXoN0: } public function xc_good_stock($good_id, $attr_name, $num) { goto qKZAp; qKZAp: global $_W, $xcmodule; goto e1Vto; B3_cS: return false; goto lG0lJ; VQK6V: yQHEx: goto cEOgM; KQ4Nl: if ($good) { goto k0rnZ; } goto n4Jx8; TvXbb: d5iXS: goto mY5wp; q_b2_: $data['attrs'] = iserializer($good['attrs']); goto ywY7e; cEOgM: return true; goto egukM; FFiOI: $good['attrs'] = iunserializer($good['attrs']); goto qNmqo; vSIl6: $ret = pdo_update($xcmodule . '_goods', $data, array("uniacid" => $_W['uniacid'], "id" => $good_id)); goto CTvT3; Wbcqc: lfVK5: goto LQJ7b; egukM: HRUSV: goto Wbcqc; CTvT3: if ($ret) { goto yQHEx; } goto B3_cS; e1Vto: if (!($num == 0)) { goto d5iXS; } goto Sc6Bz; DLfoc: goto lfVK5; goto lnyRh; lnyRh: k0rnZ: goto FFiOI; ywY7e: $data['number'] = intval($good['number']) + abs(intval($num)); goto vSIl6; qNmqo: $good['attrs'][$attr_name]['stock'] = intval($good['attrs'][$attr_name]['stock']) + intval($num); goto q_b2_; mY5wp: $good = pdo_get($xcmodule . '_goods', array("uniacid" => $_W['uniacid'], "id" => $good_id), array("attrs", "number")); goto KQ4Nl; lG0lJ: goto HRUSV; goto VQK6V; Sc6Bz: return false; goto TvXbb; n4Jx8: return false; goto DLfoc; LQJ7b: } } goto QGXbt; djHMJ: defined('IN_IA') or exit('Access Denied'); goto YWLYI; xh5KM: include_once IA_ROOT . '/addons/' . $xcmodule . '/common/xcdataapi.php'; goto pgKc4; FjACv: function xc_refund_success($id) { goto wOXkc; qNhEG: Ab8D8: goto mZgIh; sW0rD: foreach ($order['list'] as $list) { $good_name .= $list['name'] . '(' . $list['num'] . ');'; iEwCS: } goto K8w5I; J5Tu2: $data = str_replace('{{out_refund_no}}', $order['out_refund_no'], $data); goto xjBZS; VTPkx: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); goto KAv45; kp2ml: curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data); goto VTPkx; xJbON: $data = str_replace('{{order_price}}', $order['order_price'], $data); goto oq5xm; LSe3p: goto HWjrU; goto zyGsv; oq5xm: $data = str_replace('{{express}}', $order['express'], $data); goto ek8DN; oI3KG: goto Wkh_w; goto yHDpM; DzBUZ: $post_data['form_id'] = $order['payid']; goto HFolz; MNPjG: $good_name = ''; goto sW0rD; bxLAM: $post_data['form_id'] = $xformid[1]; goto i6q3X; MyMub: $share = urlencode($share); goto ZE3g2; nFQGg: $data = str_replace('{{order}}', $order['order'], $data); goto wbPJV; wOXkc: global $xcmodule, $_W; goto Z9uv0; UeUnV: $post_data['form_id'] = $xformid[0]; goto oI3KG; ftxc0: curl_close($ch); goto ktksx; lhhEl: $muban = json_decode($muban['contents'], true); goto iTjml; ZTW9a: $data = str_replace('{{list}}', $good_name, $data); goto nKRFI; iTjml: $account_api = WeAccount::create(); goto Ttszw; bePyb: if (!empty($xformid)) { goto AOFNK; } goto JbKMr; yHDpM: A6YZf: goto bxLAM; nnVj4: HWjrU: goto Shi7g; tv_mF: mSNzV: goto YLbSF; OZJi_: $data = str_replace('{{cid}}', '砍价订单', $data); goto jXke2; iIkci: if (empty($order['payid']) || !empty($order['formid'])) { goto IZY78; } goto DzBUZ; S18OI: k09rw: goto Ke9f5; DHfRF: $url = 'https://api.weixin.qq.com/cgi-bin/message/wxopen/template/send?access_token=' . $access_token; goto f1TsO; xjBZS: $data = json_decode($data, true); goto UeBB_; c8Wg7: $data = str_replace('{{refund_info}}', $order['refund_value']['info'], $data); goto spEHL; ek8DN: $data = str_replace('{{remark}}', $order['remark'], $data); goto bAQOi; KxD3Z: $post_data['template_id'] = $muban['template_id']; goto vy4pB; Co1c2: if (!empty($order)) { goto k09rw; } goto kEq7v; RWmuf: $ch = curl_init(); goto LG7kk; dk912: HLGD7: goto ThSQx; KOE40: $data = str_replace('{{cid}}', '团订单', $data); goto otfAo; g32WW: if (!($order['cid'] == 6)) { goto SJYqi; } goto AH3tE; JbKMr: $xformid = explode(',', $order['formid']); goto TgEHW; vy4pB: $share = '../orderDetail/orderDetail?id=' . $id; goto MyMub; NGuX9: Ra8bs: goto DphuK; UmgHs: $data = str_replace('{{time}}', date('Y-m-d H:i:s'), $data); goto NiIw8; NiIw8: $order['refund_value'] = iunserializer($order['refund_value']); goto aayFI; orm8v: $order = pdo_get($xcmodule . '_order', array("uniacid" => $uniacid, "id" => $id), array("openid", "payid", "formid", "order", "createtime", "price", "paytime", "paytype", "cid", "list", "region", "detail", "express", "remark", "totalnum", "name", "phone", "refund_value", "order_price", "out_refund_no")); goto Co1c2; HFGe3: curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); goto g4VBd; Z9uv0: $uniacid = $_W['uniacid']; goto tPOAL; Ke9f5: $order['list'] = iunserializer($order['list']); goto sOI7Q; CMZX9: Kv1qi: goto herSK; K8w5I: ZUfKR: goto ZTW9a; OW7Ho: $data = str_replace('{{paytype}}', '线下支付', $data); goto CMZX9; wbPJV: $data = str_replace('{{createtime}}', $order['createtime'], $data); goto MNPjG; sFBN_: $data = str_replace('{{refund_reason}}', $order['refund_value']['reason'], $data); goto c8Wg7; LG7kk: curl_setopt($ch, CURLOPT_URL, $url); goto HFGe3; lrwNG: if (!$muban) { goto u95h0; } goto lhhEl; lcseO: $data = str_replace('{{paytype}}', '余额支付', $data); goto pocQ1; spEHL: xGiBT: goto zRlet; RPFfJ: if (!($order['paytype'] == 2)) { goto Ra8bs; } goto paxq0; bAQOi: $data = str_replace('{{totalnum}}', $order['totalnum'], $data); goto iJL7c; Ttszw: $access_token = $account_api->getAccessToken(); goto uy9Bl; sOI7Q: $muban = pdo_get($xcmodule . '_other', array("uniacid" => $uniacid, "keyval" => $keyval, "status" => 1)); goto lrwNG; g4VBd: curl_setopt($ch, CURLOPT_POST, 1); goto kp2ml; msz1i: $data = str_replace('{{address}}', $order['region'] . $order['detail'], $data); goto xJbON; f1TsO: $post_data = json_encode($post_data); goto RWmuf; V1hrZ: $data = str_replace('{{cid}}', '积分订单', $data); goto qNhEG; AH3tE: $data = str_replace('{{cid}}', '抢购订单', $data); goto W28pV; otfAo: ehTJQ: goto g32WW; ktksx: u95h0: goto zgbUT; i6q3X: Wkh_w: goto LSe3p; yRlJA: IZY78: goto jIjAn; AK1zU: $data = str_replace('{{phone}}', $order['phone'], $data); goto UmgHs; iJL7c: $data = str_replace('{{name}}', $order['name'], $data); goto AK1zU; nKRFI: $data = str_replace('{{price}}', $order['price'], $data); goto Ndemo; PFvhi: $data = str_replace('{{refund_time}}', $order['refund_value']['time'], $data); goto sFBN_; herSK: if (!($order['cid'] == 1)) { goto mSNzV; } goto zcfwf; mZgIh: if (!($order['cid'] == 4)) { goto RWYR2; } goto OZJi_; Y4VQg: $post_data['form_id'] = $xformid[2]; goto nnVj4; Shi7g: N88N3: goto wmWIf; KAv45: curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0); goto NHmTX; uy9Bl: $data = $muban['contents']; goto nFQGg; wmWIf: $post_data['data'] = $data; goto DHfRF; XEnZX: if (!($order['paytype'] == 1)) { goto oaT3f; } goto lcseO; jXke2: RWYR2: goto B2x47; w1Bx3: $data = str_replace('{{paytype}}', '余额不足,微信抵扣', $data); goto dk912; B2x47: if (!($order['cid'] == 5)) { goto ehTJQ; } goto KOE40; TgEHW: if (count($xformid) >= 2) { goto A6YZf; } goto UeUnV; zyGsv: AOFNK: goto Y4VQg; pocQ1: oaT3f: goto RPFfJ; ZE3g2: $post_data['page'] = $xcmodule . '/pages/base/base?share=' . $share; goto iIkci; NHmTX: $output = curl_exec($ch); goto ftxc0; HFolz: goto N88N3; goto yRlJA; W28pV: SJYqi: goto msz1i; ThSQx: if (!($order['paytype'] == 4)) { goto Kv1qi; } goto OW7Ho; jIjAn: $xformid = json_decode($order['formid'], true); goto bePyb; zRlet: $data = str_replace('{{refund_price}}', $order['order_price'], $data); goto J5Tu2; DphuK: if (!($order['paytype'] == 3)) { goto HLGD7; } goto w1Bx3; Ndemo: $data = str_replace('{{paytime}}', $order['paytime'], $data); goto XEnZX; UeBB_: $post_data['touser'] = $order['openid']; goto KxD3Z; tPOAL: $keyval = 'mb_refund_success'; goto orm8v; paxq0: $data = str_replace('{{paytype}}', '微信支付', $data); goto NGuX9; kEq7v: return false; goto S18OI; YLbSF: if (!($order['cid'] == 2)) { goto Ab8D8; } goto V1hrZ; aayFI: if (!is_array($order['refund_value'])) { goto xGiBT; } goto PFvhi; zcfwf: $data = str_replace('{{cid}}', '普通订单', $data); goto tv_mF; zgbUT: } ?>